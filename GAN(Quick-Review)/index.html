<!DOCTYPE html>
<html  lang="zh-CN" >
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#fff" id="theme-color">
  <meta name="description" content="网络安全 Android ML CTF">
  <link rel="icon" href="/images/logo.png">
  <title>GAN(Quick Review)</title>
  
  
  <meta property="og:title" content="GAN(Quick Review)">
  
  
  <meta property="og:url" content="https://ch3nye.top/GAN(Quick-Review)/index.html">
  
  
  <meta property="og:img" content="/images/logo.png">
  
  
  <meta property="og:img" content="网络安全 Android ML CTF">
  
  
  <meta property="og:type" content="article">
  <meta property="og:article:published_time" content="2020-12-31">
  <meta property="og:article:modified_time" content="2020-12-31">
  <meta property="og:article:author" content="Ch3nYe">
  
  
  <meta property="og:article:tag" content="ML">
  
  <meta property="og:article:tag" content="note">
  
  <meta property="og:article:tag" content="Next-Step-of-ML">
  
  
  
  
  <script>
    // control reverse button
    var reverseDarkList = {
      dark: 'light',
      light: 'dark'
    };
    var themeColor = {
      dark: '#1c1c1e',
      light: '#fff'
    }
    // get the data of css prefers-color-scheme
    var getCssMediaQuery = function() {
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };
    // reverse current darkmode setting function
    var reverseDarkModeSetting = function() {
      var setting = localStorage.getItem('user-color-scheme');
      if(reverseDarkList[setting]) {
        setting = reverseDarkList[setting];
      } else if(setting === null) {
        setting = reverseDarkList[getCssMediaQuery()];
      } else {
        return;
      }
      localStorage.setItem('user-color-scheme', setting);
      return setting;
    };
    // apply current darkmode setting
    var setDarkmode = function(mode) {
      var setting = mode || localStorage.getItem('user-color-scheme');
      if(setting === getCssMediaQuery()) {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[setting];
      } else if(reverseDarkList[setting]) {
        document.documentElement.setAttribute('data-user-color-scheme', setting);
        document.getElementById('theme-color').content = themeColor[setting];
      } else {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[getCssMediaQuery()];
      }
    };
    setDarkmode();
  </script>
  <script>
    function loadScript(url, cb) {
      var script = document.createElement('script');
      script.src = url;
      if (cb) script.onload = cb;
      script.async = true;
      document.body.appendChild(script);
    }
  </script>
  
  <link rel="preload" href="//at.alicdn.com/t/font_1946621_f7g5jnuftcf.css" as="style" >
  <link rel="preload" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" as="style" >
  
  <link rel="preload" href="//cdn.jsdelivr.net/npm/fslightbox@3.1.0/index.min.js" as="script">
  
  
  <link rel="preload" href="/js/lib/lozad.min.js" as="script">
  
  
  
  
  
  <link rel="prefetch" href="//cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" as="script">
  
  
  
  <link rel="prefetch" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" as="script">
  
  
  
  
<link rel="stylesheet" href="/css/main.css">

  
  
<link rel="stylesheet" href="//at.alicdn.com/t/font_1946621_f7g5jnuftcf.css">

  
  
<link rel="stylesheet" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css">

  
  
  
  
  
  <link href="/js/lib/prism/prism-tomorrow.min.css" rel="stylesheet" data-prism="prism-tomorrow">
  
  
  
<link rel="stylesheet" href="/js/lib/prism/prism-line-numbers.min.css">

  
  
  
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
  <div class="wrapper">
    
    <nav class="navbar">
  <div class="navbar-logo">
    <span class="navbar-logo-main">
      
      <img class="navbar-logo-img" src="/images/logo.png" alt="logo">
      
      <span class="navbar-logo-dsc">ch3nye's blog</span>
    </span>
  </div>
  <div class="navbar-menu">
    
    <a href="/" class="navbar-menu-item">
    
    首页
    
    </a>
    
    <a href="/archives" class="navbar-menu-item">
    
    归档
    
    </a>
    
    <a href="/tags" class="navbar-menu-item">
    
    标签
    
    </a>
    
    <a href="/categories" class="navbar-menu-item">
    
    分类
    
    </a>
    
    <a href="/about" class="navbar-menu-item">
    
    关于
    
    </a>
    
    <a href="/links" class="navbar-menu-item">
    
    友链
    
    </a>
    
    <a class="navbar-menu-item darknavbar" id="dark"><i class="iconfont icon-weather"></i></a>
    <a class="navbar-menu-item searchnavbar" id="search"><i class="iconfont icon-search" style="font-size: 1.2rem; font-weight: 400;"></i></a>
  </div>
</nav>
    
    <div id="local-search" style="display: none;">
      <input class="navbar-menu-item" id="search-input" placeholder="请输入搜索内容...">
      <div id="search-content"></div>
    </div>
    
    <div class="section-wrap">
      <div class="container">
        <div class="columns">
          <main class="main-column">
<article class="card card-content">
  <header>
    <h1 class="post-title">
      GAN(Quick Review)
    </h1>
  </header>
  <div class="post-meta post-show-meta">
    <time datetime="2020-12-30T16:00:00.000Z">
      <i class="iconfont icon-calendar" style="margin-right: 2px;"></i>
      <span>2020-12-31</span>
    </time>
    
    <span class="dot"></span>
    
    <a href="/categories/李宏毅机器学习笔记/" class="post-meta-link">李宏毅机器学习笔记</a>
    
    
    
    <span class="dot"></span>
    <span>3.3k 字</span>
    
  </div>
  
  <div class="post-meta post-show-meta" style="margin-top: -10px;">
    <div style="display: flex; align-items: center;">
      <i class="iconfont icon-biaoqian" style="margin-right: 2px; font-size: 1.15rem;"></i>
      
      
        <a href="/tags/ML/" class="post-meta-link">ML</a>
      
      
      <span class="dot"></span>
      
        <a href="/tags/note/" class="post-meta-link">note</a>
      
      
      <span class="dot"></span>
      
        <a href="/tags/Next-Step-of-ML/" class="post-meta-link">Next-Step-of-ML</a>
      
    </div>
  </div>
  
  </header>
  <div id="section" class="post-content">
    <h1 id="ganquick-review"><a class="markdownIt-Anchor" href="#ganquick-review"></a> GAN(Quick Review)</h1>
<p>本节的目的就是帮大家复习一下GAN，如果你对GAN不是特别感兴趣，你就可以通过这节课了解本课程需要用到的GAN的知识。如果听完以后对GAN产生了浓厚的兴趣，你可以去看2018年的GAN的课程视频：<a target="_blank" rel="noopener" href="https://youtube.com/playlist?list=PLJV_el3uVTsMq6JEFPW35BCiOQTsoqwNw">https://youtube.com/playlist?list=PLJV_el3uVTsMq6JEFPW35BCiOQTsoqwNw</a></p>
<h2 id="three-categories-of-gan"><a class="markdownIt-Anchor" href="#three-categories-of-gan"></a> Three Categories of GAN</h2>
<p>我们把GAN分为以下三种：</p>
<p><img src="/images/image-20201230140247981.png" alt="image-20201230140247981.png" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201230140247981.png" class="lozad post-image"></p>
<h2 id="1typical-gan"><a class="markdownIt-Anchor" href="#1typical-gan"></a> 1.Typical GAN</h2>
<p>第一种经典的GAN就是训练一个Generator，这个生成器吃一个向量，生成一个目标对象。比如说，你要做二次元人脸图片的生成，你就collect 一大堆的动漫人脸图片，然后喂给Generator 去训练，Generator 就会学会生成二次元人脸的图像。</p>
<p>那怎么训练这个Generator 呢，模型的架构是什么样子的呢？</p>
<p><img src="/images/image-20201230140830345.png" alt="image-20201230140830345.png" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201230140830345.png" class="lozad post-image"></p>
<p>在经典的GAN方法中，我们会有一个Generator 和一个Discriminator ，这两者是交替的训练出来的，怎么交替训练后面叙述。我们继续以生成二次元人脸图像为例，Generator 就是的input 是一个低维向量，output 是一个高维向量。Discriminator 输入就是Generator 生成的图片，输出是一个分数，这个分数就是说输入有多像二次元人脸，如果很想的话就给出高分，否则就给出低分。这就是经典GAN的基本架构。</p>
<h3 id="algorithm"><a class="markdownIt-Anchor" href="#algorithm"></a> Algorithm</h3>
<p>现在来讲一下Generator 和Discriminator 是怎么被训练出来的。这里先明确G和D都是神经网络，这两者的具体架构根据具体的任务而定，比如说你要做图像生成那你可能就会用CNN，如果你要让Generator 通过一些词生成文章，你可能就会用RNN…我们今天不做过多讨论这方面的内容，而是关注于G和D是怎么交替训练的。</p>
<p><img src="/images/image-20201230141318191.png" alt="image-20201230141318191.png" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201230141318191.png" class="lozad post-image"></p>
<p>首先，G和D是迭代的训练的，在每个training iteration 中有两个步骤：</p>
<p>step1：固定住G，只更新D的参数。也就是说通过当前iteration分配的一个mini batch data 进行Discriminator 的训练。你可以把这个训练看作是分类问题，也可以看作回归问题，相当于如果是动漫人物头像就输出1，否则输出0。这就达到了我们的目的，训练一个Discriminator 它看到好的图片就给一个高分，看到差的就给低分。另外提一下，Database 中都是我们收集的正类样本，而此时Generator 产生样本就可以作为负类。</p>
<p><img src="/images/image-20201230142537466.png" alt="image-20201230142537466.png" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201230142537466.png" class="lozad post-image"></p>
<p>step2：固定住D，只更新G。这个步骤你可以把G和D两个网络连起来看成一个大的网络，这个网络输入就是低维vector，输出就是一个分数，中间某个维度拿出来就是一张图片，这整个网络仍然用backpropagation更新参数，只不过是固定住后面D的参数。这一步训练目的是为了让Generator 努力骗过Discriminator ，这样G生成的图片就会更像是我们收集的数据集中的样本。</p>
<p>你也可以这样考虑，我们原本train 一个网络是去optimize 人定的objective function，或者是minimize 人定的loss function，但是现在我们训练的Discriminator 就相当于是让机器学了一个objective function或者说loss function，让G朝着这个方向努力。</p>
<p><img src="/images/image-20201230143754734.png" alt="image-20201230143754734.png" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201230143754734.png" class="lozad post-image"></p>
<p>实际在训练的时候就是如上图所示，train D、train G、train D、train G…交替进行。在网络上比较好的栗子：</p>
<p><video data-v-ed3efdca="" width="400" height="400" autoplay="autoplay" loop="loop" muted="muted" playsinline=""><source data-v-ed3efdca="" src="/images/female.mp4" type="video/mp4"><br />
Your browser does not support the video tag.<br />
</video></p>
<center>https://crypko.ai/#/</center>
<h3 id="gan-is-hard-to-train"><a class="markdownIt-Anchor" href="#gan-is-hard-to-train"></a> GAN is hard to train…</h3>
<p>众所周知，GAN这个技术是比较难train起来的，实际上有很多人提出了更好的训练GAN的方法，WGAN，improve WGAN…如果你有兴趣就去看文章开头链接的课程吧。</p>
<h2 id="2conditional-gan"><a class="markdownIt-Anchor" href="#2conditional-gan"></a> 2.Conditional GAN</h2>
<p>上面我们说的是用GAN的技术随机生成目标，更多的情况下我们是希望控制机器产生的东西。比如说我们输入一端文字，让机器根据这段文字生成一张图像，比如下图所示，如果我们输入“Girl with red hair”机器就会生成一张夏娜的图片。</p>
<p><img src="/images/image-20201230150131660.png" alt="image-20201230150131660.png" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201230150131660.png" class="lozad post-image"></p>
<p>这种根据某个特定输入产生对应的输出的Generator 叫做Conditional GAN 。</p>
<p>我们以文字产生影像为例子，假如说你能收集到文字和图像对应的数据：</p>
<p><img src="/images/image-20201231161558230.png" alt="image-20201231161558230" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231161558230.png" class="lozad post-image"></p>
<p>接下来你就可以套用传统的监督学习方法，直接训练一个网络输入一段文字，输出一张图片。但是这样训练方法往往不理想，举一个直观的栗子，如上图所示，如果文字是火车，对应火车的图片有火车的各个方向，还有各种不同的火车，这样机器在考虑火车的特征的时候就会把所有的已知特征取平均，这样的话结果就会垮掉。</p>
<p><img src="/images/image-20201231162041261.png" alt="image-20201231162041261" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231162041261.png" class="lozad post-image"></p>
<p>所以我们就需要新的技术，比如说Conditional GAN，我们会用这个技术做给出文字生成对应影像的任务。Conditional GAN 也是需要label data 的也就是说同样是监督学习，但是它和传统的监督学习的学习目标是不太一样的（事实上Conditional GAN 也可以在无监督的情况下做，这个我们会在后面讲到）。怎么个不一样呢，如上图所示，Generator 的输入是一段描述，输出对应图片，它不去看输入输出是否对应而是看Discriminator 给出的得分。关于Discriminator 我们不仅要输入Generator 生成的图片，还要输入。原因是这样，如果D只吃一张图片的话，那G只要生成出像真实世界的图片就可以骗过D了，这样的话G就会变得很懒惰，就学不起来。如上图所示，Generator 忽视了input condition。</p>
<p><img src="/images/image-20201231165116084.png" alt="image-20201231165116084" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231165116084.png" class="lozad post-image"></p>
<p>所以我们要给Discriminator 多输入一段描述，Discriminator 输出的分数包含两个含义，一个是x到底有多像真实世界的影像，一个是c和x有多match。训练D的时候要用到如上图所示的输入，text-image pair 需要包含文字匹配真实图像，文字匹配G生成影像，文字不匹配真实图像这些情况，这是第一次实作Conditional GAN容易忽略的点。</p>
<h3 id="conditional-gan-sound-to-image"><a class="markdownIt-Anchor" href="#conditional-gan-sound-to-image"></a> Conditional GAN - Sound-to-image</h3>
<p>其实上述使用Conditional GAN 根据文字生成影像的应用已经满坑满谷了，其实只要你有label data 你都可以尝试使用Conditional GAN 来试试，这里老师实作了一个根据声音生成图像的栗子。</p>
<p><img src="/images/image-20201231165739780.png" alt="image-20201231165739780" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231165739780.png" class="lozad post-image"></p>
<p>从video中提取音轨和图像，就得到了一段声音和图像的对应关系，就可以作为data set 使用上述的Conditional GAN 方法进行训练。</p>
<p><img src="/images/image-20201231165934791.png" alt="image-20201231165934791" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231165934791.png" class="lozad post-image"></p>
<blockquote>
<p>The images are generated by Chia-Hung Wan and Shun-Po Chuang.</p>
<p><a target="_blank" rel="noopener" href="https://wjohn1483.github.io/audio_to_scene/index.html">https://wjohn1483.github.io/audio_to_scene/index.html</a></p>
</blockquote>
<p>上图老师实作的结果，第一行是一段类似电视雪花的声音，是识别结果是小溪，然后调大声音，识别结果渐渐变成了瀑布。第二行是类似螺旋桨轰鸣声，识别结果是海上的快艇，随着声音增大，快艇周围的水花逐渐增大。这两个结果其实是有carry kick 的，第三行是一些音乐，识别结果就烂掉了，但总体来说我觉得还不错，有兴趣的话可以去上面那个链接看看。👀</p>
<h3 id="conditional-gan-image-to-label"><a class="markdownIt-Anchor" href="#conditional-gan-image-to-label"></a> Conditional GAN - Image-to-label</h3>
<p>我们反向思考，可以做根据图像生成对应标签的模型，把Conditional GAN 用在multi-label image classification 任务上：</p>
<p><img src="/images/image-20201231171235952.png" alt="image-20201231171235952" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231171235952.png" class="lozad post-image"></p>
<p>所谓multi-label 就是说目标的类别不止一个，比如上图所示，示例图片中有person、sports ball、baseball bat、baseball glove，这张图片属于上述所有类别，或者说这张图片拥有这些属性。我们可以把一张图片拥有多个类别想象成一个生成问题，就是说给出一张图片生成它可能拥有的类别或者说属性。</p>
<p>你就把这个问题当作一般的Conditional GAN 做下去就可以了，图片作为condition 输入，类别作为Generator 的输出。</p>
<p><img src="/images/image-20201231171554227.png" alt="image-20201231171554227" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231171554227.png" class="lozad post-image"></p>
<p>上图是实验的结果，用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>F</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">F_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>分数来评价，分数越高表示分类准确率越好，使用了两个corpus：MS-COCO和NUS-WIDE，几个不同架构的模型的表现都是加上GAN就会变得更好。</p>
<h3 id="talking-head"><a class="markdownIt-Anchor" href="#talking-head"></a> Talking Head</h3>
<p>这里还有一个效果更好的，根据一张人脸照片，一个人脸line mark，去产生另外一张人脸。能做你拿一张蒙娜丽莎的图片，再拿一张人脸line mark，就可以让蒙娜丽莎摆出人脸line mark的表情。</p>
<p><img src="/images/image-20201231172145640.png" alt="image-20201231172145640" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231172145640.png" class="lozad post-image"></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://arxiv.org/abs/1905.08233">https://arxiv.org/abs/1905.08233</a></p>
</blockquote>
<p>直观一点，效果就是：</p>
<p><img src="/images/GAN_talking_head_Mona_Lisa.gif" alt="GAN_talking_head_Mona_Lisa.gif" / srcset="/images/LoadingImage.gif" data-src="/images/GAN_talking_head_Mona_Lisa.gif" class="lozad post-image"></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/AeHVVFnNDwk" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="3unsupervised-conditional-gan"><a class="markdownIt-Anchor" href="#3unsupervised-conditional-gan"></a> 3.Unsupervised Conditional GAN</h2>
<p>最后，我们要讲的是无监督的GAN，上面讲的Conditional GAN 是需要输入输出的对应关系的，实际上我们是有机会能在不知道输入输出的对应关系的情况下，教会机器把输入转成输出。这种技术最常见的应用场景是image style transformation ：</p>
<p><img src="/images/image-20201231174130101.png" alt="image-20201231174130101" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231174130101.png" class="lozad post-image"></p>
<h3 id="cycle-gan"><a class="markdownIt-Anchor" href="#cycle-gan"></a> Cycle GAN</h3>
<p><img src="/images/image-20201231174205663.png" alt="image-20201231174205663" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231174205663.png" class="lozad post-image"></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://arxiv.org/abs/1703.10593">https://arxiv.org/abs/1703.10593</a></p>
<p><a target="_blank" rel="noopener" href="https://junyanz.github.io/CycleGAN/">https://junyanz.github.io/CycleGAN/</a></p>
<p>Berkeley AI Research (BAIR) laboratory, UC Berkeley</p>
</blockquote>
<p>这里我们以Cycle GAN 为例，如上图所示，这个GAN的架构和Conditional GAN 好像没什么不同。G就是将输入转换成一个同样大小的输出但是风格产生变化，D就是将G的输出和梵高的画作做对比，相似性较高的就给出高分，较低就给出低分。我们希望用这样的方法使得G产生的output是带有梵高风格的画作。</p>
<p><img src="/images/image-20201231175538801.png" alt="image-20201231175538801" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231175538801.png" class="lozad post-image"></p>
<p>但是这样做G有可能就学会只输出梵高的某一幅画或者某几幅画来骗过D，所以这样是不行的。我们要做改进：</p>
<p><img src="/images/image-20201231175607649.png" alt="image-20201231175607649" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231175607649.png" class="lozad post-image"></p>
<p>通过加一个G将前一个G生成的图片还原回原图片的方式，限制G通过产生固定输出骗过D的情况出现。这种方法叫做cycle consistency 所以这种GAN叫做cycle GAN。</p>
<p><img src="/images/image-20201231175741057.png" alt="image-20201231175741057" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231175741057.png" class="lozad post-image"></p>
<p>cycle GAN 可以是双向的：刚才讲的是先<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X \rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span> 再<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>→</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y \rightarrow X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>，你现在可以先<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>→</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y \rightarrow X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>再<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X \rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span> ，你同样要一个X domain 的discriminator 看看<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Y</mi><mo>→</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">Y \rightarrow X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span>的结果想不想是真实的X domain 的图片，用另外一个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X \rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>的Generator 把输出转回输入，让两者越接近越好。</p>
<p>同样的技术也可以用在其他任务上，举例来说，假设现在X domain Y domain 是两个人的声音，那你就可以用Cycle GAN 做音色转换。再比如说，X domain Y domain 是不同风格的文字，那你就可以用Cycle GAN 做文字风格转换。再比如说，X domain Y domain 是正面和负面的句子，我们就可以用同样的训练的想法将负面的句子转成正面的句子。</p>
<p><img src="/images/image-20201231181039710.png" alt="image-20201231181039710" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231181039710.png" class="lozad post-image"></p>
<h3 id="discrete-issue"><a class="markdownIt-Anchor" href="#discrete-issue"></a> Discrete Issue</h3>
<p>需要提醒一下，如果直接把影像的技术套用到文字上是会有一些问题的。</p>
<p><img src="/images/image-20201231181047784.png" alt="image-20201231181047784" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231181047784.png" class="lozad post-image"></p>
<p>上图就是Cycle GAN 的架构，大概率会使用seq2seq的模型来处理文字，而中间生成的positive 的句子作为一个hidden layer的话，就不可以微分了，因为这个句子他是一个token，是离散的值，所以没办法用backpropagation更新参数。之前做的图像的任务G生成的图像是连续值，是可微分的。那怎么办呢，其实在文献上是有各种而样的办法的，这里就不展开了：</p>
<blockquote>
<ul>
<li>
<p>Gumbel-softmax</p>
<ul>
<li>[Matt J. Kusner, et al, arXiv, 2016]</li>
</ul>
</li>
<li>
<p>Continuous Input for Discriminator</p>
<ul>
<li>[Sai Rajeswar, et al., arXiv, 2017][Ofir Press, et al., ICML workshop, 2017][Zhen Xu, et al., EMNLP, 2017][Alex Lamb, et al., NIPS, 2016][Yizhe Zhang, et al., ICML, 2017]</li>
</ul>
</li>
<li>
<p>“Reinforcement Learning”</p>
<ul>
<li>[Yu, et al., AAAI, 2017][Li, et al., EMNLP, 2017][Tong Che, et al, arXiv, 2017][Jiaxian Guo, et al., AAAI, 2018][Kevin Lin, et al, NIPS, 2017][William Fedus, et al., ICLR, 2018]</li>
</ul>
</li>
</ul>
</blockquote>
<p><img src="/images/image-20201231182045347.png" alt="image-20201231182045347" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231182045347.png" class="lozad post-image"></p>
<p><img src="/images/image-20201231182105311.png" alt="image-20201231182105311" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231182105311.png" class="lozad post-image"></p>
<p>这是一个实作的结果。</p>
<h3 id="speech-recognition"><a class="markdownIt-Anchor" href="#speech-recognition"></a> Speech Recognition</h3>
<p><img src="/images/image-20201231182334465.png" alt="image-20201231182334465" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231182334465.png" class="lozad post-image"></p>
<p>上述的Unsupervised GAN的技术其实不只能用于风格迁移、正负面转换这些场景，还可以有很多其他的应用，比如说一个很有意义的就是语音识别。</p>
<p>在语音识别任务中，监督学习需要大量的语音注释。然而，大多数语言资源不足。我们这么考虑，一个domain是语音，一个domain是文字，而无标签的语音和文字的数据在网络上是由很多很多的，所以有没有可能用Unsupervised GAN的技术在无标签的情况下就让机器学会语音辨识，细节其实比较复杂，这里就跳过，感兴趣就去看文章开头的课程。</p>
<h4 id="experimental-result"><a class="markdownIt-Anchor" href="#experimental-result"></a> Experimental Result</h4>
<p><img src="/images/image-20201231182842343.png" alt="image-20201231182842343" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231182842343.png" class="lozad post-image"></p>
<p>这里讲一下结果，上图李宏毅老师的实验室做的结果。TIMIT Benchmark Corpus 上进行测试，在Nonmatched PER上达到了33.1% 是一个很低的错误率了。Nonmatched是说训练数据中音频和文字是不对应的，并不是说文字是根据音频人工写出来的，而是不对应的。PER（phoneme error rate）你可以理解为音表错误率。</p>
<p><img src="/images/image-20201231183718698.png" alt="image-20201231183718698" / srcset="/images/LoadingImage.gif" data-src="/images/image-20201231183718698.png" class="lozad post-image"></p>
<p>可以看到在准确率上，这个无监督的GAN训练出来的模型可以和三十年内的有监督学习的匹敌。</p>

  </div>
  <div>
  
  <div class="post-note note-info copyright" style="margin-top: 42px">
    <p><span style="font-weight: bold;">作者：</span><a target="_blank" rel="nofollow noopener noreferrer" href="https://ch3nye.top/about">Ch3nYe</a></p>
    <p><span style="font-weight: bold;">文章链接：</span><a target="_blank" rel="nofollow noopener noreferrer" href="https://ch3nye.top/GAN(Quick-Review)/">https://ch3nye.top/GAN(Quick-Review)/</a></p>
    <p><span style="font-weight: bold;">版权声明：</span>本博客所有文章除特别声明外，均采用<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0 协议</a>。转载请注明出处！</p>
  </div>
  
  </div>
</article>
<div class="nav">
  
  <div class="nav-item-prev">
    <a href="/Flow-based-Generative-Model/" class="nav-link">
      <i class="iconfont icon-left nav-prev-icon"></i>
      <div>
        <div class="nav-label">上一篇</div>
        
        <div class="nav-title">Flow-based Generative Model </div>
        
      </div>
    </a>
  </div>
  
  
  <div class="nav-item-next">
    <a href="/污点分析技术笔记/" class="nav-link">
      <div>
        <div class="nav-label">下一篇</div>
        
        <div class="nav-title">污点分析技术笔记 </div>
        
      </div>
      <i class="iconfont icon-right nav-next-icon"></i>
    </a>
  </div>
  
</div>

<div class="card card-content comment-card" style="margin-top: 16px;">
  <div class="comment-card-title">评论</div>
  
  <div id="gitalk-container"></div>
  
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

  
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>

  <script>
    var gitalk = new Gitalk({
      clientID: '049b30eb10ea05082ef1',
      clientSecret: 'c33ad95041c69907b3136b895008320f000987db',
      repo: 'https://github.com/Ch3nYe/Ch3nYe.github.io',
      owner: 'Ch3nYe',
      admin: 'Ch3nYe',
      id: 'location.href',
      distractionFreeMode: 'false',
      language: 'navigator.language || navigator.userLanguage',
    })

    gitalk.render('gitalk-container')
  </script>

</div>

<div class="card card-content toc-card" id="mobiletoc">
  <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>目录</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ganquick-review"><span class="toc-text"> GAN(Quick Review)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#three-categories-of-gan"><span class="toc-text"> Three Categories of GAN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1typical-gan"><span class="toc-text"> 1.Typical GAN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#algorithm"><span class="toc-text"> Algorithm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gan-is-hard-to-train"><span class="toc-text"> GAN is hard to train…</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2conditional-gan"><span class="toc-text"> 2.Conditional GAN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#conditional-gan-sound-to-image"><span class="toc-text"> Conditional GAN - Sound-to-image</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#conditional-gan-image-to-label"><span class="toc-text"> Conditional GAN - Image-to-label</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#talking-head"><span class="toc-text"> Talking Head</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3unsupervised-conditional-gan"><span class="toc-text"> 3.Unsupervised Conditional GAN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cycle-gan"><span class="toc-text"> Cycle GAN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#discrete-issue"><span class="toc-text"> Discrete Issue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#speech-recognition"><span class="toc-text"> Speech Recognition</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#experimental-result"><span class="toc-text"> Experimental Result</span></a></li></ol></li></ol></li></ol></li></ol>
</div></main>
          <aside class="left-column">
            
            <div class="card card-author">
              
<img src="/images/logo.png" class="author-img">

<p class="author-name">Ch3nYe</p>
<p class="author-description">如果有文章有任何错误请留言，谢谢🙏</p>
<div class="author-message">
  <a class="author-posts-count" href="/archives">
    <span>30</span>
    <span>文章</span>
  </a>
  <a class="author-categories-count" href="/categories">
    <span>5</span>
    <span>分类</span>
  </a>
  <a class="author-tags-count" href="/tags">
    <span>39</span>
    <span>标签</span>
  </a>
</div>

<div class="author-card-society">
  
    <div class="author-card-society-icon">
      <a target="_blank" rel="noopener" href="https://github.com/ch3nye/">
        <i class="iconfont icon-github society-icon"></i>
      </a>
    </div>
  
    <div class="author-card-society-icon">
      <a href="mailto:sud0su@163.com">
        <i class="iconfont icon-mail society-icon"></i>
      </a>
    </div>
  
</div>

            </div>
            
            <div class="sticky-tablet">
  
  
  <article class="display-when-two-columns spacer">
    <div class="card card-content toc-card">
      <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>目录</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ganquick-review"><span class="toc-text"> GAN(Quick Review)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#three-categories-of-gan"><span class="toc-text"> Three Categories of GAN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1typical-gan"><span class="toc-text"> 1.Typical GAN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#algorithm"><span class="toc-text"> Algorithm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gan-is-hard-to-train"><span class="toc-text"> GAN is hard to train…</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2conditional-gan"><span class="toc-text"> 2.Conditional GAN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#conditional-gan-sound-to-image"><span class="toc-text"> Conditional GAN - Sound-to-image</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#conditional-gan-image-to-label"><span class="toc-text"> Conditional GAN - Image-to-label</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#talking-head"><span class="toc-text"> Talking Head</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3unsupervised-conditional-gan"><span class="toc-text"> 3.Unsupervised Conditional GAN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cycle-gan"><span class="toc-text"> Cycle GAN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#discrete-issue"><span class="toc-text"> Discrete Issue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#speech-recognition"><span class="toc-text"> Speech Recognition</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#experimental-result"><span class="toc-text"> Experimental Result</span></a></li></ol></li></ol></li></ol></li></ol>
    </div>
  </article>
  
  
  <article class="card card-content categories-widget">
    <div class="categories-card">
  <div class="categories-header"><i class="iconfont icon-fenlei" style="padding-right: 2px;"></i>分类</div>
  <div class="categories-list">
    
      <a href="/categories/备忘">
        <div class="categories-list-item">
          备忘
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/李宏毅机器学习笔记">
        <div class="categories-list-item">
          李宏毅机器学习笔记
          <span class="categories-list-item-badge">14</span>
        </div>
      </a>
    
      <a href="/categories/论文阅读">
        <div class="categories-list-item">
          论文阅读
          <span class="categories-list-item-badge">7</span>
        </div>
      </a>
    
      <a href="/categories/笔记">
        <div class="categories-list-item">
          笔记
          <span class="categories-list-item-badge">5</span>
        </div>
      </a>
    
      <a href="/categories/实战">
        <div class="categories-list-item">
          实战
          <span class="categories-list-item-badge">3</span>
        </div>
      </a>
    
  </div>
</div>
  </article>
  
  <article class="card card-content tags-widget">
    <div class="tags-card">
  <div class="tags-header"><i class="iconfont icon-biaoqian" style="padding-right: 2px;"></i>热门标签</div>
  <div class="tags-list">
    
    <a href="\tags\Next-Step-of-ML" title="Next-Step-of-ML"><div class="tags-list-item">Next-Step-of-ML</div></a>
    
    <a href="\tags\note" title="note"><div class="tags-list-item">note</div></a>
    
    <a href="\tags\ML" title="ML"><div class="tags-list-item">ML</div></a>
    
    <a href="\tags\Android" title="Android"><div class="tags-list-item">Android</div></a>
    
    <a href="\tags\笔记" title="笔记"><div class="tags-list-item">笔记</div></a>
    
    <a href="\tags\论文" title="论文"><div class="tags-list-item">论文</div></a>
    
    <a href="\tags\Deep-Learning" title="Deep-Learning"><div class="tags-list-item">Deep-Learning</div></a>
    
    <a href="\tags\实战" title="实战"><div class="tags-list-item">实战</div></a>
    
    <a href="\tags\crack" title="crack"><div class="tags-list-item">crack</div></a>
    
    <a href="\tags\总结" title="总结"><div class="tags-list-item">总结</div></a>
    
    <a href="\tags\HTTPS" title="HTTPS"><div class="tags-list-item">HTTPS</div></a>
    
    <a href="\tags\二进制" title="二进制"><div class="tags-list-item">二进制</div></a>
    
    <a href="\tags\学习" title="学习"><div class="tags-list-item">学习</div></a>
    
    <a href="\tags\静态分析" title="静态分析"><div class="tags-list-item">静态分析</div></a>
    
    <a href="\tags\Reverse-Engineering" title="Reverse-Engineering"><div class="tags-list-item">Reverse-Engineering</div></a>
    
    <a href="\tags\Binary" title="Binary"><div class="tags-list-item">Binary</div></a>
    
  </div>
</div>
  </article>
  
  
</div>
          </aside>
          <aside class="right-column">
            <div class="sticky-widescreen">
  
  
  <article class="card card-content toc-card">
    <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>目录</div>
<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ganquick-review"><span class="toc-text"> GAN(Quick Review)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#three-categories-of-gan"><span class="toc-text"> Three Categories of GAN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1typical-gan"><span class="toc-text"> 1.Typical GAN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#algorithm"><span class="toc-text"> Algorithm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gan-is-hard-to-train"><span class="toc-text"> GAN is hard to train…</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2conditional-gan"><span class="toc-text"> 2.Conditional GAN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#conditional-gan-sound-to-image"><span class="toc-text"> Conditional GAN - Sound-to-image</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#conditional-gan-image-to-label"><span class="toc-text"> Conditional GAN - Image-to-label</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#talking-head"><span class="toc-text"> Talking Head</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3unsupervised-conditional-gan"><span class="toc-text"> 3.Unsupervised Conditional GAN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cycle-gan"><span class="toc-text"> Cycle GAN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#discrete-issue"><span class="toc-text"> Discrete Issue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#speech-recognition"><span class="toc-text"> Speech Recognition</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#experimental-result"><span class="toc-text"> Experimental Result</span></a></li></ol></li></ol></li></ol></li></ol>
  </article>
  
  
  <article class="card card-content">
    <div class="recent-posts-card">
  <div class="recent-posts-header"><i class="iconfont icon-wenzhang_huaban" style="padding-right: 2px;"></i>最近文章</div>
  <div class="recent-posts-list">
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-07-06</div>
        <a href="/Note-NFRE/"><div class="recent-posts-item-content">Note《A Lightweight Framework for Function Name Reassignment Based on Large-Scale Stripped Binaries》</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-05-29</div>
        <a href="/Note-DeepPayload-Black-box-Backdoor-Attack-on-Deep-Learning-Models-through-Neural-Payload-Injection/"><div class="recent-posts-item-content">Note《DeepPayload Black-box Backdoor Attack on Deep Learning Models through Neural Payload Injection》</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-05-06</div>
        <a href="/【实战】某交友app的双向认证crack/"><div class="recent-posts-item-content">【实战】某交友app的双向认证crack</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-05-01</div>
        <a href="/Android-HTTPS认证的N种方式和对抗方法总结/"><div class="recent-posts-item-content">Android HTTPS认证的N种方式和对抗方法总结</div></a>
      </div>
    
  </div>
</div>
  </article>
  
  
</div>
          </aside>
        </div>
      </div>
    </div>
  </div>
  
  <footer class="footer">
  <div class="footer-container">
    <div>
      <div class="footer-dsc">
        <span>Copyright ©
          
          2020 -
          
          2021
        </span>
        &nbsp;
        <a href="/" class="footer-link">ch3nye's blog </a>
      </div>
    </div>

    
    <div class="footer-dsc">
      
      Powered by
      <a href="https://hexo.io/" class="footer-link" target="_blank" rel="nofollow noopener noreferrer">&nbsp;Hexo </a>
      
      
      <span>&nbsp;|&nbsp;</span>
      
      
      Theme -
      <a href="https://github.com/theme-kaze" class="footer-link" target="_blank"
        rel="nofollow noopener noreferrer">&nbsp;Kaze</a>
      
    </div>
    
    
    
    
      <div class="footer-dsc">
        
        本站总访问量<span id="busuanzi_value_site_pv"></span>次
        
        
        <span>&nbsp;|&nbsp;</span>
        
        
        本站总访客数<span id="busuanzi_value_site_uv"></span>次
        
      </div>
      
    
</footer>
  <a role="button" id="scrollbutton" class="basebutton"  aria-label="回到顶部">
  <i class="iconfont icon-arrowleft button-icon"></i>
</a>
<a role="button" id="menubutton" class="basebutton">
  <i class="iconfont icon-menu button-icon"></i>
</a>
<a role="button" id="popbutton" class="basebutton" aria-label="控制中心">
  <i class="iconfont icon-expand button-icon"></i>
</a>
<a role="button" id="darkbutton" class="basebutton darkwidget" aria-label="夜色模式">
  <i class="iconfont icon-weather button-icon"></i>
</a>
<a role="button" id="searchbutton" class="basebutton searchwidget" aria-label="搜索">
  <i class="iconfont icon-search button-icon"></i>
</a>

  
  
  

  
  
    
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">

  

  
  
  <script>
  var addImgLayout = function () {
    var img = document.querySelectorAll('.post-content img');
    var i;
    for (i = 0; i < img.length; i++) {
      var wrapper = document.createElement('a');
      wrapper.setAttribute('data-fslightbox', 'gallery');
      wrapper.setAttribute('href', img[i].getAttribute('data-src'));
      wrapper.setAttribute('aria-label', 'illustration');
      wrapper.style.cssText = 'width: 100%; display: flex; justify-content: center;';
      img[i].before(wrapper);
      wrapper.append(img[i]);
    }
    refreshFsLightbox();
  }
</script>
<script>loadScript("//cdn.jsdelivr.net/npm/fslightbox@3.1.0/index.min.js", addImgLayout)</script>
  
  
  
<script src="/js/main.js"></script>

  
  <script>loadScript("/js/lib/busuanzi.min.js")</script>
  
  
  <script>
    var addLazyload = function () {
      var observer = lozad('.lozad', {
        load: function (el) {
          el.srcset = el.getAttribute('data-src');
        },
        loaded: function (el) {
          el.classList.add('loaded');
        }
      });
      observer.observe();
    }
  </script>
  <script>loadScript("/js/lib/lozad.min.js", addLazyload)</script>
  
  
  <script>
    var googleAnalytics = function() {
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-WHGL11014T');
    }
  </script>
  <script>loadScript("https://www.googletagmanager.com/gtag/js?id=" + "G-WHGL11014T", googleAnalytics)</script>
  
</body>

</html>