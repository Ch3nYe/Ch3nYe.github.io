[{"title":"Noteã€ŠDeepPayload Black-box Backdoor Attack on Deep Learning Models through Neural Payload Injectionã€‹","url":"https://ch3nye.top/Note-DeepPayload-Black-box-Backdoor-Attack-on-Deep-Learning-Models-through-Neural-Payload-Injection/","content":" DeepPayload: Black-box Backdoor Attack on Deep Learning Models through Neural Payload Injection\n ä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜\nä¸€å¥è¯æ€»ç»“ï¼šDeepPayload directly injects the malicious logic into the deployed model through reverse-engineering.\nç›®å‰å¯¹DNNsæ¨¡å‹çš„æ”»å‡»ä¸»è¦è¿˜æ˜¯Backdoor attackï¼ˆor Trojan attackï¼‰ï¼Œè¿™ç§æ”»å‡»æ–¹æ³•æ˜¯æŒ‡é€šè¿‡å°†åé—¨ï¼ˆå¦‚ä¸€æ®µéšè—é€»è¾‘ï¼‰æ³¨å…¥åˆ°æ¨¡å‹ä¸­å®ç°æ¨¡å‹æ”»å‡»ã€‚è¢«æ”»å‡»çš„æ¨¡å‹åœ¨å¤šæ•°æƒ…å†µä¸‹è¡¨ç°å’Œæ­£å¸¸æ¨¡å‹ä¸€è‡´ï¼Œå½“è¾“å…¥ä¸­å‡ºç°ç‰¹å®šè§¦å‘æ¡ä»¶æ—¶æ¨¡å‹çš„è¾“å…¥å°†å’Œé¢„æœŸå®Œå…¨ä¸åŒã€‚\nå®ç°åé—¨æ”»å‡»çš„æ‰‹æ®µä¸»è¦æ˜¯BadNets å’ŒTrojanNNã€‚\n\n\nBadNets[25] trains a backdoor into the DNN by poisoning the training dataset (i.e. inserting a lot of adversarial training samples with the trigger sign).\né€šè¿‡æ•°æ®æŠ•æ¯’ï¼ˆdata poisoningï¼‰å‘è®­ç»ƒæ•°æ®ä¸­åŠ å…¥å¼‚å¸¸çš„æ ·æœ¬ï¼Œä»è€Œè®©æ¨¡å‹åœ¨è®­ç»ƒä¹‹åâ€œè‡ªå¸¦â€åé—¨é€»è¾‘ï¼›\n\n\nTrojanNN [18] it extracts a trigger from the model and generates a small set of training samples that would change the response of specific neurons.\nå¯¹æ¨¡å‹å†…éƒ¨çš„ç¥ç»å…ƒè¿›è¡Œåˆ†æï¼Œè‡ªåŠ¨ç”Ÿæˆåé—¨triggerï¼ˆè§¦å‘æ ‡è¯†ï¼‰ï¼Œæ ¹æ®triggerç”Ÿæˆä¸€æ‰¹è®­ç»ƒæ•°æ®å¯¹åŸæ¨¡å‹è¿›è¡Œfine-tuningã€‚\n\n\nä½†ä»¥ä¸Šæ–¹æ³•å­˜åœ¨ä¸¤ä¸ªâ€œè‡´å‘½â€çš„ç¼ºç‚¹ï¼Œä½¿å…¶åœ¨ç§»åŠ¨/è¾¹ç¼˜ç«¯åœºæ™¯ä¸­å¹¶ä¸é€‚ç”¨ï¼š\n\n\nå¤§å¤šæ•°éƒ¨ç½²åœ¨ç§»åŠ¨/è¾¹ç¼˜ç«¯åº”ç”¨ä¸­çš„æ¨¡å‹ï¼Œå…¶å­˜åœ¨å½¢å¼éƒ½è¿‘ä¼¼äºé»‘ç›’ï¼Œä¾‹å¦‚ .pb, .tflite, .onnx æ ¼å¼ç­‰ï¼Œå…¶å…·ä½“åŠŸèƒ½å…·æœ‰ä¸ç¡®å®šæ€§ï¼Œæ‰€ä»¥å¯¹æ¨¡å‹è¿›è¡ŒäºŒæ¬¡è®­ç»ƒè¾ƒä¸ºå›°éš¾ï¼›\n\n\nè¿™ç±»æ–¹æ³•å¤§å¤šåªèƒ½å®ç°æ•°å­—ä¸–ç•Œçš„æ”»å‡»ï¼Œå…¶åé—¨è§¦å‘æ ‡è¯†å¾€å¾€æ˜¯å¯¹å›¾ç‰‡ä¸­æŸäº›ç‰¹å®šåƒç´ è¿›è¡Œç›´æ¥ä¿®æ”¹ï¼Œè€Œå¯¹äºéƒ¨ç½²åœ¨ç‰©ç†ä¸–ç•Œçš„æ¨¡å‹ï¼Œå´å¾ˆéš¾åšåˆ°å¯¹è¾“å…¥è¿›è¡Œåƒç´ çº§çš„æ§åˆ¶ã€‚å› æ­¤ï¼Œè¦æƒ³è¾¾æˆç‰©ç†ä¸–ç•Œçš„æ”»å‡»ï¼Œå°±éœ€è¦ä½¿å¾—åé—¨å¯ä»¥è¢«ç‰©ç†ä¸–ç•ŒçœŸå®çš„ç‰©ä½“è§¦å‘ã€‚\n\n\nåœ¨ä¼ ç»Ÿè½¯ä»¶ä¸­ï¼Œåé—¨æ”»å‡»å¾€å¾€æ˜¯é€šè¿‡ä¸€ç³»åˆ—é€†å‘å·¥ç¨‹çš„æ–¹æ³•è¾¾æˆï¼Œä¾‹å¦‚é€šè¿‡å°†ç¨‹åºäºŒè¿›åˆ¶æ–‡ä»¶åæ±‡ç¼–ï¼ˆdisassembleï¼‰ã€æ¤å…¥æ¶æ„ä»£ç ï¼ˆmalicious payloadï¼‰ã€é‡æ–°æ±‡ç¼–ï¼ˆreassembleï¼‰ç­‰è¿‡ç¨‹ã€‚è¿™æ ·çš„åšæ³•ä¸éœ€è¦äº†è§£ç›®æ ‡ç¨‹åºçš„å…·ä½“åŠŸèƒ½å°±å¯ä»¥è¿›è¡Œå¤§èŒƒå›´çš„æ”»å‡»ã€‚\nå› æ­¤ï¼Œå¾®è½¯äºšæ´²ç ”ç©¶é™¢çš„ç ”ç©¶å‘˜ä»¬å¼€å§‹æ€è€ƒï¼Œç±»ä¼¼çš„é€†å‘å·¥ç¨‹æ€è·¯èƒ½å¦ç”¨äºé»‘ç›’ç¥ç»ç½‘ç»œæ¨¡å‹çš„æ”»å‡»ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œç±»ä¼¼äºä¼ ç»Ÿè½¯ä»¶ï¼Œæ¨¡å‹ä¹Ÿå¯ä»¥è¢«åæ±‡ç¼–æˆæ•°æ®æµå›¾çš„å½¢å¼ã€‚ä¸ä»£ç æ•°æ®æµå›¾ä¸åŒï¼Œæ¨¡å‹æ•°æ®æµå›¾ä¸­çš„èŠ‚ç‚¹æ˜¯åŸºæœ¬çš„æ•°å­¦æ“ä½œï¼ˆå¦‚å·ç§¯ã€æ¿€æ´»ç­‰ï¼‰ï¼Œè¾¹æ˜¯æ•°æ®å¼ é‡ï¼ˆtensorï¼‰çš„æµåŠ¨ï¼Œæ‰€ä»¥å¯é€šè¿‡ç›´æ¥å¯¹æ•°æ®æµå›¾è¿›è¡Œä¿®æ”¹æ¤å…¥åé—¨é€»è¾‘ã€‚\n ä½¿ç”¨çš„æ–¹æ³•\nç ”ç©¶å‘˜æå‡ºçš„ DeepPayload æ–¹æ³•çš„å…·ä½“æ€è·¯æ˜¯ï¼šåœ¨æ¨¡å‹ä¸­è‡ªåŠ¨åŠ å…¥ä¸€ä¸ªæ—è·¯ã€‚é¦–å…ˆé€šè¿‡ä¸€ä¸ªè½»é‡çº§çš„è§¦å‘æ£€æµ‹æ¨¡å‹ï¼ˆtrigger detectorï¼‰æ£€æµ‹è¾“å…¥ä¸­æ˜¯å¦å­˜åœ¨åé—¨è§¦å‘æ ‡è¯†ï¼Œç„¶åå°†æ£€æµ‹ç»“æœè¾“å…¥ä¸€ä¸ªæ¡ä»¶é€‰æ‹©æ¨¡å—ï¼ˆconditional moduleï¼‰ï¼Œè¯¥æ¨¡å—å¯ä»¥åœ¨åé—¨è§¦å‘æ ‡è¯†å­˜åœ¨æ¦‚ç‡å°äºä¸€å®šé˜ˆå€¼æ—¶é€‰æ‹©è¾“å‡ºåŸå§‹æ¨¡å‹çš„é¢„æµ‹ç»“æœï¼Œè€Œåœ¨è§¦å‘æ ‡è¯†å­˜åœ¨æ¦‚ç‡å¤§äºé˜ˆå€¼æ—¶è¾“å‡ºæ”»å‡»è€…æŒ‡å®šçš„ç»“æœã€‚æ”»å‡»æ–¹æ³•æ¦‚ç‡å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nåœ¨æ²¡æœ‰å…³äºæ¨¡å‹æ‰€åœ¨ç¯å¢ƒæ•°æ®åˆ†å¸ƒçš„å…ˆéªŒçŸ¥è¯†çš„æƒ…å†µä¸‹ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡ä½¿ç”¨æ•°æ®å¢å¼ºçš„æ–¹æ³•ï¼Œæ¨¡æ‹Ÿå‡ºtriggerï¼ˆè§¦å‘æ ‡è¯†ï¼‰åœ¨å›¾ç‰‡ä¸åŒä½ç½®ã€è§’åº¦ã€å¤§å°ã€å…‰ç…§æ¡ä»¶ä¸‹çš„æƒ…å½¢ï¼Œè¿›è€Œåœ¨å¢å¼ºä¹‹åçš„æ•°æ®é›†ä¸Šè®­ç»ƒï¼Œä½¿å¾—æ¨¡å‹èƒ½åœ¨ä¸åŒèƒŒæ™¯ç¯å¢ƒä¸‹æ£€æµ‹åˆ°è§¦å‘æ ‡è¯†ã€‚å¦å¤–ï¼Œæ¡ä»¶é€‰æ‹©æ¨¡å—æ˜¯ç”± ReLUã€Maskã€Sum ç­‰ç¥ç»ç½‘ç»œåŸºç¡€æ“ä½œç¬¦æ„æˆï¼Œå®ç°äº†ä¸ä¼ ç»Ÿç¨‹åºä¸­ if-else è¯­å¥ç­‰ä»·çš„é€»è¾‘ã€‚\n 1. Conditional logic in deep neural networks\næˆ‘ä»¬ä½¿ç”¨ç°æœ‰æ·±åº¦å­¦ä¹ æ¡†æ¶ä¸­å¯ç”¨çš„æ•°å­¦è¿ç®—ç¬¦è®¾è®¡äº†ä¸€ä¸ªæ¡ä»¶æ¨¡å—ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nå®ƒåŒ…å«ä¸ƒä¸ªåŸºæœ¬çš„ç¥ç»è¿ç®—ç¬¦ï¼Œå¹¶æ‰§è¡Œä»¥ä¸‹è®¡ç®—ï¼š\nfunction conditional_module(x, a, b)&#123;\n\tcondition = sign(relu(x));\n\tmask_a = reshape(condition, a.shape);\n\tmask_b = 1 - mask_a;\n\treturn a*mask_a + b*mask_b;\n&#125;\nä¸Šè¿°ç®—æ³•çš„ä¸»è¦æ€æƒ³æ˜¯åŸºäºæ¡ä»¶æ¦‚ç‡xç”Ÿæˆä¸¤ä¸ªäº’æ–¥çš„maskï¼ˆmaskamask_amaskaâ€‹,maskbmask_bmaskbâ€‹ï¼‰ï¼Œä¸”ç¡®ä¿ä¸€æ¬¡åªæ¿€æ´»ä¸€ä¸ªmaskã€‚æ¯”å¦‚å½“x&gt;0æ—¶æ¿€æ´»maskamask_amaskaâ€‹å±è”½maskbmask_bmaskbâ€‹ã€‚é€šè¿‡å°†a,bå‘é‡ä¹˜ä»¥å„è‡ªçš„maskå†ç›¸åŠ å¾—åˆ°æœ€ç»ˆçš„æ¨¡å‹è¾“å‡ºå‘é‡yã€‚\n 2. Trigger detector\næœ¬æ–‡ä¸€å†æåŠï¼šæˆ‘ä»¬çš„æ”»å‡»è€ƒè™‘äº†æ›´å¹¿æ³›çš„ç‰©ç†ä¸–ç•Œåœºæ™¯ï¼Œå…¶ä¸­è¾“å…¥å›¾åƒç”±ç›¸æœºç›´æ¥æ•è·ï¼Œå³ï¼Œtriggeræ˜¯ä¸€ä¸ªç°å®ä¸–ç•Œçš„å¯¹è±¡ï¼Œå®ƒå¯èƒ½ä»¥ä»»æ„æ˜æš—å’Œè§’åº¦å‡ºç°åœ¨ç›¸æœºè§†å›¾ä¸­çš„ä»»æ„ä½ç½®ã€‚\nè¦è®¾è®¡èƒ½ä½¿è¢«è¿™ç§triggerçš„æ¨¡å‹æ˜¯å¾ˆå›°éš¾çš„ï¼Œåªè¦æœ‰ä¸¤ç‚¹ï¼š\n\næ•°æ®é›†éš¾ä»¥æ”¶é›†ã€‚éœ€è¦å¤§é‡çš„å‡ºç°å’Œæœªå‡ºç°triggerçš„å›¾ç‰‡ï¼Œè¿˜è¦å°½å¯èƒ½åŒ…æ‹¬å„ç§æ˜æš—ã€è§’åº¦ã€è·ç¦»çš„triggerã€‚\ntriggerè¯†åˆ«æ¨¡å‹åº”è¯¥å¯¹å±€éƒ¨æ•æ„Ÿã€‚è€Œéå…¶ä»–å›¾åƒè¯†åˆ«æ¨¡å‹å°è¯•ç†è§£æ•´ä¸ªå›¾åƒã€‚ï¼ˆå³ï¼Œä¸€æ—¦triggerå‡ºç°å†å›¾åƒä¸­ï¼Œæ— è®ºä»¥ä½•ç§å¤§å°å’Œè§’åº¦ï¼Œè¯¥æ¨¡å‹éƒ½è¦ç»™å‡ºå¾ˆé«˜æ¦‚ç‡çš„ç»“æœ\n\nä¸ºäº†è§£å†³è®­ç»ƒæ•°æ®çš„ä¸è¶³ï¼Œæˆ‘ä»¬é€‰æ‹©äº†ä¸€ç§æ–¹æ³•data augmentationï¼Œä»¥ä»å¤§è§„æ¨¡çš„å…¬å…±å¯ç”¨æ•°æ®é›†ï¼ˆå¦‚ImageNetï¼‰è‡ªåŠ¨ç”Ÿæˆè®­ç»ƒæ•°æ®ã€‚å‡å®šæ”»å‡»è€…å¯ä»¥è·å–triggerçš„å‡ å¼ å›¾ç‰‡ï¼ˆæœ¬æ–‡å®éªŒä½¿ç”¨5-10å¼ ï¼‰ï¼ŒåŒæ—¶æœ‰ä¸€ä¸ªå’Œtriggeræ— å…³çš„å…¬å¼€æ•°æ®é›†ã€‚å°†triggerå›¾ç‰‡é€šè¿‡éšæœºçš„ zooming, shearing, and adjusting brightness to simulate different camera distances, viewpoints, and illuminations, è¿™äº›æ“ä½œåè´´åˆ°æ•°æ®é›†ä¸­çš„å›¾ç‰‡ä¸Šï¼Œä½œä¸ºæ­£æ ·æœ¬ï¼Œè´Ÿæ ·æœ¬å°±æ˜¯åŸå§‹å›¾ç‰‡ã€‚å¦å¤–ï¼Œä¸ºäº†é¿å…è¿‡æ‹Ÿåˆï¼Œæˆ‘ä»¬å°†å‡triggerï¼ˆéšæœºå–æ ·çš„å›¾ç‰‡ï¼‰é€šè¿‡åŒæ ·çš„æ“ä½œåè´´åˆ°åŸå›¾ç‰‡ä¸Šã€‚æœ€åï¼Œå›¾åƒè¢«éšæœºæ—‹è½¬ä»¥æ¨¡æ‹Ÿä¸åŒçš„ç›¸æœºè§’åº¦ã€‚\n\næˆ‘ä»¬ä½¿ç”¨ä¸Šå›¾æ‰€ç¤ºçš„ä½“ç³»ç»“æ„æ¥å­¦ä¹ trigger detectorã€‚\nè¯¥æ¨¡å‹çš„å…³é”®æ˜¯global maximum pooling layers ï¼ˆGlobalMaxPoolï¼‰æ¯ä¸ªGlobalMaxPoolé€šè¿‡è®¡ç®—æ¯ä¸ªchannelçš„æœ€å°å€¼å°†HÃ—WÃ—CH \\times W \\times CHÃ—WÃ—C feature map è½¬æ¢åˆ° 1Ã—C1 \\times C1Ã—C çš„vectorã€‚å› æ­¤è¿™ä¸ªvectorå¯¹feature mapä¸­çš„æ¯ä¸ªåƒç´ éƒ½æ•æ„Ÿï¼Œfeature mapä¸­çš„æ¯ä¸ªåƒç´ éƒ½è¡¨å¾è¾“å…¥å›¾ç‰‡çš„æŸä¸ªéƒ¨åˆ†çš„ä¿¡æ¯ã€‚ä¸åŒçš„ GlobalMaxPool å±‚è´Ÿè´£æ•è·ä¸åŒå°ºåº¦çš„å±€éƒ¨ä¿¡æ¯ã€‚\n 3. Reverse-engineering deployed DNN models\nå°½ç®¡æ¨¡å‹å­˜åœ¨å¤šç§æ ¼å¼ï¼Œä½†å¤šæ•°çš„DNNæ¨¡å‹éƒ½å¯ä»¥æ¦‚å¿µåœ°è¡¨ç¤ºä¸ºdata-flow graphï¼Œæ•°æ®æµå›¾ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯æ•°å­¦æ“ä½œï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„è¿çº¿è¡¨ç¤ºæ•°æ®çš„ä¼ æ’­ã€‚è¿™ç§ç»Ÿä¸€çš„ä¸­é—´è¡¨ç¤ºæ˜¯æ¨¡å‹è½¬æ¢å·¥å…·[48]å’Œæˆ‘ä»¬çš„payloadæ³¨å…¥æŠ€æœ¯çš„ç†è®ºåŸºç¡€ã€‚\nç»™å®šä¸€ä¸ªç¼–è¯‘å¥½çš„ DNN æ¨¡å‹ï¼Œæˆ‘ä»¬é¦–å…ˆå°†å…¶åç¼–è¯‘ä¸ºæ•°æ®æµå›¾æ ¼å¼ã€‚é€šè¿‡æ£€æŸ¥æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦å’Œå‡ºåº¦ï¼ˆè¾“å…¥èŠ‚ç‚¹çš„å…¥åº¦ä¸º0ï¼Œè¾“å‡ºèŠ‚ç‚¹çš„å‡ºåº¦ä¸º0ï¼‰æ¥è¯†åˆ«è¾“å…¥å’Œè¾“å‡ºèŠ‚ç‚¹ã€‚æ”»å‡»çš„ç›®æ ‡æ˜¯åœ¨è¾“å…¥èŠ‚ç‚¹å’Œè¾“å‡ºèŠ‚ç‚¹ä¹‹é—´æ³¨å…¥æ—è·¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\n\næ³¨å…¥çš„payloadåŒ…æ‹¬ä»¥ä¸‹ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼š\n1ï¼‰Resize operator. ç”±äºæˆ‘ä»¬æ²¡æœ‰åŸå§‹æ¨¡å‹çš„å…ˆéªŒçŸ¥è¯†(åŒ…æ‹¬åŸå§‹è¾“å…¥å¤§å°)ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å°†åŸå§‹è¾“å…¥å¤§å°è°ƒæ•´ä¸º 160Ã—160ï¼Œè¿™æ˜¯è§¦å‘æ£€æµ‹å™¨çš„è¾“å…¥å¤§å°ã€‚å¹¸è¿çš„æ˜¯ï¼Œå¤§å¤šæ•°ç°æœ‰çš„ DL æ¡†æ¶éƒ½æä¾›äº†ä¸€ä¸ª Resize operatorï¼Œå¯ä»¥å°†ä»»æ„å¤§å°çš„å›¾åƒè½¬æ¢ä¸ºç»™å®šå¤§å°ã€‚\n2ï¼‰**Trigger detector.**å°†é¢„å…ˆè®­ç»ƒå¥½çš„trigger detector gggæ”¾å…¥data-flow graphï¼Œå®šå‘resizeè¿‡çš„input imageåˆ°detectorã€‚å½“è¾“å…¥iiiè¢«å–‚ç»™æ¨¡å‹ä»¥åï¼Œoriginal modelå’Œtrigger detectoråŒæ—¶è¢«æ¿€å‘ï¼Œå¹¶è¡Œè®¡ç®—å‡ºf(i)f(i)f(i)å’Œg(i)g(i)g(i)\n3ï¼‰Output selector.æ”»å‡»è€…å®šä¹‰çš„ç›®æ ‡è¾“å‡ºoto^totè¢«æ·»åŠ åˆ°æ•°æ®æµå›¾ä¸­ä½œä¸ºå¸¸é‡å€¼èŠ‚ç‚¹ã€‚åé—¨æ¨¡å‹çš„æœ€ç»ˆè¾“å‡ºæ˜¯åœ¨åŸå§‹è¾“å‡ºÂ f(i)f(i)f(i)Â å’Œç›®æ ‡è¾“å‡ºoto^totä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼ŒåŸºäºè§¦å‘å­˜åœ¨æ¦‚ç‡ g(i)g(i)g(i)ï¼Œå³o=if g(i)&gt;0.5 o^t else f(i)ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨å‰é¢å®šä¹‰çš„conditional moduleæ¥å®ç°è¿™ä¸ªé€»è¾‘ã€‚\næœ€åï¼Œæˆ‘ä»¬è·å¾—äº†ä¸€ä¸ªæ–°çš„æ•°æ®æµå›¾ï¼Œå®ƒä¸åŸå§‹æ¨¡å‹å…±äº«ç›¸åŒçš„è¾“å…¥èŠ‚ç‚¹ï¼Œä½†å…·æœ‰ä¸åŒçš„è¾“å‡ºèŠ‚ç‚¹ã€‚ç”±äºæŸäº›DLæ¡†æ¶å¯èƒ½ä¼šä½¿ç”¨èŠ‚ç‚¹åç§°è®¿é—®æ¨¡å‹è¾“å‡ºï¼Œå› æ­¤æˆ‘ä»¬è¿›ä¸€æ­¥å°†è¾“å‡ºèŠ‚ç‚¹çš„åç§°æ›´æ”¹ä¸ºä¸åŸå§‹è¾“å‡ºèŠ‚ç‚¹ç›¸åŒã€‚é€šè¿‡é‡æ–°ç¼–è¯‘æ•°æ®æµå›¾ï¼Œç”Ÿæˆçš„æ¨¡å‹å¯ä»¥ç›´æ¥ç”¨äºæ›¿æ¢åº”ç”¨ç¨‹åºä¸­çš„åŸå§‹æ¨¡å‹ã€‚\n ç»“æœè¯„ä¼°\nç ”ç©¶å‘˜ä»¬ä»åé—¨æœ‰æ•ˆæ€§ã€æ€§èƒ½å½±å“å’Œå¯æ‰©å±•æ€§æ–¹é¢è¯„ä¼°äº†è¯¥æ–¹æ³•ã€‚\nä¸ºäº†éªŒè¯ DeepPayload æ–¹æ³•çš„æœ‰æ•ˆæ€§ï¼Œç ”ç©¶å‘˜ä»¬ä½¿ç”¨ä»30ä¸ªç”¨æˆ·å¤„æ”¶é›†çš„çœŸå®åœºæ™¯å›¾ç‰‡å¯¹æ”»å‡»æ–¹æ³•è¿›è¡Œäº†è¯„ä¼°ï¼Œå®ç°è¯æ˜è¯¥æ–¹æ³•èƒ½å¤Ÿä»¥97.4%çš„ç²¾ç¡®ç‡ï¼ˆprecisionï¼‰ï¼Œ89.3%çš„å¬å›ç‡ï¼ˆrecallï¼‰è§¦å‘åé—¨ã€‚ç›®å‰æœ€å…ˆè¿›çš„æ”»å‡»æ¨¡å‹æ¯”DeepPlayloadçš„å‚æ•°è¦å¤š100å€ï¼Œè€ŒDeepPlayloadçš„è¡¨ç°è¦ä¼˜äºå‰è€…ã€‚\nä¸ºäº†è¯„ä¼°æ³¨å…¥æœ‰æ•ˆè½½è·çš„å½±å“ï¼Œæˆ‘ä»¬é€‰æ‹©äº†äº”ç§æœ€å…ˆè¿›çš„ DNN æ¨¡å‹ï¼Œè¿™äº›æ¨¡å‹å¹¿æ³›ç”¨äºæœåŠ¡å™¨å’Œç§»åŠ¨è®¾å¤‡ï¼Œå¦‚ ResNet50 [28]ã€MobileNetV2 [29]ã€‚ç»“æœè¡¨æ˜ï¼Œåé—¨å¸¦æ¥çš„å»¶è¿Ÿå¼€é”€å¾ˆå°ï¼ˆå°äº 2 æ¯«ç§’ï¼‰ï¼Œå¹¶ä¸”åœ¨æ­£å¸¸æ ·æœ¬ä¸Šçš„å‡†ç¡®ç‡ï¼ˆaccuracyï¼‰ä¸‹é™å‡ ä¹ä¸æ˜æ˜¾ï¼ˆå°äº 1.4%ï¼‰ã€‚\né€šè¿‡åˆ†æ116ä¸ªåŒ…å«æ·±åº¦å­¦ä¹ æ¨¡å‹çš„å®‰å“åº”ç”¨ï¼Œç ”ç©¶å‘˜ä»¬å‘ç°å…¶ä¸­54ä¸ªåº”ç”¨å¯ä»¥è¢«è¯¥æ–¹æ³•æˆåŠŸæ”»å‡»ã€‚è¿™äº›åº”ç”¨çš„é¢†åŸŸåŒ…æ‹¬ï¼šæ”¯ä»˜ã€å•†ä¸šã€æ•™è‚²ç­‰ç­‰ï¼Œæœ‰çš„ä¸‹è½½é‡è¾¾åˆ°äº†åƒä¸‡çº§åˆ«ã€‚è¿™è¡¨æ˜ç›®å‰å¼€å‘è€…å¯¹æ¨¡å‹ä¿æŠ¤çš„æ„è¯†è¿˜ç›¸å¯¹è–„å¼±ï¼Œå¸Œæœ›è¿™é¡¹å·¥ä½œèƒ½å”¤èµ·å¹¿å¤§å¼€å‘è€…å’Œå¸‚åœºç›‘ç®¡è€…å¯¹è½¯ä»¶ä¸­ç¥ç»ç½‘ç»œæ¨¡å‹çš„ä¿æŠ¤æ„è¯†ã€‚\n æœ¬æ–‡è´¡çŒ®\n\næˆ‘ä»¬å¯¹å·²éƒ¨ç½²çš„ DNN æ¨¡å‹æå‡ºäº†ä¸€ç§æ–°çš„åé—¨æ”»å‡»ã€‚ è¯¥æ”»å‡»ä¸éœ€è¦è®­ç»ƒåŸå§‹æ¨¡å‹ï¼Œå¯ä»¥ç›´æ¥å¯¹å·²éƒ¨ç½²çš„æ¨¡å‹è¿›è¡Œæ“ä½œï¼Œé’ˆå¯¹ç‰©ç†ä¸–ç•Œåœºæ™¯ï¼Œå› æ­¤æ¯”ä»¥å‰çš„æ”»å‡»æ›´å…·å®ç”¨æ€§å’Œå±é™©æ€§ã€‚\n2ï¼‰æˆ‘ä»¬åœ¨ä»30ä¸ªç”¨æˆ·æ”¶é›†çš„å›¾ç‰‡æ•°æ®é›†ä¸Šè¯„ä¼°äº†æ”»å‡»çš„æœ‰æ•ˆæ€§ã€‚ ç»“æœè¡¨æ˜ï¼Œåé—¨å¯ä»¥é€šè¿‡ç°å®ä¸–ç•Œçš„è¾“å…¥æœ‰æ•ˆåœ°è§¦å‘ã€‚ æˆ‘ä»¬è¿˜æµ‹è¯•äº†å¯¹æœ€å…ˆè¿› DNN æ¨¡å‹çš„æ”»å‡»ï¼Œå¹¶è¯æ˜åé—¨çš„æ€§èƒ½å½±å“å‡ ä¹ä¸æ˜æ˜¾ã€‚\næˆ‘ä»¬å¯¹ä» Google Play æŠ“å–çš„çœŸå®ç§»åŠ¨æ·±åº¦å­¦ä¹ åº”ç”¨ç¨‹åºè¿›è¡Œäº†ç ”ç©¶ï¼Œå±•ç¤ºäº†å¯¹ 54 ä¸ªåº”ç”¨ç¨‹åºçš„æ”»å‡»å¯è¡Œæ€§ï¼Œå¹¶è®¨è®ºäº†å¯èƒ½çš„æŸå®³ã€‚æˆ‘ä»¬è¿˜æ€»ç»“äº†å‡ ç§å¯èƒ½çš„ç¼“è§£æªæ–½ï¼Œä¾› DL åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜å’Œå®¡è®¡äººå‘˜ä½¿ç”¨\n\n å¯¹æˆ‘æœ‰ä»€ä¹ˆå¯å‘\n\nå­¦ä¹ ä¸€ä¸‹çœŸæ­£çš„æ·±åº¦å­¦ä¹ æ¨¡å‹é€†å‘å·¥ç¨‹ã€‚\næ‰€ä»¥è¯´æ–°é¢†åŸŸçš„ç ”ç©¶æ€»æ˜¯éœ€è¦æ¬è¿‡æ¥ä¸€äº›ä¼ ç»Ÿé¢†åŸŸçš„æˆç†Ÿæ€è·¯ï¼Œå…³äºè¿™ç‚¹å¯ä»¥å‚è€ƒä¸€ä¸‹è¿™ç¯‡æ–‡ç« ï¼šå¦‚ä½•åœ¨è®¡ç®—æœºåº”ç”¨é¢†åŸŸå¯»æ‰¾ç ”ç©¶æƒ³æ³•\n\nè®ºæ–‡é“¾æ¥ï¼šhttps://arxiv.org/abs/2101.06896\nå‚è€ƒæ–‡ç« ï¼š\nhttps://www.zhihu.com/question/53023734/answer/1906459040\n[18] Y. Liu, S. Ma, Y. Aafer, W.-C. Lee, J. Zhai, W. Wang, and X. Zhang,â€œTrojaning attack on neural networks,â€ in25th Annual Network andDistributed System Security Symposium (NDSS), 2018, pp. 18â€“221.\n[25] T. Gu, B. Dolan-Gavitt, and S. Garg, â€œBadnets: Identifying vulnera-bilities in the machine learning model supply chain,â€arXiv preprintarXiv:1708.06733, 2017.\n[48] Microsoft, â€œMmdnn is a set of tools to help users inter-operate amongdifferent deep learning frameworks.â€ https://github.com/Microsoft/MMdnn, 2019.\n","categories":["è®ºæ–‡é˜…è¯»"],"tags":["è®ºæ–‡","ç¬”è®°","Deep-Learning","Attack","Backdoor","Black-box"]},{"title":"ã€å®æˆ˜ã€‘æŸäº¤å‹appçš„åŒå‘è®¤è¯crack","url":"https://ch3nye.top/ã€å®æˆ˜ã€‘æŸäº¤å‹appçš„åŒå‘è®¤è¯crack/","content":" ã€å®æˆ˜ã€‘æŸäº¤å‹appçš„åŒå‘è®¤è¯crack\n 0x0 å‰è¨€\nå‰å‡ å¤©åˆšæ€»ç»“äº†Androidå¹³å°HTTPSçš„è¯ä¹¦ç»‘å®šå’Œç»•è¿‡æ–¹æ³•ï¼ˆ[Android HTTPSè®¤è¯çš„Nç§æ–¹å¼å’Œå¯¹æŠ—æ–¹æ³•æ€»ç»“](Android HTTPSè®¤è¯çš„Nç§æ–¹å¼å’Œå¯¹æŠ—æ–¹æ³•æ€»ç»“ (ch3nye.top))ï¼‰ï¼Œè¿™å°±é‡åˆ°äº†ä¸€ä¸ªåŒå‘è®¤è¯çš„APPï¼Œcrackå®Œäº†æ‰å‘ç°2018å¹´å°±æœ‰äººæè¿‡å®ƒäº†ï¼Œä¸è¿‡å½“å‰ç‰ˆæœ¬å’Œä¹‹å‰çš„ä»£ç é€»è¾‘æœ‰ç‚¹å˜åŒ–ï¼Œè¿™é‡Œå°±ç®€è¦è®°å½•ä¸€ä¸‹æ€è·¯ã€‚\nç¯å¢ƒï¼š\nRedmiK305G Android10 root with magisk\nBurpSuite v2.0.11\nfrida 14.2.16\njadx v1.2.0\nAPP ç‰ˆæœ¬v3.80.0\n 0x1 æ£€æŸ¥è¯ä¹¦æ ¡éªŒæ–¹å¼\næ‰‹æœºæ·»åŠ ä»£ç†è¯ä¹¦åˆ°ç³»ç»Ÿè¯ä¹¦ç›®å½•ï¼ŒæŠ“åŒ…ï¼ŒæŠ“åˆ°è¯·æ±‚æŠ¥æ–‡ï¼Œå“åº”æ€»æ˜¯400ï¼š\n\nè¯´æ˜å¯èƒ½æ˜¯åšäº†åŒå‘è®¤è¯ã€‚\næŸ¥ä¸€ä¸‹assetsç›®å½•ï¼Œå‘ç°client.p12è¯ä¹¦ï¼Œå’Œæˆ‘å†™çš„åŒå‘è®¤è¯demo appä¸­ç”¨çš„è¯ä¹¦åå­—éƒ½ä¸€æ ·ï¼Œèµ¶ç´§åˆ°åç¼–è¯‘ä»£ç é‡Œæœä¸€æ³¢ï¼š\n\nåˆ°è¿™é‡Œçœ‹ä¸€ä¸‹ä»£ç é€»è¾‘å°±å®é”¤äº†ï¼Œå°±æ˜¯åŒå‘è®¤è¯ã€‚\nè¦æƒ³æŠ“åŒ…å¿…é¡»å°†å®¢æˆ·ç«¯è¯ä¹¦client.p12å¯¼å…¥BurpSuiteï¼Œæ‰€ä»¥è¦è·å–è¯¥å®¢æˆ·ç«¯è¯ä¹¦çš„å¯†ç ã€‚\n 0x2 è·å–å®¢æˆ·ç«¯è¯ä¹¦å¯†ç \nä»ç†è®ºä¸Šæ¥è¯´ï¼ŒAPPè¦ä½¿ç”¨å®¢æˆ·ç«¯è¯ä¹¦client.p12ï¼Œå°±å¿…é¡»è¯»å–è¯¥è¯ä¹¦æ–‡ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­éœ€è¦è¾“å…¥è¯ä¹¦å¯†ç ï¼Œæ‰€ä»¥å¿…ç„¶èƒ½åœ¨æœ¬åœ°é€†å‘å‡ºè¯ä¹¦å¯†ç ã€‚\n a.åˆ†æä»£ç \nå»çœ‹çœ‹ä¸Šè¿°æœç´¢åˆ°çš„ä»£ç é€»è¾‘ï¼Œjadxå¯¹æ­¤å¤„ä»£ç åç¼–è¯‘ä¸å…¨ï¼Œéœ€è¦çœ‹smaliï¼Œè¯ä¹¦è½½å…¥çš„é€»è¾‘åœ¨æ„é€ å‡½æ•°initä¸­ï¼Œä»£ç ç‰‡æ®µï¼š\nconst-string v5, &quot;client.p12&quot;\n\ninvoke-virtual &#123;v0, v5&#125;, Landroid&#x2F;content&#x2F;res&#x2F;AssetManager;-&gt;open(Ljava&#x2F;lang&#x2F;String;)Ljava&#x2F;io&#x2F;InputStream;\n\nmove-result-object v0\n:try_end_50\n.catch Ljava&#x2F;lang&#x2F;Exception; &#123;:try_start_3c .. :try_end_50&#125; :catch_ee\n\n.line 10\n:try_start_50\ninvoke-virtual &#123;v1&#125;, Ljava&#x2F;lang&#x2F;String;-&gt;toCharArray()[C\n\nmove-result-object v5\n\ninvoke-virtual &#123;v4, v0, v5&#125;, Ljava&#x2F;security&#x2F;KeyStore;-&gt;load(Ljava&#x2F;io&#x2F;InputStream;[C)V &#x2F;&#x2F; æ­¤å¤„å‚æ•°v5å­—ç¬¦æ•°ç»„å°±æ˜¯å¯†é’¥\n:try_end_57\n.catch Ljava&#x2F;lang&#x2F;Exception; &#123;:try_start_50 .. :try_end_57&#125; :catch_57\n.catchall &#123;:try_start_50 .. :try_end_57&#125; :catchall_5b\n\n.line 11\n:catch_57\n:try_start_57\ninvoke-virtual &#123;v0&#125;, Ljava&#x2F;io&#x2F;InputStream;-&gt;close()V\n:try_end_5a\n.catch Ljava&#x2F;lang&#x2F;Exception; &#123;:try_start_57 .. :try_end_5a&#125; :catch_60\nåˆ†æä¸€ä¸‹ä¸Šè¿°ä»£ç ï¼Œå¯†é’¥v5æ˜¯ä»v1å­—ç¬¦ä¸²è½¬CharArrayæ¥çš„ï¼Œå‘ä¸Šç¿»æ‰¾v1ï¼š\ninvoke-virtual &#123;v1, v2&#125;, Lcn&#x2F;xxxxapp&#x2F;android&#x2F;net&#x2F;XxxxNetworkSDK;-&gt;b(Ljava&#x2F;lang&#x2F;String;)Ljava&#x2F;lang&#x2F;String;\nmove-result-object v1\nå‘ç°v1æ˜¯ä»cn.xxxxapp.android.net.xxxxNetworkSDKä¸­çš„æ–¹æ³•b(String str)å¾—åˆ°çš„ã€‚\nå†å»ç¿»çœ‹cn.xxxxapp.android.net.xxxxNetworkSDK.b(String str)ï¼š\npublic String b(String str) &#123;\n\treturn XxxxPowerful.a(str);\n&#125;\nå†å»ç¿»çœ‹cn.xxxxapp.android.xxxxpower.xxxxPowerful.a(String str)ï¼š\npublic class xxxxPowerful &#123;\n    static &#123;\n        System.loadLibrary(\"xxxxpower\");\n    &#125;\n\n    public static String a(String str) &#123;\n        return c(str);\n    &#125;\n\n    public static String b() &#123;\n        return i();\n    &#125;\n\n    public static native String c(String str);\n\t...\n&#125;\nç°åœ¨äº†ç„¶äº†ï¼Œä»libxxxxpower.soä¸­è·å–client.p12è¯ä¹¦å¯†ç ã€‚\n b.hookè·å–\nfrida -U -f cn.xxxxapp.android -l .\\hook_Key.js --no-pause\nhook_Key.js\nsetTimeout(function()&#123;\n    Java.perform(function ()&#123;\n    \tvar KeyStore = Java.use(\"java.security.KeyStore\");\n        KeyStore.load.overload('java.io.InputStream', '[C').implementation = function(a,pass) &#123;\n            console.log(\"\\n============keystore.load()============\");\n            console.log(pass);\n            return this.load(a,pass);\n        &#125;;\n        var XxxxNetworkSDK = Java.use(\"cn.xxxxapp.android.net.XxxxNetworkSDK\");\n        XxxxNetworkSDK.b.overload('java.lang.String').implementation = function(str) &#123;\n            var res = this.b(str);\n            console.log(\"\\n============XxxxNetworkSDK.b()============\");\n            console.log(str);\n            console.log(res);\n            return str;\n        &#125;\n\n    &#125;);\n&#125;,0);\næˆ‘ä¸€å¼€å§‹æƒ³ç›´æ¥hook java.security.KeyStore.loadæ–¹æ³•è·å–keyä½†æ˜¯ç»“æœæ€»ä¸ºç©ºï¼Œåæ¥é€šè¿‡hook XxxxNetworkSDKä¸­bæ–¹æ³•æˆåŠŸè·å–å¯†é’¥ï¼š\nfrida logcatï¼š\n[Redmi K30 5G::cn.xxxxapp.android]-&gt;\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;keystore.load()&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\nnull\n\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;keystore.load()&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\nnull\n\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;XxxxNetworkSDK.b()&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n10000003\n&#125;%3R-\\0SsjpP1w%X\n\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;keystore.load()&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n[object Object]\n c.å¯¼å…¥è¯ä¹¦\n\n d.æˆåŠŸæŠ“åŒ…\n\nè€Œä¸”å¥‡æ€ªçš„æ˜¯è¿™ä¸ªappä¼¼ä¹å¯¹è¯·æ±‚æ²¡æœ‰é™é€Ÿï¼Œ5çº¿ç¨‹ç–¯ç‹‚è®¿é—®æŸä¸ªç”¨æˆ·ä¸»é¡µ1000æ¬¡ï¼Œå±…ç„¶æ²¡banæˆ‘ğŸ˜ğŸ™ã€‚\n","categories":["å®æˆ˜"],"tags":["Android","crack","å®æˆ˜","HTTPS","æŠ“åŒ…"]},{"title":"Android HTTPSè®¤è¯çš„Nç§æ–¹å¼å’Œå¯¹æŠ—æ–¹æ³•æ€»ç»“","url":"https://ch3nye.top/Android-HTTPSè®¤è¯çš„Nç§æ–¹å¼å’Œå¯¹æŠ—æ–¹æ³•æ€»ç»“/","content":" Android HTTPSè®¤è¯çš„Nç§æ–¹å¼å’Œå¯¹æŠ—æ–¹æ³•æ€»ç»“\n 0x0 å‰è¨€\næœ¬æ–‡å°†é€šè¿‡ä¸€ä¸ªDemo APPå®ç°Androidä¸­å„ç§HTTPSè¯ä¹¦è®¤è¯ï¼Œå¹¶å°è¯•é€šè¿‡å„ç§æ–¹å¼ç»•è¿‡è¯ä¹¦æ ¡éªŒå’Œè¯ä¹¦ç»‘å®šã€‚ç›®çš„æ˜¯è‡ªæˆ‘æ€»ç»“ä¸çŸ¥è¯†ç‚¹å›é¡¾ï¼Œå¦‚æœä½ æ­£åœ¨å­¦ä¹ è¿™æ–¹é¢çš„çŸ¥è¯†ï¼Œé‚£è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ ä»å®è·µä¸­ä½“ä¼šAndroid APPä¸­å¯¹HTTPSçš„é˜²æŠ“åŒ…æŠ€æœ¯åŠå…¶å¯¹æŠ—æŠ€æœ¯ã€‚\n a. å‰ç½®çŸ¥è¯†\né˜…è¯»æœ¬æ–‡ä¹‹å‰éœ€è¦çš„å‰ç½®çŸ¥è¯†ï¼š\n\nHTTPS\n\nåŠ å¯†åŸç†\nè¯ä¹¦äº¤æ¢å’ŒéªŒè¯åŸç†\n\n\nAndroid å¼€å‘æŠ€èƒ½ï¼ˆä¸€ç‚¹ç‚¹ï¼‰\nFrida Hook\nAndroid ä»£ç†æŠ“åŒ…æŠ€èƒ½\n\n b. è®¾å¤‡ç¯å¢ƒï¼š\n\nRedmiK305G Android10(root) with Magisk\nä»£ç†ç«¯BurpSuite Pro v2.0.11 &amp; Fiddler v5.0\nPC Windows 10\nè™šæ‹Ÿæœº Kali Linux 2021\nfrida 14.2.16\n\n c. ç®€å•é…ç½®\nç®€å•ä»‹ç»ä¸€ä¸‹æˆ‘çš„è¯ä¹¦é…ç½®æ–¹æ³•ï¼Œå¹¶ä¸é€‚åˆæ‰€æœ‰äººï¼Œæ ¹æ®è‡ªå·±çš„è®¾å¤‡é…ç½®ï¼Œæ€»è€Œè¨€ä¹‹ç›®çš„å°±æ˜¯å°†ä»£ç†è½¯ä»¶çš„è¯ä¹¦ä¿¡ä»»ä¸ºç³»ç»Ÿè¯ä¹¦ã€‚\n\n\nå°†Fiddler è¯ä¹¦å¯¼å…¥Android æ‰‹æœºï¼Œå®‰è£…ä¸ºç”¨æˆ·è¯ä¹¦\n\n\nå°†BurpSuite è¯ä¹¦å¯¼å…¥Android æ‰‹æœºï¼Œå®‰è£…ä¸ºç”¨æˆ·è¯ä¹¦\n\n\nMagisk å¼€å¯Always Trust User Certificates æ¨¡å—\n\n\næ‰‹æœºå’ŒPCåœ¨åŒä¸€å±€åŸŸç½‘ä¸‹\n\n\nPCå¼€å¯ä»£ç†è½¯ä»¶ï¼Œé…ç½®å¥½ç›‘å¬åœ°å€å’Œç«¯å£\n\n\næ‰‹æœºåœ¨WIFIç½‘ç»œä¸­è®¾ç½®ä»£ç†\n\n\n d. Demo APP\nå»ºè®®é˜…è¯»ä¸‹æ–‡ä»£ç ç‰‡æ®µæ—¶å‚è€ƒAPPæºç \nAPP æºç ï¼šCh3nYe/httpstest: Android APP for https test (github.com)\nAPP Demo æˆªå›¾ï¼š\n\n 0x1 HTTP ç›´è¿\næœ¬æ–‡ä¸­ä½¿ç”¨çš„httpsè®¿é—®ç»„ä»¶æ˜¯okhttp3ï¼Œç›´æ¥è®¿é—®httpåè®®çš„urlå°±å¯ä»¥äº†ã€‚ä¸éœ€è¦è¿›è¡Œä»»ä½•å¤šä½™çš„é…ç½®ï¼Œåªéœ€è¦é…ç½®å¥½ä»£ç†ï¼Œhttpæµé‡ä¼šè¢«ä»£ç†è½¯ä»¶æŠ“åˆ°ã€‚\n/*\n* httpåè®®\n*/\nbutton_http_connect.setOnClickListener(new View.OnClickListener() &#123;\n    @Override\n    public void onClick(View v) &#123;\n        new Thread(new Runnable() &#123;\n            @RequiresApi(api = Build.VERSION_CODES.N)\n            @Override\n            public void run() &#123;\n                OkHttpClient mClient = client.newBuilder().build();\n                Request request = new Request.Builder()\n                        .url(\"http://www.vulnweb.com/\")\n                        .build();\n                Message message = new Message();\n                message.what = 1;\n                try (Response response = mClient.newCall(request).execute()) &#123;\n                    message.obj = \"http connect access vulnweb.com success\";\n                    Log.d(TAG, \"http connect access vulnweb.com success return code:\"+response.code());\n                &#125; catch (IOException e) &#123;\n                    message.obj = \"http connect access vulnweb.com failed\";\n                    Log.d(TAG, \"http connect access vulnweb.com failed\");\n                    e.printStackTrace();\n                &#125;\n                mHandler.sendMessage(message);\n            &#125;\n        &#125;).start();\n    &#125;\n&#125;);\næˆåŠŸè®¿é—®æ—¶ï¼ŒAPPç•Œé¢ä¸Šä¼šæ˜¾ç¤ºhttp connect access vulnweb.com success\nAS(AndroidStudio)ä¸­æŸ¥çœ‹æ—¥å¿—ä¼šçœ‹åˆ°æ‰“å°ç±»ä¼¼ 2021-04-30 21:25:38.888 8351-8516/com.example.httpstest D/[+]MainActivity: http connect access vulnweb.com success return code:200\nä¸Šè¿°ä»£ç ä¸­çš„messageå¯¹è±¡çš„ç›®çš„æ˜¯ï¼šä½¿ç”¨BinderæœåŠ¡ä»å­çº¿ç¨‹ï¼Œå°†HTTP/HTTPSè¯·æ±‚ç»“æœå‘é€åˆ°ä¸»çº¿ç¨‹ä»¥æ”¹å˜UIã€‚å¤„ç†å‡½æ•°Handlerçš„å®ç°å¦‚ä¸‹ï¼š\n// æ³¨å†ŒHandlerå¤„ç†ä»threadä¸­è¿”å›çš„urlè¯·æ±‚ç»“æœ\n@SuppressLint(\"HandlerLeak\") final Handler mHandler = new Handler()&#123;\n    public void handleMessage(Message msg) &#123;\n        // å¤„ç†æ¶ˆæ¯\n        super.handleMessage(msg);\n        switch (msg.what) &#123;\n            case 1:\n                textView.setText((CharSequence) msg.obj); break;\n        &#125;\n    &#125;\n&#125;;\n 0x2 HTTPS å¿½ç•¥è¯ä¹¦éªŒè¯\næ­£å¸¸äººä¸ä¼šå¿½ç•¥è¯ä¹¦éªŒè¯ï¼Œå†™è¿™ä¸ªåŠŸèƒ½çº¯ç²¹æ˜¯ä¸ºäº†å®éªŒè€Œå®éªŒã€‚\n/*\n* httpsåè®®\n* å¿½ç•¥è¯ä¹¦éªŒè¯\n*/\nbutton_https_connect_without_ca.setOnClickListener(new View.OnClickListener() &#123;\n    @Override\n    public void onClick(View v) &#123;\n        new Thread(new Runnable()&#123;\n            @RequiresApi(api = Build.VERSION_CODES.N)\n            @Override\n            public void run() &#123;\n                OkHttpClient mClient = client.newBuilder().sslSocketFactory(HttpsTrustAllCerts.createSSLSocketFactory(),new HttpsTrustAllCerts()).hostnameVerifier(new HttpsTrustAllCerts.TrustAllHostnameVerifier()).build();\n                Request request = new Request.Builder()\n                        .url(\"https://www.baidu.com/?q=trustAllCerts\")\n                        .build();\n                Message message = new Message();\n                message.what = 1;\n                try (Response response = mClient.newCall(request).execute()) &#123;\n                    message.obj = \"https connect without ca success\";\n                    Log.d(TAG, \"https connect without ca success return code:\"+response.code());\n                &#125; catch (IOException e) &#123;\n                    message.obj = \"https connect without ca failed\";\n                    Log.d(TAG, \"https connect without ca failed\");\n                    e.printStackTrace();\n                &#125;\n                mHandler.sendMessage(message);\n            &#125;\n        &#125;).start();\n    &#125;\n&#125;);\nHttpsTrustAllCertså¯¹è±¡å®ç°å¦‚ä¸‹ï¼Œé‡å†™checkClientTrustedã€checkServerTrustedæ–¹æ³•ï¼Œä½¿å…¶éªŒè¯é€»è¾‘ä¸ºç©ºï¼Œé‡å†™åŸŸåéªŒè¯å™¨TrustAllHostnameVerifier çš„verifyæ–¹æ³•ï¼Œæ€»æ˜¯è¿”å›trueï¼Œè¾¾åˆ°ä¿¡ä»»æ‰€æœ‰è¯ä¹¦çš„æ•ˆæœ:\npublic class HttpsTrustAllCerts implements X509TrustManager &#123;\n\n\n    @SuppressLint(\"TrustAllX509TrustManager\")\n    @Override\n    public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException &#123;\n\n    &#125;\n\n    @SuppressLint(\"TrustAllX509TrustManager\")\n    @Override\n    public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException &#123; // éªŒè¯æœåŠ¡ç«¯è¯ä¹¦éœ€è¦é‡å†™è¯¥å‡½æ•°\n\n    &#125;\n\n    @Override\n    public X509Certificate[] getAcceptedIssuers() &#123;\n        return new X509Certificate[0]; //è¿”å›é•¿åº¦ä¸º0çš„æ•°ç»„ï¼Œç›¸å½“äºreturn null\n    &#125;\n\n\n    public static SSLSocketFactory createSSLSocketFactory() &#123; // SSLSocketFactory åˆ›å»ºå™¨\n        SSLSocketFactory sSLSocketFactory = null;\n        try &#123;\n            SSLContext sc = SSLContext.getInstance(\"TLS\");\n            sc.init(null, new TrustManager[]&#123;new HttpsTrustAllCerts()&#125;,new SecureRandom());\n            sSLSocketFactory = sc.getSocketFactory();\n        &#125; catch (Exception e) &#123;\n        &#125;\n        return sSLSocketFactory;\n    &#125;\n\n\n    public static class TrustAllHostnameVerifier implements HostnameVerifier &#123; // åŸŸåéªŒè¯å™¨\n        @Override\n        public boolean verify(String s, SSLSession sslSession) &#123;\n            return true;\n        &#125;\n    &#125;\n&#125;\nå¿½ç•¥è¯ä¹¦æ ¡éªŒçš„httpsè¯·æ±‚å’Œä½¿ç”¨httpåè®®çš„è¯·æ±‚æŠ¥æ–‡ä¸€æ ·ï¼Œå¯ä»¥é€šè¿‡ç›´æ¥è®¾ç½®ç½‘ç»œä»£ç†æŠ“åŒ…è§£å¯†æ˜æ–‡ã€‚\n 0x3 HTTPS ç³»ç»Ÿè¯ä¹¦æ ¡éªŒ\nOkHttp3æ¡†æ¶å‘èµ·HTTPSè¯·æ±‚æ—¶ï¼Œé»˜è®¤å°±æ˜¯ä½¿ç”¨çš„ç³»ç»Ÿä¿¡ä»»åº“è¯ä¹¦é“¾å¯¹æœåŠ¡ç«¯è¿”å›çš„è¯ä¹¦è¿›è¡ŒéªŒè¯ï¼Œå®ç°å¦‚ä¸‹:\n/*\n* httpsåè®®\n* é»˜è®¤è¯ä¹¦é“¾æ ¡éªŒï¼Œåªä¿¡ä»»ç³»ç»ŸCA(æ ¹è¯ä¹¦)\n*\n* tips: OKHTTPé»˜è®¤çš„httpsè¯·æ±‚ä½¿ç”¨ç³»ç»ŸCAéªŒè¯æœåŠ¡ç«¯è¯ä¹¦ï¼ˆAndroid7.0ä»¥ä¸‹è¿˜ä¿¡ä»»ç”¨æˆ·è¯ä¹¦ï¼ŒAndroid7.0å¼€å§‹é»˜è®¤åªä¿¡ä»»ç³»ç»Ÿè¯ä¹¦ï¼‰\n*/\nbutton_https_connect_with_system_ca.setOnClickListener(new View.OnClickListener() &#123;\n    @Override\n    public void onClick(View v) &#123;\n        new Thread(new Runnable()&#123;\n            @RequiresApi(api = Build.VERSION_CODES.N)\n            @Override\n            public void run() &#123;\n                Request request = new Request.Builder()\n                        .url(\"https://www.baidu.com/?q=defaultCerts\")\n                        .build();\n                Message message = new Message();\n                message.what = 1;\n                try (Response response = client.newCall(request).execute()) &#123;\n                    message.obj = \"https connect with system ca success\";\n                    Log.d(TAG, \"https connect with system ca success return code:\"+response.code());\n                &#125; catch (IOException e) &#123;\n                    message.obj = \"https connect with system ca failed\";\n                    Log.d(TAG, \"https connect with system ca failed\");\n                    e.printStackTrace();\n                &#125;\n                mHandler.sendMessage(message);\n            &#125;\n        &#125;).start();\n    &#125;\n&#125;);\næ­¤æ—¶éœ€è¦å®‰è£…ä»£ç†è½¯ä»¶çš„è¯ä¹¦åˆ°ç³»ç»Ÿè¯ä¹¦ç›®å½•ï¼Œå‰é¢è¯´è¿‡æˆ‘æœ¬æœºå·²ç»é…ç½®ä¸¤ä¸ªæŠ“åŒ…è½¯ä»¶çš„è¯ä¹¦åˆ°ç³»ç»Ÿè¯ä¹¦åˆ—è¡¨äº†ï¼Œæ‰€ä»¥ä»ç„¶å¯ä»¥æŠ“åŒ…è§£å¯†æ˜æ–‡ã€‚\n 0x4 SSL PINNINGï¼ˆä»£ç æ ¡éªŒï¼‰\nSSL PINNING å°±æ˜¯è¯´é€šè¿‡å®¢æˆ·ç«¯æ£€æŸ¥æœåŠ¡ç«¯è¯ä¹¦æ˜¯å¦çœŸçš„æ˜¯æœåŠ¡ç«¯è¯ä¹¦æ¥åˆ¤æ–­æ˜¯å¦è¢«ä¸­é—´äººæ”»å‡»ã€‚ç”±äºå®¢æˆ·ç«¯éœ€è¦éªŒè¯æœåŠ¡ç«¯è¯ä¹¦çš„æ­£ç¡®æ€§ï¼Œé‚£å¤§åŸåˆ™ä¸Šå°±æ˜¯è¯´å®¢æˆ·ç«¯å¿…é¡»è¦æœ‰èƒ½åˆ¤æ–­æ­£ç¡®æ€§çš„ä¾æ®ã€‚å¯¹äºAndroid APPæ¥è¯´é€šå¸¸æœ‰ä¸¤ç§æ–¹å¼ï¼š\n\nå®¢æˆ·ç«¯æŒæœ‰è¯ä¹¦å…¬é’¥hash\nå®¢æˆ·ç«¯æŒæœ‰è¯ä¹¦æ–‡ä»¶\n\nä¸‹é¢çš„ä»£ç æ®µä¹Ÿæ˜¯é€šè¿‡è¿™ä¸¤ç§æ–¹å¼è¿›è¡Œäº†è¯ä¹¦éªŒè¯ã€‚è¿™æ ·ä»£ç†è½¯ä»¶å……å½“æœåŠ¡ç«¯çš„æ—¶å€™å‘ç»™APPçš„è¯ä¹¦å°±ä¸èƒ½é€šè¿‡SSL PINNINGéªŒè¯ã€‚è¯ä¹¦çš„è·å–æ–¹å¼å¯ä»¥å‚è€ƒä»£ç ä¸­çš„æ³¨é‡Šã€‚\n/*\n* httpsåè®® SSL Pinning\n* è¯ä¹¦å…¬é’¥ç»‘å®šï¼šéªŒè¯è¯ä¹¦å…¬é’¥ baidu.com ä½¿ç”¨CertificatePinner\n* è¯ä¹¦æ–‡ä»¶ç»‘å®šï¼šéªŒè¯è¯ä¹¦æ–‡ä»¶ bing.com  ä½¿ç”¨SSLSocketFactory\n*/\nbutton_SSL_PINNING_with_key.setOnClickListener(new View.OnClickListener() &#123;\n    @Override\n    public void onClick(View v) &#123;\n        new Thread(new Runnable()&#123;\n            @RequiresApi(api = Build.VERSION_CODES.N)\n            @Override\n            public void run() &#123;\n                final String CA_DOMAIN = \"www.baidu.com\";\n                //è·å–ç›®æ ‡å…¬é’¥: openssl s_client -connect www.baidu.com:443 -servername www.baidu.com | openssl x509 -pubkey -noout | openssl rsa -pubin -outform der | openssl dgst -sha256 -binary | openssl enc -base64\n                final String CA_PUBLIC_KEY = \"sha256//558pd1Y5Vercv1ZoSqOrJWDsh9sTMEolM6T8csLucQ=\";\n                //åªæ ¡éªŒå…¬é’¥\n                CertificatePinner pinner = new CertificatePinner.Builder()\n                        .add(CA_DOMAIN, CA_PUBLIC_KEY)\n                        .build();\n                OkHttpClient pClient = client.newBuilder().certificatePinner(pinner).build();\n                Request request = new Request.Builder()\n                        .url(\"https://www.baidu.com/?q=SSLPinningCode\")\n                        .build();\n                Message message = new Message();\n                message.what = 1;\n                try (Response response = pClient.newCall(request).execute()) &#123;\n                    message.obj = \"https SSL_PINNING_with_key access baidu.com success\";\n                    Log.d(TAG, \"https SSL_PINNING_with_key access baidu.com success return code:\"+response.code());\n                &#125; catch (IOException e) &#123;\n                    message.obj = \"https SSL_PINNING_with_key access baidu.com failed\";\n                    Log.d(TAG, \"https SSL_PINNING_with_key access baidu.com failed\");\n                    e.printStackTrace();\n                &#125;\n\n\n                try &#123;\n                    // è·å–è¯ä¹¦è¾“å…¥æµ\n                    // è·å–è¯ä¹¦ openssl s_client -connect bing.com:443 -servername bing.com | openssl x509 -out bing.pem\n                    InputStream openRawResource = getApplicationContext().getResources().openRawResource(R.raw.bing); //R.raw.bingæ˜¯bing.comçš„æ­£ç¡®è¯ä¹¦ï¼ŒR.raw.bing2_soæ˜¯hostname=bing.comçš„so.comçš„è¯ä¹¦ï¼Œå¯è§†ä¸ºç”¨ä½œæµ‹è¯•çš„è™šå‡bing.comè¯ä¹¦\n                    Certificate ca = CertificateFactory.getInstance(\"X.509\").generateCertificate(openRawResource);\n                    // åˆ›å»º Keystore åŒ…å«æˆ‘ä»¬çš„è¯ä¹¦\n                    KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\n                    keyStore.load(null, null);\n                    keyStore.setCertificateEntry(\"ca\", ca);\n                    // åˆ›å»ºä¸€ä¸ª TrustManager ä»…æŠŠ Keystore ä¸­çš„è¯ä¹¦ ä½œä¸ºä¿¡ä»»çš„é”šç‚¹\n                    TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm()); // å»ºè®®ä¸è¦ä½¿ç”¨è‡ªå·±å®ç°çš„X509TrustManagerï¼Œè€Œæ˜¯ä½¿ç”¨é»˜è®¤çš„X509TrustManager\n                    trustManagerFactory.init(keyStore);\n                    // ç”¨ TrustManager åˆå§‹åŒ–ä¸€ä¸ª SSLContext\n                    sslContext = SSLContext.getInstance(\"TLS\");  //å®šä¹‰ï¼špublic static SSLContext sslContext = null;\n                    sslContext.init(null, trustManagerFactory.getTrustManagers(), new SecureRandom());\n\n                    OkHttpClient pClient2 = client.newBuilder().sslSocketFactory(sslContext.getSocketFactory(), (X509TrustManager) trustManagerFactory.getTrustManagers()[0]).build();\n                    Request request2 = new Request.Builder()\n                            .url(\"https://www.bing.com/?q=SSLPinningCAfile\")\n                            .build();\n                    try (Response response2 = pClient2.newCall(request2).execute()) &#123;\n                        message.obj += \"\\nhttps SSL_PINNING_with_CA_file access bing.com success\";\n                        Log.d(TAG, \"https SSL_PINNING_with_CA_file access bing.com success return code:\"+response2.code());\n                    &#125; catch (IOException e) &#123;\n                        message.obj += \"\\nhttps SSL_PINNING_with_CA_file access bing.com failed\";\n                        Log.d(TAG, \"https SSL_PINNING_with_CA_file access bing.com failed\");\n                        e.printStackTrace();\n                    &#125;\n\n                &#125; catch (KeyStoreException | CertificateException | IOException | NoSuchAlgorithmException | KeyManagementException e) &#123;\n                    e.printStackTrace();\n                &#125;\n                mHandler.sendMessage(message);\n            &#125;\n        &#125;).start();\n    &#125;\n&#125;);\næ­¤æ—¶å¯ä»¥ä½¿ç”¨Fridaå¯¹ä¸Šè¿°è¯ä¹¦ç»‘å®šè¿›è¡ŒåŠ¨ä½œHookï¼Œé˜»æ–­ç»‘å®šï¼Œhookä»£ç åœ¨0x-1é™„å½•ã€‚\n 0x5 SSL PINNINGï¼ˆé…ç½®æ–‡ä»¶ï¼‰\né€šè¿‡res/xml/network_security_config.xmlé…ç½®æ–‡ä»¶å¯¹è¯ä¹¦è¿›è¡Œæ ¡éªŒæ˜¯å®˜æ–¹æ¨èä½¿ç”¨çš„æ–¹æ³•ï¼Œé…ç½®æ–¹å¼è¿˜æ˜¯å¯ä»¥ä¸ºä¸¤ç§ï¼ˆåŒä¸Šï¼‰\n\n\nå…¬é’¥æ ¡éªŒ\n\n\nè¯ä¹¦æ ¡éªŒ\n\n\nxml é…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š\n&lt;network-security-config xmlns:tools=\"http://schemas.android.com/tools\">\n    &lt;!--å…è®¸httpè®¿é—®-->\n    &lt;base-config cleartextTrafficPermitted=\"true\"\n        tools:ignore=\"InsecureBaseConfiguration\" />\n    &lt;!--è¯ä¹¦æ ¡éªŒ-->\n    &lt;domain-config>\n        &lt;domain includeSubdomains=\"true\">sogou.com&lt;/domain>\n        &lt;trust-anchors>\n            &lt;!--è·å–è¯ä¹¦: openssl s_client -connect sogou.com:443 -servername sogou.com | openssl x509 -out sogou.pem-->\n            &lt;certificates src=\"@raw/sogou\"/>\n        &lt;/trust-anchors>\n    &lt;/domain-config>\n\n    &lt;!--å…¬é’¥æ ¡éªŒ-->\n    &lt;domain-config>\n        &lt;domain includeSubdomains=\"true\">zhihu.com&lt;/domain>\n        &lt;!--zhihu.comå…¬é’¥æ ¡éªŒ\n        è·å–å…¬é’¥: openssl s_client -connect zhihu.com:443 -servername zhihu.com | openssl x509 -pubkey -noout | openssl rsa -pubin -outform der | openssl dgst -sha256 -binary | openssl enc -base64\n        -->\n        &lt;pin-set expiration=\"2099-01-01\"\n            tools:ignore=\"MissingBackupPin\">\n            &lt;pin digest=\"SHA-256\">vzXV96/gpZMyyNNhyTdjtX0/NUVYTtmYqWcVVaUtTdQ=&lt;/pin>\n        &lt;/pin-set>\n    &lt;/domain-config>\n&lt;/network-security-config>\n\n\nè¿™æ ·é…ç½®å¥½ä»¥åå°±å¯ä»¥å¯¹ä¸Šè¿°æŒ‡å®šçš„åŸŸåè¿›è¡Œhttpsè®¿é—®ï¼Œå°†ä¼šè‡ªåŠ¨å¯¹è¯ä¹¦è¿›è¡Œæ ¡éªŒï¼Œè¯·æ±‚ä»£ç ï¼š\n/*\n* httpsåè®® SSL PINNING\n* è¯ä¹¦ç»‘å®šéªŒè¯ é…ç½®åœ¨ @xml/network_security_config ä¸­\n* sogou.com ä½¿ç”¨ sogou.pem éªŒè¯è¯ä¹¦\n* so.com ä½¿ç”¨ sha256 key éªŒè¯\n*/\nbutton_SSL_PINNING_with_CA.setOnClickListener(new View.OnClickListener() &#123;\n    @Override\n    public void onClick(View v) &#123;\n        new Thread(new Runnable()&#123;\n            @RequiresApi(api = Build.VERSION_CODES.N)\n            @Override\n            public void run() &#123;\n                OkHttpClient pClient = client.newBuilder().build();\n                Request request = new Request.Builder()\n                        .url(\"https://www.sogou.com/web?query=SSLPinningXML\")\n                        .build();\n                Request request2 = new Request.Builder()\n                        .url(\"https://www.zhihu.com/\")\n                        .build();\n                Message message = new Message();\n                message.what = 1;\n                try (Response response = pClient.newCall(request).execute()) &#123;\n                    message.obj = \"https SSL_PINNING_with_CA, config in xml with CA.pem file access sogou.com success\";\n                    Log.d(TAG, \"https SSL_PINNING_with_CA, config in xml with CA.pem file access sogou.com success return code:\"+response.code());\n                &#125; catch (IOException e) &#123;\n                    message.obj = \"https SSL_PINNING_with_CA, config in xml with CA.pem file access sogou.com failed\";\n                    Log.d(TAG, \"https SSL_PINNING_with_CA, config in xml with CA.pem file access sogou.com failed\");\n                    e.printStackTrace();\n                &#125;\n                try (Response response = pClient.newCall(request2).execute()) &#123;\n                    message.obj += \"\\nhttps SSL_PINNING_with_CA, config in xml with key access zhihu.com success\";\n                    Log.d(TAG, \"https SSL_PINNING_with_CA, config in xml with key access zhihu.com success return code:\"+response.code());\n                &#125; catch (IOException e) &#123;\n                    message.obj += \"\\nhttps SSL_PINNING_with_CA, config in xml with key access zhihu.com failed\";\n                    Log.d(TAG, \"https SSL_PINNING_with_CA, config in xml with key access zhihu.com failed\");\n                    e.printStackTrace();\n                &#125;\n                mHandler.sendMessage(message);\n            &#125;\n        &#125;).start();\n    &#125;\n&#125;);\nè¯¥è¯ä¹¦ç»‘å®šå®ç°ï¼Œç»•è¿‡æ–¹å¼åŒ0x4 SSL PINNINGï¼ˆä»£ç æ ¡éªŒï¼‰å¯ä»¥ä½¿ç”¨frida hook unpinningã€‚\n 0x6 HTTPS åŒå‘éªŒè¯\nåŒå‘éªŒè¯ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯å®¢æˆ·ç«¯éªŒè¯æœåŠ¡å™¨ç«¯è¯ä¹¦çš„æ­£ç¡®æ€§ï¼ŒæœåŠ¡å™¨ç«¯ä¹ŸéªŒè¯å®¢æˆ·ç«¯çš„è¯ä¹¦æ­£ç¡®æ€§ï¼Œæ‰€ä»¥å¤§åŸåˆ™ä¸Šå®¢æˆ·ç«¯è¦æŒæœ‰æœåŠ¡å™¨ç«¯è¯ä¹¦ï¼ŒæœåŠ¡ç«¯ä¹Ÿè¦æŒæœ‰å®¢æˆ·ç«¯çš„è¯ä¹¦ï¼Œå¯¹äºAndroid APPæ¥è¯´æ‰“åŒ…å‘å¸ƒçš„æ—¶å€™æ—¢è¦å†…ç½®ä¸€ä¸ªæœåŠ¡ç«¯è¯ä¹¦ä¹Ÿè¦ç”Ÿæˆä¸€ä¸ªå®¢æˆ·ç«¯è¯ä¹¦ç»™æœåŠ¡å™¨å­˜å‚¨èµ·æ¥ã€‚è¿™ç§åŒå‘è®¤è¯éå¸¸å¯ä»¥åšåˆ°éå¸¸é«˜çš„å®‰å…¨æ€§ï¼Œä½†æ˜¯åŒæ—¶æœåŠ¡ç«¯è¦æƒ³ä¿æŒæ‰€æœ‰æœåŠ¡ç«¯çš„è¯ä¹¦æ¯”è¾ƒå›°éš¾ï¼Œå› æ­¤è¿™ç§æ–¹å¼åªé€‚ç”¨äºæŸäº›ç‚¹å¯¹ç‚¹çš„é«˜å®‰å…¨æ€§éœ€æ±‚çš„é€šä¿¡åœºåˆï¼Œå¯¹äºAndroid APPæ¥è¯´å¯èƒ½æ˜¯æŸç±»é«˜æœºå¯†æ€§çš„å†…ç½‘ä¸šåŠ¡æ‰ä¼šä½¿ç”¨è¿™ç§åŒå‘HTTPSè®¤è¯ã€‚\næ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªserveræ¨¡æ‹ŸHTTPSåŒå‘è®¤è¯ã€‚é¦–å…ˆé€šè¿‡ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆä¸€å¯¹è¯ä¹¦ã€‚\næœåŠ¡ç«¯è¯ä¹¦ï¼š\nopenssl genrsa -out server-key.key 2048\nopenssl req -new -out server-req.csr -key server-key.key\nopenssl x509 -req -in server-req.csr -out server-cert.cer -signkey server-key.key  -CAcreateserial -days 3650\nå®¢æˆ·ç«¯è¯ä¹¦ï¼š\nopenssl genrsa -out client-key.key 2048\nopenssl req -new -out client-req.csr -key client-key.key\nopenssl x509 -req -in client-req.csr -out client-cert.cer -signkey client-key.key -CAcreateserial -days 3650\nç”Ÿæˆå®¢æˆ·ç«¯å¸¦å¯†ç çš„p12è¯ä¹¦ï¼ˆè¿™æ­¥å¾ˆé‡è¦ï¼ŒåŒå‘è®¤è¯çš„è¯ï¼Œæµè§ˆå™¨è®¿é—®æ—¶å€™è¦å¯¼å…¥è¯¥è¯ä¹¦æ‰è¡Œï¼›å¯èƒ½æŸäº›Androidç³»ç»Ÿç‰ˆæœ¬è¯·æ±‚çš„æ—¶å€™éœ€è¦æŠŠå®ƒè½¬æˆbksæ¥è¯·æ±‚åŒå‘è®¤è¯ï¼Œæˆ‘çš„è®¾å¤‡ç”¨p12æ ¼å¼æ˜¯å¯è¡Œçš„ï¼‰ï¼š\nopenssl pkcs12 -export -clcerts -in client-cert.cer -inkey client-key.key -out client.p12\nè¿™é‡Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨æˆ‘ç”Ÿæˆå¥½çš„è¯ä¹¦ï¼Œéœ€è¦ä½¿ç”¨çš„è¯ä¹¦éƒ½åœ¨æºç certsç›®å½•ï¼Œæˆ‘çš„client.p12å¯†ç æ˜¯clientpasswordï¼Œserverè¯ä¹¦çš„å¯†ç æ˜¯serverpasswordã€‚\næœåŠ¡ç«¯ä»£ç ï¼š\nimport os\nimport sys\nimport ssl\nfrom http.server import HTTPServer, BaseHTTPRequestHandler\n\n#æœåŠ¡ç«¯è¯ä¹¦å’Œç§é’¥\nserverCerts = \"%s\\\\certs\\\\server-cert.cer\" % os.getcwd()\nserverKey = \"%s\\\\certs\\\\server-key.key\" % os.getcwd()\n#å®¢æˆ·ç«¯è¯ä¹¦\nclientCerts = \"%s\\\\certs\\\\client-cert.cer\" % os.getcwd()\n\nclass RequestHandler(BaseHTTPRequestHandler):\n    def _writeheaders(self):\n        self.send_response(200)\n        self.send_header('Content-type','text/plain')\n        self.end_headers()\n    def do_GET(self):\n        self._writeheaders()\n        self.wfile.write(\"OK\".encode(\"utf-8\"))\n\ndef main():\n    if (len(sys.argv) != 2):\n        port = 443\n    else:\n        port = sys.argv[1]\n    server_address = (\"0.0.0.0\", int(port))\n    server = HTTPServer(server_address, RequestHandler)\n    #åŒå‘æ ¡éªŒ\n    server.socket = ssl.wrap_socket(server.socket, certfile = serverCerts, server_side = True,  \n                               keyfile = serverKey,\n                               cert_reqs = ssl.CERT_REQUIRED,\n                               ca_certs = clientCerts,\n                               do_handshake_on_connect = False\n                               )\n    print(\"Starting server, listen at: %s:%s\" % server_address)\n    server.serve_forever()\n\nif __name__ == \"__main__\":\n    main()\nä½¿ç”¨pythonå¯åŠ¨serverï¼Œåœ¨windowsä¸Šè¿è¡Œå¯èƒ½æŠ¥é”™ï¼Œå¤§æ¦‚ç‡æ˜¯ç”±äºé˜²ç«å¢™ç¦æ­¢å¯ç”¨443ç«¯å£ã€‚\nOSError: [WinError 10013] ä»¥ä¸€ç§è®¿é—®æƒé™ä¸å…è®¸çš„æ–¹å¼åšäº†ä¸€ä¸ªè®¿é—®å¥—æ¥å­—çš„å°è¯•ã€‚\næ‰€ä»¥æˆ‘çš„æ–¹æ¡ˆæ˜¯åœ¨VMwareè™šæ‹Ÿæœºä¸­å¯åŠ¨è¿™ä¸ªserverï¼Œç„¶åå†å®¿ä¸»æœºé…ç½®hostsï¼Œæ·»åŠ ä¸»æœºåŸŸå\n&lt;è™šæ‹ŸæœºIP&gt; www.test.com\nå®¿ä¸»æœºå®‰è£…client.p12è¯ä¹¦ï¼ˆwindowsåŒå‡»å®‰è£…å¥½æ–¹ä¾¿ï¼‰ï¼Œç„¶åä½¿ç”¨æµè§ˆå™¨è®¿é—® www.test.com\n\nç„¶åä½ å°±é€‰è¿™ä¸ªï¼Œå°±å¯ä»¥è®¿é—®äº†ï¼Œè®¿é—®æˆåŠŸä¼šè¿”å›OKå­—æ ·çš„ç©ºç™½é¡µã€‚æœåŠ¡ç«¯æ—¥å¿—ï¼š\n\nå°½ç®¡è¾“å‡ºERRORä½†æ˜¯è¿˜æ˜¯è®¿é—®æˆåŠŸäº†ï¼Œé”™è¯¯åŸå› åº”è¯¥æ˜¯è¯ä¹¦ä¸ºè‡ªç­¾åè¯ä¹¦ï¼Œå®¢æˆ·ç«¯å¹¶ä¸æƒ³è®¤å¯è¿™ä¸ªæ²¡å¨˜çš„è¯ä¹¦ã€‚\nå¦‚æœä½ èƒ½åšåˆ°è¿™é‡Œè¯´æ˜ä½ å·²ç»æ­£ç¡®å®ç°äº†HTTPSåŒå‘è®¤è¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦åœ¨Android APPä¸Šå¤ç°ã€‚\n/*\n* åŒå‘æ ¡éªŒ\n* å› è¯¥æµ‹è¯•æ˜¯è‡ªå»ºæœåŠ¡å™¨å¹¶è‡ªç­¾åï¼Œæ‰€ä»¥éœ€è¦å…ˆåœ¨res/xml/network_security_configä¸­é…ç½®ä¿¡ä»»æœåŠ¡ç«¯è¯ä¹¦\n*/\nbutton_https_twoway.setOnClickListener(new View.OnClickListener() &#123;\n    @Override\n    public void onClick(View v) &#123;\n        new Thread(new Runnable()&#123;\n            @RequiresApi(api = Build.VERSION_CODES.N)\n            @Override\n            public void run() &#123;\n                X509TrustManager trustManager = null;\n                try &#123;\n                    TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n\n                    trustManagerFactory.init((KeyStore) null);\n                    TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();\n                    if (trustManagers.length != 1 || !(trustManagers[0] instanceof X509TrustManager)) &#123;\n                        throw new IllegalStateException(\"Unexpected default trust managers:\" + Arrays.toString(trustManagers));\n                    &#125;\n                    trustManager = (X509TrustManager) trustManagers[0];\n                &#125; catch (Exception e) &#123;\n                    e.printStackTrace();\n                &#125;\n                OkHttpClient mClient = client.newBuilder().sslSocketFactory(Objects.requireNonNull(ClientSSLSocketFactory.getSocketFactory(getApplicationContext())), Objects.requireNonNull(trustManager)).hostnameVerifier(new HostnameVerifier() &#123;\n                    @Override\n                    public boolean verify(String hostname, SSLSession session) &#123;\n                        HostnameVerifier hv = HttpsURLConnection.getDefaultHostnameVerifier();\n                        return hv.verify(\"www.test.com\", session);\n                    &#125;\n                &#125;).build();\n\n                Request request = new Request.Builder()\n                        .url(\"https://www.test.com/?q=TwoWayVerify\")\n                        .build();\n                Message message = new Message();\n                message.what = 1;\n                try (Response response = mClient.newCall(request).execute()) &#123;\n                    Log.d(\"TestReq\", response.peekBody(2048).string());\n                    message.obj = \"è¯·æ±‚æˆåŠŸ: \" + response.peekBody(2048).string();\n                    mHandler.sendMessage(message);\n                &#125; catch (IOException e) &#123;\n                    message.obj = e.getLocalizedMessage();\n                    mHandler.sendMessage(message);\n                    e.printStackTrace();\n                &#125;\n            &#125;\n        &#125;).start();\n    &#125;\n&#125;);\nnetwork_security_config.xml ä¸­æ·»åŠ é…ç½®ï¼š\n&lt;!--è¯ä¹¦æ ¡éªŒ-->\n&lt;domain-config>\n    &lt;domain includeSubdomains=\"true\">www.test.com&lt;/domain>\n    &lt;trust-anchors>\n        &lt;certificates src=\"@raw/server_cert\"\n            tools:ignore=\"NetworkSecurityConfig\" />\n    &lt;/trust-anchors>\n&lt;/domain-config>\nserver_certå°±æ˜¯server_cert.cerã€‚åˆ°è¿™é‡Œå®Œæˆäº†å®¢æˆ·ç«¯PINæœåŠ¡ç«¯è¯ä¹¦ï¼Œç„¶åè¿˜è¦åœ¨å®¢æˆ·ç«¯è¿™è¾¹å†™æŠŠå®¢æˆ·ç«¯è¯ä¹¦ç»™æœåŠ¡ç«¯éªŒè¯çš„ä»£ç é€»è¾‘ï¼Œå³ClientSSLSocketFactoryçš„å®ç°ï¼š\npublic class ClientSSLSocketFactory  &#123;\n    private static final String KEY_STORE_PASSWORD = \"clientpassword\"; // è¯ä¹¦å¯†ç \n    private static InputStream client_input;\n\n    public static SSLSocketFactory getSocketFactory(Context context) &#123;\n        try &#123;\n            //å®¢æˆ·ç«¯è¯ä¹¦\n            client_input = context.getResources().getAssets().open(\"client.p12\");\n            SSLContext sslContext = SSLContext.getInstance(\"TLS\");\n            KeyStore keyStore = KeyStore.getInstance(\"PKCS12\");\n            keyStore.load(client_input, KEY_STORE_PASSWORD.toCharArray());\n            KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\n            keyManagerFactory.init(keyStore, KEY_STORE_PASSWORD.toCharArray());\n            sslContext.init(keyManagerFactory.getKeyManagers(), null, new SecureRandom());\n            return sslContext.getSocketFactory();\n        &#125; catch (Exception e) &#123;\n            e.printStackTrace();\n        &#125; finally &#123;\n            try &#123;\n                client_input.close();\n            &#125; catch (IOException e) &#123;\n                e.printStackTrace();\n            &#125;\n        &#125;\n        return null;\n    &#125;\n&#125;\nä»£ç å†™å®Œäº†ï¼Œç°åœ¨æˆ‘ä»¬æ¥ç¼•ä¸€ç¼•ï¼š\nclient appåŒ…å«server-cert.cer å¯¹æœåŠ¡ç«¯è¯ä¹¦PINï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦éªŒè¯æœåŠ¡ç«¯è¯ä¹¦çš„ç­¾å‘å•ä½æ˜¯å¦ä¸ºåˆæ³•CA Issuerï¼Œä½†æ˜¯æˆ‘ä»¬çš„è¯ä¹¦æ˜¯è‡ªç­¾åçš„ï¼Œæ‰€ä»¥å°±ç®—æ˜¯ä¸ä½¿ç”¨ä»£ç†è¿˜æ˜¯ä¸èƒ½é€šè¿‡SSL PINNINGï¼Œå¤§æ¦‚ç‡æ˜¯æŠ¥é”™ï¼š\nCaused by: java.security.cert.CertificateException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.\næ‰€ä»¥ï¼Œä¸€å¼€å§‹æˆ‘ä»¬å°±éœ€è¦ç”¨frida hookå¯åŠ¨appï¼Œè¿™æ ·è·³è¿‡appç«¯çš„è¯ä¹¦ç»‘å®šï¼Œæ‰å¯ä»¥ç»§ç»­åé¢çš„æ­¥éª¤ã€‚\næ¥ä¸‹æ¥éœ€è¦é…ç½®ä»£ç†ï¼Œç»™ä»£ç†è½¯ä»¶åŠ å®¢æˆ·ç«¯è¯ä¹¦ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨BurpSuiteï¼ŒFidlleråœ¨è¿™ä¸ªåœºæ™¯ä¸èƒ½ç”¨ï¼š\n\né€‰æ‹©client.p12è¯ä¹¦æ–‡ä»¶ï¼Œå¦‚æœä½ ä½¿ç”¨æˆ‘ç”Ÿæˆçš„è¯ä¹¦æ–‡ä»¶å¯†ç æ˜¯clientpasswordã€‚\næ­¤æ—¶ç¡®è®¤ä»¥ä¸‹æ¡ä»¶ï¼š\n\n[x] æœåŠ¡ç«¯èƒ½é€šè¿‡PCæµè§ˆå™¨è®¿é—®\n[x] APP ä¸­ client.p12 è¯ä¹¦è£…è½½æˆåŠŸ\n[x] APP é€šè¿‡frida hook spawnæ¨¡å¼å¯åŠ¨\n[x] BurpSuite åŠ è½½ client.p12 è¯ä¹¦æˆåŠŸ\n[x] PC ä»£ç†è½¯ä»¶æœªå¼€å¯\n[x] PC hosts ä¸­å°† www.test.com åŸŸåå®šå‘åˆ°æ­£ç¡®IP\n\nç¡®å®šæ²¡é—®é¢˜ä»¥åï¼Œç‚¹å‡» HTTPS åŒå‘éªŒè¯ æŒ‰é’®è®¿é—®ã€‚\næœ€ç»ˆæ•ˆæœï¼š\n\nAPP é¡µé¢ä¸Šæ˜¾ç¤ºï¼šè¯·æ±‚æˆåŠŸ: 200\n\nç¢ç¢å¿µï¼š\nå¯ä»¥æŠŠserver-cert.cer è¿å¸¦ server-key.key å¯¼å‡ºä¸€ä»½å¯ä»¥è£…è½½çš„è¯ä¹¦ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠè¿™ä¸ªè¯ä¹¦åŠ åˆ°ç³»ç»Ÿè¯ä¹¦åˆ—è¡¨ä¸­ï¼Œåº”è¯¥å¯ä»¥é€šè¿‡SSL PINNINGã€‚\nå¦‚æœèƒ½æŠŠandroid ç³»ç»Ÿä¸­hostsåœ¨/system/etc/hosts æ˜¯åªè¯»æ–‡ä»¶ç³»ç»Ÿï¼Œæˆ‘remountä»¥åä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿå°±ä¼šå´©æºƒï¼Œéšæ„æ²¡æœ‰å°è¯•åœ¨androidæ‰‹æœºä¸Šç›´æ¥å°†åŸŸåå®šå‘åˆ°server ipåœ°å€ã€‚\nå¦‚æœä¸Šè¿°ä¸¤ç‚¹èƒ½æ­£ç¡®å®ç°ï¼Œé‚£å°±å¯ä»¥åœ¨å±€åŸŸç½‘ä¸‹ï¼Œå®Œæˆä¸€ä¸ªæ­£ç»çš„HTTPSåŒå‘è®¤è¯äº†ã€‚\n\n 0x7 WebView å¿½ç•¥è¯ä¹¦éªŒè¯\nWebView æ­£å¸¸åº”è¯¥åšæˆä¸€ä¸ªè·³è½¬é¡µçš„ï¼Œä½†æ˜¯æˆ‘ä¸ºäº†å›¾çœäº‹ï¼Œå°±åšäº†ä¸ªå°æ¡†åœ¨æœ€ä¸‹é¢ï¼Œåªæ˜¯ä¸ºäº†çœ‹æ˜¯å¦è®¿é—®æˆåŠŸã€‚\n/*\n* httpsåè®®\n* WebView ä¸è¿›è¡Œè¯ä¹¦æ ¡éªŒ\n*/\nbutton_webview_ssl_without_ca.setOnClickListener(new View.OnClickListener() &#123;\n    @Override\n    public void onClick(View v) &#123;\n        MyWebViewClient mWebViewClient = new MyWebViewClient();\n        mWebViewClient.setCheckflag(\"trustAllCerts\");\n        mWebview.setWebViewClient(mWebViewClient);\n        mWebview.loadUrl(\"https://www.baidu.com/?q=WebView_without_CAcheck\");\n    &#125;\n&#125;);\nä¸Šè¿°ä»£ç ç‰‡æ®µä¸­MyWebViewClientçš„å®ç°å¦‚ä¸‹ï¼š\nprivate class MyWebViewClient extends WebViewClient &#123;\n    private String checkflag=\"checkCerts\"; // æ˜¯å¦å¿½ç•¥è¯ä¹¦æ ¡éªŒ\n\n    public void setCheckflag(String checkflag) &#123;\n        this.checkflag = checkflag;\n    &#125;\n\n    @Override\n    public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) &#123;\n        if(\"trustAllCerts\".equals(checkflag))&#123;\n            handler.proceed();\n        &#125;else &#123;\n            handler.cancel();\n            Toast.makeText(MainActivity.this, \"è¯ä¹¦å¼‚å¸¸ï¼Œåœæ­¢è®¿é—®\", Toast.LENGTH_SHORT).show();\n        &#125;\n    &#125;\n&#125;\nè¿™æ ·å°±åšåˆ°äº†åœ¨é‡åˆ°SSLé”™è¯¯æ—¶ç»§ç»­è®¿é—®è€Œä¸­æ–­è®¿é—®ï¼Œä¹Ÿä¸å‘å‡ºä»»ä½•æé†’ã€‚è¿™æ ·åªéœ€è¦é…ç½®å¥½ä»£ç†ï¼Œç”šè‡³ä¸éœ€è¦å®‰è£…ä»£ç†è¯ä¹¦å°±å¯ä»¥æŠ“åŒ…äº†ã€‚\n 0x8 WebView ç³»ç»Ÿè¯ä¹¦éªŒè¯\nå¾ˆé—æ†¾ï¼ŒWebViewæ²¡æœ‰è‡ªå®šä¹‰SSL PINNINGçš„å®ç°æ–¹æ³•ï¼Œåªèƒ½é€šè¿‡network_security_config.xmlé…ç½®è¯ä¹¦ç»‘å®šã€‚ä½†è¿™ç¡®å®æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç°è±¡ï¼Œåœ¨æˆ‘çœ‹æ¥æŠŠå®‰å…¨ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘äº¤ç»™æ™®é€šå¼€å‘è€…ç®€ç›´å°±æ˜¯ç™½ç»™ï¼Œè¿™ä¹ˆåšåè€Œæ˜¯æå‡å®‰å…¨æ€§çš„æœ€ä½³å®è·µã€‚\n/*\n * httpsåè®®\n * WebView ä½¿ç”¨ç³»ç»Ÿè¯ä¹¦æ ¡éªŒ\n */\nbutton_webview_ssl_with_system_ca.setOnClickListener(new View.OnClickListener() &#123;\n    @Override\n    public void onClick(View v) &#123;\n        MyWebViewClient mWebViewClient = new MyWebViewClient();\n        mWebViewClient.setCheckflag(\"checkCerts\");\n        mWebview.setWebViewClient(mWebViewClient);\n        mWebview.loadUrl(\"https://www.baidu.com/?q=WebView_with_SystemCAcheck\");\n    &#125;\n&#125;);\nbaidu.comæœªåœ¨network_security_config.xmlä¸­é…ç½®è¯ä¹¦ç»‘å®šï¼Œæ‰€ä»¥è®¿é—® https://www.baidu.com/ æ—¶åªä½¿ç”¨ç³»ç»Ÿè¯ä¹¦è¿›è¡Œæ ¡éªŒã€‚\næ‰€ä»¥åªéœ€è¦å°†ä»£ç†è½¯ä»¶çš„è¯ä¹¦åŠ å…¥ç³»ç»Ÿè¯ä¹¦åˆ—è¡¨å°±å¯ä»¥æŠ“åŒ…è§£å¯†æ˜æ–‡äº†ã€‚\n 0x9 WebView SSL PINNING\n/*\n* httpsåè®® SSL PINNING WebView\n* é€šè¿‡network_security_config.xmlä¸­å®šä¹‰çš„è¯ä¹¦å’Œå¯†é’¥è¿›è¡Œç»‘å®š\n*/\nbutton_webview_ssl_pinning.setOnClickListener(new View.OnClickListener() &#123;\n    @Override\n    public void onClick(View v) &#123;\n        MyWebViewClient mWebViewClient = new MyWebViewClient();\n        mWebViewClient.setCheckflag(\"checkCerts\");\n        mWebview.setWebViewClient(mWebViewClient);\n        mWebview.loadUrl(\"https://www.sogou.com/web?query=WebView_SSLPinningXML\"); // è¯ä¹¦æ–‡ä»¶æ ¡éªŒ\n        // mWebview.loadUrl(\"https://www.zhihu.com/\"); // è¯ä¹¦å…¬é’¥æ ¡éªŒ\n    &#125;\n&#125;);\nsogou.comå’Œzhihu.coméƒ½é€šè¿‡network_security_config.xmlåšäº†è¯ä¹¦ç»‘å®šï¼Œæ‰€ä»¥ç›´æ¥è®¿é—®çš„è¿‡ç¨‹ä¸­å°±ä¼šè§¦å‘SSL PINNINGçš„éªŒè¯ã€‚\nWebView SSL PINNINGè¿˜ä¸èƒ½é€šè¿‡0x-1é™„å½•çš„hook ä»£ç unpinningï¼Œå¦‚æœä½ æœ‰èƒ½unpinningçš„æ–¹æ³•è¯·åŠ¡å¿…å‘Šè¯‰æˆ‘ã€‚\n 0x-1 é™„å½•\nFrida Hook Code:\nusage: frida -U -f com.example.httpstest -l ./frida_multiple_unpinning.js --no-pause\n/*  Android ssl certificate pinning bypass script for various methods\n\tby Maurizio Siddu modify by Ch3nYe\n\n\tRun with:\n\tfrida -U -f [APP_ID] -l frida_multiple_unpinning.js --no-pause\n*/\nsetTimeout(function() &#123;\n\tJava.perform(function () &#123;\n\t\tconsole.log('');\n\t\tconsole.log('======');\n\t\tconsole.log('[#] Android Bypass for various Certificate Pinning methods [#]');\n\t\tconsole.log('======');\n\n\n\t\tvar X509TrustManager = Java.use('javax.net.ssl.X509TrustManager');\n\t\tvar SSLContext = Java.use('javax.net.ssl.SSLContext');\n\n\n\t\t// TrustManager (Android &lt; 7) //\n\t\t////////////////////////////////\n\t\tvar TrustManager = Java.registerClass(&#123;\n\t\t\t// Implement a custom TrustManager\n\t\t\tname: 'dev.asd.test.TrustManager',\n\t\t\timplements: [X509TrustManager],\n\t\t\tmethods: &#123;\n\t\t\t\tcheckClientTrusted: function (chain, authType) &#123;&#125;,\n\t\t\t\tcheckServerTrusted: function (chain, authType) &#123;&#125;,\n\t\t\t\tgetAcceptedIssuers: function () &#123;return []; &#125;\n\t\t\t&#125;\n\t\t&#125;);\n\t\t// Prepare the TrustManager array to pass to SSLContext.init()\n\t\tvar TrustManagers = [TrustManager.$new()];\n\t\t// Get a handle on the init() on the SSLContext class\n\t\tvar SSLContext_init = SSLContext.init.overload(\n\t\t\t'[Ljavax.net.ssl.KeyManager;', '[Ljavax.net.ssl.TrustManager;', 'java.security.SecureRandom');\n\t\ttry &#123;\n\t\t\t// Override the init method, specifying the custom TrustManager\n\t\t\tSSLContext_init.implementation = function(keyManager, trustManager, secureRandom) &#123;\n\t\t\t\tconsole.log('[+] Bypassing Trustmanager (Android &lt; 7) request');\n\t\t\t\tSSLContext_init.call(this, keyManager, TrustManagers, secureRandom);\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] TrustManager (Android &lt; 7) pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// OkHTTPv3 (quadruple bypass) //\n\t\t/////////////////////////////////\n\t\ttry &#123;\n\t\t\t// Bypass OkHTTPv3 &#123;1&#125;\n\t\t\tvar okhttp3_Activity_1 = Java.use('okhttp3.CertificatePinner');\n\t\t\tokhttp3_Activity_1.check.overload('java.lang.String', 'java.util.List').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing OkHTTPv3 &#123;1&#125;: ' + a);\n\t\t\t\treturn true;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] OkHTTPv3 &#123;1&#125; pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\t\ttry &#123;\n\t\t\t// Bypass OkHTTPv3 &#123;2&#125;\n\t\t\t// This method of CertificatePinner.check could be found in some old Android app\n\t\t\tvar okhttp3_Activity_2 = Java.use('okhttp3.CertificatePinner');\n\t\t\tokhttp3_Activity_2.check.overload('java.lang.String', 'java.security.cert.Certificate').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing OkHTTPv3 &#123;2&#125;: ' + a);\n\t\t\t\treturn true;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] OkHTTPv3 &#123;2&#125; pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\t\ttry &#123;\n\t\t\t// Bypass OkHTTPv3 &#123;3&#125;\n\t\t\tvar okhttp3_Activity_3 = Java.use('okhttp3.CertificatePinner');\n\t\t\tokhttp3_Activity_3.check.overload('java.lang.String', '[Ljava.security.cert.Certificate;').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing OkHTTPv3 &#123;3&#125;: ' + a);\n\t\t\t\treturn true;\n\t\t\t&#125;;\n\t\t&#125; catch(err) &#123;\n\t\t\tconsole.log('[-] OkHTTPv3 &#123;3&#125; pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\t\ttry &#123;\n\t\t\t// Bypass OkHTTPv3 &#123;4&#125;\n\t\t\tvar okhttp3_Activity_4 = Java.use('okhttp3.CertificatePinner');\n\t\t\tokhttp3_Activity_4['check$okhttp'].implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing OkHTTPv3 &#123;4&#125;: ' + a);\n\t\t\t&#125;;\n\t\t&#125; catch(err) &#123;\n\t\t\tconsole.log('[-] OkHTTPv3 &#123;4&#125; pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// Trustkit (triple bypass) //\n\t\t//////////////////////////////\n\t\ttry &#123;\n\t\t\t// Bypass Trustkit &#123;1&#125;\n\t\t\tvar trustkit_Activity_1 = Java.use('com.datatheorem.android.trustkit.pinning.OkHostnameVerifier');\n\t\t\ttrustkit_Activity_1.verify.overload('java.lang.String', 'javax.net.ssl.SSLSession').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing Trustkit &#123;1&#125;: ' + a);\n\t\t\t\treturn true;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] Trustkit &#123;1&#125; pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\t\ttry &#123;\n\t\t\t// Bypass Trustkit &#123;2&#125;\n\t\t\tvar trustkit_Activity_2 = Java.use('com.datatheorem.android.trustkit.pinning.OkHostnameVerifier');\n\t\t\ttrustkit_Activity_2.verify.overload('java.lang.String', 'java.security.cert.X509Certificate').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing Trustkit &#123;2&#125;: ' + a);\n\t\t\t\treturn true;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] Trustkit &#123;2&#125; pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\t\ttry &#123;\n\t\t\t// Bypass Trustkit &#123;3&#125;\n\t\t\tvar trustkit_PinningTrustManager = Java.use('com.datatheorem.android.trustkit.pinning.PinningTrustManager');\n\t\t\ttrustkit_PinningTrustManager.checkServerTrusted.implementation = function () &#123;\n\t\t\t\tconsole.log('[+] Bypassing Trustkit &#123;3&#125;');\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] Trustkit &#123;3&#125; pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\n\t\t// TrustManagerImpl (Android > 7) //\n\t\t////////////////////////////////////\n\t\ttry &#123;\n\t\t\tvar TrustManagerImpl = Java.use('com.android.org.conscrypt.TrustManagerImpl');\n\t\t\tTrustManagerImpl.verifyChain.implementation = function (untrustedChain, trustAnchorChain, host, clientAuth, ocspData, tlsSctData) &#123;\n\t\t\t\tconsole.log('[+] Bypassing TrustManagerImpl (Android > 7): ' + host);\n\t\t\t\treturn untrustedChain;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] TrustManagerImpl (Android > 7) pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// Appcelerator Titanium //\n\t\t///////////////////////////\n\t\ttry &#123;\n\t\t\tvar appcelerator_PinningTrustManager = Java.use('appcelerator.https.PinningTrustManager');\n\t\t\tappcelerator_PinningTrustManager.checkServerTrusted.implementation = function () &#123;\n\t\t\t\tconsole.log('[+] Bypassing Appcelerator PinningTrustManager');\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] Appcelerator PinningTrustManager pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// OpenSSLSocketImpl Conscrypt //\n\t\t/////////////////////////////////\n\t\ttry &#123;\n\t\t\tvar OpenSSLSocketImpl = Java.use('com.android.org.conscrypt.OpenSSLSocketImpl');\n\t\t\tOpenSSLSocketImpl.verifyCertificateChain.implementation = function (certRefs, JavaObject, authMethod) &#123;\n\t\t\t\tconsole.log('[+] Bypassing OpenSSLSocketImpl Conscrypt');\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] OpenSSLSocketImpl Conscrypt pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// OpenSSLEngineSocketImpl Conscrypt //\n\t\t///////////////////////////////////////\n\t\ttry &#123;\n\t\t\tvar OpenSSLEngineSocketImpl_Activity = Java.use('com.android.org.conscrypt.OpenSSLEngineSocketImpl');\n\t\t\tOpenSSLSocketImpl_Activity.verifyCertificateChain.overload('[Ljava.lang.Long;', 'java.lang.String').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing OpenSSLEngineSocketImpl Conscrypt: ' + b);\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] OpenSSLEngineSocketImpl Conscrypt pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// OpenSSLSocketImpl Apache Harmony //\n\t\t//////////////////////////////////////\n\t\ttry &#123;\n\t\t\tvar OpenSSLSocketImpl_Harmony = Java.use('org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl');\n\t\t\tOpenSSLSocketImpl_Harmony.verifyCertificateChain.implementation = function (asn1DerEncodedCertificateChain, authMethod) &#123;\n\t\t\t\tconsole.log('[+] Bypassing OpenSSLSocketImpl Apache Harmony');\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] OpenSSLSocketImpl Apache Harmony pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// PhoneGap sslCertificateChecker (https://github.com/EddyVerbruggen/SSLCertificateChecker-PhoneGap-Plugin) //\n\t\t//////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\t\ttry &#123;\n\t\t\tvar phonegap_Activity = Java.use('nl.xservices.plugins.sslCertificateChecker');\n\t\t\tphonegap_Activity.execute.overload('java.lang.String', 'org.json.JSONArray', 'org.apache.cordova.CallbackContext').implementation = function (a, b, c) &#123;\n\t\t\t\tconsole.log('[+] Bypassing PhoneGap sslCertificateChecker: ' + a);\n\t\t\t\treturn true;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] PhoneGap sslCertificateChecker pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// IBM MobileFirst pinTrustedCertificatePublicKey (double bypass) //\n\t\t////////////////////////////////////////////////////////////////////\n\t\ttry &#123;\n\t\t\t// Bypass IBM MobileFirst &#123;1&#125;\n\t\t\tvar WLClient_Activity_1 = Java.use('com.worklight.wlclient.api.WLClient');\n\t\t\tWLClient_Activity_1.getInstance().pinTrustedCertificatePublicKey.overload('java.lang.String').implementation = function (cert) &#123;\n\t\t\t\tconsole.log('[+] Bypassing IBM MobileFirst pinTrustedCertificatePublicKey &#123;1&#125;: ' + cert);\n\t\t\t\treturn;\n\t\t\t&#125;;\n\t\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] IBM MobileFirst pinTrustedCertificatePublicKey &#123;1&#125; pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\t\ttry &#123;\n\t\t\t// Bypass IBM MobileFirst &#123;2&#125;\n\t\t\tvar WLClient_Activity_2 = Java.use('com.worklight.wlclient.api.WLClient');\n\t\t\tWLClient_Activity_2.getInstance().pinTrustedCertificatePublicKey.overload('[Ljava.lang.String;').implementation = function (cert) &#123;\n\t\t\t\tconsole.log('[+] Bypassing IBM MobileFirst pinTrustedCertificatePublicKey &#123;2&#125;: ' + cert);\n\t\t\t\treturn;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] IBM MobileFirst pinTrustedCertificatePublicKey &#123;2&#125; pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// IBM WorkLight (ancestor of MobileFirst) HostNameVerifierWithCertificatePinning (quadruple bypass) //\n\t\t///////////////////////////////////////////////////////////////////////////////////////////////////////\n\t\ttry &#123;\n\t\t\t// Bypass IBM WorkLight &#123;1&#125;\n\t\t\tvar worklight_Activity_1 = Java.use('com.worklight.wlclient.certificatepinning.HostNameVerifierWithCertificatePinning');\n\t\t\tworklight_Activity_1.verify.overload('java.lang.String', 'javax.net.ssl.SSLSocket').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing IBM WorkLight HostNameVerifierWithCertificatePinning &#123;1&#125;: ' + a);\n\t\t\t\treturn;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] IBM WorkLight HostNameVerifierWithCertificatePinning &#123;1&#125; pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\t\ttry &#123;\n\t\t\t// Bypass IBM WorkLight &#123;2&#125;\n\t\t\tvar worklight_Activity_2 = Java.use('com.worklight.wlclient.certificatepinning.HostNameVerifierWithCertificatePinning');\n\t\t\tworklight_Activity_2.verify.overload('java.lang.String', 'java.security.cert.X509Certificate').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing IBM WorkLight HostNameVerifierWithCertificatePinning &#123;2&#125;: ' + a);\n\t\t\t\treturn;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] IBM WorkLight HostNameVerifierWithCertificatePinning &#123;2&#125; pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\t\ttry &#123;\n\t\t\t// Bypass IBM WorkLight &#123;3&#125;\n\t\t\tvar worklight_Activity_3 = Java.use('com.worklight.wlclient.certificatepinning.HostNameVerifierWithCertificatePinning');\n\t\t\tworklight_Activity_3.verify.overload('java.lang.String', '[Ljava.lang.String;', '[Ljava.lang.String;').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing IBM WorkLight HostNameVerifierWithCertificatePinning &#123;3&#125;: ' + a);\n\t\t\t\treturn;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] IBM WorkLight HostNameVerifierWithCertificatePinning &#123;3&#125; pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\t\ttry &#123;\n\t\t\t// Bypass IBM WorkLight &#123;4&#125;\n\t\t\tvar worklight_Activity_4 = Java.use('com.worklight.wlclient.certificatepinning.HostNameVerifierWithCertificatePinning');\n\t\t\tworklight_Activity_4.verify.overload('java.lang.String', 'javax.net.ssl.SSLSession').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing IBM WorkLight HostNameVerifierWithCertificatePinning &#123;4&#125;: ' + a);\n\t\t\t\treturn true;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] IBM WorkLight HostNameVerifierWithCertificatePinning &#123;4&#125; pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// Conscrypt CertPinManager //\n\t\t//////////////////////////////\n\t\ttry &#123;\n\t\t\tvar conscrypt_CertPinManager_Activity = Java.use('com.android.org.conscrypt.CertPinManager');\n\t\t\tconscrypt_CertPinManager_Activity.isChainValid.overload('java.lang.String', 'java.util.List').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing Conscrypt CertPinManager: ' + a);\n\t\t\t\treturn true;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] Conscrypt CertPinManager pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// CWAC-Netsecurity (unofficial back-port pinner for Android&lt;4.2) CertPinManager //\n\t\t///////////////////////////////////////////////////////////////////////////////////\n\t\ttry &#123;\n\t\t\tvar cwac_CertPinManager_Activity = Java.use('com.commonsware.cwac.netsecurity.conscrypt.CertPinManager');\n\t\t\tcwac_CertPinManager_Activity.isChainValid.overload('java.lang.String', 'java.util.List').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing CWAC-Netsecurity CertPinManager: ' + a);\n\t\t\t\treturn true;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] CWAC-Netsecurity CertPinManager pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// Worklight Androidgap WLCertificatePinningPlugin //\n\t\t/////////////////////////////////////////////////////\n\t\ttry &#123;\n\t\t\tvar androidgap_WLCertificatePinningPlugin_Activity = Java.use('com.worklight.androidgap.plugin.WLCertificatePinningPlugin');\n\t\t\tandroidgap_WLCertificatePinningPlugin_Activity.execute.overload('java.lang.String', 'org.json.JSONArray', 'org.apache.cordova.CallbackContext').implementation = function (a, b, c) &#123;\n\t\t\t\tconsole.log('[+] Bypassing Worklight Androidgap WLCertificatePinningPlugin: ' + a);\n\t\t\t\treturn true;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] Worklight Androidgap WLCertificatePinningPlugin pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// Netty FingerprintTrustManagerFactory //\n\t\t//////////////////////////////////////////\n\t\ttry &#123;\n\t\t\tvar netty_FingerprintTrustManagerFactory = Java.use('io.netty.handler.ssl.util.FingerprintTrustManagerFactory');\n\t\t\t//NOTE: sometimes this below implementation could be useful\n\t\t\t//var netty_FingerprintTrustManagerFactory = Java.use('org.jboss.netty.handler.ssl.util.FingerprintTrustManagerFactory');\n\t\t\tnetty_FingerprintTrustManagerFactory.checkTrusted.implementation = function (type, chain) &#123;\n\t\t\t\tconsole.log('[+] Bypassing Netty FingerprintTrustManagerFactory');\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] Netty FingerprintTrustManagerFactory pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// Squareup CertificatePinner [OkHTTP&lt;v3] (double bypass) //\n\t\t////////////////////////////////////////////////////////////\n\t\ttry &#123;\n\t\t\t// Bypass Squareup CertificatePinner  &#123;1&#125;\n\t\t\tvar Squareup_CertificatePinner_Activity_1 = Java.use('com.squareup.okhttp.CertificatePinner');\n\t\t\tSquareup_CertificatePinner_Activity_1.check.overload('java.lang.String', 'java.security.cert.Certificate').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing Squareup CertificatePinner &#123;1&#125;: ' + a);\n\t\t\t\treturn;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] Squareup CertificatePinner &#123;1&#125; pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\t\ttry &#123;\n\t\t\t// Bypass Squareup CertificatePinner &#123;2&#125;\n\t\t\tvar Squareup_CertificatePinner_Activity_2 = Java.use('com.squareup.okhttp.CertificatePinner');\n\t\t\tSquareup_CertificatePinner_Activity_2.check.overload('java.lang.String', 'java.util.List').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing Squareup CertificatePinner &#123;2&#125;: ' + a);\n\t\t\t\treturn;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] Squareup CertificatePinner &#123;2&#125; pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// Squareup OkHostnameVerifier [OkHTTP v3] (double bypass) //\n\t\t/////////////////////////////////////////////////////////////\n\t\ttry &#123;\n\t\t\t// Bypass Squareup OkHostnameVerifier &#123;1&#125;\n\t\t\tvar Squareup_OkHostnameVerifier_Activity_1 = Java.use('com.squareup.okhttp.internal.tls.OkHostnameVerifier');\n\t\t\tSquareup_OkHostnameVerifier_Activity_1.verify.overload('java.lang.String', 'java.security.cert.X509Certificate').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing Squareup OkHostnameVerifier &#123;1&#125;: ' + a);\n\t\t\t\treturn true;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] Squareup OkHostnameVerifier pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\t\ttry &#123;\n\t\t\t// Bypass Squareup OkHostnameVerifier &#123;2&#125;\n\t\t\tvar Squareup_OkHostnameVerifier_Activity_2 = Java.use('com.squareup.okhttp.internal.tls.OkHostnameVerifier');\n\t\t\tSquareup_OkHostnameVerifier_Activity_2.verify.overload('java.lang.String', 'javax.net.ssl.SSLSession').implementation = function (a, b) &#123;\n\t\t\t\tconsole.log('[+] Bypassing Squareup OkHostnameVerifier &#123;2&#125;: ' + a);\n\t\t\t\treturn true;\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] Squareup OkHostnameVerifier pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// Android WebViewClient (double bypass) //\n\t\t///////////////////////////////////////////\n\t\ttry &#123;\n\t\t\t// Bypass WebViewClient &#123;1&#125; (deprecated from Android 6)\n\t\t\tvar AndroidWebViewClient_Activity_1 = Java.use('android.webkit.WebViewClient');\n\t\t\tAndroidWebViewClient_Activity_1.onReceivedSslError.overload('android.webkit.WebView', 'android.webkit.SslErrorHandler', 'android.net.http.SslError').implementation = function (obj1, obj2, obj3) &#123;\n\t\t\t\tconsole.log('[+] Bypassing Android WebViewClient &#123;1&#125;');\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] Android WebViewClient &#123;1&#125; pinner not found');\n\t\t\t//console.log(err)\n\t\t&#125;\n\t\ttry &#123;\n\t\t\t// Bypass WebViewClient &#123;2&#125;\n\t\t\tvar AndroidWebViewClient_Activity_2 = Java.use('android.webkit.WebViewClient');\n\t\t\tAndroidWebViewClient_Activity_2.onReceivedSslError.overload('android.webkit.WebView', 'android.webkit.WebResourceRequest', 'android.webkit.WebResourceError').implementation = function (obj1, obj2, obj3) &#123;\n\t\t\t\tconsole.log('[+] Bypassing Android WebViewClient &#123;2&#125;');\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] Android WebViewClient &#123;2&#125; pinner not found');\n\t\t\t//console.log(err)\n\t\t&#125;\n\n\n\n\t\t// Apache Cordova WebViewClient //\n\t\t//////////////////////////////////\n\t\ttry &#123;\n\t\t\tvar CordovaWebViewClient_Activity = Java.use('org.apache.cordova.CordovaWebViewClient');\n\t\t\tCordovaWebViewClient_Activity.onReceivedSslError.overload('android.webkit.WebView', 'android.webkit.SslErrorHandler', 'android.net.http.SslError').implementation = function (obj1, obj2, obj3) &#123;\n\t\t\t\tconsole.log('[+] Bypassing Apache Cordova WebViewClient');\n\t\t\t\tobj3.proceed();\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] Apache Cordova WebViewClient pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\n\t\t// Boye AbstractVerifier //\n\t\t///////////////////////////\n\t\ttry &#123;\n\t\t\tvar boye_AbstractVerifier = Java.use('ch.boye.httpclientandroidlib.conn.ssl.AbstractVerifier');\n\t\t\tboye_AbstractVerifier.verify.implementation = function (host, ssl) &#123;\n\t\t\t\tconsole.log('[+] Bypassing Boye AbstractVerifier: ' + host);\n\t\t\t&#125;;\n\t\t&#125; catch (err) &#123;\n\t\t\tconsole.log('[-] Boye AbstractVerifier pinner not found');\n\t\t\t//console.log(err);\n\t\t&#125;\n\n\n\t&#125;);\n\n&#125;, 0);\n\nå‚è€ƒæ–‡ç« ï¼š\nAndroid HTTPSé˜²æŠ“åŒ…ç­–ç•¥ä¸å¯¹æŠ—æ–¹æ³•æ€»ç»“\nAndroid : å…³äºHTTPSã€TLS/SSLè®¤è¯ä»¥åŠå®¢æˆ·ç«¯è¯ä¹¦å¯¼å…¥æ–¹æ³• - sheldon_blogs - åšå®¢å›­ (cnblogs.com)\n(19æ¡æ¶ˆæ¯) Android+Nginxä¸€æ­¥æ­¥é…ç½®httpså•å‘/åŒå‘è®¤è¯è¯·æ±‚_Dream Flyçš„ä¸“æ -CSDNåšå®¢\n","categories":["ç¬”è®°"],"tags":["Android","ç¬”è®°","æ€»ç»“","HTTPS","Hook","frida","SSL PINNING"]},{"title":"Note ã€ŠDeep learning for cyber security intrusion detection Approaches, datasets, and comparative studyã€‹","url":"https://ch3nye.top/Note-Deep-learning-for-cyber-security-intrusion-detection-Approaches-datasets-and-comparative-study/","content":" Deep learning for cyber security intrusion detection Approaches, datasets, and comparative study\n Section 1.æ‘˜è¦\næœ¬ç¯‡paperæ˜¯ä¸€ç¯‡å…³äºå…¥ä¾µæ£€æµ‹çš„ç»¼è¿°æ€§æ–‡ç« ï¼Œè®¾è®¡æ–¹æ³•ã€æ•°æ®é›†å’Œç ”ç©¶ç»¼è¿°ã€‚\nåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬åšäº†ç½‘ç»œå®‰å…¨å…¥ä¾µæ£€æµ‹æ·±åº¦å­¦ä¹ æ–¹æ³•çš„è°ƒæŸ¥ï¼Œä½¿ç”¨çš„æ•°æ®é›†ï¼Œå¹¶è¿›è¡Œæ¯”è¾ƒç ”ç©¶ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬æä¾›äº†åŸºäºæ·±åº¦å­¦ä¹ æ–¹æ³•çš„å…¥ä¾µæ£€æµ‹ç³»ç»Ÿçš„ç»¼è¿°ã€‚æ•°æ®é›†åœ¨å…¥ä¾µæ£€æµ‹ä¸­èµ·ç€é‡è¦çš„ä½œç”¨ï¼Œå› æ­¤æˆ‘ä»¬æè¿°äº†35ä¸ªæœ‰åçš„ç½‘ç»œæ•°æ®é›†ï¼ˆcyber datasetsï¼‰ï¼Œå¹¶å°†è¿™äº›æ•°æ®é›†åˆ†ä¸º7ç±»ï¼›network traffic-based dataset, electrical network-based dataset, internet traffic-based dataset, virtual private network-based dataset, android apps-based dataset, IoT traffic-based dataset, and internet-connected devices-based dataset. æˆ‘ä»¬åˆ†æäº†ä¸ƒç§æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼ŒåŒ…æ‹¬é€’å½’ç¥ç»ç½‘ç»œã€æ·±åº¦ç¥ç»ç½‘ç»œã€å—é™ç»å°”å…¹æ›¼æœºã€æ·±åº¦ä¿¡å¿µç½‘ç»œã€å·ç§¯ç¥ç»ç½‘ç»œã€æ·±åº¦ç»å°”å…¹æ›¼æœºå’Œæ·±åº¦è‡ªåŠ¨ç¼–ç å™¨ï¼ˆrecurrent neural networks, deep neural networks, restricted Boltzmann machines, deep belief networks, convolu- tional neural networks, deep Boltzmann machines, and deep autoencodersï¼‰ã€‚å¯¹äºæ¯ä¸ªæ¨¡å‹ï¼Œæˆ‘ä»¬åœ¨ä¸¤ä¸ªæ–°çš„çœŸå®æµé‡æ•°æ®é›†ï¼Œå³CSE-CIC-IDS2018æ•°æ®é›†å’ŒBot-IoTæ•°æ®é›†ä¸‹ç ”ç©¶äº†ä¸¤ç±»åˆ†ç±»(äºŒåˆ†ç±»å’Œå¤šåˆ†ç±»)çš„æ€§èƒ½ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä½¿ç”¨æœ€é‡è¦çš„æ€§èƒ½æŒ‡æ ‡ï¼Œå³å‡†ç¡®æ€§ã€è¯¯æŠ¥ç‡å’Œæ£€æµ‹ç‡æ¥è¯„ä¼°å‡ ç§æ–¹æ³•çš„æ•ˆç‡ã€‚\nä¸»è¦è´¡çŒ®ï¼š\n\nå›é¡¾äº†ä½¿ç”¨æœºå™¨å­¦ä¹ æŠ€æœ¯çš„å…¥ä¾µæ£€æµ‹ç³»ç»Ÿ\nåˆ†æäº†ä¸ƒä¸ªæ·±åº¦å­¦ä¹ æ–¹æ³•\nç ”ç©¶äº†æ¯ä¸ªæ·±åº¦å­¦ä¹ æ¨¡å‹åœ¨CSE-CIC-IDS2018 dataset &amp; Bot-IoT dataset ä¸¤ä¸ªæ•°æ®é›†ä¸Šçš„è¡¨ç°\næ¯”è¾ƒäº†æ·±åº¦å­¦ä¹ å’Œå››ä¸ªä¼ ç»Ÿæœºå™¨å­¦ä¹ æ–¹æ³•ï¼ˆNaive Bayes, Artificial neural network, SVM, Random Forestï¼‰\n\nè¯»è¿™ç¯‡paperçš„ä¸»è¦åŸå› å°±æ˜¯å®ƒæ˜¯ä½¿ç”¨æ·±åº¦å­¦ä¹ æ–¹æ³•æ„å»ºå…¥ä¾µæ£€æµ‹ç³»ç»Ÿè¿™ç±»æŠ€æœ¯çš„æ–¹æ³•ã€æ•°æ®é›†ç­‰å„é¡¹æŒ‡æ ‡çš„ç ”ç©¶ç»¼è¿°ï¼Œä¸”æ˜¯æ¯”è¾ƒæ–°çš„ï¼Œ2019å¹´çš„ç ”ç©¶2020å¹´å‘è¡¨åœ¨ã€ŠJournal of Information Security and Applicationsã€‹\n\n[ ]  å›½å†…ä¹Ÿæœ‰æ­¤ç±»ç»¼è¿°ï¼Œè¿˜æ˜¯2020å¹´ä¸­å›½ç§‘å­¦é™¢ä¿¡æ¯å·¥ç¨‹ç ”ç©¶æ‰€&amp;ä¸­å›½ç§‘å­¦é™¢å¤§å­¦ç½‘ç»œç©ºé—´å®‰å…¨å­¦é™¢çš„è€å¸ˆå‘è¡¨çš„ï¼šç½‘ç»œå…¥ä¾µæ£€æµ‹æŠ€æœ¯ç»¼è¿° è¹‡è¯—å©• 10.19363/J.cnki.cn10-1380/tn.2020.07.07\n\n Section 3.åŸºäºæ·±åº¦å­¦ä¹ çš„å…¥ä¾µæ£€æµ‹ç³»ç»Ÿ\nç›®å‰æ¥è¯´æœ‰åç§ç”¨äºå…¥ä¾µæ£€æµ‹çš„æ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼š(1) deep neural network, (2) feed forward deep neural network, (3) recurrent neural network, (4) convolutional neural network, (5) restricted Boltzmann machine, (6) deep belief network, (7) deep auto-encoder, (8) deep migration learning, (9) self-taught learning, and (10) replicator neural network\næ¥ä¸‹æ¥é’ˆå¯¹æ¯ç§æ–¹æ³•å„åˆ—ä¸¾äº†å‡ ç¯‡ç ”ç©¶è®ºæ–‡ï¼Œç®€å•å™è¿°äº†å„ä¸ªç ”ç©¶çš„å‡†ç¡®ç‡ã€‚è¿™é‡Œæˆ‘ä¸æ‰“ç®—ç¿»è¯‘ä¸€éè¿™äº›æ–¹æ³•è®°ä¸‹æ¥åªé™„ä¸€å¼ è¡¨ï¼Œæƒ³çœ‹çš„è¯å¯ä»¥æ–‡æœ«è¿æ¥çœ‹åŸæ–‡ã€‚æˆ‘åªæƒ³çœ‹çœ‹éƒ½æœ‰é‚£äº›æ•°æ®é›†ã€‚\n\n Section 4.å…¬å¼€æ•°æ®é›†\n\n\n4.1 Network traffic-based dataset\n4.1.1 DARPA 1998 dataset\nè¯¥æ•°æ®é›†åŸºäºç½‘ç»œæµé‡å’Œå®¡è®¡æ—¥å¿—ï¼Œæœ€æ—©äº1998äºŒæœˆå…¬å¼€å¯ç”¨ã€‚training dataåŒ…å«ä¸ƒå‘¨çš„ç½‘ç»œæ”»å‡»æµé‡ï¼Œtesting dataåŒ…å«ä¸¤å‘¨ã€‚æ ¹æ®Sharafaldinç­‰äººçš„ç ”ç©¶ï¼Œè¯¥æ•°æ®é›†ä¸èƒ½ä»£è¡¨çœŸå®ä¸–ç•Œçš„ç½‘ç»œæµé‡ã€‚\n4.1.2 KDD Cup 1999 dataset\nKDD CUP 99 æ•°æ®é›†ä½¿ç”¨çš„æ˜¯DARPA 1998 DataSetçš„åŸå§‹æ•°æ®ï¼Œåœ¨DARPA 98æ•°æ®é›†çš„åŸºç¡€ä¸Šè¿›è¡Œäº†é¢„å¤„ç†ï¼Œæå–å‡ºäº†ä»¥â€œè¿æ¥â€ä¸ºå•ä½çš„ä¸€æ¡æ¡è®°å½•ã€‚\n4.1.3 NSL-KDD dataset\næ­¤æ•°æ®é›†ç”±Tavallaeeç­‰äººæå‡ºï¼Œä¸ºäº†è§£å†³KDD CUP 99æ•°æ®é›†å›ºæœ‰çš„ä¸€äº›é—®é¢˜ã€‚ä¸åŸå§‹KDDæ•°æ®é›†ç›¸æ¯”ï¼Œï¼ˆ1ï¼‰ä¸åŒ…å«å†—ä½™è®°å½•ï¼Œï¼ˆ2ï¼‰ä¸åŒ…å«é‡å¤çš„è®°å½•\n4.1.4 UNSW-NB15 dataset\nè¯¥æ•°æ®é›†ç”±å››ä¸ªå·¥å…·åˆ›å»ºï¼šIXIAPerfect-Stormtool,Tcpdumptool,Argustool,andBro-IDStool. è¿™äº›å·¥å…·ç”¨äºåˆ›å»ºæ”»å‡»ï¼ŒåŒ…æ‹¬DoSï¼Œæ¼æ´åˆ©ç”¨ï¼Œé€šç”¨ï¼Œä¾¦å¯Ÿï¼ŒShellcodeå’Œè •è™«ã€‚\n4.1.5 DEFCON dataset\nè¯¥æ•°æ®é›†æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼šDEFCON-8(2000)andDEFCON-10(2002). DEFCON-8 åŒ…å«ç«¯å£æ‰«æå’ŒæŒ‡é’ˆæº¢å‡ºï¼ŒDEFCON-10 åŒ…å«æ¢æµ‹å’Œéæ¢æµ‹æ”»å‡»(e.g.,badpacket,portsscan,portsweeps,etc.).\n4.1.6 CAIDAs dataset\nè¯¥æ•°æ®é›†ç”±Center of Applied Internet Data Analysis å‘å¸ƒï¼ŒåŒ…å«ä¸åŒæ•°æ®é›†ï¼šCAIDA DDOS, CAIDA Internet traces 2016, RSDos Attack Metadata(2018-09). å…·ä½“æ¥è¯´ï¼ŒCAIDA DDOS åŒ…å«ä¸€å°æ—¶çš„DDosæµé‡ï¼Œæ•°æ®é›†è¢«åˆ†å‰²ä¸º5minä¸ºå•ä½çš„pcapæ–‡ä»¶ã€‚RSDos Attack Metadata(2018-09) ä¸­åŒ…å«éšæœºspoofed denial-of-service æ”»å‡»æµé‡ã€‚\n4.1.7 CDX dataset\næ­¤æ•°æ®é›†æ˜¯ç”±Homoliakç­‰äººåœ¨network warfare competitionæœŸé—´åˆ›å»ºçš„ï¼Œå…¶ä¸­åŒ…å«ç½‘ç»œæœåŠ¡ä¸Šçš„æ¶æ„å’Œåˆæ³•TCPé€šä¿¡ã€‚è¿™äº›ç½‘ç»œæœåŠ¡å­˜åœ¨æŒ‡é’ˆæº¢å‡ºçš„å¯åˆ©ç”¨æ¼æ´ï¼Œè¿™äº›æœåŠ¡åŒ…æ‹¬ï¼šPostfix Email FreeBSD, Apache Web Server Fedora 10, OpenFire Chat FreeBSD, and BIND DNS FreeBSD.\n4.1.8 KYOTO dataset\nè¯¥æ•°æ®é›†åŸºäºçœŸå®çš„ä¸‰å¹´æµé‡æ•°æ®ï¼Œè¿™äº›æ•°æ®æ˜¯ä½¿ç”¨å››ä¸ªå·¥å…·åˆ›å»ºçš„ï¼šhoneypots, darknet sensors, e-mail server and web crawler.\n4.1.9 TWENTE dataset\nè¯¥æ•°æ®é›†æ˜¯åœ¨6å¤©çš„æ—¶é—´å†…æ”¶é›†çš„ï¼ŒåŒ…å«14.2Mæµé‡å’Œ7.6Mè­¦å‘Šã€‚TWENTEæ•°æ®é›†ä½¿ç”¨ä¸‰ä¸ªIPåè®®ï¼ˆåŒ…æ‹¬UDPï¼ŒTCPå’ŒICMPï¼‰è¡¨ç¤ºä¸€ä¸ªå­åˆ†ç±»ã€‚\n4.1.10 CIC Dos dataset\nè¯¥æ•°æ®é›†åŒ…å«ä½¿ç”¨ä¸åŒå·¥å…·çš„4ç§ä¸åŒç±»å‹çš„åº”ç”¨å±‚DoSæ”»å‡»ã€‚CICDoSæ•°æ®é›†ç”±Jaziç­‰äººæå‡ºã€‚high-volume HTTP attacks, low-volume HTTP attack\n4.1.11 CICDS2017 dataset\nè¯¥æ•°æ®é›†åŒ…å«ä»2017å¹´7æœˆ3æ—¥æ˜ŸæœŸä¸€åˆ°2017å¹´7æœˆ7æ—¥æ˜ŸæœŸäº”æ•è·çš„æ•°æ®.CICIDS2017æ•°æ®é›†ç”±Sharafaldinç­‰äººæå‡ºã€‚å…¶ä¸­æ”»å‡»æ‰‹æ®µåŒ…æ‹¬ï¼šBruteForceSSH,DoS,Heartbleed,WebAttack,Infiltration,BotnetandDDoS,andBruteForceFTP.\n4.1.12 CSE-CIC-IDS2018dataset\nè¯¥æ•°æ®é›†ç”±Communications Security Establishment(CSE)&amp;the Canadian Institute(CIC)è”åˆå‘å¸ƒï¼ŒåŒ…å«7ç§æ”»å‡»ï¼šHeartbleed,Brute-force,DoS,DDoS,Webattacks,Botnet,andinfiltration.\n4.1.13 ISCX dataset\nè¯¥æ•°æ®é›†ç”±Shiraviç­‰äººåˆ›å»ºï¼Œä¸ƒå¤©çš„ç½‘ç»œæ´»åŠ¨ï¼ˆåŒ…å«æ¶æ„å’Œæ­£å¸¸æµé‡ï¼‰ç»„æˆã€‚æ¶æ„æ´»åŠ¨åŒ…æ‹¬ï¼šï¼ˆ1ï¼‰å†…ç½‘æ¸—é€ï¼ˆ2ï¼‰HTTPæ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆ3ï¼‰åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆ4ï¼‰çˆ†ç ´SSHã€‚åœ¨ISCX datasetä¸­æœ‰ä¸¤ç§é€šç”¨çš„profilesç±»åˆ«ï¼š(1)è¯•å›¾ä»¥æ˜ç¡®çš„æ–¹å¼æè¿°æ”»å‡»åœºæ™¯çš„profiles (2)å°è£…æå–çš„ç‰¹å®šå®ä½“çš„æ•°å­¦åˆ†å¸ƒæˆ–è¡Œä¸ºçš„profiles\n4.1.14 ADFA2013 dataset\nè¯¥æ•°æ®é›†ç”±Creechå’ŒHuæå‡ºï¼ŒåŒ…å«äº†æ”»å‡»Ubuntuç³»ç»Ÿçš„å‘é‡å’Œpayloadï¼špassword brute-force, add new super user, java based meterpreter, linux meterpreter payload, and C100 Webshell. æ•°æ®é›†ç»“æ„åŒ…å«ä¸‰ç§æ•°æ®ç±»å‹ï¼Œå³(1)æ­£å¸¸training data (2)æ­£å¸¸validation data (3)attack data. æ­£å¸¸è®­ç»ƒæ•°æ®åŒ…å«4373æ¡traceã€‚æ­£å¸¸éªŒè¯æ•°æ®åŒ…å«833æ¡traceã€‚æ”»å‡»æ•°æ®åŒ…å«æ¯ä¸ªvector çš„10æ¬¡æ”»å‡»ã€‚\n4.2 Electrical network-based dataset\n4.2.1 LBNL dataset\nè¯¥æ•°æ®é›†æ˜¯ä½¿ç”¨uPMUåœ¨åŠ³ä¼¦æ–¯Â·ä¼¯å…‹åˆ©å›½å®¶å®éªŒå®¤ç”µæ°”ç½‘ç»œæ”¶é›†åˆ°çš„ã€‚uPMUæ˜¯å¾®ç›¸é‡æµ‹é‡å•å…ƒï¼Œå®ƒäº§ç”Ÿ12ä¸ª120èµ«å…¹çš„é«˜ç²¾åº¦å€¼æµï¼Œæ—¶é—´æˆ³ç²¾ç¡®åˆ°100çº³ç§’ã€‚è¯¥æ•°æ®é›†å¯ç”¨äºå¾®ç”µç½‘åŒæ­¥ä»¥åŠè´Ÿè½½å’Œåˆ†å¸ƒå¼å‘ç”µçš„è¡¨å¾ã€‚\n4.2.2 ICS cyber attack dataset\nè¯¥æ•°æ®é›†åŒ…å«äº”ä¸ªä¸åŒçš„æ•°æ®é›†ï¼š(1)Power System Datasets, (2) Gas Pipeline Datasets, (3) Energy Management System Data, (4) New Gas Pipeline (5) Gas Pipeline and Water Storage Tank.\nç”µåŠ›ç³»ç»ŸåŒ…å«37ä¸ªåœºæ™¯ï¼Œåˆ†ä¸º8ä¸ªè‡ªç„¶äº‹ä»¶ï¼Œ1ä¸ªæ— äº‹ä»¶å’Œ28ä¸ªæ”»å‡»äº‹ä»¶ã€‚æœ‰ä¸‰ç±»æ”»å‡»ï¼ŒåŒ…æ‹¬:(1)ç»§ç”µå™¨è®¾ç½®æ”¹å˜ï¼Œ(2)è¿œç¨‹è·³é—¸å‘½ä»¤æ³¨å…¥ï¼Œ(3)æ•°æ®æ³¨å…¥ã€‚è¿™äº›æ•°æ®é›†å¯ç”¨äºå·¥ä¸šæ§åˆ¶ç³»ç»Ÿä¸­çš„è®¡ç®—æœºå®‰å…¨å…¥ä¾µæ£€æµ‹\n4.2.3 IEEE 300-bus power test system\nè¯¥æ•°æ®é›†æä¾›äº†ç”µç½‘çš„æ‹“æ‰‘å’Œç”µæ°”ç»“æ„ï¼Œç‰¹åˆ«ç”¨äºæ£€æµ‹æ™ºèƒ½ç”µç½‘ä¸­çš„è™šå‡æ•°æ®æ³¨å…¥æ”»å‡»ã€‚ç³»ç»Ÿæœ‰411ä¸ªåˆ†æ”¯ï¼Œå¹³å‡åº¦(&lt; k &gt;)ä¸º2.74ã€‚å…³äºè¿™ä¸ªæ ‡å‡†æµ‹è¯•ç³»ç»Ÿçš„æ›´å¤šç»†èŠ‚ï¼Œæˆ‘ä»¬è¯·è¯»è€…å‚è€ƒHinesç­‰äººçš„å·¥ä½œã€‚IEEE 300-busç”µæºæµ‹è¯•ç³»ç»Ÿå·²ç”¨äºä¸ç½‘ç»œæ”»å‡»åˆ†ç±»ç›¸å…³çš„å¤šé¡¹å·¥ä½œ\n4.3 Internet traffic-based dataset\n4.3.1 UMASS dataset\nè¯¥æ•°æ®é›†åŒ…å«ä¸¤ä¸ªä¸åŒçš„æ•°æ®é›†ï¼š(1)strong flow correlation attacks (2)OneSwarmä¸Šçš„ç®€å•å®šæ—¶æ”»å‡»\nå‰è€…æ˜¯ä½¿ç”¨torå®¢æˆ·ç«¯åœ¨torç½‘ç»œä¸Šè®¿é—®top 50,0 0 0 Alexa websitesã€‚åè€…å…·ä½“æ¥è¯´æœ‰ä¸‰ç§ç‹¬ç«‹çš„æ”»å‡»ï¼ŒåŒ…æ‹¬åŸºäºæ—¶é—´ä¿¡æ¯çš„æ”»å‡»ã€åŸºäºæŸ¥è¯¢è½¬å‘çš„æ”»å‡»å’ŒåŸºäºTCPååé‡çš„æ”»å‡»\n4.3.2 Tor-nonTor dataset\nè¯¥æ•°æ®é›†ç”±Lashkariç­‰äººæå‡ºï¼ŒåŒ…å«æ¥è‡ªè¶…è¿‡18ç§å¾ˆå…·ä»£è¡¨æ€§åº”ç”¨ç¨‹åºçš„8ç§æµé‡ç±»å‹(VOIP, chat, audio-streaming, video-streaming, mail, P2P, browsing, and File Transfer)ã€‚\n4.3.3 URL dataset\nè¯¥æ•°æ®é›†ç”±Mamunç­‰äººæå‡ºï¼ŒåŒ…å«5ç§ç±»å‹çš„urlï¼š1)Benign URLs 2)Spam URLs 3) Phishing URLs 4) Malware URLs 5) Defacement URLs.\n4.3.4 MAWI dataset\nè¯¥æ•°æ®é›†åŒ…å«æ•°æ®åŒ…æ•è·å½¢å¼çš„æ¯æ—¥æµé‡ï¼Œè¯¥æ•°æ®åŒ…æ•è·è‡ªæ—¥æœ¬å’Œç¾å›½ä¹‹é—´çš„è·¨å¤ªå¹³æ´‹é“¾è·¯ã€‚\n4.4 Virtual private network-based dataset\n4.4.1. VPN-nonVPN dataset\nè¯¥æ•°æ®é›†ç”±Draper-Gilæå‡ºï¼Œå®ƒæ•è·äº†æ™®é€šä¼šè¯å’Œé€šè¿‡è™šæ‹Ÿä¸“ç”¨ç½‘ç»œ(VPN)çš„ä¼šè¯ã€‚å…·ä½“æ¥è¯´ï¼Œè¯¥æ•°æ®é›†ç”±æ ‡è®°çš„ç½‘ç»œæµé‡ç»„æˆï¼ŒåŒ…æ‹¬æµè§ˆå™¨(ä¾‹å¦‚Firefox)ã€ç”µå­é‚®ä»¶(ä¾‹å¦‚SMPTS)ã€èŠå¤©(ä¾‹å¦‚Skype)ã€æµåª’ä½“(ä¾‹å¦‚Youtube)ã€æ–‡ä»¶ä¼ è¾“(ä¾‹å¦‚SFTP)ã€ç½‘ç»œç”µè¯(ä¾‹å¦‚Hangoutsè¯­éŸ³å‘¼å«)å’ŒP2P(Uutrent)ã€‚\n4.5 Android apps-based dataset\n4.5.1 Android validation dataset\næ•°æ®é›†ç”±72ä¸ªåŸå§‹åº”ç”¨ç»„æˆï¼Œå…·æœ‰ä»¥ä¸‹æ“ä½œ:æ›¿æ¢å›¾æ ‡ã€æ›¿æ¢æ–‡ä»¶ã€æ’å…¥åƒåœ¾ä»£ç ã€ä¸åŒå¯¹é½ã€æ’å…¥åƒåœ¾æ–‡ä»¶å’Œæ›¿æ¢å­—ç¬¦ä¸²ï¼ŒAndroid validation datasetç”±Gonzalezç­‰äººæå‡ºï¼Œä¸ºäº†æ‰¾å¯»ä¸Šè¿°è¿™äº›android appä¹‹é—´çš„å…³ç³»ã€‚ä»–ä»¬æå–äº†ä¸¤ä¸ªç‰¹å¾ï¼Œå³ï¼Œ(1)å…ƒä¿¡æ¯(ä¼´éšæ¯ä¸ª.apkæ–‡ä»¶) (2) N -grams(è¡¨å¾.dexæ–‡ä»¶)ã€‚æ­¤å¤–ï¼ŒAndroid validizationæ•°æ®é›†å¼•å…¥äº†ä»¥ä¸‹å®šä¹‰ï¼Œæ¦‚è¿°äº†åº”ç”¨ç¨‹åºä¹‹é—´çš„å…³ç³»:åŒèƒèƒã€å…„å¼Ÿå§å¦¹ã€å‡å…„å¼Ÿå§å¦¹ã€ç»§å…„å¼Ÿå§å¦¹ã€å‡ç»§å…„å¼Ÿå§å¦¹å’Œè¡¨å…„å¼Ÿå§å¦¹ã€‚åŸå§‹åŸºæœ¬é›†åŒ…å«72ä¸ªåº”ç”¨ç¨‹åºï¼Œè€ŒåŒ…å«è½¬æ¢åº”ç”¨ç¨‹åºçš„å®Œæ•´é›†åŒ…å«792ä¸ªåº”ç”¨ç¨‹åºã€‚\n4.5.2 Android adware dataset\nè¯¥æ•°æ®é›†ç”±190ä¸ªåº”ç”¨ç¨‹åºç”Ÿæˆï¼Œåˆ†ä¸ºä¸‰ç±»ï¼ŒåŒ…æ‹¬å¹¿å‘Šè½¯ä»¶(250ä¸ªåº”ç”¨ç¨‹åº)ã€ä¸€èˆ¬æ¶æ„è½¯ä»¶(150ä¸ªåº”ç”¨ç¨‹åº)å’Œè‰¯æ€§è½¯ä»¶(1500ä¸ªåº”ç”¨ç¨‹åº)ã€‚\n4.5.3. Android malware dataset\nè¯¥æ•°æ®é›†åä¸ºCICAndMal2017ï¼ŒåŒ…å«æ¶æ„è½¯ä»¶å’Œè‰¯æ€§åº”ç”¨ç¨‹åºï¼Œè¿™äº›æ ·æœ¬æ¥è‡ªè°·æ­Œåº”ç”¨å¸‚åœº2015-2017ã€‚CICAndMal2017æ•°æ®é›†ç”±Shiraviç­‰äººæå‡ºã€‚\n4.6 IoT traffic-based dataset\n4.6.1. Bot-IoT dataset\næ­¤æ•°æ®é›†åŒ…å«72,000,000ä»¥ä¸Šçš„è®°å½•ï¼ŒåŒ…å«çš„æ”»å‡»æ‰‹æ®µæœ‰ï¼šDDoS, DoS, OS and Service Scan, Keylogging and Data exfiltration attacks. Bot-IoTæ•°æ®é›†æ˜¯ç”±Koroniotisç­‰äººæå‡ºï¼Œåœ¨IoTå®‰å…¨é¢†åŸŸè¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„æ•°æ®é›†ã€‚ä½œè€…ä½¿ç”¨èŠ‚ç‚¹çº¢å·¥å…·æ¨¡æ‹Ÿç‰©è”ç½‘è®¾å¤‡çš„ç½‘ç»œè¡Œä¸ºã€‚ä¸ºäº†è¿æ¥æœºå™¨åˆ°æœºå™¨(M2M)çš„é€šä¿¡ï¼Œæ•°æ®é›†ä½¿ç”¨äº†MQTTåè®®ï¼Œè¿™æ˜¯ä¸€ç§è½»é‡çº§çš„é€šä¿¡åè®®ã€‚è¯•éªŒå°ä¸­ä½¿ç”¨äº†äº”ç§ç‰©è”ç½‘åœºæ™¯ï¼Œå³æ°”è±¡ç«™ã€æ™ºèƒ½å†°ç®±ã€è¿åŠ¨æ¿€æ´»ç¯ã€è¿œç¨‹æ¿€æ´»è½¦åº“é—¨å’Œæ™ºèƒ½æ’æ¸©å™¨ã€‚\n4.7 Internet-connected devices-based dataset\n4.7.1 Botnet dataset\nè¯¥æ•°æ®é›†ç”±Beigiç­‰äººæå‡ºï¼Œåˆ†ä¸ºè®­ç»ƒæ•°æ®é›†å’Œæµ‹è¯•æ•°æ®é›†ï¼Œåˆ†åˆ«åŒ…æ‹¬7ç§å’Œ16ç§åƒµå°¸ç½‘ç»œã€‚åƒµå°¸ç½‘ç»œç±»å‹åœ¨è®­ç»ƒæ•°æ®é›†ä¸­çš„åˆ†å¸ƒåŒ…æ‹¬ï¼šNeris, Rbot, Virut, NSIS, SMTP Spam, Zeus, and Zeus control (C&amp;C). æµ‹è¯•æ•°æ®é›†ä¸­åƒµå°¸ç½‘ç»œç±»å‹çš„åˆ†å¸ƒåŒ…æ‹¬ï¼šNeris, Rbot, Menti, Sogouâ€¦ etc. åƒµå°¸ç½‘ç»œæ‹“æ‰‘å¯ä»¥æ˜¯é›†ä¸­å¼ã€åˆ†å¸ƒå¼(ä¾‹å¦‚P2P)æˆ–éšæœºåŒ–çš„ã€‚ä½¿ç”¨çš„åŠŸèƒ½åˆ†ä¸ºå››ç»„ï¼Œå³åŸºäºå­—èŠ‚ã€åŸºäºæ•°æ®åŒ…ã€åŸºäºæ—¶é—´å’ŒåŸºäºè¡Œä¸ºã€‚\nè®ºæ–‡é“¾æ¥ï¼šhttps://www.sciencedirect.com/science/article/abs/pii/S2214212619305046\n","categories":["è®ºæ–‡é˜…è¯»"],"tags":["è®ºæ–‡","ç¬”è®°","Deep-Learning","Intrusion-Detection"]},{"title":"ã€å®æˆ˜ã€‘æŸå“©è§†é¢‘appçš„crackå°è¯•","url":"https://ch3nye.top/ã€å®æˆ˜ã€‘æŸå“©è§†é¢‘appçš„crackå°è¯•/","content":" ã€å®æˆ˜ã€‘æŸå“©è§†é¢‘appçš„crackå°è¯•\nè¿™ä¸ªappå·²ç»è¢«å¤§å“¥ä»¬ç©çƒ‚äº†ï¼Œæˆ‘è¿™ç®—æ˜¯å¤ç°å§ï¼Œéšæ‰‹è®°å½•ä¸€ä¸‹ï¼Œç•™ä½œä»¥åæ¸©ä¹ ã€‚\nç›®çš„ï¼š\n\nåˆ†æä¼ è¾“å­—æ®µçš„ç”Ÿæˆæ–¹å¼å’Œä½œç”¨\nå°è¯•ç ´è§£éƒ¨åˆ†VIPåŠŸèƒ½\n\n ä»æµé‡åˆ†æå¼€å§‹\nFiddler æŠ“åŒ…ï¼Œå‰åŠéƒ¨åˆ†è¿˜æ­£å¸¸ï¼Œä»ç‚¹å¼€è§†é¢‘å¼€å§‹appåœ¨å‘localhost:1500è¯·æ±‚ï¼ŒFiddler å°±ä¼šè¿”å›ï¼š502 Fiddler - Connection Failed ã€‚æˆ‘çŒœappè§£æè§†é¢‘çš„ä¸šåŠ¡é€»è¾‘æ˜¯å‘æœ¬åœ°1500ç«¯å£å¯åŠ¨çš„æœåŠ¡å‘å‡ºç±»ä¼¼ä»¥ä¸‹è¯·æ±‚ï¼Œé€šè¿‡æœ¬åœ°æœåŠ¡è§£æè§†é¢‘åœ°å€ï¼Œæˆ–å‘æœåŠ¡å™¨å‘å‡ºåŠ å¯†è§£æè¯·æ±‚ã€‚\nGET http:&#x2F;&#x2F;localhost:1500&#x2F;video?mode&#x3D;online&amp;video_id&#x3D;100981&amp;quality&#x3D;qvga&amp;type&#x3D;.m3u8 HTTP&#x2F;1.1\nUser-Agent: com.xxxxxxxx.other.MyApplication&#x2F;2.3.1-2820 (Linux;Android 10) ExoPlayerLib&#x2F;2.11.1\nAccept-Encoding: gzip\nHost: localhost:1500\nConnection: Keep-Alive\næ‰‹æœºWIFIä»£ç†è®¾ç½®localhostä¸èµ°ä»£ç†å°±å¯ä»¥åœ¨ä»£ç†ä¸‹çœ‹è§†é¢‘äº†ï¼Œä½†æ˜¯è¿™æ ·ä½ ä¹ŸæŠ“ä¸åˆ°ä¸Šè¿°è¯·æ±‚åŒ…äº†ã€‚\nappå¯åŠ¨è¿‡ç¨‹ä¸­çš„æµé‡ï¼š\n\n\n\næ¥å£\nè¯·æ±‚æ–¹å¼\næäº¤å†…å®¹\næ•°æ®ç±»å‹\n(çŒœæµ‹)ç”¨é€”\n\n\n\n\nhost_xxxxxxxx.txt\nGET\nä»…æœ‰httpå¤´hash/lang/platform/time/userid/usertype/version\nå¯†æ–‡ï¼ˆåç»­å·²ç ´è§£ï¼‰\nå¯èƒ½æ˜¯è¿”å›èƒ½æ­£å¸¸è®¿é—®çš„ä¸»æœºç¾¤\n\n\n/speed.html\nGET\nåŒä¸Š\næ˜æ–‡&quot;ok&quot;\næµ‹é€Ÿ\n\n\n/v1/initial\nGET\nåŒä¸Š\næ˜æ–‡\næ–°ç‰ˆæœ¬æ£€æµ‹+é¦–é¡µå¼¹çª—+è§†é¢‘åˆ†ç±»\n\n\n/v1/register/token\nPOST\ndevice_id/platform/key/universal_id/lang\næ˜æ–‡\næ³¨å†Œæ–°ç”¨æˆ·ï¼Œè¿”å›tokenå’Œuid\n\n\n/v1/user/info\nPOST\ntoken/lang/download_amount\næ˜æ–‡\næŸ¥è¯¢å¹¶è¿”å›ç”¨æˆ·ä¿¡æ¯\n\n\n/v1/firstpurchase\nGET\nä»…æœ‰httpå¤´\næ˜æ–‡\nä¹°VIPæ‚¬æµ®å¹¿å‘Š\n\n\n\nç¬¬ä¸€æ¬¡å¯åŠ¨appæ—¶å‘æœåŠ¡å™¨è¯·æ±‚tokenæ ·ä¾‹ï¼šeyJ1c2VyX2lkIjo0NDk5NzQ3MjYsImxhc3Rsb2dpbiI6MTYxNDMxMTg0OX0.1ea8cfc740dc64f1b0a70adc0357be61.234d8d0043d2b0368285c605f974769d5eea56017ef0fcd116b613cf\nç¨åå†åˆ†ætoken\n è§†é¢‘è¯·æ±‚æµé‡è§£å¯†\n\n\n\nè¯·æ±‚è§†é¢‘ä¿¡æ¯ï¼Œè¿”å›jsonæ ¼å¼æ•°æ®ä¸­video_urlå­—æ®µåŒ…å«m3u8è§†é¢‘åœ°å€\n\n\næ¼”å‘˜ä¿¡æ¯\n\n\nå‘æœåŠ¡å™¨è¯·æ±‚è§†é¢‘ä¿¡æ¯ï¼Œè¿”å›æ•°æ®æ˜¯åŠ å¯†çš„ï¼Œä¼°è®¡è¿™å°±æ˜¯m3u8çš„ä¿¡æ¯\n\n\n5.éƒ½æ˜¯æœ¬åœ°è¯·æ±‚ï¼ŒçŒœæµ‹æ˜¯è¯·æ±‚è§£æå…·ä½“m3u8è§†é¢‘çš„æ•°æ®\nä¸Šå›¾æ˜¯å…·ä½“è§†é¢‘æ•°æ®ä¿¡æ¯å¯ä»¥çœ‹åˆ°æ˜¯è¯·æ±‚m3u8çš„åˆ‡ç‰‡tsæ–‡ä»¶ã€‚\n\n\nåœ¨media/240/xxxx.m3u8?token=â€¦çš„å“åº”æŠ¥æ–‡ä¸­æœ‰ä¸€ä¸ªX-VTagå°†æ˜¯è§£å¯†è¯¥æŠ¥æ–‡çš„é‡è¦ä¿¡æ¯ä¹‹ä¸€\na.b.i.a.h.aéƒ¨åˆ†ä»£ç ï¼š\nString a4 = tVar.mo12446a(\"X-VTag\");\nif (a4 == null || (i = StringExt.m2783i(a4)) == null) &#123;\n    str = null;\n&#125; else &#123;\n    str = i.substring(8, 24);\n    C7509i.m26507a((Object) str, \"(this as java.lang.Strinâ€¦ing(startIndex, endIndex)\");\n&#125;\nResponseBody h0Var2 = a.f18837g;\nMediaType c = h0Var2 != null ? h0Var2.mo12175c() : null;\nif (!(str == null || c == null)) &#123;\n    ResponseBody a5 = ResponseBody.m17589a(c, EncodeUtility.abaababa(CipherClient.decodeKey(), str, a2));\n    C5325g0.C5326a aVar2 = new C5325g0.C5326a(a);\n    aVar2.f18849g = a5;\n    C5325g0 a6 = aVar2.mo12169a();\n    C7509i.m26507a((Object) a6, \"response.newBuilder().body(body).build()\");\n    return a6;\n&#125;\nå»çœ‹ä¸€ä¸‹StringExt.m2783iå‡½æ•°ï¼Œè™½ç„¶ä»–è™šæ™ƒä½ è¯´ä»–è°ƒç”¨AESç®—æ³•ï¼Œä½†æ˜¯ä½ ä»”ç»†çœ‹çœ‹å°±å‘ç°æ ¹æœ¬ä¸ç¬¦åˆAESçš„è°ƒç”¨ã€‚å†å»çœ‹çœ‹AESEncryptor.HASH_ALGORITHMï¼Œå°±çŸ¥é“ä»–åº”è¯¥æ˜¯åšmd5æ•£åˆ—çš„ã€‚æ‰€ä»¥ç»¼åˆè¿™ä¸¤ä¸ªå‡½æ•°çš„åˆ†æå¾—åˆ°ï¼š\n\n\n\nå˜é‡\nè§£æ\nå€¼\n\n\n\n\na4\nheadersä¸­çš„X-VTagçš„å€¼\n958893970\n\n\ni\nmd5(a4)\ne10adc3949ba59abbe56e057f20f883e\n\n\nstr\ni.substring(8, 24)\n49ba59abbe56e057\n\n\n\næ¥ç€çœ‹CipherClient.decodeKey()ï¼Œä½ ä¼šå‘ç°è¿™ä¸ªç±»é‡Œé¢å…¨æ˜¯ç”¨å¸¸é‡ç”Ÿæˆçš„è¿”å›å€¼ï¼š\npackage net.idik.lib.cipher.p620so;\n\n/* renamed from: net.idik.lib.cipher.so.CipherClient */\npublic final class CipherClient &#123;\n    public CipherClient() throws IllegalAccessException &#123;\n        throw new IllegalAccessException();\n    &#125;\n    public static final String apiHashKey() &#123;\n        return CipherCore.get(\"d708e111b5db90af74ef84ff4d5e647b\");\n    &#125;\n    public static final String decodeKey() &#123;\n        return CipherCore.get(\"aa01bdd83d0f12833ddaea2f2af22865\");\n    &#125;\n    public static final String encodeType() &#123;\n        return CipherCore.get(\"e82b6153b4ea2340333e2254c3553d03\");\n    &#125;\n    public static final String everIv() &#123;\n        return CipherCore.get(\"c5b287eb7ee64e90ed015bac470f4b6b\");\n    &#125;\n    ...\n&#125;\nè¿½è¸ªä¸‹å»å‘ç°è¿½åˆ°nativeç¨‹åºé‡Œäº†ï¼šCipherClient.decodeKey()â€“&gt;CipherCore.get()â€“&gt;native CipherCore.getString()\nnativeåº“ä¸ºï¼šcipher-lib\nä¸å¤ªæƒ³çœ‹nativeé€»è¾‘äº†ï¼Œä¸ºäº†å¿«é€Ÿçœäº‹å°±ç”¨frida hookè¿”å›å€¼çœ‹çœ‹ï¼š\nfunction main()&#123;\n    Java.perform(function()&#123;\n        var CipherCore &#x3D; Java.use(&quot;net.idik.lib.cipher.so.CipherCore&quot;)\n        var stringClass &#x3D; Java.use(&quot;java.lang.String&quot;)\n        var str &#x3D; stringClass.$new(&quot;aa01bdd83d0f12833ddaea2f2af22865&quot;)\n        var res &#x3D; CipherCore.get(str)\n        console.log(&quot;getString(&quot;+str+&quot;):&quot;+res)\n    &#125;)\n&#125;\nsetImmediate(main);\n\né€šè¿‡ä¸Šè¿°æ–¹å¼æˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸ªCipherClientæ–¹æ³•çš„è¿”å›å€¼éƒ½å¾—åˆ°ï¼š\n\n\n\nå‡½æ•°\nå¸¸é‡\nè·å–åˆ°çš„ç»“æœ\n\n\n\n\napiHashKey\nd708e111b5db90af74ef84ff4d5e647b\n666wInteriscommingyoUshouldNotpassmotherfuckeR=\n\n\nccToken\n810d903a88254b27c643e0bc471d406a\n2cfbf0f5d358406b96ab9fd1aa59ae89\n\n\ndecodeKey\naa01bdd83d0f12833ddaea2f2af22865\n6e561ccd4aade2fed458d4da61e76770\n\n\nencodeType\ne82b6153b4ea2340333e2254c3553d03\napp\n\n\neverIv\nc5b287eb7ee64e90ed015bac470f4b6b\nBakinsodaIgotbakinsoda\n\n\neverKey\n0d7cb519eb483a597549f7f466b189bc\niaMiNloveWithtHecoCo\n\n\nhostIv\n6cf9e96524081ac264dc31982d0be319\n5e8bf1f958f56644\n\n\nhostKey\n51cdba173d412fdecec3e78572cde731\nf332ae8214fcbb0d98f8626f123459b4\n\n\nimageDecodeIv\n9e1add49a87568f90c43e418e7370287\nE01EDE6331D37AFCC7BE05597D654D22\n\n\nimageDecodeKey\na8ae2831cbea74111bc5116ba81ec191\nB2F3842866F9583D1ECE61C4E055C255\n\n\nregisterKey\n951eeb6b19b70177fd25706aa620edcf\nggh%*KXOqk882jO&amp;Z3Sz43dQGTfD4y6SC&amp;9z\n\n\n\næˆ‘ä»¬å†ç»§ç»­å›å»çœ‹a.b.i.a.h.aï¼Œç°åœ¨å°±çŸ¥é“EncodeUtility.abaababa(CipherClient.decodeKey(), str, a2)åº”è¯¥æ˜¯ï¼š\nEncodeUtility.abaababa(&quot;6e561ccd4aade2fed458d4da61e76770&quot;, &quot;49ba59abbe56e057&quot;, a2)\nçŒœæµ‹ a2 åº”è¯¥æ˜¯å¯†æ–‡\nEncodeUtility.abaababa æ˜¯ a.b.j.v3.a çš„åˆ«åï¼Œé˜¿å·´é˜¿å·´æ˜¯æˆ‘ä¸å°å¿ƒèµ·çš„ï¼Œå¿˜è®°åŸæ¥jadxç»™çš„å‘½åæ˜¯å•¥äº†ã€‚å…¶å®šä¹‰å¦‚ä¸‹\n/* renamed from: a */\npublic static String abaababa(String str, String str2, String str3) throws UnsupportedEncodingException, NoSuchAlgorithmException, NoSuchPaddingException, IllegalBlockSizeException, BadPaddingException, InvalidAlgorithmParameterException, InvalidKeyException &#123;\n\treturn m3078a(new IvParameterSpec(str2.getBytes(\"UTF-8\")), new SecretKeySpec(m3076a(str).getBytes(\"UTF-8\"), \"AES\"), str3);\n&#125;\n\nm3078aæ–¹æ³•ï¼Œçœ‹ä¸€ä¸‹å®ƒçš„å£°æ˜å°±çŸ¥é“ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯AESè§£å¯†ï¼Œè¯¥å‡½æ•°ä¸­æœ‰å£°æ˜AESæ¨¡å¼ï¼šAESEncryptor.AES_MODE==&quot;AES/CBC/PKCS5Padding&quot; ï¼Œè¿™é‡Œå°±ä¸å±•ç¤ºäº†ã€‚\nm3076aæ–¹æ³•ï¼ŒåŒæ ·çœ‹ä¸‹å£°æ˜ä¹Ÿå®¹æ˜“çŸ¥é“æ˜¯MD5æ•£åˆ—ã€‚\nç°åœ¨åŸºæœ¬å°±ç¡®å®šäº†abaababaæ–¹æ³•æœ€åä¸€ä¸ªå‚æ•°å°±åº”è¯¥æ˜¯å¯†æ–‡ï¼Œå‚æ•°2æ˜¯åç§»ï¼Œå‚æ•°1çš„md5å€¼æ˜¯å¯†é’¥ï¼Œæ‰§è¡Œçš„æ˜¯AESè§£å¯†ã€‚\nmd5('6e561ccd4aade2fed458d4da61e76770')=ae52f7ffd2dd66ba5743bb180188b991\nç»¼ä¸Šæ‰€è¿°ï¼š\n\nGETè¯·æ±‚ /media/240/xxxxxx.m3u8?token=â€¦å‘æœåŠ¡å™¨è¯·æ±‚è§†é¢‘ä¿¡æ¯ï¼Œè¿”å›æ•°æ®æ˜¯æ˜¯m3u8çš„ä¿¡æ¯ï¼Œä¸”ç»è¿‡AESåŠ å¯†çš„\nAESæ¨¡å¼CBCï¼Œpaddingæ¨¡å¼PKCS5Padding\nKEYï¼šae52f7ffd2dd66ba5743bb180188b991\nIVï¼š49ba59abbe56e057\n\n\nè§£å¯†æˆåŠŸã€‚\nåˆ°è¿™é‡Œè§†é¢‘è¯·æ±‚ä¿¡æ¯çš„è§£å¯†å°±å®Œæˆäº†ï¼Œæˆ‘ä»¬æ¥å¤ç›˜ä¸€ä¸‹æ€è€ƒä¸‹å¼€å‘è€…æ˜¯æ€ä¹ˆè€ƒè™‘è§†é¢‘ä¿¡æ¯åŠ å¯†çš„ï¼š\næ¯ä¸ªè§†é¢‘éƒ½æœ‰ç‹¬ç‰¹çš„x-vtagï¼Œmd5(x-vtag).substring(8,24) ä½œä¸ºAESåç§»é‡IVï¼Œappçš„javaä»£ç ä¸­çš„ä¸€ä¸ªå¸¸é‡é€šè¿‡native ä»£ç å¾—åˆ°å¦ä¸€ä¸ªå¸¸é‡ä½œä¸ºAESçš„å¯†é’¥KEYã€‚KEYæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½çŸ¥é“ï¼Œx-vtagæœåŠ¡å™¨æ˜æ–‡å‘ç»™å®¢æˆ·ç«¯ã€‚æœåŠ¡ç«¯é€šè¿‡AESåŠ å¯†m3u8ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯AESè§£å¯†ï¼Œè·å–m3u8ä¿¡æ¯ã€‚\nè§†é¢‘è¯·æ±‚æ­¥éª¤ï¼š\n\nç”¨æˆ·å‘æœåŠ¡å™¨Aè¯·æ±‚æŸä¸ªè§†é¢‘çš„ä¿¡æ¯ï¼š/v1/video/info/&lt;è§†é¢‘id&gt;?token=... å¾—åˆ°JSONæ ¼å¼è§†é¢‘ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¼”å‘˜ï¼Œç±»åˆ«ï¼Œè§†é¢‘TAGï¼Œå°é¢å›¾ç‰‡è¿æ¥ï¼Œvideo_url ç­‰ä¿¡æ¯\nç”¨æˆ·å‘æœåŠ¡å™¨Bè¯·æ±‚æŸä¸ªm3u8è§†é¢‘çš„åª’ä½“ä¿¡æ¯ï¼Œå°±æ˜¯ä½¿ç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„video_urlï¼š/media/240/100981.m3u8?token=... å®¢æˆ·ç«¯å¾—åˆ°AESåŠ å¯†çš„m3u8è§†é¢‘çš„åª’ä½“ä¿¡æ¯\nAPPè§£å¯†ä¸Šè¿°ä¿¡æ¯å¾—åˆ°è§†é¢‘çš„æµåª’ä½“æºï¼Œå‘æœ¬åœ°è¯·æ±‚ï¼šlocalhost:1500/video?mode=online&amp;video_id=100981&amp;quality=qvga&amp;type=.m3u8 è¿™ä¸€æ­¥çœŸæ­£çš„æ„ä¹‰ç°åœ¨è¿˜æ²¡å¼„æ‡‚\næ ¹æ®m3u8è§£ç å¾—åˆ°çš„åˆ†ç‰‡ä¿¡æ¯ï¼Œå‘å­˜å‚¨è§†é¢‘æ•°æ®çš„æœåŠ¡å™¨è¯·æ±‚æµåª’ä½“\n\næ€»çš„æ¥è¯´åˆ°è¿™é‡Œå°±åˆ†æå®Œäº†m3u8è§†é¢‘è·å–çš„æµç¨‹å’Œæœºå¯†è§†é¢‘ä¿¡æ¯çš„æ–¹æ³•äº†ï¼Œä½†æ˜¯è¦é€šè¿‡m3u8ä¿¡æ¯æƒ³è·å–è§†é¢‘ä½ éœ€è¦é™„åŠ è¯·æ±‚å¤´ã€‚\n m3u8è¯·æ±‚å¤´\nå‘ç°åœ¨è¯·æ±‚m3u8å¯†æ–‡çš„æ—¶å€™ä¼šç»å¸¸æç¤ºæ‹’ç»è®¿é—®access denied\nçœ‹ä¸€ä¸‹è¯·æ±‚å¤´ä¸­çš„å‚æ•°\n\n\n\nå‚æ•°\nå€¼\næ¥æº\n\n\n\n\nversion\n2.3.1\nappç‰ˆæœ¬\n\n\nplatform\nAndroid\nå®‰å“å¹³å°\n\n\ntime\n1614354694\nå½“å‰åä½æ—¶é—´æˆ³\n\n\nuserid\nYaoIcnqMTOWO\næ¯æ¬¡ä¸ä¸€ï¼Œå¯èƒ½æ˜¯éšæœºå€¼\n\n\nhash\ne6195dd2a9cf277f480f797222823542\nå¾…æ¢ç´¢\n\n\n\njadxä¸­æœä¸€ä¸‹&quot;hash&quot;å­—ç¬¦ä¸²ï¼Œå°±èƒ½æ‰¾åˆ°å…¶å®šä¹‰ï¼Œåœ¨a.b.a.v.f.e()ä¸­ï¼š\n\nString i = StringExt.m2783i(a + value + valueOf + str + str2);\n\nä¹‹å‰æˆ‘ä»¬å·²ç»å¾—å‡ºStringExt.m2783iæ˜¯md5çš„æ“ä½œã€‚\nä¾æ¬¡çœ‹a + value + valueOf + str + str2\na = versionçš„å€¼ = APPç‰ˆæœ¬å·\nvalue = platformçš„å€¼ = å¹³å°Android\nvalueOf = timeçš„å€¼ = æ—¶é—´æˆ³\nstr = userIdçš„å€¼ = ä»\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\"å–éšæœºå­—ç¬¦\nstr2 = CipherClient.apiHashKey() = \"666wInteriscommingyoUshouldNotpassmotherfuckeR=\"\næ‰€ä»¥i = md5(appç‰ˆæœ¬ + å¹³å°Android + æ—¶é—´æˆ³ + éšæœºuserId + \"666wInteriscommingyoUshouldNotpassmotherfuckeR=\")\nä¸Šè¿°æ¡ˆä¾‹ä¸­ i = md5(\"2.3.1Android1614354694YaoIcnqMTOWO666wInteriscommingyoUshouldNotpassmotherfuckeR=\") = \"e6195dd2a9cf277f480f797222823542\"\nå¦å¤–ï¼Œè¿™ä¸ªhashåœ¨å…¶ä»–æŠ¥å¤´ä¹Ÿå‡ºç°äº†ï¼Œç”Ÿæˆæ–¹å¼åº”è¯¥éƒ½æ˜¯ä¸€æ ·çš„ã€‚\n Hostä¿¡æ¯decrypt\nè¿˜è®°å¾—æœ€å¼€å§‹æµé‡åˆ†æçš„æ—¶å€™ï¼ŒAPPå¯åŠ¨æ—¶æœ‰è¯·æ±‚host_xxxxxxxx.txtè¿™ä¸ªæ–‡ä»¶å—ï¼Œæˆ‘ä»¬å·²ç»è·å¾—äº†hostIVå’ŒhostKeyï¼Œå¯ä»¥AESè§£å¯†è¯¥txtæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«å„ç±»ä¸šåŠ¡çš„domain urlï¼š\n0xxxxxxx6dd4x26xxxxf0axxfx8&#123;\n    &quot;api&quot;: [ \n        &#123;\n            &quot;url&quot;: &quot;https:&#x2F;&#x2F;xxxxxxxxxx&quot;\n    ],\n    &quot;img&quot;: [\n        \n        &#123;\n            &quot;url&quot;: &quot;https:&#x2F;&#x2F;xxxxxxxxxxxx&quot;\n        &#125;, \n    ],\n    &quot;stream&quot;: [ \n        &#123;\n            &quot;url&quot;: &quot;https:&#x2F;&#x2F;xxxxxxxxxxxxx&quot;\n        &#125;,\n     ],\n    &quot;cash&quot;:[\n        &#123;\n            &quot;url&quot;: &quot;https:&#x2F;&#x2F;xxxxxxxxxx&quot;\n        &#125;,\n    ],\n    &quot;pwaredirect&quot;: [\n        &#123;\n            &quot;url&quot;: &quot;https:&#x2F;&#x2F;xxxxxxxx&quot;\n        &#125;\n    ]&#125;50xxxxxxxxxxxxxxxxxxxxxdc\n VIP?\næ®å¤§ä½¬åˆ†æï¼Œä¿®æ”¹ä¸¤ä¸ªå‡½æ•°å°±å¯ä»¥åœ¨æœ¬åœ°å®ç°vipï¼Œå¯ä»¥ä½¿ç”¨å€é€Ÿå’Œåˆ‡æ¢çº¿è·¯ï¼Œä½†æ˜¯é«˜æ¸…æ’­æ”¾è¿™ç§åŠŸèƒ½å¤§æ¦‚æ˜¯æœ‰äº‘ç«¯éªŒè¯æ‰€ä»¥æ²¡åŠæ³•ã€‚å…·ä½“æ¥è¯´éœ€è¦ä¿®æ”¹ï¼šgetExpiry()å’ŒgetLevel()ä¸¤ä¸ªå‡½æ•°\næˆ‘ä½¿ç”¨fridaåšhookéªŒè¯äº†ï¼Œç¡®å®å¯ä»¥ï¼Œè„šæœ¬å’Œå‘½ä»¤å¦‚ä¸‹ï¼š\nfrida -U -f com.xxxxxxxx --no-paus -l .\\hookvip.js\n//æ‰“å°å‚æ•°ã€è¿”å›å€¼\nfunction main()&#123;\n    Java.perform(function()&#123;\n        Java.use(\"xxx.xxxxxxxx.model.response.ResponseUserInfo\").getExpiry.overload().implementation = function ()&#123;\n            console.log(\"[+]function getExpiry() was called\");\n            return 0x746a6480;\n        &#125;\n        Java.use(\"xxx.xxxxxxxx.model.response.ResponseUserInfo\").getLevel.overload().implementation = function ()&#123;\n            console.log(\"[+]function getLevel() was called\");\n            return 2;\n        &#125;\n    &#125;)\n&#125;\nsetImmediate(main);\n\nå¦å¤–æä¸€å˜´ï¼Œå‰æ®µæ—¶é—´è¿™ä¸ªåº”ç”¨çš„webç«¯ç¨‹åºï¼Œå¦‚æœåœ¨è¯·æ±‚tokençš„æ—¶å€™ä¿®æ”¹æäº¤çš„å‚æ•°pwa-ckv=1ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªå°Šå®¹vipçš„tokenã€‚è¿™ä¸ªbugå·²ç»è¢«ä¿®å¤äº†ã€‚\n\n Rigisterè¯·æ±‚å­—æ®µç”Ÿæˆ\nå¤šæ¬¡æŠ“æ³¨å†Œè¯·æ±‚æŠ¥æ–‡ï¼š\n&#123;&quot;device_id&quot;:&quot;ce793c3e-e720-4e0d-9e56-fddcd033d862&quot;,&quot;platform&quot;:&quot;Android&quot;,&quot;key&quot;:&quot;3d5f7885e4d45c17c547a0f2bc9d499a3799ce69d616f8504091df86e55d360a&quot;,&quot;universal_id&quot;:&quot;884885A46B10364A5AF184395FF4DD93&quot;,&quot;lang&quot;:&quot;cn&quot;&#125;\ntoken&#x3D;eyJ1c2VyX2lkIjo0NDk5NzQ3MjYsImxhc3Rsb2dpbiI6MTYxNDY2MTAzN30.49f3f134c8f1d86478c5dd6cb0fbaeb8.7caa99b911ce29125339244676fd7c17a713f7117502dbc6948bc56c\n\n&#123;&quot;device_id&quot;:&quot;a591b897-0c35-4514-9a69-2c61ad40e812&quot;,&quot;platform&quot;:&quot;Android&quot;,&quot;key&quot;:&quot;631a809db87dae8c038ca63252cc3c67b0755a7c2a23ea180dca7deba768c3c0&quot;,&quot;universal_id&quot;:&quot;884885A46B10364A5AF184395FF4DD93&quot;,&quot;lang&quot;:&quot;cn&quot;&#125;\ntoken&#x3D;eyJ1c2VyX2lkIjo0NDk5NzQ3MjYsImxhc3Rsb2dpbiI6MTYxNDY2MzQ0MX0.aae1a8f7a517e7802e00b36832a98475.fe497a9da7ae1867dcc50f151305d2989d3e7e7ca670b0e076226d2f\n\n&#123;&quot;device_id&quot;:&quot;8b12ee47-199a-4f0d-9937-1509d84eac3f&quot;,&quot;platform&quot;:&quot;Android&quot;,&quot;key&quot;:&quot;fde31433a815946f4debbd4d961d3c23142b5b41a60367f9bab7055afc988de2&quot;,&quot;universal_id&quot;:&quot;884885A46B10364A5AF184395FF4DD93&quot;,&quot;lang&quot;:&quot;cn&quot;&#125;\ntoken&#x3D;eyJ1c2VyX2lkIjo0NDk5NzQ3MjYsImxhc3Rsb2dpbiI6MTYxNDY2MzQ1NH0.45689a362d7207a94dfd58ccebddfe66.979a33cbcf7f91cb671a830fc21c941c156a523b3b17efae97ce410b\nä¸‹é¢å…ˆæ¥ç ”ç©¶ä¸€ä¸‹æ³¨å†Œè¯·æ±‚ä¸­å„ä¸ªå­—æ®µçš„ç”Ÿæˆï¼Œå…·ä½“ä»£ç åº”è¯¥æ˜¯åœ¨ a.b.h.b.m.toString()\npublic String toString() &#123;\n    StringBuilder a = outline.m3774a(\"RegisterTokenBody(deviceId=\");\n    a.append(this.f2668a);\n    a.append(\", platform=\");\n    a.append(this.f2669b);\n    a.append(\", key=\");\n    a.append(this.f2670c);\n    a.append(\", universalId=\");\n    a.append(this.f2671d);\n    a.append(\", lang=\");\n    a.append(this.f2672e);\n    a.append(\", unicode=\");\n    a.append(this.f2673f);\n    a.append(\", utmSource=\");\n    a.append(this.f2674g);\n    a.append(\", utmMedium=\");\n    return outline.m3771a(a, this.f2675h, \")\");\n&#125;\n\nå¾ˆå®¹æ˜“å¯ä»¥æ‰¾åˆ°deviceIdã€keyã€universalIdçš„ç”Ÿæˆå‡½æ•°ï¼ša.b.h.a.e0ä¸­çš„a()ã€b()ã€c()\npublic final String a() &#123;\n    a a2 = g.a(g.f1311a, \"app_uuid\", \"\", null, null, 12);\n    boolean z2 = false;\n    i&lt;?> iVar = b[0];\n    m mVar = (m) a2;\n    if (((CharSequence) mVar.a((Object) null, iVar)).length() == 0) &#123;\n        z2 = true;\n    &#125;\n    if (!z2) &#123;\n        return (String) mVar.a((Object) null, iVar);\n    &#125;\n    String uuid = UUID.randomUUID().toString();//random???\n    z.t.c.i.a((Object) uuid, \"UUID.randomUUID().toString()\");//éªŒè¯uuidéç©º\n    mVar.a(null, iVar, uuid);//å­˜å‚¨uuid->/data/data/com.xxxxxxxx/shared_prefs/com.xxxxxxxx_preferences.xml\n    return (String) mVar.a((Object) null, iVar);\n&#125;\n\npublic final String b() &#123;\n    String a2 = a();//å–device_id\n    if (a2 != null) &#123;\n        try &#123;\n            MessageDigest instance = MessageDigest.getInstance(\"SHA-256\");\n            String str = \"jav\" + a2 + \"jav\";//jav&lt;device_id>jav\n            Charset charset = StandardCharsets.UTF_8;\n            z.t.c.i.a((Object) charset, \"StandardCharsets.UTF_8\");\n            if (str != null) &#123;\n                byte[] bytes = str.getBytes(charset);\n                z.t.c.i.a((Object) bytes, \"(this as java.lang.String).getBytes(charset)\");\n                byte[] digest = instance.digest(bytes);//sha-256(jav&lt;device_id>jav)\n                z.t.c.i.a((Object) digest, \"hash\");//éªŒè¯æ‘˜è¦ä¿¡æ¯éç©º\n                return f.a(digest);//æ‘˜è¦æ ¼å¼åŒ–ä¸ºå°å†™\n            &#125;\n            throw new k(\"null cannot be cast to non-null type java.lang.String\");\n        &#125; catch (Exception e) &#123;\n            e.printStackTrace();\n            return null;\n        &#125;\n    &#125; else &#123;\n        z.t.c.i.a(\"$this$toHashKey256\");\n        throw null;\n    &#125;\n&#125;\n@SuppressLint(&#123;\"HardwareIds\", \"DefaultLocale\"&#125;)\npublic final String c() &#123;\n    boolean z2;\n    String str;\n    String str2 = Build.SERIAL;//\n    if (str2 == null) &#123;\n        z2 = false;\n    &#125; else &#123;\n        z2 = str2.equalsIgnoreCase(\"unknown\");\n    &#125;\n    if (!z2) &#123;//1.å¦‚æœBuild.SERIALå–åˆ°çš„å€¼ä¸æ˜¯unknowçš„è¯å°±å¯ä»¥è¿”å›\n        return str2;\n    &#125;\n    String str3 = null;\n    try &#123;//2.å¥½åƒæ˜¯ä»google Advertising Idä¸­å–å€¼\n        AdvertisingIdClient.Info advertisingIdInfo = AdvertisingIdClient.getAdvertisingIdInfo(this.f1363a);\n        z.t.c.i.a((Object) advertisingIdInfo, \"AdvertisingIdClient.getAdvertisingIdInfo(context)\");\n        str = advertisingIdInfo.getId();\n    &#125; catch (Exception e) &#123;\n        e.printStackTrace();\n        str = null;\n    &#125;\n    if (str != null) &#123;\n        String i = f.i(str + \"com.xxxxxxxx\");\n        if (i != null) &#123;\n            String upperCase = i.toUpperCase();\n            z.t.c.i.a((Object) upperCase, \"(this as java.lang.String).toUpperCase()\");\n            return upperCase;\n        &#125;\n        throw new k(\"null cannot be cast to non-null type java.lang.String\");\n    &#125;\n    try &#123;//3.å–Settings.Secure.getString(ContentResolver resolver, \"android_id\")\n        str3 = Settings.Secure.getString(this.f1363a.getContentResolver(), com.umeng.commonsdk.statistics.idtracking.b.f7127a);\n    &#125; catch (Exception e2) &#123;\n        e2.printStackTrace();\n    &#125;\n    if (str3 != null) &#123;\n        String i2 = f.i(str3 + \"com.xxxxxxxx\");\n        if (i2 != null) &#123;\n            String upperCase2 = i2.toUpperCase();\n            z.t.c.i.a((Object) upperCase2, \"(this as java.lang.String).toUpperCase()\");\n            return upperCase2;\n        &#125;\n        throw new k(\"null cannot be cast to non-null type java.lang.String\");\n    &#125;\n    String i3 = f.i(a());//å–device_id\n    if (i3 != null) &#123;//4.md5(device_id)\n        String upperCase3 = i3.toUpperCase();\n        z.t.c.i.a((Object) upperCase3, \"(this as java.lang.String).toUpperCase()\");\n        return upperCase3;\n    &#125;\n    throw new k(\"null cannot be cast to non-null type java.lang.String\");\n&#125;\n\nçœ‹èµ·æ¥uuidï¼ˆdevice_idï¼‰æ˜¯è·å–randomå€¼ï¼Œå­˜å‚¨åœ¨shared_prefs/com.xxxxxxxx_preferences.xmlä¸­ï¼Œè€Œkey=sha-256(â€œjavâ€+device_id+â€œjavâ€)\nå…³äºuniversalIdçš„ç”Ÿæˆï¼Œå…¶å®æœ‰å‡ ç§ä¸åŒçš„å¯èƒ½ï¼š\n\n\nandroid.os.Build.SERIALï¼šAPI level 9 æ·»åŠ çš„ï¼Œåœ¨ Android O ä¸­è¿™ä¸ªå­—æ®µè¢«ç½®ä¸º&quot;unknown&quot;ï¼Œéœ€è¦ä½¿ç”¨android.os.Build.getSerial()æ–¹æ³•æ¥è·å–ï¼Œä¸”éœ€è¦android.permission.READ_PHONE_STATEæƒé™\n\n\nAdvertisingIdClient.getAdvertisingIdInfo(this.context).getId()\n\n\nSettings.Secure.getString(ContentResolver resolver, â€œandroid_idâ€)\n\n\nmd5(deviceID)ï¼šåº”è¯¥ä¸æ˜¯è¿™ä¸ªå¦‚æœç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ¯æ¬¡universalIdåº”è¯¥éšç€device_idå˜åŒ–\n\n\næˆ‘é€šè¿‡frida hookä¸»åŠ¨è°ƒç”¨å°è¯•äº†å‡ ç§universalIdçš„è·å–æ–¹æ³•\nå…³äº1ï¼š\nfunction main()&#123;\n    Java.perform(function()&#123;\n        var build = Java.use(\"android.os.Build\")\n        var res = build.getSerial()\n        console.log(res)\n    &#125;)\n&#125;\nsetImmediate(main);\n//return:unknown\nå…³äº2ï¼š\nfunction getContext() &#123;\n    return Java.use('android.app.ActivityThread').currentApplication().getApplicationContext();\n&#125; \nfunction main()&#123;\n    Java.perform(function()&#123;\n        var AdvertisingIdCliente = Java.use(\"com.google.android.gms.ads.identifier.AdvertisingIdClient\")\n        var advertisingIdCliente = AdvertisingIdCliente.getAdvertisingIdInfo(getContext())\n        var id = advertisingIdCliente.getId()\n        console.log(id)\n    &#125;)\n&#125;\nsetImmediate(main);\n//return:1764c41f-a2b5-4c87-aa34-ed53cc30aac3\nå…³äº3ï¼š\nfunction getContext() &#123;\n    return Java.use('android.app.ActivityThread').currentApplication().getApplicationContext().getContentResolver();\n&#125;                                         \nfunction logAndroidId() &#123;\n    console.log('[+]', Java.use('android.provider.Settings$Secure').getString(getContext(), 'android_id'));\n&#125;\nJava.perform(logAndroidId)\n//return:00acc23791dcfe9d\nç°åœ¨æˆ‘ä»¬ç ´æ¡ˆäº†ï¼š\n\n\n\nå­—æ®µ\nè¯´æ˜\nå¤‡æ³¨\n\n\n\n\ndevice_id\nrandomå€¼\nç”Ÿæˆåå­˜å‚¨åœ¨ï¼šshared_prefs/com.xxxxxxxx_preferences.xml\n\n\nplatform\nâ€œAndroidâ€\nå›ºå®šæ˜æ–‡\n\n\nkey\nsha-256(â€œjavâ€+device_id+â€œjavâ€)\n\n\n\nuniversal_id\nAdvertisingIdClient.getAdvertisingIdInfo(this.context).getId()\n\n\n\nlang\nâ€œcnâ€\nå›ºå®šæ˜æ–‡\n\n\n\nå¤‡æ³¨e0.a()ã€e0.b()ã€e0.c()çš„fridaä¸»åŠ¨è°ƒç”¨ä»£ç ï¼š\nfunction main()&#123;\n    Java.perform(function()&#123;\n        var e0 = Java.use(\"a.b.h.a.e0\")\n        var inse = e0.$new()\n        var res = inse.c()\n        console.log(res)\n    &#125;)\n&#125;\nsetImmediate(main);\n//return:884885A46B10364A5AF184395FF4DD93\n\nå¦å¤–ï¼Œåœ¨æ³¨å†Œè¯·æ±‚çš„è¿”å›å€¼ä¸­çš„tokenï¼Œè¿™ä¸ªå­—ç¬¦ä¸²çš„ä¸­é—´ä¸€æ®µæ˜¯md5ç»“æœï¼Œå…¶æ˜æ–‡åº”è¯¥æ˜¯9-10ä½çš„æ•°å­—ä¸²ï¼Œä½†å…·ä½“ç”Ÿæˆæ–¹å¼åªæœ‰æœåŠ¡ç«¯çŸ¥é“ã€‚\neyJ1c2VyX2lkIjo0NDk5NzQ3MjYsImxhc3Rsb2dpbiI6MTYxNDMxMTg0OX0.1ea8cfc740dc64f1b0a70adc0357be61.234...\nmd5(394171256) &#x3D;&#x3D; 1ea8cfc740dc64f1b0a70adc0357be61\neyJ1c2VyX2lkIjo0NDk5NzQ3MjYsImxhc3Rsb2dpbiI6MTYxNDY2MTAzN30.49f3f134c8f1d86478c5dd6cb0fbaeb8.7ca...\nmd5(1167890769) &#x3D;&#x3D; 49f3f134c8f1d86478c5dd6cb0fbaeb8\nref:\nhttps://www.52pojie.cn/thread-1375881-1-1.html\nhttps://cloud.tencent.com/developer/news/746067\nAndroidå”¯ä¸€æ ‡è¯†ï¼šhttps://daemonyang.blogspot.com/2017/06/android.html\n","categories":["å®æˆ˜"],"tags":["Android","crack","å®æˆ˜"]},{"title":"Note ã€ŠTowards Dynamically Monitoring Android Applications on Non-rooted Devices in the Wildã€‹","url":"https://ch3nye.top/Note-Towards-Dynamically-Monitoring-Android-Applications-on-Non-rooted-Devices-in-the-Wild/","content":" Towards Dynamically Monitoring Android Applications on Non-rooted Devices in the Wild\n ä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜\nç›®å‰åŠ¨æ€åˆ†ææŠ€æœ¯éœ€è¦åœ¨å®éªŒå®¤ç¯å¢ƒä¸­è¿è¡ŒçŠ¶æ€ä¸‹è§¦å‘ä»£ç çº§å’Œç³»ç»Ÿçº§äº‹ä»¶ï¼Œä»¥çª¥æ¢appçš„æ•æ„Ÿæ€§ä¸ºã€‚è¿™ç§ä¸¥æ ¼çš„è¿è¡Œç¯å¢ƒé˜»ç¢äº†æ­¤ç±»åŠ¨æ€åˆ†ææŠ€æœ¯çš„å¤§è§„æ¨¡éƒ¨ç½²ã€‚æ­¤å¤–ç°å­˜çš„Androidåº”ç”¨ç¨‹åºåŠ¨æ€åˆ†æåˆ©ç”¨è¾“å…¥ç”Ÿæˆå™¨æ¿€å‘ç¨‹åºè¡Œä¸ºï¼Œè¿™ç§æ–¹æ³•å¹¶ä¸èƒ½è¾¾åˆ°å¾ˆå¥½çš„ä»£ç è¦†ç›–ç‡ã€‚\nåšå‡ºçš„ä¸»è¦è´¡çŒ®ï¼š\n\næå‡ºäº†ä¸€ä¸ªåŠ¨æ€åˆ†æç³»ç»ŸUpDroidï¼Œå®ƒé€‚ç”¨äºå…¬ä¼—ä½¿ç”¨çš„érootä¸”æœªå®šåˆ¶ç³»ç»Ÿçš„è®¾å¤‡ã€‚\næå‡ºäº†å‡ ç§åŸºäºè®¾å¤‡ä¸Šå…¬å…±èµ„æºçš„çŠ¶æ€å˜åŒ–æ¥ç›‘æ§ä¸åŒç±»å‹æ•æ„Ÿè¡Œä¸ºçš„æ–¹æ³•ã€‚\næå‡ºä½¿ç”¨æœºå™¨å­¦ä¹ æŠ€æœ¯-learning to rankï¼Œå»ºç«‹è¿è¡Œçš„appå’Œæ£€æµ‹åˆ°çš„äº‹ä»¶ä¹‹é—´çš„å…³ç³»ã€‚æ­¤æ–¹æ³•è§£å†³äº†æœªå®šåˆ¶ç³»ç»Ÿçš„è®¾å¤‡ä¸Šè¯†åˆ«åº”ç”¨ç¨‹åºçš„é—®é¢˜ã€‚\n\n ä½¿ç”¨çš„æ–¹æ³•\nUpDroidé€šè¿‡ç›‘è§†è®¾å¤‡ä¸Šå…¬å…±èµ„æºçš„å˜åŒ–æ¥æ£€æµ‹æ•æ„Ÿäº‹ä»¶ï¼Œè€Œä¸æ˜¯è®¿é—®éœ€è¦rootæˆ–å¹²é¢„ç³»ç»Ÿçš„åº•å±‚äº‹ä»¶ã€‚ä¸ºäº†è¯†åˆ«è§¦å‘æ£€æµ‹çš„appï¼ŒUpDroidå°†èº«ä»½æ ‡è¯†è½¬ä¸ºranking problemï¼Œå¹¶é‡‡ç”¨learning to rankæŠ€æœ¯æ¥è§£å†³è¯¥é—®é¢˜ã€‚\n Framework of UpDroid\nUpDroidçš„ç»“æ„å›¾å¦‚ä¸‹ï¼Œä¸»è¦åŒ…å«ä¸¤éƒ¨åˆ†ï¼šç”¨æˆ·è®¾å¤‡ä¸Šçš„ç›‘æ§å™¨ï¼Œè¿œç«¯æœåŠ¡å™¨ä¸Šçš„åˆ†æå™¨\n\nç”¨æˆ·è®¾å¤‡ä¸Šçš„ç›‘æ§å™¨æœ‰ä¸¤ä¸ªåˆ†åˆ«è´Ÿè´£ç›‘æ§æ•æ„Ÿä¿¡æ¯ï¼ˆeg access cameraï¼‰å’Œæ”¶é›†è¿è¡Œæ—¶ä¿¡æ¯ï¼ˆeg cpu usage of running appï¼‰å³ä¸Šå›¾Event Monitor å’Œ Runtime Info Monitorã€‚\nè¦è§£å†³çš„é‡è¦é—®é¢˜æ˜¯ï¼Œåœ¨ä¸æ¸—é€åˆ°appæˆ–systemçš„æƒ…å†µä¸‹ï¼Œæ— æ³•è¯†åˆ«ä¸ºäº†æ£€æµ‹è€Œå¯åŠ¨çš„appã€‚ä¸ºäº†è¯†åˆ«ç›®æ ‡appï¼Œç”¨çœŸå®ç”¨æˆ·æ•°æ®é€šè¿‡æœºå™¨å­¦ä¹ ï¼ˆç®—æ³•ï¼šlearning to rankï¼‰æ„å»ºäº†ä¸€ä¸ªåˆ¤åˆ«æ¨¡å‹ã€‚\nä½†æ˜¯æˆ‘è§‰å¾—è¿™ä¸ªåˆ¤åˆ«æ¨¡å‹å¯ç”¨æ€§ä¹Ÿä¸ä¼šå¾ˆå¥½ï¼Œä¸€æ–¹é¢è¿è¡Œappçš„è®¾å¤‡ä¸åŒäº§ç”Ÿçš„ä¿¡æ¯ä¹Ÿä¸åŒæ‰€ä»¥ç²¾å‡†åº¦ä¸å¯èƒ½æ˜¯ç™¾åˆ†ç™¾ï¼Œå¦ä¸€æ–¹é¢ï¼Œä½ å¿…é¡»æœ‰ç›®æ ‡appçš„æ•°æ®æ‰å¯ä»¥ï¼ŒåæœŸéœ€è¦åŠ å…¥æ–°çš„appï¼ŒåŠ¨æ€è®­ç»ƒæ¨¡å‹æœ¬èº«å°±æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚\n EVENT MONITORING\n\nContent Observer\nContent Observerä»…æŠ¥å‘ŠContent Provideræ˜¯å¦å˜åŒ–ï¼Œå¹¶éæè¿°ä½•ç§å˜åŒ–ã€‚å—é™äºå¼€é”€UpDroidä»…æ£€æµ‹å››ç§å¸¸è§çš„content providerï¼šSMS, call log, contacts and calendar events\nFile Observer\nUpDroidä½¿ç”¨File-Observer APIç›‘è§†å¤–éƒ¨å­˜å‚¨ä¸­çš„æ–‡ä»¶å’Œç›®å½•ã€‚Androidå®˜æ–¹æä¾›äº†æ­¤APIï¼Œä»¥æ•è·å¯¹å•ä¸ªæ–‡ä»¶æˆ–ç›®å½•çš„æ›´æ”¹ã€‚æ­¤APIè¿›æ”¯æŒå¯¹å•ä¸ªæ–‡ä»¶å’Œç›®å½•çš„ç›‘æ§æ‰€ä»¥æœ¬æ–‡é€’å½’çš„ä¸ºæ¯ä¸ªè¦ç›‘æ§çš„æ–‡ä»¶å’Œç›®å½•åˆ›å»ºç›‘æ§ã€‚æ³¨æ„ï¼ŒFile Observerä»…æŠ¥å‘Šäº‹ä»¶ï¼Œä½†ä¸æŠ¥å‘Šæ›´æ”¹çš„å†…å®¹ã€‚\nInterrupt Observer\nAndroidç»§æ‰¿äº†Linuxçš„ä¸­æ–­æœºåˆ¶ï¼Œä¸­æ–­è¡¨ç¤ºCPUä¸­æ–­äº†æ­£åœ¨è¿è¡Œçš„ç¨‹åºä»¥å¤„ç†å¤–éƒ¨ç¡¬ä»¶è®¾å¤‡æå‡ºçš„ä¸­æ–­è¯·æ±‚çš„æƒ…å†µã€‚\nInterrupt Observerå…·ä½“åšæ³•æ˜¯æ¯100mså¯¹/proc/interruptså–æ ·ä¸€æ¬¡ï¼Œæ¯”è¾ƒå˜åŒ–ã€‚ç”±äºå¤§å¤šæ•°ç¡¬ä»¶è®¾å¤‡éƒ½æœ‰ä¸€æ¡å¯¹åº”çš„ä¸­æ–­è¯·æ±‚è¡Œï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›‘æ§ä¸­æ–­å·çš„å˜åŒ–æ¥æ¨æ–­ç¡¬ä»¶çš„è¿è¡ŒçŠ¶æ€ã€‚\nä¸€ä¸ªé‡è¦çš„é—®é¢˜æ˜¯ï¼šåœ¨/proc/interruptsä¸­æ˜¾ç¤ºçš„å¤§å¤šæ•°è®¾å¤‡åç§°éƒ½æ˜¯ç”¨ç¡¬ä»¶å‹å·åç§°æˆ–ç¼©å†™è¡¨ç¤ºçš„ï¼ˆä¸”ä¸åŒæ‰‹æœºä¸­ä½¿ç”¨çš„æ˜ å°„ä¹Ÿä¸ä¸€æ ·ï¼‰ï¼Œå› æ­¤å¾ˆéš¾è¯†åˆ«ã€‚æˆ‘ä»¬åªèƒ½æ‰‹åŠ¨æ ‡è¯†å…·ä½“ç¡¬ä»¶å’Œinterruptsä¸­çš„ä»£å·æ˜ å°„ï¼Œæœ¬æ–‡åˆ†æäº†19ç§Android è®¾å¤‡ã€‚\nNetwork Observer\nå€ŸåŠ©TUNè™šæ‹Ÿç½‘ç»œè®¾å¤‡æ•æ‰åº”ç”¨å‘å‡ºçš„TCPå’ŒUDPæ•°æ®åŒ…ã€‚ä½¿ç”¨äº†MopEyeçš„æŠ€æœ¯ä»ä»¥ä¸‹procæ–‡ä»¶/proc/net/tcp6|tcp|udp|udp6 ä¸­è¯†åˆ«ç›®æ ‡ç¨‹åºçš„æ•°æ®åŒ…ã€‚\n NITIATOR IDENTIFYING\nå°½ç®¡MopEye [35]ä¸ºnetwork eventæä¾›äº†ä¸€ç§æ™ºèƒ½çš„åº”ç”¨ç¨‹åºè¯†åˆ«è§£å†³æ–¹æ¡ˆï¼Œä½†å®ƒä¸é€‚ç”¨äºå…¶ä»–äº‹ä»¶ï¼Œä¾‹å¦‚åŸºäºä¸­æ–­çš„äº‹ä»¶ã€‚å› æ­¤ï¼ŒUpDroidåˆ©ç”¨æœºå™¨å­¦ä¹ æŠ€æœ¯ï¼ˆlearning to rankï¼‰æ¥æ„å»ºé€‚ç”¨äºæ‰€æœ‰äº‹ä»¶çš„åº”ç”¨ç¨‹åºè¯†åˆ«æ¨¡å‹ã€‚è¯¥è¯†åˆ«æ¨¡å‹çš„ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š\n\nApp Status Monitoring\nè®¾å¤‡ä¸Šçš„è¿è¡Œæ—¶ä¿¡æ¯ç›‘è§†å™¨æ”¶é›†è¿è¡Œæ—¶ä¿¡æ¯ï¼ˆå¦‚CPU usage, memory usageï¼‰ã€‚è¿™äº›ä¿¡æ¯å°†ç”¨ä½œåˆ¤æ–­ä¸€ä¸ªè¢«æ£€æµ‹åˆ°çš„äº‹ä»¶æ˜¯å¦æ˜¯æŸä¸ªappå¯¼è‡´çš„ã€‚UpDroid ä½¿ç”¨pså‘½ä»¤è·å–appçš„è¿è¡Œæ—¶ä¿¡æ¯ã€‚ä½†pså‘½ä»¤å¾—åˆ°çš„æ˜¯è¿›ç¨‹ä¿¡æ¯ï¼Œè€Œè¾¨è¯†ä¸€ä¸ªäº‹ä»¶æ˜¯é‚£ä¸ªè¿›ç¨‹å¯¼è‡´çš„æ˜¯æ¯”è¾ƒéš¾çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠæ¥è‡ªä¸€ä¸ªappçš„è¿›ç¨‹çš„è¿è¡Œæ—¶ä¿¡æ¯è¿›è¡Œæ•´åˆï¼Œå¾—åˆ°äº†ç›®æ ‡çš„çœŸå®è¿è¡Œæ—¶ä¿¡æ¯ï¼Œå…³äºæ•´åˆçš„æ›´å¤šç»†èŠ‚å‚è€ƒåŸæ–‡5.3èŠ‚ã€‚\nData Collecting\næ•°æ®åŒ…å«æ¯ä¸ªappåœ¨eventså‘ç”Ÿæ—¶çš„events + runtime informationã€‚æˆ‘ä»¬æ‹›å‹ŸAndroidç”¨æˆ·ï¼Œå¸®åŠ©æ”¶é›†æ•°æ®å¹¶å®æ—¶æ ‡è®°åº”ç”¨ç¨‹åºã€‚\nData Pre-processing\nä¸ºäº†å¾—åˆ°ç”¨äºæœ€ç»ˆæ¨¡å‹è®­ç»ƒçš„æ•°æ®æˆ‘ä»¬åšäº†ä»¥ä¸‹é¢„å¤„ç†å·¥ä½œï¼š\n\n\nè·å–æ£€æµ‹åˆ°eventå‰åçš„app runtime information\n\n\nç„¶åï¼Œæˆ‘ä»¬ç»“åˆäº†åŒä¸€appä¸åŒè¿›ç¨‹çš„è¿è¡Œæ—¶ä¿¡æ¯ï¼Œä¸‹è¡¨2æ˜¯runtime informationçš„ç»“åˆè§„åˆ™ï¼ˆè¿™å°±æ˜¯ä¸Šè¿°æåˆ°çš„æ•´åˆè¿›ç¨‹ä¿¡æ¯çš„æ–¹æ³•ï¼‰\nHere is an example of extracting feature f1 for an app. App a has two processes: p1 and p2. Event e is observed at time t. The process sampling provides the nearest process info logs at time t1 and t2, while t1â‰¤tâ‰¤ t2. The f1 value of p1 is v1 at t1 and v2 at t2. The f1 value of p2 is u1 at t1 and u2 at t2. Hence, the processed feature f1 of app a for e is:\nf1a=AVG(v2âˆ’v1,u2âˆ’u1)f_{1a}=AVG(v_2âˆ’v_1,u_2âˆ’u_1)\nf1aâ€‹=AVG(v2â€‹âˆ’v1â€‹,u2â€‹âˆ’u1â€‹)\n\n\næœ€åï¼Œæˆ‘ä»¬æ ¹æ®ç”¨æˆ·çš„å›åº”ï¼Œè¯†åˆ«è§¦å‘æŸäº‹ä»¶çš„åº”ç”¨ç¨‹åºï¼Œå¹¶æ ‡è®°æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚1æ ‡è¯†appè¢«selectedï¼ˆä¸è§¦å‘äº‹ä»¶æœ‰å…³ï¼‰ï¼Œ0æ ‡è¯†appæ²¡æœ‰selected\n\n\n\nModelling and Precision\nä¸Šé¢è¯´è¿‡äº†æˆ‘ä»¬çš„é—®é¢˜è½¬æ¢ä¸ºäº†æ’åé—®é¢˜ï¼Œå°±æ˜¯è¯´è¿è¡Œä¸­çš„appä¸­é‚£ä¸ªæœ€æœ‰å¯èƒ½æ˜¯æ˜¯invoke eventçš„appï¼ŒæŒ‰ç…§å¯èƒ½æ€§æ’åã€‚ä½¿ç”¨RankLibï¼ˆè¯¥åº“åŒ…å«å‡ ä¸ªæµè¡Œçš„learning to rankç®—æ³•ï¼‰è¿›è¡Œå»ºæ¨¡å’Œæµ‹è¯•ã€‚\nä¸‰åˆ†ä¹‹äºŒçš„æ•°æ®ä½œä¸ºè®­ç»ƒèµ„æ–™ï¼Œå‰©ä¸‹çš„ä½œä¸ºæµ‹è¯•æ•°æ®é›†ã€‚\n\ntop 123çš„æ„æ€æ˜¯ï¼Œåœ¨æ¨¡å‹é¢„æµ‹ç»“æœä¸­æ’åå‰å‡ çš„ï¼Œä¹Ÿå°±æ˜¯æ¨¡å‹è®¤ä¸ºæœ€æœ‰å¯èƒ½æ˜¯invoke eventçš„appï¼Œå®ƒä»¬ä¹‹ä¸­æ˜¯å¦åŒ…å«è§‚å¯Ÿè€…ï¼ˆç”¨æˆ·ï¼‰äººå·¥æŒ‡æ˜çš„invoke eventçš„appã€‚\nåœ¨æˆ‘çœ‹æ¥ï¼Œappè¯†åˆ«å™¨æ¨¡å‹çš„ç»“æœè¿˜æ˜¯ä¸é”™çš„ã€‚\n ç»“æœè¯„ä¼°\næ€»çš„æ¥è¯´ï¼Œå®éªŒç»“æœè¡¨æ˜ï¼ŒUpDroidå¯ä»¥æˆåŠŸæ£€æµ‹åˆ°Androidå®˜æ–¹æ–‡æ¡£ä¸­æ ‡è®°ä¸ºå±é™©çš„26ä¸ªæƒé™ä¸­çš„15ä¸ªæƒé™ã€‚æˆ‘ä»¬è¿˜å°†Up-Droidä¸API hookingæŠ€æœ¯è¿›è¡Œäº†æ¯”è¾ƒï¼Œè¯¥API hookingåœ¨ç†è®ºä¸Šå¯ä»¥æ•è·æ‰€æœ‰æ•æ„Ÿè¡Œä¸ºï¼Œä½†éœ€è¦rootå’Œä¿®æ”¹ç³»ç»Ÿã€‚ç»“æœè¡¨æ˜ï¼Œå³ä½¿æ²¡æœ‰rootå’Œä»»ä½•ç³»ç»Ÿä¿®æ”¹ï¼ŒUpDroidä»ç„¶å¯ä»¥å®ç°API hookingæŠ€æœ¯çš„70ï¼…ã€‚\nä¸‹é¢æ˜¯åœ¨å„ä¸ªæ–¹é¢UpDroidå’ŒAPI Hookingçš„æ¯”è¾ƒ\næƒé™è¦†ç›–ç‡\nä¸ºäº†æ¯”è¾ƒï¼Œæˆ‘ä»¬ä½¿ç”¨äº†Googleå®˜æ–¹æ–‡æ¡£ä¸­å£°æ˜çš„26ä¸ªdangerous permissionå’Œ44ä¸ªnormal permissionã€‚å¦‚æœåˆ—è¡¨ä¸­çš„ä»»ä½•æ•æ„ŸAPIä½¿ç”¨äº†ç‰¹å®šæƒé™ï¼Œåˆ™æˆ‘ä»¬è®¤ä¸ºAPI HookingæŠ€æœ¯æ¶µç›–äº†æ­¤æƒé™ã€‚æ­¤å¤–ï¼Œå¦‚æœUpDroidå¯ä»¥æ•è·æŸæƒé™æ‰€ä¿æŠ¤çš„ä¸€ç§è¡Œä¸ºï¼Œåˆ™æˆ‘ä»¬è®¤ä¸ºUpDroidæ¶µç›–äº†æ­¤æƒé™ã€‚ä¸¤è€…å¯¹å±é™©æƒé™çš„è¦†ç›–æƒ…å†µçš„æ¯”è¾ƒç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nEvent Details Comparison\nAPI Hookingå¯ä»¥æ ¹æ®APIçš„å‚æ•°å’Œè¿”å›å€¼æä¾›æœ‰å…³æ¯ä¸ªäº‹ä»¶æˆ–è¡Œä¸ºçš„è¯¦ç»†ä¿¡æ¯ï¼Œè€ŒUpDroidåˆ™æä¾›äº†æ­éœ²æ¯ä¸ªäº‹ä»¶è¯¦ç»†ä¿¡æ¯çš„ä¸åŒæ–¹æ³•ã€‚\n\nç›‘æ§Content Providerï¼Œå¯ä»¥æä¾›è¾ƒgeneralçš„ä¿¡æ¯ï¼Œæ¯”API Hookingèƒ½æä¾›çš„ä¿¡æ¯å·®ä¸€äº›ã€‚\nç›‘æ§Interruptï¼Œæä¾›äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´å’Œå‘ç”Ÿæ”¹å˜çš„æ–¹å¼ï¼ˆchanging patternï¼‰\nç›‘æ§External Storageï¼Œæ¯”API Hookingèƒ½æä¾›çš„ä¿¡æ¯å·®ï¼Œå‰è€…åªèƒ½æä¾›è°æ”¹å˜çš„ä¿¡æ¯ï¼Œåè€…å¯ä»¥æä¾›è¯»å†™å†…å®¹ã€‚\nç›‘æ§Networkï¼ŒUpDroidæä¾›çš„ä¿¡æ¯æ¯”API Hookingæ›´åº•å±‚\n\nBehavior Outcome Comparison\nUpDroidæ›´åŠ å¼ºè°ƒåº”ç”¨ç¨‹åºè¡Œä¸ºçš„ç»“æœï¼Œè€ŒAPI Hookingåˆ™æ›´å¤šåœ°å¼ºè°ƒåº”ç”¨ç¨‹åºè¡Œä¸ºçš„æ„å›¾ã€‚\n å¯¹æˆ‘æœ‰ä»€ä¹ˆå¯å‘\nä¸€ç§æ–°çš„åœ¨érootè®¾å¤‡ä¸ŠåŠ¨æ€ç›‘æµ‹çš„æ€è·¯ï¼Œæ¶‰åŠäº†Androidç³»ç»Ÿè¿è¡ŒåŸç†å’ŒLinuxè¿è¡Œæœºåˆ¶ã€‚\n è¿™é¡¹ç ”ç©¶çš„æœªæ¥æ–¹å‘\næˆ‘æ„Ÿè§‰æœ¬æ–‡çš„æ–¹æ³•è¿˜æ˜¯ç”±å¾ˆå¤šé™åˆ¶ï¼Œå¹¶ä¸èƒ½æˆä¸ºä¸»æµçš„appæ£€æµ‹æ–¹å¼ã€‚\nè®ºæ–‡é“¾æ¥ï¼šhttps://dlnext.acm.org/doi/abs/10.1145/3212480.3212504\n","categories":["è®ºæ–‡é˜…è¯»"],"tags":["Android","è®ºæ–‡","ç¬”è®°","åŠ¨æ€æ£€æµ‹"]},{"title":"LinuxäºŒè¿›åˆ¶åˆ†æç¬”è®°(ELF)","url":"https://ch3nye.top/LinuxäºŒè¿›åˆ¶åˆ†æç¬”è®°(ELF)/","content":" LinuxäºŒè¿›åˆ¶åˆ†æç¬”è®°(ELF)\nä¸è¦è¯»æœ¬æ–‡ï¼Œå»ºè®®åªçœ‹å‚è€ƒæ–‡ç« ï¼Œé™„ä¸€å¼ æˆ‘ç”»çš„ELFæ–‡ä»¶æ€ç»´å¯¼å›¾ï¼š\n\nELFæ–‡ä»¶æ ¼å¼æ€ç»´å¯¼å›¾.xmind\n å…³äºLinuxä¸‹gcc ç¼–è¯‘ C æºæ–‡ä»¶æ—¶ï¼Œç”Ÿæˆçš„æ˜¯Shared object fileè€Œä¸æ˜¯Executable file\næœ€è¿‘åœ¨Debianä¸‹å†™Cæ—¶ï¼Œå‘ç°ç”¨readelfå‘½ä»¤æŸ¥çœ‹ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶ç±»å‹æ—¶ï¼Œå‘ç°æ–‡ä»¶ç±»å‹æ˜¯DYN (Shared object file)ï¼Œè€Œä¸æ˜¯EXEC (Executable file)ã€‚\n-> % readelf -h a.out\nELF Header:\n  Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00\n  Class:                             ELF64\n  Data:                              2's complement, little endian\n  Version:                           1 (current)\n  OS/ABI:                            UNIX - System V\n  ABI Version:                       0\n  Type:                              DYN (Shared object file)\n  Machine:                           Advanced Micro Devices X86-64\n  Version:                           0x1\n  Entry point address:               0x580\n  Start of program headers:          64 (bytes into file)\n  Start of section headers:          6656 (bytes into file)\n  Flags:                             0x0\n  Size of this header:               64 (bytes)\n  Size of program headers:           56 (bytes)\n  Number of program headers:         9\n  Size of section headers:           64 (bytes)\n  Number of section headers:         31\n  Section header string table index: 30\nå¤šæ–¹æŸ¥æ‰¾ï¼Œå‘ç°gccé»˜è®¤åŠ äº†--enable-default-pieé€‰é¡¹ï¼ˆhttps://www.v2ex.com/amp/t/481562ï¼‰\n-> % gcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/6/lto-wrapper\nTarget: x86_64-linux-gnu\nConfigured with: ../src/configure -v --with-pkgversion='Debian 6.3.0-18+deb9u1' --with-bugurl=file:///usr/share/doc/gcc-6/README.Bugs --enable-languages=c,ada,c++,java,go,d,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-6 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --enable-default-pie --with-system-zlib --disable-browser-plugin --enable-java-awt=gtk --enable-gtk-cairo --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-6-amd64/jre --enable-java-home --with-jvm-root-dir=/usr/lib/jvm/java-1.5.0-gcj-6-amd64 --with-jvm-jar-dir=/usr/lib/jvm-exports/java-1.5.0-gcj-6-amd64 --with-arch-directory=amd64 --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --with-target-system-zlib --enable-objc-gc=auto --enable-multiarch --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\nThread model: posix\ngcc version 6.3.0 20170516 (Debian 6.3.0-18+deb9u1)\nå…³äºgccä¸­pieé€‰é¡¹å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼ˆhttps://blog.csdn.net/ivan240/article/details/5363395ï¼‰\n\nPosition-Independent-Executableæ˜¯Binutils,glibcå’Œgccçš„ä¸€ä¸ªåŠŸèƒ½ï¼Œèƒ½ç”¨æ¥åˆ›å»ºä»‹äºå…±äº«åº“å’Œé€šå¸¸å¯æ‰§è¡Œä»£ç ä¹‹é—´çš„ä»£ç â€“èƒ½åƒå…±äº«åº“ä¸€æ ·å¯é‡åˆ†é…åœ°å€çš„ç¨‹åºï¼Œè¿™ç§ç¨‹åºå¿…é¡»è¿æ¥åˆ°Scrt1.oã€‚æ ‡å‡†çš„å¯æ‰§è¡Œç¨‹åºéœ€è¦å›ºå®šçš„åœ°å€ï¼Œå¹¶ä¸”åªæœ‰è¢«è£…è½½åˆ°è¿™ä¸ªåœ°å€æ—¶ï¼Œç¨‹åºæ‰èƒ½æ­£ç¡®æ‰§è¡Œã€‚PIEèƒ½ä½¿ç¨‹åºåƒå…±äº«åº“ä¸€æ ·åœ¨ä¸»å­˜ä»»ä½•ä½ç½®è£…è½½ï¼Œè¿™éœ€è¦å°†ç¨‹åºç¼–è¯‘æˆä½ç½®æ— å…³ï¼Œå¹¶é“¾æ¥ä¸ºELFå…±äº«å¯¹è±¡ã€‚\n\n\nå¼•å…¥PIEçš„åŸå› æ˜¯è®©ç¨‹åºèƒ½è£…è½½åœ¨éšæœºçš„åœ°å€ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå†…æ ¸éƒ½åœ¨å›ºå®šçš„åœ°å€è¿è¡Œï¼Œå¦‚æœèƒ½æ”¹ç”¨ä½ç½®æ— å…³ï¼Œé‚£æ”»å‡»è€…å°±å¾ˆéš¾å€ŸåŠ©ç³»ç»Ÿä¸­çš„å¯æ‰§è¡Œç å®æ–½æ”»å‡»äº†ã€‚ç±»ä¼¼ç¼“å†²åŒºæº¢å‡ºä¹‹ç±»çš„æ”»å‡»å°†æ— æ³•å®æ–½ã€‚è€Œä¸”è¿™ç§å®‰å…¨æå‡çš„ä»£ä»·å¾ˆå°\n\nå› æ­¤ï¼Œå¯ä»¥åŠ ä¸Š-no-pie ç¦ç”¨æ‰è¯¥é»˜è®¤é€‰é¡¹ï¼š\n-> % readelf -h a.out\nELF Header:\n  Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00\n  Class:                             ELF64\n  Data:                              2's complement, little endian\n  Version:                           1 (current)\n  OS/ABI:                            UNIX - System V\n  ABI Version:                       0\n  Type:                              EXEC (Executable file)\n  Machine:                           Advanced Micro Devices X86-64\n  Version:                           0x1\n  Entry point address:               0x400450\n  Start of program headers:          64 (bytes into file)\n  Start of section headers:          6480 (bytes into file)\n  Flags:                             0x0\n  Size of this header:               64 (bytes)\n  Size of program headers:           56 (bytes)\n  Number of program headers:         9\n  Size of section headers:           64 (bytes)\n  Number of section headers:         30\n  Section header string table index: 29\näºæ˜¯æ–‡ä»¶ç±»å‹åˆå˜æˆäº†EXEC (Executable file)ã€‚\n Android APPä¸­çš„soæ–‡ä»¶åˆ°åº•å±äºå“ªç§ç±»å‹çš„ELFæ–‡ä»¶ï¼Ÿ\nå±äºï¼šShared object fileï¼ˆå…±äº«ç›®æ ‡æ–‡ä»¶ï¼‰ï¼Œå…¶ELFå¤´ä¸­çš„e_typeå€¼ä¸º3\ne_typeå°±æ˜¯è¡¨ç¤ºæ–‡ä»¶ç±»å‹çš„å½“å®ƒçš„å€¼ï¼š\n\n\nä¸º1æ—¶è¡¨ç¤ºçš„æ˜¯å¯é‡å®šä½ç±»å‹(Relocatable file)çš„æ–‡ä»¶ï¼Œæ–‡ä»¶åç¼€.o\ngcc -c ./elftest.c\nå°±ä¼šç”Ÿæˆelftest.o\n\n\nä¸º2æ—¶è¡¨ç¤ºå¯æ‰§è¡Œç±»å‹(Executable file)çš„æ–‡ä»¶ï¼Œä¸€èˆ¬æ— æ–‡ä»¶åç¼€\ngcc ./elftest.c -o elftest\n\n\nä¸º3æ—¶è¡¨å…±äº«åº“(Shared object file)æ–‡ä»¶ï¼Œæ–‡ä»¶åç¼€.so\ngcc -shared -fPIC ./elftest.c -o ./elftest.so\n-shared ç”Ÿæˆå…±äº«ç›®æ ‡æ–‡ä»¶ï¼Œ-fPIC ç”Ÿæˆä½¿ç”¨ç›¸å¯¹åœ°å€æ— å…³çš„ç›®æ ‡ä»£ç \n\n\n é“¾æ¥è§†å›¾å’Œæ‰§è¡Œè§†å›¾\nELFæ–‡ä»¶æœ‰ä¸¤ç§è§†å›¾å½¢å¼ï¼šé“¾æ¥è§†å›¾å’Œæ‰§è¡Œè§†å›¾\n\né“¾æ¥è§†å›¾ï¼š\nå¯ä»¥ç†è§£ä¸ºç›®æ ‡æ–‡ä»¶çš„å†…å®¹è§†å›¾ã€‚\né™æ€é“¾æ¥å™¨ï¼ˆå³ç¼–è¯‘åå‚ä¸ç”Ÿæˆæœ€ç»ˆELFè¿‡ç¨‹çš„é“¾æ¥å™¨ï¼Œå¦‚ld ï¼‰ä¼šä»¥é“¾æ¥è§†å›¾è§£æELFã€‚ç¼–è¯‘æ—¶ç”Ÿæˆçš„ .oï¼ˆç›®æ ‡æ–‡ä»¶ï¼‰ä»¥åŠé“¾æ¥åçš„ .so ï¼ˆå…±äº«åº“ï¼‰å‡å¯é€šè¿‡é“¾æ¥è§†å›¾è§£æï¼Œé“¾æ¥è§†å›¾å¯ä»¥æ²¡æœ‰æ®µè¡¨ï¼ˆå¦‚ç›®æ ‡æ–‡ä»¶ä¸ä¼šæœ‰æ®µè¡¨ï¼‰ã€‚\næ‰§è¡Œè§†å›¾ï¼š\nå¯ä»¥ç†è§£ä¸ºç›®æ ‡æ–‡ä»¶çš„å†…å­˜è§†å›¾ã€‚\nåŠ¨æ€é“¾æ¥å™¨ï¼ˆå³åŠ è½½å™¨ï¼Œå¦‚x86æ¶æ„ linuxä¸‹çš„ /lib/ld-linux.so.2æˆ–è€…å®‰å“ç³»ç»Ÿä¸‹çš„ /system/linkerå‡ä¸ºåŠ¨æ€é“¾æ¥å™¨ï¼‰ä¼šä»¥æ‰§è¡Œè§†å›¾è§£æELFå¹¶åŠ¨æ€é“¾æ¥ï¼Œæ‰§è¡Œè§†å›¾å¯ä»¥æ²¡æœ‰èŠ‚è¡¨ã€‚\næ€»ç»“\né“¾æ¥è§†å›¾æ˜¯ä»¥èŠ‚ï¼ˆsectionï¼‰ä¸ºå•ä½ï¼Œæ‰§è¡Œè§†å›¾æ˜¯ä»¥æ®µï¼ˆsegmentï¼‰ä¸ºå•ä½ã€‚é“¾æ¥è§†å›¾å°±æ˜¯åœ¨é“¾æ¥æ—¶ç”¨åˆ°çš„è§†å›¾ï¼Œè€Œæ‰§è¡Œè§†å›¾åˆ™æ˜¯åœ¨æ‰§è¡Œæ—¶ç”¨åˆ°çš„è§†å›¾ã€‚å®é™…ä¸Šï¼Œåœ¨é“¾æ¥é˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥å¿½ç•¥Program Header Tableæ¥å¤„ç†æ­¤æ–‡ä»¶ï¼Œåœ¨è¿è¡Œé˜¶æ®µå¯ä»¥å¿½ç•¥Section Header Tableæ¥å¤„ç†æ­¤ç¨‹åºï¼ˆæ‰€ä»¥å¾ˆå¤šåŠ å›ºæ‰‹æ®µåˆ é™¤äº†Section Header Tableï¼‰ã€‚æˆ–è€…è¯´é“¾æ¥è§†å›¾æ˜¯ç»™é“¾æ¥ç¼–è¾‘å™¨ï¼ˆé™æ€é“¾æ¥å™¨ï¼‰çœ‹çš„ï¼Œæ‰§è¡Œè§†å›¾æ˜¯ç»™ç¨‹åºè§£æå™¨ï¼ˆåŠ¨æ€è¿æ¥å™¨ï¼‰çœ‹çš„ã€‚\n å¦‚ä½•è§£æä¸€ä¸ªSOæ–‡ä»¶çš„ä¾èµ–åº“\nDYNAMICæ®µä¸­çš„æ•°æ®æ ¼å¼å¦‚ä¸‹ï¼š\n\nä¸€ä¸ªåŠ¨æ€æ®µæ•°æ®é¡¹å¤§å°ä¸º8byteã€‚\nd_tag ä¸º0x00000005æ—¶ï¼Œè¯¥ç»“æ„ä½“ä¸ºDT_STRTABç±»å‹ï¼ŒæŒ‡æ˜äº†å­—ç¬¦ä¸²è¡¨çš„åœ°å€ï¼Œd_ptræŒ‡å‘.dymstrèŠ‚çš„å­—ç¬¦ä¸²è¡¨çš„åœ°å€ï¼Œæ­¤è¡¨ä¸­åŒ…å«ç¬¦å·åã€åº“åç­‰ã€‚\nd_tag ä¸º0x00000001æ—¶ï¼Œè¯¥ç»“æ„ä½“ä¸ºDT_NEEDEDç±»å‹ï¼ŒæŒ‡æ˜äº†ä¸€ä¸ªæ‰€éœ€çš„åº“çš„åå­—ï¼Œä½¿ç”¨d_valæŒ‡å‘ä¸Šè¿°å­—ç¬¦ä¸²è¡¨çš„ä¸­çš„åç§»åœ°å€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šd_valæŒ‡å‘çš„æ‰€éœ€åº“çš„åå­—çš„å­—ç¬¦ä¸²åœ°å€=å­—ç¬¦ä¸²è¡¨çš„åŸºåœ°å€+d_val\n æˆ‘ä»¬é¦–å…ˆéœ€è¦å¼„æ¸…æ¥šçš„å‡ ä¸ªæ¦‚å¿µ\nåœ¨å·²çŸ¥ELFæ–‡ä»¶æ ¼å¼ï¼Œé€šè¯»ã€ŠUnderstanding ELFã€‹ã€ŠLinuxäºŒè¿›åˆ¶åˆ†æã€‹ç¬¬ä¸€ã€äºŒç« çš„å‰æä¸‹ï¼Œæˆ‘ä»¬æ¥å›é¡¾ä¸€äº›å…³é”®æ¦‚å¿µï¼Œæ‹æ¸…æ€è·¯ï¼Œå¸®åŠ©ç†è§£åé¢ELFæ–‡ä»¶åŠ è½½è¿‡ç¨‹ä¸­çš„é“¾æ¥å’Œé‡å®šä½åˆ°åº•æ˜¯å¦‚ä½•è¿è½¬çš„ã€‚\n é“¾æ¥ç¼–è¾‘å™¨\né“¾æ¥ç¼–è¾‘å™¨æ‰€åšçš„å·¥ä½œå°±æ˜¯å°†æ‰€æœ‰çš„äºŒè¿›åˆ¶æ–‡ä»¶é“¾æ¥èµ·æ¥èåˆæˆä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œä¸ç®¡è¿™äº›äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯ç¼–è¯‘å™¨ç”Ÿæˆçš„ç›®æ ‡äºŒè¿›åˆ¶æ–‡ä»¶è¿˜æ˜¯å…±äº«åº“æ–‡ä»¶ã€‚Android NDKä¸­/ndk/xx.xxx/toolchains/aarch64-linux-android-4.9/prebuilt/windows-x86_64/bin/aarch64-linux-android-ld.exe å°±æ˜¯é“¾æ¥ç¼–è¾‘å™¨ã€‚\n åŠ¨æ€é“¾æ¥å™¨\nåŠ¨æ€é“¾æ¥å™¨æ˜¯æ“ä½œç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œè´Ÿè´£æŒ‰ç…§å¯æ‰§è¡Œç¨‹åºè¿è¡Œæ—¶çš„éœ€è¦è£…å…¥ä¸é“¾æ¥å…±äº«åº“ã€‚è£…å…¥æ˜¯æŒ‡æŠŠå…±äº«åº“åœ¨å¤–éƒ¨å­˜å‚¨ä¸Šçš„å†…å®¹å¤åˆ¶åˆ°å†…å­˜ï¼Œé“¾æ¥æ˜¯æŒ‡å¡«å……è·³è½¬è¡¨ï¼ˆjump tableï¼‰ä¸é‡å®šä½æŒ‡é’ˆã€‚\n é‡å®šä½\né‡å®šä½å°±æ˜¯å°†ç¬¦å·å®šä¹‰å’Œç¬¦å·å¼•ç”¨è¿›è¡Œè¿æ¥çš„è¿‡ç¨‹ã€‚å¯é‡å®šä½æ–‡ä»¶éœ€è¦åŒ…å«æè¿°å¦‚ä½•ä¿®æ”¹èŠ‚å†…å®¹çš„ç›¸å…³ä¿¡æ¯ï¼Œä»è€Œä½¿å¾—å¯æ‰§è¡Œæ–‡ä»¶å’Œå…±äº«ç›®æ ‡æ–‡ä»¶èƒ½å¤Ÿä¿å­˜è¿›ç¨‹çš„ç¨‹åºé•œåƒæ‰€éœ€çš„æ­£ç¡®ä¿¡æ¯ã€‚é‡å®šä½æ¡ç›®å°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´çš„ç›¸å…³ä¿¡æ¯ã€‚å¦‚.rel.pltèŠ‚ä¿å­˜.pltèŠ‚çš„åŠ¨æ€é“¾æ¥è¿‡ç¨‹ä¸­çš„é‡å®šä½è¡¨ã€‚\n åŠ¨æ€é“¾æ¥ç¬¦å·è¡¨(.dynsymèŠ‚)\nåŠ¨æ€é“¾æ¥ç¬¦å·è¡¨åŒ…å«æ‰€æœ‰å¤–éƒ¨å¼•å…¥çš„ç¬¦å·,è¡¨é¡¹ç»“æ„åŒ.symtabèŠ‚çš„ElfN_Sym. è¯¥èŠ‚ä¿å­˜åœ¨textæ®µä¸­,èŠ‚ç±»å‹è¢«æ ‡è®°ä¸ºSHT_DYNSYM.\n åŠ¨æ€é“¾æ¥é‡å®šä½è¡¨\né‡å®šä½è¡¨é¡¹ç»“æ„ä¸ºElfN_Rela/ElfN_Relï¼Œé‡å®šä½è¡¨å­˜å‚¨åœ¨.rel.*å’Œ.rela.*èŠ‚ä¸­ã€‚\nr_offsetæŒ‡å‘éœ€è¦è¿›è¡Œé‡å®šä½æ“ä½œçš„ä½ç½®ã€‚å³å®ƒæ‰€æŒ‡å‘çš„ä½ç½®éœ€è¦è¢«åŠ¨æ€é“¾æ¥å™¨ä¿®æ”¹ã€‚é‡å®šä½æ“ä½œè¯¦ç»†æè¿°äº†å¦‚ä½•å¯¹å­˜æ”¾åœ¨r_offsetä¸­çš„ä»£ç æˆ–æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚\nr_infoæŒ‡å®šå¿…é¡»å¯¹å…¶è¿›è¡Œé‡å®šä½çš„ç¬¦å·è¡¨ç´¢å¼•ä»¥åŠè¦åº”ç”¨çš„é‡å®šä½ç±»å‹ã€‚å³è¯´æ˜äº†é‡å®šä½æ“ä½œã€‚\nr_addendæŒ‡å®šå¸¸é‡åŠ æ•°ï¼Œç”¨äºè®¡ç®—å­˜å‚¨åœ¨å¯é‡å®šä½å­—æ®µä¸­çš„å€¼ã€‚è¿™é‡Œæ˜¯æ˜¾å¼åŠ æ•°å­˜å‚¨åœ¨é‡å®šä½é¡¹ä¸­ï¼Œéšå¼åŠ æ•°å­˜å‚¨åœ¨é‡å®šä½ç›®æ ‡æœ¬èº«ï¼Œä¹Ÿå°±æ˜¯è¦è¢«ä¿®æ”¹çš„ä½ç½®é‡Œçš„ã€‚\nä¸€ä¸ªâ€œé‡å®šä½èŠ‚(relocation section)â€éœ€è¦å¼•ç”¨å¦å¤–ä¸¤ä¸ªèŠ‚ï¼šä¸€ä¸ªæ˜¯ç¬¦å·è¡¨èŠ‚ï¼Œä¸€ä¸ªæ˜¯è¢«ä¿®æ”¹èŠ‚ï¼ˆæŸäº›ç±»å‹è¿˜éœ€è¦GOTè¡¨ï¼‰ã€‚åœ¨é‡å®šä½èŠ‚ä¸­ï¼ŒèŠ‚å¤´çš„sh_infoå’Œsh_linkæˆå‘˜åˆ†åˆ«æŒ‡æ˜äº†å¼•ç”¨å…³ç³»ã€‚ä¸åŒçš„ç›®æ ‡æ–‡ä»¶ä¸­ï¼Œé‡å®šä½é¡¹çš„r_offsetæˆå‘˜çš„å«ä¹‰ç•¥æœ‰ä¸åŒã€‚\n\nåœ¨é‡å®šä½æ–‡ä»¶ä¸­ï¼Œr_offsetæˆå‘˜å«æœ‰ä¸€ä¸ªèŠ‚åç§»é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé‡å®šä½èŠ‚æœ¬èº«æè¿°çš„æ˜¯å¦‚ä½•ä¿®æ”¹æ–‡ä»¶ä¸­çš„å¦ä¸€ä¸ªèŠ‚çš„å†…å®¹ï¼Œé‡å®šä½åç§»é‡(r_offset)æŒ‡å‘äº†å¦ä¸€ä¸ªèŠ‚ä¸­çš„ä¸€ä¸ªå­˜å‚¨å•å…ƒåœ°å€ã€‚\nåœ¨å¯æ‰§è¡Œæ–‡ä»¶æˆ–å…±äº«ç›®æ ‡æ–‡ä»¶ä¸­ï¼Œr_offsetå«æœ‰çš„æ˜¯ç¬¦å·å®šä¹‰åœ¨è¿›ç¨‹ç©ºé—´ä¸­çš„è™šæ‹Ÿåœ°å€ã€‚å¯æ‰§è¡Œæ–‡ä»¶å’Œå…±äº«ç›®æ ‡æ–‡ä»¶æ˜¯ç”¨äºè¿è¡Œç¨‹åºè€Œä¸æ˜¯æ„å»ºç¨‹åºçš„ï¼Œæ‰€ä»¥å¯¹å®ƒä»¬æ¥è¯´æ›´æœ‰ç”¨çš„ä¿¡æ¯æ˜¯è¿è¡ŒæœŸçš„å†…å­˜è™šæ‹Ÿåœ°å€ï¼Œè€Œä¸æ˜¯æŸä¸ªç¬¦å·å®šä¹‰åœ¨æ–‡ä»¶ä¸­çš„ä½ç½®ã€‚\n\nå…³äºé‡å®šä½ç±»å‹çš„æ›´å¤šä»‹ç»æ¨èå‚è€ƒï¼šã€ŠUnderstanding_ELF.pdfã€‹1.8 é‡å®šä½\n å…¨å±€åç§»è¡¨(Global Offset Table got)\nå…¨å±€åç§»é‡è¡¨ç”¨äºæŠŠä½ç½®ç‹¬ç«‹(Position Independent Code)çš„åœ°å€é‡å®šå‘åˆ°ç»å¯¹åœ°å€ã€‚\nå­˜åœ¨æ•°æ®æ®µï¼Œä¸ºä»€ä¹ˆè¦å¼ºè°ƒè¿™ç‚¹å‘¢ï¼Œå› ä¸ºGOTè¡¨æ˜¯éœ€è¦åŠ¨æ€ä¿®æ”¹çš„ï¼Œè€Œç°ä»£æ“ä½œç³»ç»Ÿä¸å…è®¸åŠ¨æ€ä¿®æ”¹ä»£ç æ®µã€‚ç”±äºæˆ‘ä»¬éœ€è¦åŠ¨æ€ä¿®æ”¹GOTå¸®åŠ©ç¨‹åºå¯»å€ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠGOTè¡¨èŠ‚å®‰ç½®åœ¨æ•°æ®æ®µã€‚\nå¦‚æœä¸€ä¸ªç¨‹åºè¦æ±‚ç›´æ¥è®¿é—®ç¬¦å·çš„ç»å¯¹åœ°å€ï¼Œé‚£ä¹ˆè¿™ä¸ªç¬¦å·åœ¨å…¨å±€åç§»è¡¨ä¸­å°±å¿…é¡»æœ‰ä¸€ä¸ªå¯¹åº”çš„é¡¹ã€‚åŠ¨æ€é“¾æ¥å™¨ä¼šåœ¨ç¨‹åºå¼€å§‹æ‰§è¡Œä¹‹å‰ï¼Œå¤„ç†å¥½æ‰€æœ‰å…¨å±€åç§»è¡¨çš„é‡å®šä½å·¥ä½œï¼Œè¿™äº›å’ŒGOTè¡¨ç›¸å…³çš„é‡å®šä½é¡¹ç±»å‹ä¸ºR_xxxx_GLOB_DATã€‚æœ€ååœ¨ç¨‹åºæ‰§è¡Œçš„æ—¶å€™ï¼Œå¯ä»¥ä¿è¯æ‰€æœ‰è¿™äº›ç¬¦å·éƒ½æœ‰æ­£ç¡®çš„ç»å¯¹åœ°å€ã€‚\næ­¤å¤–ï¼Œå…¨å±€åç§»è¡¨ä¸­çš„å‰ä¸‰é¡¹æ˜¯ä¿ç•™çš„ï¼Œç¬¬0é¡¹æŒæœ‰åŠ¨æ€ç»“æ„ï¼ˆ.dynmicèŠ‚ï¼‰çš„åœ°å€ï¼Œç”±ç¬¦å·_DYNAMICå¼•ç”¨ã€‚è¿™æ ·ï¼Œå…¶å®ƒç¨‹åºï¼Œæ¯”å¦‚åŠ¨æ€é“¾æ¥å™¨å°±å¯ä»¥ç›´æ¥æ‰¾åˆ°å…¶åŠ¨æ€ç»“æ„ï¼Œè€Œä¸ç”¨å€ŸåŠ©é‡å®šä½é¡¹ã€‚è¿™å¯¹äºåŠ¨æ€é“¾æ¥å™¨ç¨‹åºæ¥è¯´å°¤ä¸ºé‡è¦ï¼Œå› ä¸ºå®ƒå¿…é¡»åœ¨ä¸ä¾èµ–äºå…¶å®ƒç¨‹åºé‡å®šä½å…¶å†…å­˜é•œåƒçš„æƒ…å†µä¸‹åˆå§‹åŒ–è‡ªå·±ã€‚\n\ngot[0]ï¼šaddress of .dynamic section ä¹Ÿå°±æ˜¯æœ¬ELFåŠ¨æ€æ®µ(.dynamicæ®µï¼‰çš„è£…è½½åœ°å€\ngot[1]ï¼šaddress of link_map object( ç¼–è¯‘æ—¶å¡«å……0ï¼‰ä¹Ÿå°±æ˜¯æœ¬ELFçš„link_mapæ•°æ®ç»“æ„æè¿°ç¬¦åœ°å€ï¼Œä½œç”¨ï¼šlink_mapç»“æ„ï¼Œç»“åˆ.rel.pltæ®µçš„åç§»é‡ï¼Œæ‰èƒ½çœŸæ­£æ‰¾åˆ°è¯¥elfçš„.rel.plt\ngot[2]ï¼šaddress of _dl_runtime_resolve function (ç¼–è¯‘æ—¶å¡«å……ä¸º0) ä¹Ÿå°±æ˜¯_dl_runtime_resolveå‡½æ•°çš„åœ°å€ï¼Œæ¥å¾—åˆ°çœŸæ­£çš„å‡½æ•°åœ°å€ï¼Œå›å†™åˆ°å¯¹åº”çš„gotè¡¨ä½ç½®ä¸­ã€‚\n\nå…¨å±€åç§»é‡è¡¨çš„æ ¼å¼å’Œè§£ææ–¹æ³•æ˜¯ä¾å¤„ç†å™¨è€Œä¸åŒçš„ï¼Œå°±Intelæ¶æ„è€Œè¨€ï¼Œç¬¦å·_GLOBAL_OFFSET_TABLE_ä¼šè¢«ç”¨æ¥è®¿é—®æ­¤è¡¨ã€‚\nextern  Elf32_Addr  _GLOBAL_OFFSET_TABLE_[];\nextern  Elf64_Addr  _GLOBAL_OFFSET_TABLE_[];\nç¬¦å·_GLOBAL_OFFSET_TABLE_å¯èƒ½ä½äº.gotèŠ‚ä¸­éƒ¨ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ¥å—è´Ÿçš„æ•°ç»„ç´¢å¼•å€¼ã€‚å¯¹äº 32 ä½ä»£ç ï¼Œç¬¦å·ç±»å‹æ˜¯ Elf32_Addr æ•°ç»„ï¼›å¯¹äº 64 ä½ä»£ç ï¼Œç¬¦å·ç±»å‹æ˜¯ Elf64_Addr æ•°ç»„ã€‚æ‰€ä»¥ä¸Šè¿°çš„ç¬¬0é¡¹å¾€å¾€éƒ½åœ¨.gotèŠ‚çš„ä¸­é—´æŸä¸ªä½ç½®ä¸Šã€‚\næ¨èå‚è€ƒï¼šhttps://docs.oracle.com/cd/E26926_01/html/E25910/chapter6-74186.html\n è¿‡ç¨‹é“¾æ¥è¡¨(Procedure Linkage Table plt)\nè¿‡ç¨‹é“¾æ¥è¡¨(Procedure Linkage Table)çš„ä½œç”¨æ˜¯æŠŠä½ç½®ç‹¬ç«‹çš„å‡½æ•°è°ƒç”¨é‡å®šå‘åˆ°ç»å¯¹åœ°å€ã€‚\næ¯ä¸ªåŠ¨æ€é“¾æ¥çš„å¯æ‰§è¡Œæ–‡ä»¶å’Œå…±äº«ç›®æ ‡æ–‡ä»¶éƒ½æœ‰ä¸€ä¸ª PLTï¼ŒPLT è¡¨çš„æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€å°æ®µä»£ç ï¼Œå¯¹åº”äºæœ¬è¿è¡Œæ¨¡å—è¦å¼•ç”¨çš„ä¸€ä¸ªå…¨å±€å‡½æ•°ã€‚ç¨‹åºå¯¹æŸä¸ªå‡½æ•°çš„è®¿é—®éƒ½è¢«è°ƒæ•´ä¸ºå¯¹ PLT å…¥å£çš„è®¿é—®ã€‚\nè¿‡ç¨‹é“¾æ¥è¡¨ä¸­çš„æ¯ä¸€é¡¹éƒ½å ç”¨ 3 ä¸ªå­—ï¼ˆ12 å­—èŠ‚ï¼‰ï¼Œå¹¶ä¸”è¡¨çš„æœ€åä¸€é¡¹åè·Ÿ nop æŒ‡ä»¤ã€‚\né“¾æ¥ç¼–è¾‘å™¨ä¸èƒ½è§£æå‡½æ•°åœ¨ä¸åŒç›®æ ‡æ–‡ä»¶ä¹‹é—´çš„è·³è½¬ï¼Œé‚£ä¹ˆï¼Œå®ƒå°±æŠŠå¯¹å…¶å®ƒç›®æ ‡æ–‡ä»¶ä¸­å‡½æ•°çš„è°ƒç”¨é‡å®šå‘åˆ°ä¸€ä¸ªè¿‡ç¨‹é“¾æ¥è¡¨é¡¹ä¸­å»ã€‚\nåœ¨Intelæ¶æ„ä¸­ï¼Œè¿‡ç¨‹é“¾æ¥è¡¨ä½äºå…±äº«ä»£ç æ®µä¸­ï¼Œä½†å®ƒä»¬ä½¿ç”¨å…¨å±€åç§»è¡¨ä¸­çš„ç§æœ‰åœ°å€ã€‚åŠ¨æ€é“¾æ¥å™¨å†³å®šç›®æ ‡çš„ç»å¯¹åœ°å€ï¼Œå¹¶ä¸”ä¼šç›¸åº”åœ°ä¿®æ”¹å…¨å±€åç§»è¡¨çš„å†…å­˜é•œåƒã€‚è¿™æ ·ï¼ŒåŠ¨æ€è¿æ¥å™¨å°±å¯ä»¥åœ¨ä¸ç‰ºç‰²ä½ç½®æ— å…³æ€§å’Œä»£ç çš„å¯å…±äº«æ€§æ¡ä»¶ä¸‹ï¼Œå®ç°åˆ°ç»å¯¹åœ°å€çš„é‡å®šä½ã€‚å¯æ‰§è¡Œæ–‡ä»¶å’Œå…±äº«ç›®æ ‡æ–‡ä»¶æœ‰å„è‡ªçš„è¿‡ç¨‹é“¾æ¥è¡¨ã€‚\né‡å®šä½è¡¨ä¸è¿‡ç¨‹é“¾æ¥è¡¨å…³è”ã€‚.dynmicèŠ‚ä¸­çš„åŠ¨æ€æ•°ç»„ElfN_Dynä¸­çš„ DT_JMP_REL ç±»å‹çš„é¡¹æŒ‡å®šäº†ç¬¬ä¸€ä¸ªé‡å®šä½é¡¹çš„ä½ç½®ã€‚å¯¹äºéä¿ç•™çš„è¿‡ç¨‹é“¾æ¥è¡¨çš„æ¯ä¸€é¡¹ï¼Œé‡å®šä½è¡¨ä¸­éƒ½åŒ…å«ç›¸åŒé¡ºåºçš„å¯¹åº”é¡¹ã€‚æ‰€æœ‰è¿™äº›é¡¹çš„é‡å®šä½ç±»å‹å‡ä¸º R_SPARC_JMP_SLOTã€‚é‡å®šä½é¡¹çš„åç§»r_offsetå¯æŒ‡å®šå…³è”çš„è¿‡ç¨‹é“¾æ¥è¡¨é¡¹çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åœ°å€ã€‚ç¬¦å·è¡¨ç´¢å¼•ä¼šæŒ‡å‘ç›¸åº”çš„ç¬¦å·ã€‚\n.PLT0:\n    pushl   got_plus_4\n    jmp     *got_plus_8\n    nop;    nop\n    nop;    nop\n.PLT1:\n    jmp     *name1_in_GOT\n    pushl   $offset\n    jmp     .PLT0@PC\n.PLT2:\n    jmp     *name2_in_GOT\n    pushl   $offset\n    jmp     .PLT0@PC\n.PLT0:\n    pushl   4(%ebx)\n    jmp     *8(%ebx)\n    nop;    nop\n    nop;    nop\n.PLT1:\n    jmp     *name1@GOT(%ebx)\n    pushl   $offset\n    jmp     .PLT0@PC\n.PLT2:\n    jmp     *name2@GOT(%ebx)\n    pushl   $offset\n    jmp     .PLT0@PC\næ¯”è¾ƒä¸Šé¢ä¸¤å›¾å¯çŸ¥ï¼Œåœ¨ç»å¯¹åœ°å€ä»£ç å’Œä½ç½®æ— å…³ä»£ç ä¸­ï¼Œè¿‡ç¨‹é“¾æ¥è¡¨ä¸­çš„æŒ‡ä»¤ä½¿ç”¨çš„æ“ä½œæ•°å¯»å€æ–¹å¼ä¸åŒã€‚ä½†æ˜¯å®ƒä»¬ç»™åŠ¨æ€é“¾æ¥å™¨çš„æ¥å£éƒ½æ˜¯ç›¸åŒçš„ã€‚\næ¨èå‚è€ƒï¼šhttps://docs.oracle.com/cd/E26926_01/html/E25910/chapter6-1235.html\n ELFæ–‡ä»¶å¦‚ä½•é“¾æ¥å’Œé‡å®šä½ï¼Ÿ\n é¦–å…ˆæ˜ç¡®ä»€ä¹ˆæ˜¯é“¾æ¥å’Œé‡å®šä½\né“¾æ¥ï¼šï¼ˆä¸ªäººç†è§£ï¼‰é“¾æ¥å°±æ˜¯æŠŠä¸€ä¸ªç›®æ ‡æ–‡ä»¶ä¸­ç¬¦å·å¼•ç”¨è¿æ¥åˆ°å…¶ä»–ç›®æ ‡æ–‡ä»¶ä¸­çš„ç¬¦å·å®šä¹‰ã€‚\nä»ç¼–è¯‘/é“¾æ¥å’Œè¿è¡Œçš„è§’åº¦çœ‹ï¼Œåº“åˆ†ä¸ºåŠ¨æ€é“¾æ¥å’Œé™æ€é“¾æ¥ã€‚ç›¸åº”çš„ä¸¤ç§ä¸åŒçš„ELFæ ¼å¼æ˜ åƒï¼š\n1ï¼‰é™æ€é“¾æ¥ï¼Œåœ¨è£…å…¥/å¯åŠ¨å…¶è¿è¡Œæ—¶æ— éœ€è£…å…¥å‡½æ•°åº“æ˜ åƒã€ä¹Ÿæ— éœ€è¿›è¡ŒåŠ¨æ€è¿æ¥ã€‚\n2ï¼‰åŠ¨æ€è¿æ¥ï¼Œéœ€è¦åœ¨è£…å…¥/å¯åŠ¨å…¶è¿è¡Œæ—¶åŒæ—¶è£…å…¥å‡½æ•°åº“æ˜ åƒå¹¶è¿›è¡ŒåŠ¨æ€é“¾æ¥ã€‚\nLinuxå†…æ ¸æ—¢æ”¯æŒé™æ€é“¾æ¥çš„ELFæ˜ åƒï¼Œä¹Ÿæ”¯æŒåŠ¨æ€é“¾æ¥çš„ELFæ˜ åƒï¼ŒGNUè§„å®šï¼š\n1ï¼‰æŠŠELFæ˜ åƒçš„è£…å…¥/å¯åŠ¨åœ¨Linuxå†…æ ¸ä¸­å®ç°ï¼›\n2ï¼‰æŠŠåŠ¨æ€é“¾æ¥çš„å®ç°æ”¾åœ¨ç”¨æˆ·ç©ºé—´ï¼ˆglibcï¼‰ï¼Œå¹¶ä¸ºæ­¤æä¾›ä¸€ä¸ªç§°ä¸ºâ€è§£é‡Šå™¨â€(ld-linux.so.2)çš„å·¥å…·è½¯ä»¶ï¼Œè€Œè§£é‡Šå™¨çš„è£…å…¥/å¯åŠ¨ä¹Ÿç”±å†…æ ¸è´Ÿè´£ã€‚\né‡å®šä½ï¼šå°†ç¬¦å·å®šä¹‰å’Œç¬¦å·å¼•ç”¨è¿›è¡Œè¿æ¥çš„è¿‡ç¨‹ã€‚\nå…¶å®é‡å®šä½å¯ä»¥ç®—ä½œè¿æ¥çš„ä¸€ä¸ªæ­¥éª¤ï¼Œä¸è¿‡è¿™é‡Œæˆ‘ä»¬ä¸»è¦è®²è§£è¿™ä¸¤éƒ¨åˆ†ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‹†å¼€åšç¬”è®°ã€‚\nä¸‹é¢ï¼Œæˆ‘ä»¬ä»¥åŠ¨æ€é“¾æ¥ä¸ºä¸»è®²è§£ä¸€ä¸ªELFå¯æ‰§è¡Œç¨‹åºçš„é“¾æ¥å’Œé‡å®šä½è¿‡ç¨‹ã€‚\n åŠ¨æ€é“¾æ¥\nåŠ¨æ€é“¾æ¥çš„æ­¥éª¤åˆ†ä¸º3æ­¥ï¼šåŠ¨æ€é“¾æ¥å™¨è‡ªä¸¾ï¼Œè£…è½½å…±äº«å¯¹è±¡ï¼Œé‡å®šä½å’Œåˆå§‹åŒ–ã€‚\nPT_INERPæ®µè¯´æ˜äº†éœ€è¦çš„åŠ¨æ€é“¾æ¥å™¨æ¯”å¦‚/lib64/ld-linux-x86-64.so.2\nåŠ¨æ€é“¾æ¥å™¨ä¸æ™®é€šå…±äº«å¯¹è±¡ä¸€æ ·è¢«æ˜ å°„åˆ°äº†è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œåœ¨ç³»ç»Ÿå¼€å§‹è¿è¡Œç¨‹åºä¹‹å‰ï¼Œé¦–å…ˆä¼šæŠŠæ§åˆ¶æƒäº¤ç»™åŠ¨æ€é“¾æ¥å™¨ï¼Œç”±å®ƒå®Œæˆæ‰€æœ‰çš„åŠ¨æ€é“¾æ¥å·¥ä½œä»¥åå†æŠŠæ§åˆ¶æƒäº¤ç»™ç¨‹åºï¼Œç„¶åå¼€å§‹æ‰§è¡Œã€‚\nåŠ¨æ€é“¾æ¥å™¨è‡ªä¸¾\nåŠ¨æ€é“¾æ¥å™¨æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå…±äº«å¯¹è±¡ï¼Œä½†æœ‰ä¸€äº›ç‰¹æ®Šæ€§ã€‚é¦–å…ˆï¼ŒåŠ¨æ€é“¾æ¥å™¨æœ¬èº«ä¸å¯ä»¥ä¾èµ–äºå…¶ä»–ä»»ä½•å…±äº«å¯¹è±¡ï¼›å…¶æ¬¡åŠ¨æ€é“¾æ¥å™¨æœ¬èº«æ‰€éœ€è¦çš„å…¨å±€å’Œé™æ€å˜é‡çš„é‡å®šä½å·¥ä½œç”±å®ƒæœ¬èº«å®Œæˆã€‚å¯¹äºç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œå¯ä»¥äººä¸ºçš„æ§åˆ¶åœ¨ç¼–å†™åŠ¨æ€é“¾æ¥å™¨æ—¶ä¿è¯ä¸ä½¿ç”¨ä»»ä½•ç³»ç»Ÿåº“ã€è¿è¡Œåº“ï¼›å¯¹äºç¬¬äºŒä¸ªæ¡ä»¶ï¼ŒåŠ¨æ€é“¾æ¥å™¨å¿…é¡»åœ¨å¯åŠ¨æ—¶æœ‰ä¸€æ®µéå¸¸ç²¾å·§çš„ä»£ç å¯ä»¥å®Œæˆè¿™é¡¹è‰°å·¨çš„å·¥ä½œè€ŒåŒæ—¶åˆä¸èƒ½ç”¨åˆ°å…¨å±€å’Œé™æ€å˜é‡ã€‚è¿™ç§å…·æœ‰ä¸€å®šé™åˆ¶æ¡ä»¶çš„å¯åŠ¨ä»£ç å¾€å¾€è¢«ç§°ä¸ºè‡ªä¸¾ï¼ˆBootstrapï¼‰ã€‚\nåŠ¨æ€é“¾æ¥å™¨å…¥å£åœ°å€å³æ˜¯è‡ªä¸¾ä»£ç çš„å…¥å£ï¼Œå½“æ“ä½œç³»ç»Ÿå°†è¿›ç¨‹æ§åˆ¶æƒäº¤ç»™åŠ¨æ€é“¾æ¥å™¨æ—¶ï¼ŒåŠ¨æ€é“¾æ¥å™¨çš„è‡ªä¸¾ä»£ç å³å¼€å§‹æ‰§è¡Œã€‚è‡ªä¸¾ä»£ç é¦–å…ˆä¼šæ‰¾åˆ°å®ƒè‡ªå·±çš„GOTã€‚è€ŒGOTçš„ç¬¬ä¸€ä¸ªå…¥å£ä¿å­˜çš„å³æ˜¯â€œ.dynamicâ€æ®µçš„åç§»åœ°å€ï¼Œç”±æ­¤æ‰¾åˆ°äº†åŠ¨æ€è¿æ¥å™¨æœ¬èº«çš„â€œ.dynamicâ€æ®µã€‚é€šè¿‡â€œ.dynamicâ€ä¸­çš„ä¿¡æ¯ï¼Œè‡ªä¸¾ä»£ç ä¾¿å¯ä»¥è·å¾—åŠ¨æ€é“¾æ¥å™¨æœ¬èº«çš„é‡å®šä½è¡¨å’Œç¬¦å·è¡¨ç­‰ï¼Œä»è€Œå¾—åˆ°åŠ¨æ€é“¾æ¥å™¨æœ¬èº«çš„é‡å®šä½å…¥å£ï¼Œå…ˆå°†å®ƒä»¬å…¨éƒ¨é‡å®šä½ã€‚ä»è¿™ä¸€æ­¥å¼€å§‹ï¼ŒåŠ¨æ€é“¾æ¥å™¨ä»£ç ä¸­æ‰å¯ä»¥å¼€å§‹ä½¿ç”¨è‡ªå·±çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ã€‚å®é™…ä¸Šåœ¨åŠ¨æ€é“¾æ¥å™¨çš„è‡ªä¸¾ä»£ç ä¸­ï¼Œé™¤äº†ä¸å¯ä»¥ä½¿ç”¨å…¨å±€å˜é‡å’Œé™æ€å˜é‡ä¹‹å¤–ï¼Œç”šè‡³ä¸èƒ½è°ƒç”¨å‡½æ•°ï¼Œå³åŠ¨æ€é“¾æ¥å™¨æœ¬èº«çš„å‡½æ•°ä¹Ÿä¸èƒ½è°ƒç”¨ã€‚å› ä¸ºä½¿ç”¨PICæ¨¡å¼ç¼–è¯‘çš„å…±äº«å¯¹è±¡ï¼Œå¯¹äºæ¨¡å—å†…éƒ¨çš„å‡½æ•°è°ƒç”¨ä¹Ÿæ˜¯é‡‡ç”¨è·Ÿæ¨¡å—å¤–éƒ¨å‡½æ•°è°ƒç”¨ä¸€æ ·çš„æ–¹å¼ï¼Œå³ä½¿ç”¨GOT/PLTçš„æ–¹å¼ï¼Œæ‰€ä»¥åœ¨GOT/PLTæ²¡æœ‰è¢«é‡å®šä½ä¹‹å‰ï¼Œè‡ªä¸¾ä»£ç ä¸å¯ä»¥ä½¿ç”¨ä»»ä½•å…¨å±€å˜é‡ï¼Œä¹Ÿä¸å¯ä»¥è°ƒç”¨å‡½æ•°ã€‚\nè£…è½½å…±äº«å¯¹è±¡\nå®ŒæˆåŸºæœ¬è‡ªä¸¾ä»¥åï¼ŒåŠ¨æ€é“¾æ¥å™¨å°†å¯æ‰§è¡Œæ–‡ä»¶å’Œé“¾æ¥å™¨æœ¬èº«çš„ç¬¦å·è¡¨éƒ½åˆå¹¶åˆ°ä¸€ä¸ªç¬¦å·è¡¨å½“ä¸­ï¼Œç§°å®ƒä¸ºå…¨å±€ç¬¦å·è¡¨ï¼ˆGlobal Symbol Tableï¼‰ã€‚ç„¶åé“¾æ¥å™¨å¼€å§‹å¯»æ‰¾å¯æ‰§è¡Œæ–‡ä»¶æ‰€ä¾èµ–çš„å…±äº«å¯¹è±¡ã€‚åœ¨â€œ.dynamicâ€æ®µä¸­ï¼Œæœ‰ä¸€ç§ç±»å‹çš„å…¥å£æ˜¯DT_NEEDEDï¼Œå®ƒæ‰€æŒ‡å‡ºçš„æ˜¯è¯¥å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæˆ–å…±äº«å¯¹è±¡ï¼‰æ‰€ä¾èµ–çš„å…±äº«å¯¹è±¡ã€‚ç”±æ­¤ï¼Œé“¾æ¥å™¨å¯ä»¥åˆ—å‡ºå¯æ‰§è¡Œæ–‡ä»¶æ‰€éœ€è¦çš„æ‰€æœ‰å…±äº«å¯¹è±¡ï¼Œå¹¶å°†è¿™äº›å…±äº«å¯¹è±¡çš„åå­—æ”¾å…¥åˆ°ä¸€ä¸ªè£…è½½é›†åˆä¸­ã€‚ç„¶åé“¾æ¥å™¨å¼€å§‹ä»é›†åˆé‡Œå–ä¸€ä¸ªæ‰€éœ€è¦çš„å…±äº«å¯¹è±¡çš„åå­—ï¼Œæ‰¾åˆ°ç›¸åº”çš„æ–‡ä»¶åæ‰“å¼€è¯¥æ–‡ä»¶ï¼Œè¯»å–ç›¸åº”çš„ELFæ–‡ä»¶å¤´å’Œâ€œ.dynamicâ€æ®µï¼Œç„¶åå°†å®ƒç›¸åº”çš„ä»£ç æ®µå’Œæ•°æ®æ®µæ˜ å°„åˆ°è¿›ç¨‹ç©ºé—´ä¸­ã€‚å¦‚æœè¿™ä¸ªELFå…±äº«å¯¹è±¡è¿˜ä¾èµ–äºå…¶ä»–å…±äº«å¯¹è±¡ï¼Œé‚£ä¹ˆå°†æ‰€ä¾èµ–çš„å…±äº«å¯¹è±¡çš„åå­—æ”¾åˆ°è£…è½½é›†åˆä¸­ã€‚å¦‚æ­¤å¾ªç¯ç›´åˆ°æ‰€æœ‰ä¾èµ–çš„å…±äº«å¯¹è±¡éƒ½è¢«è£…è½½è¿›æ¥ä¸ºæ­¢ï¼Œå½“ç„¶é“¾æ¥å™¨å¯ä»¥æœ‰ä¸åŒçš„è£…è½½é¡ºåºï¼Œå¦‚æœæŠŠä¾èµ–å…³ç³»çœ‹ä½œä¸€ä¸ªå›¾çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªè£…è½½è¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªå›¾çš„éå†è¿‡ç¨‹ï¼Œé“¾æ¥å™¨å¯èƒ½ä¼šä½¿ç”¨æ·±åº¦ä¼˜å…ˆæˆ–è€…å¹¿åº¦ä¼˜å…ˆæˆ–è€…å…¶ä»–çš„é¡ºåºæ¥éå†æ•´ä¸ªå›¾ï¼Œè¿™å–å†³äºé“¾æ¥å™¨ï¼Œæ¯”è¾ƒå¸¸è§çš„ç®—æ³•ä¸€èˆ¬éƒ½æ˜¯å¹¿åº¦ä¼˜å…ˆçš„ã€‚\nå½“ä¸€ä¸ªæ–°çš„å…±äº«å¯¹è±¡è¢«è£…è½½è¿›æ¥çš„æ—¶å€™ï¼Œå®ƒçš„ç¬¦å·è¡¨ä¼šè¢«åˆå¹¶åˆ°å…¨å±€ç¬¦å·è¡¨ä¸­ï¼Œæ‰€ä»¥å½“æ‰€æœ‰çš„å…±äº«å¯¹è±¡éƒ½è¢«è£…è½½è¿›æ¥çš„æ—¶å€™ï¼Œå…¨å±€ç¬¦å·è¡¨é‡Œé¢å°†åŒ…å«è¿›ç¨‹ä¸­æ‰€æœ‰çš„åŠ¨æ€é“¾æ¥æ‰€éœ€è¦çš„ç¬¦å·ã€‚\nç¬¦å·çš„ä¼˜å…ˆçº§ï¼š\nä¸€ä¸ªå…±äº«å¯¹è±¡é‡Œé¢çš„å…¨å±€ç¬¦å·è¢«å¦ä¸€ä¸ªå…±äº«å¯¹è±¡çš„åŒåå…¨å±€ç¬¦å·è¦†ç›–çš„ç°è±¡åˆè¢«ç§°ä¸ºå…±äº«å¯¹è±¡å…¨å±€ç¬¦å·ä»‹å…¥ï¼ˆGlobal Symbol Interposeï¼‰ã€‚å…³äºå…¨å±€ç¬¦å·ä»‹å…¥è¿™ä¸ªé—®é¢˜ï¼Œå®é™…ä¸ŠLinuxä¸‹çš„åŠ¨æ€é“¾æ¥å™¨æ˜¯è¿™æ ·å¤„ç†çš„ï¼šå®ƒå®šä¹‰äº†ä¸€ä¸ªè§„åˆ™ï¼Œé‚£å°±æ˜¯å½“ä¸€ä¸ªç¬¦å·éœ€è¦è¢«åŠ å…¥å…¨å±€ç¬¦å·è¡¨æ—¶ï¼Œå¦‚æœç›¸åŒçš„ç¬¦å·åå·²ç»å­˜åœ¨ï¼Œåˆ™ååŠ å…¥çš„ç¬¦å·è¢«å¿½ç•¥ã€‚æ‰€ä»¥å½“ç¨‹åºä½¿ç”¨å¤§é‡å…±äº«å¯¹è±¡æ—¶åº”è¯¥éå¸¸å°å¿ƒç¬¦å·çš„é‡åé—®é¢˜ã€‚\nä¸‹é¢è®²è§£æœ€åä¸€éƒ¨åˆ†ï¼Œé‡å®šä½å’Œåˆå§‹åŒ–ã€‚\n é‡å®šä½\né‡å®šä½æ˜¯è§£æELFç¨‹åºçš„æœ€åä¸€æ­¥ï¼Œå®Œæˆé‡å®šä½ä¸€ä¸ªELFç¨‹åºå°±å¯ä»¥æ‰§è¡Œäº†ã€‚\nå½“ä¸Šé¢çš„æ­¥éª¤å®Œæˆä¹‹åï¼Œé“¾æ¥å™¨å¼€å§‹é‡æ–°éå†å¯æ‰§è¡Œæ–‡ä»¶å’Œæ¯ä¸ªå…±äº«å¯¹è±¡çš„é‡å®šä½è¡¨ï¼Œå°†å®ƒä»¬çš„GOT/PLTä¸­çš„æ¯ä¸ªéœ€è¦é‡å®šä½çš„ä½ç½®è¿›è¡Œä¿®æ­£ã€‚å› ä¸ºæ­¤æ—¶åŠ¨æ€é“¾æ¥å™¨å·²ç»æ‹¥æœ‰äº†è¿›ç¨‹çš„å…¨å±€ç¬¦å·è¡¨ï¼Œæ‰€ä»¥è¿™ä¸ªä¿®æ­£è¿‡ç¨‹ä¹Ÿæ˜¾å¾—æ¯”è¾ƒå®¹æ˜“ã€‚\nELFä½¿ç”¨PLTï¼ˆProcedure Linkage Tableï¼‰æ¥å®ç°å»¶è¿Ÿç»‘å®šï¼Œå®ƒä½¿ç”¨äº†ä¸€äº›å¾ˆç²¾å·§çš„æŒ‡ä»¤åºåˆ—æ¥å®Œæˆã€‚åœ¨Glibcä¸­ï¼ŒåŠ¨æ€é“¾æ¥å™¨å®Œæˆç»‘å®šå·¥ä½œçš„å‡½æ•°å«_dl_runtime_resolve()ï¼Œå®ƒå¿…é¡»çŸ¥é“ç»‘å®šå‘ç”Ÿåœ¨å“ªä¸ªæ¨¡å—ä¸­çš„å“ªä¸ªå‡½æ•°ï¼Œå› æ­¤å‡è®¾å…¶å‡½æ•°åŸå‹ä¸º_dl_runtime_resolve(module, function)ã€‚ å½“è°ƒç”¨æŸä¸ªå¤–éƒ¨æ¨¡å—çš„å‡½æ•°æ—¶ï¼Œå¹¶ä¸ç›´æ¥é€šè¿‡GOTè·³è½¬ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªå«ä½œPLTé¡¹çš„ç»“æ„æ¥è¿›è¡Œè·³è½¬ï¼Œæ¯ä¸ªå¤–éƒ¨å‡½æ•°åœ¨PLTä¸­éƒ½æœ‰ä¸€ä¸ªç›¸åº”çš„é¡¹ï¼Œæ¯”å¦‚bar()å‡½æ•°åœ¨PLTä¸­çš„é¡¹çš„åœ°å€ç§°ä¸ºbar@pltã€‚æ¥çœ‹çœ‹bar@pltçš„å®ç°ï¼š\nbar@plt:\njmp *(bar@GOT)\npush n\npush moduleID\njump _dl_runtime_resolve\nbar@pltçš„ç¬¬ä¸€æ¡æŒ‡ä»¤æ˜¯é€šè¿‡GOTé—´æ¥è·³è½¬çš„æŒ‡ä»¤ã€‚bar@GOTè¡¨ç¤ºGOTä¸­ä¿å­˜bar()è¿™ä¸ªå‡½æ•°ç›¸åº”çš„é¡¹ã€‚å¦‚æœé“¾æ¥å™¨åœ¨åˆå§‹åŒ–é˜¶æ®µå·²å°†bar()çš„åœ°å€å¡«å…¥è¯¥é¡¹ï¼Œå°±è·³è½¬åˆ°bar()ã€‚ä½†ä¸ºäº†å®ç°å»¶è¿Ÿç»‘å®šï¼Œé“¾æ¥å™¨åœ¨åˆå§‹åŒ–é˜¶æ®µå¹¶æ²¡æœ‰å°†bar()çš„åœ°å€å¡«å…¥åˆ°è¯¥é¡¹ï¼Œè€Œæ˜¯å°†ä¸Šé¢ä»£ç ä¸­ç¬¬äºŒæ¡æŒ‡ä»¤push nçš„åœ°å€å¡«å…¥åˆ°bar@GOTä¸­ï¼Œè¿™ä¸ªæ­¥éª¤ä¸éœ€è¦æŸ¥æ‰¾ä»»ä½•ç¬¦å·ï¼Œæ‰€ä»¥ä»£ä»·å¾ˆä½ã€‚å¾ˆæ˜æ˜¾ï¼Œç¬¬ä¸€æ¡æŒ‡ä»¤çš„æ•ˆæœæ˜¯è·³è½¬åˆ°ç¬¬äºŒæ¡æŒ‡ä»¤ï¼Œç›¸å½“äºæ²¡æœ‰è¿›è¡Œä»»ä½•æ“ä½œã€‚ç¬¬äºŒæ¡æŒ‡ä»¤å°†ä¸€ä¸ªæ•°å­—nå‹å…¥å †æ ˆä¸­ï¼Œè¿™ä¸ªæ•°å­—æ˜¯barè¿™ä¸ªç¬¦å·å¼•ç”¨åœ¨é‡å®šä½è¡¨.rel.pltä¸­çš„ä¸‹æ ‡ã€‚æ¥ç€åˆæ˜¯ä¸€æ¡pushæŒ‡ä»¤å°†æ¨¡å—çš„IDå‹å…¥åˆ°å †æ ˆï¼Œç„¶åè·³è½¬åˆ°_dl_runtime_resolveã€‚è¿™å®é™…ä¸Šå°±æ˜¯åœ¨å®ç°_dl_runtime_resolveå‡½æ•°è°ƒç”¨ï¼Œå®ƒåœ¨è¿›è¡Œä¸€ç³»åˆ—ç¬¦å·è§£æå’Œé‡å®šä½å·¥ä½œä»¥åå°†bar()çš„çœŸæ­£åœ°å€å¡«å…¥åˆ°bar@GOTä¸­ã€‚\nä¹‹åå½“æˆ‘ä»¬å†æ¬¡è°ƒç”¨bar@pltæ—¶ï¼Œç¬¬ä¸€æ¡jmpæŒ‡ä»¤å°±èƒ½å¤Ÿè·³è½¬åˆ°çœŸæ­£çš„bar()å‡½æ•°ä¸­ï¼Œbar()å‡½æ•°è¿”å›çš„æ—¶å€™ä¼šæ ¹æ®å †æ ˆé‡Œé¢ä¿å­˜çš„EIPç›´æ¥è¿”å›åˆ°è°ƒç”¨è€…ï¼Œè€Œä¸ä¼šå†ç»§ç»­æ‰§è¡Œbar@pltä¸­ç¬¬äºŒæ¡æŒ‡ä»¤å¼€å§‹çš„é‚£æ®µä»£ç ï¼Œé‚£æ®µä»£ç åªä¼šåœ¨ç¬¦å·æœªè¢«è§£ææ—¶æ‰§è¡Œä¸€æ¬¡ã€‚\nä¸Šé¢æè¿°çš„æ˜¯PLTçš„åŸºæœ¬åŸç†ï¼ŒPLTçœŸæ­£çš„å®ç°è¦æ¯”å®ƒçš„ç»“æ„ç¨å¾®å¤æ‚ä¸€äº›ã€‚ELFå°†GOTæ‹†åˆ†æˆäº†ä¸¤ä¸ªè¡¨å«åšâ€œ.gotâ€å’Œâ€œ.got.pltâ€ã€‚å…¶ä¸­â€œ.gotâ€ç”¨æ¥ä¿å­˜å…¨å±€å˜é‡å¼•ç”¨çš„åœ°å€ï¼Œâ€œ.got.pltâ€ç”¨æ¥ä¿å­˜å‡½æ•°å¼•ç”¨çš„åœ°å€ï¼Œå³æŠŠå¤–éƒ¨å‡½æ•°çš„å¼•ç”¨åˆ†ç¦»åˆ°â€œ.got.pltâ€ä¸­ã€‚å¦å¤–â€œ.got.pltâ€çš„å‰ä¸‰é¡¹æ˜¯æœ‰ç‰¹æ®Šæ„ä¹‰çš„ï¼š\n\nç¬¬ä¸€é¡¹ä¿å­˜çš„æ˜¯â€œ.dynamicâ€æ®µçš„åœ°å€ï¼Œè¿™ä¸ªæ®µæè¿°äº†æœ¬æ¨¡å—åŠ¨æ€é“¾æ¥ç›¸å…³çš„ä¿¡æ¯\nç¬¬äºŒé¡¹ä¿å­˜çš„æ˜¯æœ¬æ¨¡å—çš„IDã€‚\nç¬¬ä¸‰é¡¹ä¿å­˜çš„æ˜¯_dl_runtime_resolve()çš„åœ°å€ã€‚\n\nå…¶ä¸­ç¬¬äºŒé¡¹å’Œç¬¬ä¸‰é¡¹ç”±åŠ¨æ€é“¾æ¥å™¨åœ¨è£…è½½å…±äº«æ¨¡å—çš„æ—¶å€™è´Ÿè´£å°†å®ƒä»¬åˆå§‹åŒ–ã€‚â€œ.got.pltâ€çš„å…¶ä½™é¡¹åˆ†åˆ«å¯¹åº”æ¯ä¸ªå¤–éƒ¨å‡½æ•°çš„å¼•ç”¨ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nPLTçš„ç»“æ„ä¹Ÿç¨æœ‰ä¸åŒï¼Œä¸ºäº†å‡å°‘ä»£ç çš„é‡å¤ï¼ŒELFæŠŠä¸Šé¢ä¾‹å­ä¸­çš„æœ€åä¸¤æ¡æŒ‡ä»¤æ”¾åˆ°PLTä¸­çš„ç¬¬ä¸€é¡¹ã€‚å¹¶ä¸”è§„å®šæ¯ä¸€é¡¹çš„é•¿åº¦æ˜¯16ä¸ªå­—èŠ‚ï¼Œåˆšå¥½ç”¨æ¥å­˜æ”¾3æ¡æŒ‡ä»¤ã€‚å®é™…çš„PLTåŸºæœ¬ç»“æ„ä»£ç å¦‚ä¸‹ï¼š\nPLT0:\npush *(GOT + 4)\njump *(GOT + 8)\n...\nbar@plt:\njmp *(bar@GOT)\npush n\njump PLT0\nPLTåœ¨ELFæ–‡ä»¶ä¸­ä»¥ç‹¬ç«‹çš„æ®µå­˜æ”¾ï¼Œæ®µåé€šå¸¸å«åšâ€œ.pltâ€ï¼Œå› ä¸ºå®ƒæœ¬èº«æ˜¯ä¸€äº›åœ°å€æ— å…³çš„ä»£ç ï¼Œæ‰€ä»¥å¯ä»¥è·Ÿä»£ç æ®µç­‰ä¸€èµ·åˆå¹¶æˆåŒä¸€ä¸ªå¯è¯»å¯æ‰§è¡Œçš„â€œSegmentâ€è¢«è£…è½½å…¥å†…å­˜ã€‚\n\nå…±äº«å¯¹è±¡ä¸­å­˜åœ¨.plt,.rel.plt,.got,.got.pltÂ 4ä¸ªç›¸å…³çš„æ®µã€‚\n\né‡å®šä½å®Œæˆä¹‹åï¼Œå¦‚æœæŸä¸ªå…±äº«å¯¹è±¡æœ‰â€œ.initâ€æ®µï¼Œé‚£ä¹ˆåŠ¨æ€é“¾æ¥å™¨ä¼šæ‰§è¡Œâ€œ.initâ€æ®µä¸­çš„ä»£ç ï¼Œç”¨ä»¥å®ç°å…±äº«å¯¹è±¡ç‰¹æœ‰çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œæ¯”å¦‚æœ€å¸¸è§çš„ï¼Œå…±äº«å¯¹è±¡ä¸­çš„Cçš„å…¨å±€/é™æ€å¯¹è±¡çš„æ„é€ å°±éœ€è¦é€šè¿‡â€œ.initâ€æ¥åˆå§‹åŒ–ã€‚ç›¸åº”åœ°ï¼Œå…±äº«å¯¹è±¡ä¸­è¿˜å¯èƒ½æœ‰â€œ.finitâ€æ®µï¼Œå½“è¿›ç¨‹é€€å‡ºæ—¶ä¼šæ‰§è¡Œâ€œ.finitâ€æ®µä¸­çš„ä»£ç ï¼Œå¯ä»¥ç”¨æ¥å®ç°ç±»ä¼¼Cå…¨å±€å¯¹è±¡ææ„ä¹‹ç±»çš„æ“ä½œã€‚\nå¦‚æœè¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶ä¹Ÿæœ‰â€œ.initâ€æ®µï¼Œé‚£ä¹ˆåŠ¨æ€é“¾æ¥å™¨ä¸ä¼šæ‰§è¡Œå®ƒï¼Œå› ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„â€œ.initâ€æ®µå’Œâ€œ.finitâ€æ®µç”±ç¨‹åºåˆå§‹åŒ–éƒ¨åˆ†ä»£ç è´Ÿè´£æ‰§è¡Œã€‚\nå½“å®Œæˆäº†é‡å®šä½å’Œåˆå§‹åŒ–ä¹‹åï¼Œæ‰€æœ‰çš„å‡†å¤‡å·¥ä½œå°±å®£å‘Šå®Œæˆäº†ï¼Œæ‰€éœ€è¦çš„å…±äº«å¯¹è±¡ä¹Ÿéƒ½å·²ç»è£…è½½å¹¶ä¸”é“¾æ¥å®Œæˆäº†ï¼Œè¿™æ—¶å€™åŠ¨æ€é“¾æ¥å™¨å°±å¦‚é‡Šé‡è´Ÿï¼Œå°†è¿›ç¨‹çš„æ§åˆ¶æƒè½¬äº¤ç»™ç¨‹åºçš„å…¥å£å¹¶ä¸”å¼€å§‹æ‰§è¡Œã€‚\n æ€»ç»“\næˆ‘å‘ç°ç°é˜¶æ®µæˆ‘è¿˜æ˜¯å¾ˆéš¾å¾ˆå¥½çš„æ€»ç»“ELFæ–‡ä»¶çš„è§£æè¿‡ç¨‹ï¼Œè¿˜éœ€è¦ä¸€æ®µæ—¶é—´çš„å®è·µå’Œå­¦ä¹ ï¼Œå…ˆæŒ–ä¸ªå‘2021å¹´ä¹‹å†…ä¸€å®šè¦æŠŠè¿™ç¯‡æ–‡ç« æ‹é¡ºåˆ°é€šä¿—æ˜“æ‡‚ã€‚\nå‚è€ƒï¼š\nelf(5) - Linux man page https://linux.die.net/man/5/elf\nã€ŠUnderstanding_ELF.pdfã€‹ https://paper.seebug.org/papers/Archive/refs/elf/Understanding_ELF.pdf\nelf.h https://github.com/torvalds/linux/blob/master/include/uapi/linux/elf.h\næ·±å…¥ç†è§£åŠ¨æ€é“¾æ¥ https://www.jianshu.com/p/cdb5cfcb5056\nELFæ–‡ä»¶åŠ è½½è¿‡ç¨‹ https://zhuanlan.zhihu.com/p/287863861\nELFæ–‡ä»¶çš„åŠ è½½è¿‡ç¨‹(load_elf_binaryå‡½æ•°è¯¦è§£)â€“Linuxè¿›ç¨‹çš„ç®¡ç†ä¸è°ƒåº¦ï¼ˆåä¸‰ï¼‰ https://cloud.tencent.com/developer/article/1351964\nã€ŠLinuxäºŒè¿›åˆ¶åˆ†æã€‹\nOracle Docsã€Šé“¾æ¥ç¨‹åºå’Œåº“æŒ‡å—ã€‹ç¬¬ 13 ç« ç¨‹åºè£…å…¥å’ŒåŠ¨æ€é“¾æ¥ https://docs.oracle.com/cd/E26926_01/html/E25910/glchi.html\nELFå¯æ‰§è¡Œæ–‡ä»¶åœ¨è™šæ‹Ÿåœ°å€ç©ºé—´çš„åˆ†å¸ƒï¼šhttps://github.com/chenpengcong/blog/issues/14\nä»PLTå’ŒGOTçš„è§’åº¦ç†è§£ç¨‹åºçš„é“¾æ¥å’Œé‡å®šä½ï¼šhttps://zhuanlan.zhihu.com/p/130271689\n\n\n[ ]  é“¾æ¥ã€è£…è½½ä¸åº“ â€” åŠ¨æ€é“¾æ¥ï¼šhttps://markrepo.github.io/kernel/2018/08/19/dynamic-link/\n\n\n[ ] é“¾æ¥ã€è£…è½½ä¸åº“ â€” å¯æ‰§è¡Œæ–‡ä»¶çš„è£…è½½ï¼šhttps://markrepo.github.io/kernel/2018/08/17/load-and-process/\n\n\n","categories":["ç¬”è®°"],"tags":["Linux","äºŒè¿›åˆ¶","ELF"]},{"title":"ã€å®æˆ˜ã€‘æŸè§†é¢‘appçš„crackå°è¯•","url":"https://ch3nye.top/ã€å®æˆ˜ã€‘æŸè§†é¢‘appçš„crackå°è¯•/","content":" ã€å®æˆ˜ã€‘æŸè§†é¢‘appçš„crackå°è¯•\nemmmmï¼Œæ˜¯ä¸€ä¸ªè§†é¢‘appï¼Œç©æ¸¸æˆçš„æ—¶å€™å…¨å±€è¯­éŸ³å¹¿å‘Šå¬åˆ°çš„ï¼Œç»ƒç»ƒæ‰‹ã€‚\nappç‰ˆæœ¬1.3.0\nRedmi K30 5G(Android 10)\nHttpCanary\njadx 1.1.0\n ç›®æ ‡ä¸€ï¼šç ´è§£ç™»å½•åŠ å¯†æ–¹å¼\nåº”è¯¥æ˜¯æ£€æµ‹äº†ä»£ç†ï¼Œä½¿ç”¨ä»£ç†åˆ™æ˜¾ç¤ºæ— ç½‘ç»œé“¾æ¥ã€‚\næˆ‘ä½¿ç”¨HttpCanaryæŠ“åŒ…ï¼Œæ‹¿åˆ°ç™»å½•æ˜æ–‡ï¼š\nä¸»æœºHost:api.i69r7.com\nPOST &#x2F;uc&#x2F;app&#x2F;v2&#x2F;login HTTP&#x2F;1.1\nr: 4026847275\nclientType: android\nt: 1611839395333\nchannel: QD500\nsign: 4cf2e5b8a57a60a07a9f99b78ec8d6de0cb122a6\nX-JSL-API-AUTH: md5|1611841195|EsPrUIjgpp2Y|eccaa018eb2f0d3a3edd6b81d530b28f\ndeviceId: c5f0f2cc3b6f3a419b85452f32e15efc\ndeviceName: Redmi K30 5G\nsystemVersion: 10\nversion: 1.3.0\nX-YD-Req-Token: 1611841195|FqOrf01aRQ8T|92fcef7544cef6f57edd2a1a644b4c2c\nversionCode: 1300\nContent-Type: application&#x2F;json; charset&#x3D;utf-8\nContent-Length: 80\nHost: api.i69r7.com\nConnection: Keep-Alive\nAccept-Encoding: gzip\nUser-Agent: okhttp&#x2F;4.8.0\n\n&#123;&quot;captcha&quot;:&quot;&quot;,&quot;password&quot;:&quot;ax9aKqMKRCKe6bzanQjNWA\\u003d\\u003d&quot;,&quot;username&quot;:&quot;abaaba&quot;&#125;\né€šè¿‡jadxåç¼–è¯‘dexéƒ¨åˆ†çœ‹åˆ°ç™»å½•æ—¶çš„POST Dataè®¾ç½®é€»è¾‘ï¼š\n\nç”¨frida hookè¿™ä¸ªå‡½æ•°çœ‹çœ‹å®ƒä¼ å…¥äº†ä»€ä¹ˆå€¼\n\næ˜¾ç„¶ï¼Œç¬¬ä¸€ä¸ªå€¼æ˜¯å¯†ç ï¼Œç¬¬äºŒä¸ªæ˜¯MIYOU_APP_LOGIN_KEYå­—ç¬¦ä¸²\nsecretEncrypt æ˜¯native æ–¹æ³•ï¼Œå®šä¹‰åœ¨digest-libåº“ä¸­ï¼Œçœ‹èµ·æ¥åƒæ˜¯è‡ªå·±å†™çš„åº“\nemmmmï¼Œå‡½æ•°ä¹Ÿä¸æ˜¯åŠ¨æ€æ³¨å†Œçš„ï¼Œæ‰€ä»¥ä¸€ä¸‹å°±èƒ½æ‰¾åˆ°å‡½æ•°ï¼š\n\nä¸€æ³¢åˆ†æå‘ç°ï¼Œåº”è¯¥æ˜¯ç®€å•çš„åŠ å¯†ï¼š\nDES ECBæ¨¡å¼ å¡«å……æ–¹å¼Pkcs7 æ— åç§»é‡ å¯†é’¥ï¼šMIYOU_APP_LOGIN_KEY\nonline toolï¼šhttps://oktools.net/des\nå¦å¤–ï¼Œå®é™…ä¸Šå¯†é’¥ç”¨MIYOU_APå°±å¯ä»¥äº†ï¼ŒDESçš„å¯†é’¥é•¿åº¦åªæœ‰64ä½ï¼Œè€Œä¸”ï¼Œè™½ç„¶è¡¨é¢ä¸Šæ˜¯64ä½çš„ï¼Œå®é™…åªæœ‰å…¶ä¸­çš„56ä½è¢«å®é™…ç”¨äºç®—æ³•ï¼Œå…¶ä½™8ä½å¯ä»¥è¢«ç”¨äºå¥‡å¶æ ¡éªŒï¼Œå¹¶åœ¨ç®—æ³•ä¸­è¢«ä¸¢å¼ƒã€‚\nä½†æ˜¯è¿™é‡Œå¾ˆå¥‡æ€ªå“¦ï¼Œnativeä¸­çš„secretEncryptæ–¹æ³•å±…ç„¶è°ƒç”¨äº†com/miu/lib_encipher/xcrypt/Encryptsä¸­åä¸ºencryptDESï¼Œç­¾åä¸º(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;çš„java æ–¹æ³•ã€‚\næˆ‘ä»¬æ¨¡æ‹Ÿæ‰§è¡ŒéªŒè¯ä¸€ä¸‹ï¼Œçœ‹çœ‹å®ƒåˆ°åº•æä»€ä¹ˆåå ‚\n AndroidNativeEmu æ¨¡æ‹Ÿæ‰§è¡Œ\nAndroidNativeEmué¡¹ç›®ä»‹ç»å‚è€ƒREADMEï¼Œä¸èµ˜è¿°:https://github.com/AeonLucid/AndroidNativeEmu/\nç¡®å®ç¬¦åˆä¸Šé¢çš„åˆ†æã€‚è¿™æ³¢å•Šæ˜¯java-&gt;native-&gt;java æˆ‘ç”¨æˆ‘è‡ªå·±åŠ å¯†ï¼ŒåŠ å¯†é€»è¾‘è¿˜æ˜¯åœ¨javaä¸­ä½›äº†ã€‚encryptDESæ–¹æ³•çš„ä¸¤ä¸ªå­—ç¬¦ä¸²å‚æ•°å°±æ˜¯æ˜æ–‡å’Œå¯†é’¥ã€‚è¯æ®å¦‚ä¸‹ï¼š\n\né™„ä»£ç ï¼š\nimport logging\nimport posixpath\nimport sys\n\nfrom unicorn import UcError, UC_HOOK_MEM_UNMAPPED\nfrom unicorn.arm_const import *\n\nfrom androidemu.emulator import Emulator\nfrom androidemu.java.java_class_def import JavaClassDef\nfrom androidemu.java.java_method_def import java_method_def\n\nfrom samples import debug_utils\n\n\n# Create java class.\nclass DigestUtils(metaclass=JavaClassDef, jvm_name='com/miu/lib_encipher/jni/DigestUtils'):\n\n    def __init__(self):\n        pass\n\n    @java_method_def(name='secretEncrypt', signature='(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;', native=True)\n    def secretEncrypt(self, mu):\n        pass\n\n    def test(self):\n        pass\n\n\nclass Encrypts(metaclass=JavaClassDef, jvm_name='com/miu/lib_encipher/xcrypt/Encrypts'):\n\n    def __init__(self):\n        pass\n\n    @java_method_def(name='encryptDES', signature='(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;', native=False,  args_list=[\"jstring\",\"jstring\"])\n    def encryptDES(self, *args, **kwargs):\n        print(\"[+]encryptDES:\",args[0].value, args[1].value)\n        return \"ch3nyeeeeeeeeeeeeee\"\n\n    def test(self):\n        pass\n\n# Configure logging\nlogging.basicConfig(\n    stream=sys.stdout,\n    level=logging.DEBUG,\n    format=\"%(asctime)s %(levelname)7s %(name)34s | %(message)s\"\n)\n\nlogger = logging.getLogger(__name__)\n\n# Initialize emulator\nemulator = Emulator(\n    vfp_inst_set=True,\n    vfs_root=posixpath.join(posixpath.dirname(__file__), \"vfs\")\n)\n\n# emulator.mu.hook_add(UC_HOOK_CODE, debug_utils.hook_code)\nemulator.mu.hook_add(UC_HOOK_MEM_UNMAPPED, debug_utils.hook_unmapped)\n\n# Register Java class.\nemulator.java_classloader.add_class(DigestUtils)\nemulator.java_classloader.add_class(Encrypts)\n\n# Load all libraries.\nemulator.load_library(\"example_binaries/libm.so\")\nemulator.load_library(\"example_binaries/libc.so\")\nemulator.load_library(\"example_binaries/libstdc++.so\")\nlib_module = emulator.load_library(\"example_binaries/libdigest-lib.so\")\n\n# Show loaded modules.\nlogger.info(\"Loaded modules:\")\n\nfor module in emulator.modules:\n    logger.info(\"=> 0x%08x - %s\" % (module.base, module.filename))\n\n\ntry:\n    # Run JNI_OnLoad.\n    # JNI_OnLoad will call 'RegisterNatives'.\n    emulator.call_symbol(lib_module, 'JNI_OnLoad', emulator.java_vm.address_ptr, 0x00)\n\n    # Do native stuff.\n    digest_utils = DigestUtils()\n    logger.info(\"Response from JNI call: %s\" % digest_utils.secretEncrypt(emulator,\"12345678\",\"MIYOU_APP_LOGIN_KEY\"))\n\n    # Dump natives found.\n    logger.info(\"Exited EMU.\")\n    logger.info(\"Native methods registered to DigestUtils:\")\n\n    for method in DigestUtils.jvm_methods.values():\n        if method.native:\n            logger.info(\"- [0x%08x] %s - %s\" % (method.native_addr, method.name, method.signature))\nexcept UcError as e:\n    print(\"Exit at %x\" % emulator.mu.reg_read(UC_ARM_REG_PC))\n    raise\n\n å°è¯•ç ´è§£VIPé«˜æ¸…è§†é¢‘\nè¿™ä¸ªappå¤§æ¦‚åªæä¾›ä¸¤ç§æ¸…æ™°åº¦ï¼Œæ™®é€šç”¨æˆ·480Pï¼ŒVIPç”¨æˆ·720Pã€‚\nå°è¯•ä»æ’­æ”¾é¡µcom.erkhioqq.irivjiamm.avod.play.videodetail.MovieDetailActivity å…¥æ‰‹çœ‹çœ‹èƒ½ä¸èƒ½hookä½appæŸ¥çœ‹vipçŠ¶æ€çš„çš„å‡½æ•°ï¼Œç›´æ¥è¿”å›å½“å‰ç”¨æˆ·æ˜¯vipï¼Œä½†æ˜¯å®é™…ä¸Šæ²¡æ‰¾åˆ°ã€‚\næŠ“å–æµé‡çœ‹åˆ°è§†é¢‘ä½¿ç”¨m3u8æ ¼å¼ä¼ è¾“ï¼Œå…¶å®æŠ“åˆ°äº†é“¾æ¥ï¼š\nhttps://video.gdyjdt.com/files/202012/20201207/ZWAV202012020528281/400kb/hls/index.m3u8\næ³¨æ„è§‚å¯Ÿ400kbæ˜¯æ¸…æ™°åº¦ï¼Œå¯¹åº”480Pã€‚ï¼ˆå…¶å®ä¸€å¼€å§‹è¿˜æ²¡å¾€è¿™ä¸Šé¢æƒ³ï¼Œåæ¥æ‰å‘ç°ï¼Œæˆ‘å°±å°è¯•äº†ä¸‹ï¼š\nimport requests\n\nfor i in range(400,10000,100):\n    url = \"https://video.gdyjdt.com/files/202012/20201207/ZWAV202012020528281/&#123;&#125;kb/hls/index.m3u8\".format(str(i))\n    response = requests.head(url)\n    if response.status_code != 404:\n        print(\"[+]find:\",url)\n    else:\n        print(\"[-]try &#123;&#125; kb fail\".format(str(i)))\n1000kbå¤§æ¦‚å°±å¯¹åº”VIPé‚£ä¸ªæ¸…æ™°åº¦ï¼Œä½†æ˜¯ä¹Ÿå¾ˆåƒåœ¾ï¼Œè¿˜æ˜¯è®°ä¸‹ç•ªå·åˆ°æ­£è§„ç½‘ç«™æ‰¾ç‰‡æŠŠï¼Œ1080på®ƒä¸é¦™å—ã€‚\nAPPä¸­å¤§é‡ä½¿ç”¨äº†StringFogåŠ å¯†å­—ç¬¦ä¸²ï¼Œå†™äº†ä¸ªè§£å¯†è„šæœ¬æ–¹ä¾¿åˆ†æï¼š\nDOWNLOADS_FILE_NAME = \"irivjiamm\"\n\nimport base64\nimport sys\ndef xor_func(str1,key):\n    lkey=len(key)\n    secret=[]\n    num=0\n    for each in str1:\n        if num>=lkey:\n            num=num%lkey\n\n        secret.append( chr( each^ord(key[num]) ) )\n        num+=1\n    return \"\".join(secret)\n\n\n\ndef decrypt(s):\n    return xor_func(base64.b64decode(s), DOWNLOADS_FILE_NAME)\n\n\ndef encrypt(s):\n    str = xor_func(bytes(s,encoding='utf-8'), DOWNLOADS_FILE_NAME).encode('utf-8')\n    return base64.b64encode(str)\n\n\n\nif __name__ == '__main__':\n    tips = \"need 2 parameter: d/e cipher/plain\"\n    args = []\n    if __file__ in sys.argv[0]:\n        args = sys.argv[1:]\n    else:\n        args = sys.argv\n    if len(args) != 2:\n        print(tips)\n        exit(-1)\n\n    if args[0] == 'd':\n        print(decrypt(args[1]))\n    elif args[0] == 'e':\n        print(encrypt(args[1]))\nåç»­è¿˜å¯ä»¥çœ‹å‡ ä¸ªå‡½æ•°ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½å†æ•´ç‚¹æ´»\nMoiveDetailActivity.showMovieCache\nMoiveDetailActivity.download\nMoiveDetailActivity.handleDownload\né™„ä»¶ï¼š\nbase.apk\nå¤‡ç”¨è“å¥äº‘ï¼šhttps://wwe.lanzous.com/iWubulikvuf\n","categories":["å®æˆ˜"],"tags":["Android","crack","å®æˆ˜"]},{"title":"Noteã€ŠAutomatic Hot Patch Generation for Android Kernelsã€‹","url":"https://ch3nye.top/Note-Automatic-Hot-Patch-Generation-for-Android-Kernels/","content":" Automatic Hot Patch Generation for Android Kernels\n ä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜\nAndroid ç‰ˆæœ¬å‡çº§è¦†ç›–ç¼“æ…¢ï¼Œå¾€å¾€å‘å¸ƒåŠå¹´çš„æœ€æ–°Androidç³»ç»Ÿè®¾å¤‡è¦†ç›–ç‡åªæœ‰ä¸ªä½æ•°ï¼Œå¦‚æ­¤ä¾¿ä½¿å¾—æ—§ç‰ˆæœ¬çš„Androidç³»ç»Ÿçš„å†…æ ¸æ¼æ´æ— æ³•ä¿®å¤ï¼Œè€ŒOEMå‚å•†åˆæ— æ„ä¿®è¡¥è¿™äº›æ¼æ´ï¼Œå› ä¸ºå†…æ ¸çš„æ”¹åŠ¨éœ€è¦ç¹ççš„æµ‹è¯•ä¿è¯æ›´æ”¹ä¸ä¼šå½±åƒç°æœ‰åŠŸèƒ½å’Œæ€§èƒ½ã€‚å› æ­¤ï¼Œå¤šæ•°è®¾å¤‡ä¸Šæ­è½½çš„æ—§ç‰ˆAndroidç³»ç»Ÿä¼šä¿æŒæ¼æ´å­˜åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´ã€‚\nä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå·²ç»æœ‰å¾ˆå¤šæ–¹æ¡ˆè¢«åˆ¶å®šå‡ºæ¥ï¼Œåœ¨æ‰€æœ‰å¯èƒ½çš„è§£å†³æ–¹æ¡ˆä¸­ï¼Œçƒ­è¡¥ä¸æŠ€æœ¯æä¾›äº†ä¸€ç§åœ¨ä¸ä¸­æ–­ç¨‹åºæ­£å¸¸åŠŸèƒ½çš„æƒ…å†µä¸‹ä¿®å¤æ¼æ´çš„ä¾¿æ·æ–¹æ³•ã€‚ç”±äºå®ƒå¯ä»¥åœ¨ä¸é‡æ–°å¯åŠ¨è®¾å¤‡çš„æƒ…å†µä¸‹ä¿®è¡¥å†…æ ¸æ¼æ´ï¼Œå› æ­¤æå¤§åœ°æ”¹å–„äº†ç”¨æˆ·ä½“éªŒã€‚\næ ¹æ®æ­£å¼å‘å¸ƒçš„è¡¥ä¸ç¨‹åºç¼–å†™çƒ­è¡¥ä¸ç¨‹åºæ˜¯è¾ƒéš¾çš„å·¥ä½œã€‚åœ¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œå¾ˆéš¾å‡†ç¡®æ‰¾åˆ°è¦ä¿®æ”¹çš„è„†å¼±ç‚¹ã€‚ä¸ºäº†åœ¨é€‚å½“çš„ä½ç½®æ‰“ä¸Šçƒ­è¡¥ä¸ï¼Œå®‰å…¨ä¸“å®¶éœ€è¦äº†è§£å®˜æ–¹è¡¥ä¸çš„è¯­ä¹‰å¹¶ç¼–å†™ç›¸åº”çš„çƒ­è¡¥ä¸ã€‚ä½†æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªè€—æ—¶å¹¶ä¸”å®¹æ˜“å‡ºé”™çš„è¿‡ç¨‹ã€‚å—é™äºå¿«é€Ÿçš„å¼€å‘å‘¨æœŸå’Œæœ‰é™çš„å®‰å…¨é¢„ç®—ï¼Œäººå·¥å¼€å‘çƒ­è¡¥ä¸å¾€å¾€æ˜¯å•†ä¸šå…¬å¸ä¸å¯æ¥å—çš„ã€‚å› æ­¤ï¼Œéœ€è¦å¼€å‘ä¸€ç§è‡ªåŠ¨è§£å†³æ–¹æ¡ˆä»¥å°†æ­£å¼è¡¥ä¸æ­£ç¡®è½¬æ¢ä¸ºçƒ­è¡¥ä¸ã€‚\nä¸ºæ­¤ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§è‡ªåŠ¨æ‰§è¡Œçƒ­è¡¥ä¸ç”Ÿæˆè¿‡ç¨‹çš„è§£å†³æ–¹æ¡ˆã€‚ä¸ºäº†å¯¹æ¼æ´ä¿®è¡¥ç¨‹åºæœ‰å®Œæ•´çš„äº†è§£ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ†æäº†2012å¹´è‡³2016å¹´çš„å¤§å¤šæ•°Android CVEï¼Œå¹¶æ ¹æ®å…¶ä¿®è¡¥è¡Œä¸ºå¯¹å…¶è¿›è¡Œäº†åˆ†ç±»ã€‚æ ¹æ®è¿™äº›åˆ†æï¼Œæˆ‘ä»¬å¼€å‘äº†Vulmetï¼Œå®ƒå¯ä»¥é€šè¿‡ç¨‹åºåˆ†ææå–å®˜æ–¹è¡¥ä¸çš„è¯­ä¹‰æ¥è‡ªåŠ¨ç”Ÿæˆçƒ­è¡¥ä¸ã€‚Vulmetå°†åœ¨å‡½æ•°ä¸­æ‰¾åˆ°åˆé€‚çš„ä½ç½®ï¼Œæ„å»ºå¹¶åº”ç”¨è¯­ä¹‰ç­‰æ•ˆçš„çƒ­è¡¥ä¸æ¥ä¿®å¤æ¼æ´ã€‚ä¸ºäº†æµ‹è¯•Vulmetçš„æœ‰æ•ˆæ€§ï¼Œæˆ‘ä»¬ä¸ºå®é™…çš„Android CVEç”Ÿæˆäº†çƒ­è¡¥ä¸ã€‚çƒ­è¡¥ä¸ç¨‹åºå¯ä»¥ä»¥å¾ˆå°‘çš„ç³»ç»Ÿå¼€é”€æ¥ä¿®è¡¥æ¼æ´ã€‚\næ¦‚è¿°ç»“è®ºï¼š\nä¸ºæ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆç ”ç©¶äº†ä»2012å¹´åˆ°2016å¹´ä»373ä¸ªAndroidå†…æ ¸CVEä¸­è‡ªåŠ¨ç”Ÿæˆè¡¥ä¸çš„å¯è¡Œæ€§ï¼ˆç»“è®ºä¸ºå¯è¡Œï¼‰ã€‚ç„¶åï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ç§è‡ªåŠ¨çƒ­è¡¥ä¸ç”Ÿæˆå·¥å…·ï¼Œåä¸ºVulmetï¼Œè¯¥å·¥å…·é€šè¿‡ä»å®˜æ–¹è¡¥ä¸ä¸­å­¦ä¹ æ¥ç”Ÿæˆè¯­ä¹‰ä¿ç•™çƒ­è¡¥ä¸ã€‚ Vulmetisçš„å…³é”®æ€æƒ³æ˜¯ä½¿ç”¨æœ€å¼±çš„å‰ææ¨ç†ï¼ˆweakest precondition reasoningï¼‰å°†å®˜æ–¹è¡¥ä¸æ‰€åšçš„æ›´æ”¹è½¬æ¢ä¸ºhot patchçº¦æŸã€‚å®éªŒè¡¨æ˜ï¼ŒVulmetå¯ä»¥ä¸º55ä¸ªç°å®ä¸–ç•Œçš„Android kernel CVEç”Ÿæˆæ­£ç¡®çš„çƒ­è¡¥ä¸ã€‚çƒ­è¡¥ä¸ä¸å½±å“å†…æ ¸çš„å¥å£®æ€§ï¼Œå¹¶ä¸”æ€§èƒ½å¼€é”€è¾ƒä½ã€‚\nPSï¼š\næ³¨æ„1ï¼šæœ¬æ–‡å®ç°çš„çƒ­è¡¥ä¸ç”Ÿæˆå·¥å…·Vulmetï¼Œéœ€è¦çœ‹å®˜æ–¹è¡¥ä¸ï¼Œä»ä¸­å­¦ä¹ è¯­ä¹‰ï¼Œæ ¹æ®Vulmetè¢«å®šä¹‰çš„çº¦æŸæ¡ä»¶å’Œæ“ä½œèŒƒå›´ï¼Œç”Ÿæˆå¯è¡Œçš„çƒ­è¡¥ä¸ã€‚ï¼ˆåœ¨æˆ‘çœ‹æ¥æœ¬æ–‡æƒ³æ³•ç¨å¾®æœ‰ç‚¹é¸¡è‚‹ï¼Œæ—¢ç„¶å‘å¸ƒäº†å®˜æ–¹è¡¥ä¸ï¼ŒOEMå‚å•†åªè¦è·Ÿè¿›å°±å¥½äº†å‘€ï¼Œåªèƒ½è¯´çƒ­è¡¥ä¸å…·æœ‰ä¸éœ€è¦é‡å¯çš„ä¼˜åŠ¿ï¼Œè¿™ç§ä¼˜åŠ¿åœ¨æœåŠ¡å™¨ç³»ç»Ÿè¡¥ä¸ä¸Šä¼šæ›´æ˜æ˜¾å§ğŸ˜ï¼‰\næ³¨æ„2ï¼šVulmetå¹¶ä¸èƒ½ç™¾åˆ†ç™¾æ ¹æ®å®˜æ–¹è¡¥ä¸ç”Ÿæˆçƒ­è¡¥ä¸ï¼Œåªèƒ½å®ç°æ»¡è¶³ä¸‹è¿°Requirementså’ŒOperation Scopesçš„æƒ…å†µä¸‹ï¼Œå®˜æ–¹è¡¥ä¸è‡ªåŠ¨ç”Ÿæˆçƒ­è¡¥ä¸ã€‚\n ä½¿ç”¨çš„æ–¹æ³•\næœ¬èŠ‚å™è¿°Vulmetçš„å®ç°è¿‡ç¨‹ï¼šè§£é‡Šçƒ­è¡¥ä¸ç”Ÿæˆï¼Œandroidæ¼æ´ç±»å‹åˆ†æå¹¶å®šä¹‰æ“ä½œèŒƒå›´ï¼Œè‡ªåŠ¨çƒ­è¡¥ä¸ç”Ÿæˆæ¡†æ¶\n Section 2 Automatic Hot Patch Generation\nProblem Definitionï¼ˆå®šä¹‰çƒ­è¡¥ä¸ç”Ÿæˆï¼‰ï¼š\nç»™å®šä¸€ä¸ªæ˜“å—æ”»å‡»çš„function FåŠåœ¨Fçš„Lä½ç½®ä¸Šæ‰“ä¸Šå®˜æ–¹çš„patch P ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨äºŒè¿›åˆ¶ä»£ç ä¸­æ‰¾åˆ°function Fçš„ä¸€ä¸ªåˆé€‚ä½ç½®Lâ€™æ¥æ’å…¥è‡ªåŠ¨ç”Ÿæˆçš„çƒ­è¡¥ä¸Pâ€™ï¼Œå…¶è¯­ä¹‰ä¸Pç›¸åŒã€‚\nRequirementsï¼š\n\nRequirements 1ï¼šç”Ÿæˆçš„çƒ­è¡¥ä¸åº”è¯¥ä¿ç•™å’Œå®˜æ–¹è¡¥ä¸ä¸€è‡´çš„è¯­ä¹‰ï¼Œç¡®ä¿å…¶æ­£ç¡®æ€§\nRequirements 2ï¼šç”Ÿæˆçš„çƒ­ä¿®è¡¥ç¨‹åºä¸åº”ç ´åç³»ç»Ÿï¼Œç¡®ä¿ç³»ç»Ÿè¿è¡Œçš„å¥å£®æ€§\nRequirements 3ï¼šç”Ÿæˆçš„çƒ­è¡¥ä¸åº”è¯¥äº§ç”Ÿè¾ƒä½çš„å¼€é”€ï¼Œç¡®ä¿ç³»ç»Ÿæ•ˆç‡\n\nOperation Scopesï¼š\nOperation Rule 1ï¼šè¡¥ä¸åªèƒ½æ”¾åœ¨å‡½æ•°çš„å¼€å§‹æˆ–ç»“å°¾å¤„ï¼Œæˆ–å‡½æ•°è°ƒç”¨çš„å¼€å§‹æˆ–ç»“å°¾å¤„\nOperation Rule 2ï¼šè¡¥ä¸å¯ä»¥è¯»å–å†…å­˜çš„æœ‰æ•ˆå†…å®¹ï¼Œä½†ç¦æ­¢ä¿®æ”¹\nOperation Rule 3ï¼šè¯¥è¡¥ä¸åªèƒ½åœ¨ä¸€ä¸ªå‡½æ•°èŒƒå›´å†…è¿›è¡Œå¾ˆå°çš„æ›´æ”¹ï¼Œä»¥å°è¯•ä¿®å¤æ¼æ´\nåŸæ–‡2.4èŠ‚ä»‹ç»äº†ä¸€ä¸ªç”¨æœ¬æ–‡å®šä¹‰çš„è§„åˆ™å’Œæ“ä½œèŒƒå›´ä¿®è¡¥CVE-2015-8940æ•´æ•°æº¢å‡ºæ¼æ´çš„è¿‡ç¨‹ï¼Œå¤§æ„å°±æ˜¯å®˜æ–¹è¡¥ä¸æ£€æŸ¥äº†å‡ ä¸ªå˜é‡çš„å€¼ï¼Œæœ¬æ–‡åšæ³•æ˜¯åœ¨å‡½æ•°å¼€å§‹å¤„æ£€æŸ¥ä¸Šè¿°å€¼ï¼Œç”±äºè¿™äº›å€¼å¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±çŸ¥é“çš„ï¼Œæ‰€ä»¥é€šè¿‡ä¸€ä¸ªalgorithmï¼ˆin Section4ï¼‰è‡ªåŠ¨ç¡®å®šè¿™äº›å˜é‡ä¹‹é—´çš„å…³ç³»ï¼Œä»¥æ­¤ç”Ÿæˆäº†å’Œå®˜æ–¹è¯­ä¹‰ç›¸åŒçš„æ£€æŸ¥çº¦æŸæ·»åŠ åˆ°å‡½æ•°å¼€å§‹ï¼Œçƒ­è¡¥ä¸ç»“æŸã€‚è¯¦ç»†è¿‡ç¨‹è¯·å‚è€ƒåŸæ–‡ã€‚\n Section 3 Patch Type Analysis\nåœ¨ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†æ¼æ´è¡¥ä¸åˆ†ç±»å’Œåˆ†å¸ƒæƒ…å†µä»¥åŠä»è§‚å¯Ÿä¸­çš„å‘ç°ã€‚æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†è®¨è®ºVulmetèƒ½å¤Ÿæ”¯æŒçš„æ¼æ´è¡¥ä¸çš„ç±»å‹ã€‚\næˆ‘ä»¬çš„å·¥ä½œèšç„¦äºçƒ­è¡¥ä¸ç”Ÿæˆï¼Œæ‰€ä»¥è¡¥ä¸åˆ†ç±»åº”è¯¥ååº”è¡¥ä¸åŠŸèƒ½ï¼Œè€Œä¸æ˜¯ååº”è¡¥ä¸ä¿®å¤æ¼æ´çš„ç±»å‹ã€‚ç›®å‰æ¥è¯´é’ˆå¯¹åè€…çš„åˆ†ç±»è¦åŸå¤šäºå‰è€…ï¼Œæˆ‘ä»¬éµä»[36]çš„åˆ†ç±»æ–¹æ¡ˆæ€æƒ³ï¼Œå½¢æˆæˆ‘ä»¬çš„åˆ†ç±»æ–¹æ¡ˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n3.2 Observation\nåœ¨æ¼æ´è¡¥ä¸çš„ç ”ç©¶è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è·å¾—äº†å››ä¸ªæœ‰è¶£çš„å‘ç°ã€‚\nObservation 1: ä¸ç¨‹åºæ›´æ–°ç›¸æ¯”ï¼Œæ¼æ´è¡¥ä¸çš„æ›´æ”¹é€šå¸¸å¾ˆå°\nObservation 2: å¤§å‹æ¼æ´è¡¥ä¸é€šå¸¸ç”±å‡ ä¸ªå°å‹ç‹¬ç«‹è¡¥ä¸ç»„æˆ\nObservation 3: è¡¥ä¸ç±»å‹å’Œæ¼æ´ç±»å‹å¹¶ä¸æ˜¯ä¸€å®šç›¸å…³çš„ï¼Œæˆ–è€…è¯´æ˜¯æ¯”è¾ƒæ— å…³çš„\nObservation 4: ä¸€äº›è¡¥ä¸åŒæ—¶åŒ…æ‹¬å®‰å…¨è¡¥ä¸å’Œéå®‰å…¨è¡¥ä¸\n3.3 Vulmet Work Scope\n\nSanity Testing å¥å£®æ€§æ£€æŸ¥ä¸Šé¢çš„æ —å­è¯´è¿‡äº†ï¼Œç¬¦åˆRequirementså’ŒOperation Scopesï¼ŒVulmetå®Œå…¨æ”¯æŒã€‚\nå¯¹äºFunction Callç±»å‹ï¼ŒVulmetå¯ä»¥è¿›å…¥è¢«è°ƒç”¨å‡½æ•°å¹¶è¯¥å‡½æ•°ã€‚å¦‚æœæ­¤è¡¥ä¸çš„æ›´æ”¹ä¸æ¶‰åŠå†…å­˜å†™å…¥æ“ä½œï¼Œåˆ™Vulmetå¯ä»¥æ”¯æŒè¯¥ä¿®è¡¥ç¨‹åºã€‚\nå¯¹äºChange of Variableså’ŒChange of Data Typeséƒ½æ¶‰åŠå†…å­˜å†™æ“ä½œï¼Œå› æ­¤ä¸æ”¯æŒã€‚\nVulmetä¸æ”¯æŒRedesignç±»å‹è¡¥ä¸ï¼Œå› ä¸ºå®ƒæå¤§åœ°æ”¹å˜äº†åŸå§‹å‡½æ•°çš„è¯­ä¹‰å¹¶è¿åäº†Operation Scopes 3ã€‚\n Section 4 Methodology\n\nPatch Filtering\nVulmetå°†é€šè¿‡å¯¹æ¯”å­˜åœ¨æ¼æ´çš„ä»£ç å’Œå·²ä¿®è¡¥çš„ä»£ç ä¹‹é—´çš„ä¸åŒæ¥æå–å®˜æ–¹è¡¥ä¸ã€‚ç„¶åï¼Œé’ˆå¯¹è¡¥ä¸ä¸­çš„æ¯ä¸ªè¯­å¥ï¼Œå°†å…¶åˆ†ä¸ºæ­£å¸¸æ“ä½œå’Œç¦æ­¢æ“ä½œã€‚ç¦æ­¢çš„æ“ä½œåŒ…æ‹¬å˜é‡æˆ–æŒ‡é’ˆå€¼çš„åˆ†é…ä»¥åŠå¯¹å†…å­˜ä¿®æ”¹å‡½æ•°çš„è°ƒç”¨ã€‚å¦‚æœæ­£å¼è¡¥ä¸ä¸åŒ…å«ç¦æ­¢çš„æ“ä½œï¼ŒVulmetä¼šå°†å…¶é€‰æ‹©ä¸ºç”Ÿæˆçƒ­è¡¥ä¸çš„å€™é€‰å¯¹è±¡ã€‚å¦åˆ™ï¼Œè¡¥ä¸å°†è¢«è¿‡æ»¤æ‰ã€‚\nInsertion Location Optimization\næ ¹æ®ç¬¬2.3èŠ‚çš„è§„åˆ™1ï¼Œå‡½æ•°å¤´æˆ–å°¾æ˜¯patch å¯ä»¥hookçš„ä½ç½®ã€‚å› æ­¤ï¼ŒVulmetåªèƒ½hook æ¼æ´å‡½æ•°æˆ–è€…æ¼æ´å‡½æ•°ä¸­è°ƒç”¨çš„å‡½æ•°ã€‚è¿™äº›å¯ä»¥hookçš„ä½ç½®éƒ½æ˜¯ä¸ºå¯èƒ½çš„è¡¥ä¸æ’å…¥ä½ç½®ã€‚Vulmetiséœ€è¦å¯»æ‰¾æœ€ä½³çš„æ’å…¥ä½ç½®ã€‚å…·ä½“çš„å¯»æ‰¾ç®—æ³•çœ‹åŸæ–‡å§ï¼Œä¸èµ˜è¿°äº†ã€‚\nWeakest Precondition Reasoning\nåœ¨é€‰æ‹©è¡¥ä¸æ’å…¥ç‚¹ä¹‹åï¼Œä¸‹ä¸€æ­¥æ˜¯é€šè¿‡è®¡ç®—å’Œå®˜æ–¹è¡¥ä¸çš„è¯­ä¹‰ç­‰æ•ˆæ€§çš„çƒ­è¡¥ä¸ã€‚åœ¨Vulmetä¸­ï¼Œæ­¤è¿‡ç¨‹è¢«é‡æ„ä¸ºæœ€å¼±çš„å‰ææ¨ç†ä»»åŠ¡ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œå‰ææ¡ä»¶æ˜¯åœ¨è°ƒç”¨å‡½æ•°ä¹‹å‰åº”ä¸ºtrueçš„è¯­å¥ã€‚è€Œåç½®æ¡ä»¶æ˜¯ä¸€ä¸ªé™ˆè¿°ï¼Œå¦‚æœå‡½æ•°å®Œæˆå¹¶ä¸”æ‰€æœ‰å…ˆå†³æ¡ä»¶éƒ½æ»¡è¶³ï¼Œåˆ™è¯¥é™ˆè¿°ä¸ºçœŸã€‚è¡¨6å±•ç¤ºäº†è¯­ä¹‰è®¡ç®—ä¸æœ€å¼±å‰ææ¡ä»¶æ¨ç†ä¹‹é—´çš„å…³ç³»ã€‚ç»™å®šä¸€ä¸ªæ­£å¼è¡¥ä¸ï¼Œå…¶è¯­ä¹‰å¯ä»¥è½¬æ¢ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåç½®æ¡ä»¶ã€‚æ¼æ´å‡½æ•°ä¸­çš„é™ˆè¿°å°†å®šä¹‰è§£å†³æœ€å¼±å‰æçš„transformerã€‚è·å¾—çƒ­è¡¥ä¸çº¦æŸçš„è¿‡ç¨‹ç­‰åŒäºè®¡ç®—æœ€å¼±çš„å‰ææ¡ä»¶ã€‚äº§ç”Ÿçš„æœ€å¼±å‰ææ¡ä»¶æ˜¯å®˜æ–¹è¡¥ä¸çš„è¯­ä¹‰ç­‰ä»·çš„çƒ­è¡¥ä¸ã€‚ï¼ˆè¿™å°±æ˜¯æ ¸å¿ƒç®—æ³•ï¼Œçœ‹ä¸æ‡‚çš„è¯å°±ç®—äº†ï¼ŒçŸ¥é“æ˜¯ä½¿ç”¨è¿™ä¸ªç®—æ³•å°±å¯ï¼‰\nBinary Hot Patch Generation\næœ€åä¸€æ­¥æ˜¯æ ¹æ®precondition constraintsç”Ÿæˆçƒ­è¡¥ä¸ã€‚Vulmetä½¿ç”¨ç©ºå‡½æ•°ä½œä¸ºæ¨¡æ¿ï¼Œå¹¶å°†å‡½æ•°çš„è¾“å…¥å‚æ•°çš„æ•°é‡å’Œç±»å‹è®¾ç½®ä¸ºä¸åŸå§‹ç›®æ ‡å‡½æ•°ç›¸åŒã€‚ç„¶åï¼Œå°†æ‰€æœ‰çº¦æŸæ’å…¥å…¶ä¸­ï¼Œå¹¶å°†åŠŸèƒ½ç¼–è¯‘ä¸ºå¯ä»¥çƒ­ä¿®è¡¥åˆ°å†…æ ¸çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚\nå…³äºçƒ­è¡¥ä¸ç”Ÿæˆçš„ç»†èŠ‚ï¼ŒåŒ…æ‹¬å˜é‡åœ°å€ï¼ŒæŒ‡ä»¤é›†æ”¯æŒï¼Œå¯æ‰§è¡Œæ–‡ä»¶ç”Ÿæˆç­‰ç»†èŠ‚é—®é¢˜å°±ä¸å¤šèµ˜è¿°äº†ã€‚\n ç»“æœè¯„ä¼°\næˆ‘ä»¬å¯¹Vulmetç”Ÿæˆçš„çƒ­è¡¥ä¸çš„æ­£ç¡®æ€§ï¼Œé²æ£’æ€§å’Œæ•ˆç‡è¿›è¡Œäº†è¯„ä¼°ã€‚\næ­£ç¡®æ€§å¯ä»¥é‡åŒ–è¡¥ä¸ä¿®å¤æ¼æ´çš„èƒ½åŠ›ï¼Œå¥å£®æ€§å¯ä»¥é‡åŒ–è¡¥ä¸ç»´æŠ¤ç¨‹åºç¨³å®šæ€§çš„èƒ½åŠ›ï¼Œæ•ˆç‡å¯ä»¥é‡åŒ–è¡¥ä¸å¼•å…¥çš„å¼€é”€ã€‚\næˆ‘ä»¬è®¾è®¡äº†å®éªŒæ¥æµ‹è¯•è¿™ä¸‰ä¸ªæ–¹é¢çš„è¡¥ä¸æœ‰æ•ˆæ€§ã€‚åœ¨å®éªŒä¸­ï¼Œæ‰€æœ‰è¡¥ä¸å‡åœ¨å…·æœ‰Android kernelç‰ˆæœ¬7.1.1 r31 bullhead æ„å»ºçš„Android Open SourceProjectï¼ˆAOSPï¼‰å¹³å°Google Nexus 5Xä¸Šè¿›è¡Œäº†æµ‹è¯•ã€‚\n5.1 Correctness Evaluation\nåœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬è¯„ä¼°ç”Ÿæˆçš„çƒ­è¡¥ä¸çš„æ­£ç¡®æ€§ã€‚å®éªŒåŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨çœŸå®çš„CVEæ¼æ´æµ‹è¯•è¡¥ä¸ã€‚å…¶æ¬¡ï¼Œå¯¹äºæ— æ³•åˆ©ç”¨çš„æ¼æ´ï¼Œæˆ‘ä»¬æ‰‹åŠ¨éªŒè¯è¡¥ä¸çš„æ­£ç¡®æ€§ã€‚ç¬¬ä¸‰ï¼Œæˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™çƒ­è¡¥ä¸ï¼Œå¹¶å°†ç”Ÿæˆçš„çƒ­è¡¥ä¸ä¸å®ƒä»¬è¿›è¡Œæ¯”è¾ƒï¼Œä»¥æ£€æŸ¥ç”Ÿæˆçš„è¡¥ä¸æ˜¯å¦ä»¥ä¸äººç±»ä¸“å®¶ç›¸åŒçš„æ–¹å¼è§£å†³äº†æ¼æ´ã€‚\n\næ‰‹å·¥æ”¶é›†äº†å››ä¸ªCVEæ”»å‡»æ–¹æ³•ï¼Œç”¨æ¥æ”»å‡»è¢«Vulmetæ‰“è¿‡è¡¥ä¸çš„ç³»ç»Ÿã€‚ç»“æœè¡¨æ˜ï¼Œæ‰€æœ‰è¡¥ä¸å‡å·²æˆåŠŸé˜»æ­¢äº†æ¥è‡ªæ”»å‡»çš„æ”»å‡»ã€‚å¯¹äºCVE-2018-17182ï¼Œè¯¥çƒ­è¡¥ä¸å¯ä»¥æˆåŠŸé˜»æ­¢æ¼æ´åˆ©ç”¨ï¼Œä½†æ— æ³•é˜»æ­¢ç³»ç»Ÿå´©æºƒã€‚è¿™æ˜¯å› ä¸ºè¯¥ä¿®è¡¥ç¨‹åºåªèƒ½éƒ¨åˆ†ä¿®å¤æ¼æ´ã€‚\n\näººå·¥éªŒè¯59ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„çƒ­è¡¥ä¸æœ‰55ä¸ªæ˜¯æ­£å¸¸å·¥ä½œçš„ï¼Œæ²ƒè§‰å¾—ç®—æ˜¯ç›¸å½“ä¸é”™äº†ã€‚\n\nä¸äººç±»å®‰å…¨ä¸“å®¶ç›¸æ¯”55ä¸ªè‡ªåŠ¨ç”Ÿæˆçš„çƒ­è¡¥ä¸åªæœ‰ä¸€ä¸ªè¯­ä¹‰ä¸åŒï¼Œå…·ä½“å“ªé‡Œä¸åŒå‚è€ƒåŸæ–‡ã€‚\n5.2 Robustness Evaluation\nä¸ºäº†æ„å»ºæµ‹è¯•ç¯å¢ƒï¼Œæˆ‘ä»¬é€‰æ‹©è¦ä½¿ç”¨Linuxå†…æ ¸ç‰ˆæœ¬3.10æ„å»ºçš„Android bullheadï¼Œç„¶åå›æ»šä»¥ç”Ÿæˆå…·æœ‰è®¸å¤šæœªä¿®è¡¥æ¼æ´çš„å†…æ ¸ã€‚åœ¨æ­¤ç‰¹å®šå†…æ ¸ä¸­ï¼ŒVulmetç®¡ç†21ä¸ªæ¼æ´è¡¥ä¸ï¼Œå¯ä»¥å°†å…¶è½¬æ¢ä¸ºçƒ­è¡¥ä¸ã€‚\nç„¶åæˆ‘ä»¬å°†è¿™äº›è¡¥ä¸åº”ç”¨åˆ°å†…æ ¸å¹¶è¿è¡Œå®‰å…”å…”Benchmarkå’ŒCF-benchï¼Œç›‘æ§ç³»ç»Ÿå¼‚å¸¸ï¼Œæ¯”å¦‚å´©æºƒå’ŒæŒ‚èµ·ã€‚è¡¨11æ€»ç»“äº†è¯¥å®éªŒçš„ç»“æœã€‚å‡ºäºæ¼”ç¤ºç›®çš„ï¼Œæˆ‘ä»¬é€‰æ‹©5ä¸ªCVEä½œä¸ºç¤ºä¾‹ï¼Œå¹¶åˆ—å‡ºæ‰€æœ‰21ä¸ªè¡¥ä¸çš„æœ€ç»ˆç»“æœ\n\nç»“æœè¡¨æ˜ï¼Œæ‰€æœ‰çƒ­è¡¥ä¸éƒ½ä¸ä¼šä½¿ç¨‹åºå´©æºƒæˆ–æŒ‚èµ·ã€‚ä¸ºäº†è¿›ä¸€æ­¥æ£€æŸ¥ç°å®æƒ…å†µä¸­è¡¥ä¸çš„å¥å£®æ€§ï¼Œæˆ‘ä»¬ä»Google App Storeä¸­é€‰æ‹©å¹¶å®‰è£…äº†å‰100ä¸ªAndroidåº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬ä½¿ç”¨è„šæœ¬æ¥æ‰“å¼€ï¼ŒåŠ è½½å’Œå…³é—­å·²ä¿®è¡¥ç³»ç»Ÿä¸Šçš„åº”ç”¨ç¨‹åºï¼Œå¹¶ç›‘è§†å¼‚å¸¸è¡Œä¸ºã€‚ç»“æœæ˜¯å¯ä»¥æ­£ç¡®æ‰§è¡Œæ‰€æœ‰åº”ç”¨ç¨‹åºï¼Œè¿™è¡¨æ˜è¿™äº›ä¿®è¡¥ç¨‹åºåœ¨å®é™…æƒ…å†µä¸‹ä¿æŒäº†è‰¯å¥½çš„é²æ£’æ€§ã€‚æ€»è€Œè¨€ä¹‹ï¼Œç”Ÿæˆçš„è¡¥ä¸ä¸ä¼šç ´åè¡¥ä¸ç¨‹åºçš„æ­£å¸¸åŠŸèƒ½\n5.3 Efficiency Evaluation\næˆ‘ä»¬åœ¨Google Nexus 5Xè®¾å¤‡ä¸Šä½¿ç”¨å®‰å…”å…”åŸºå‡†æµ‹è¯•ä¿®è¡¥å‰åçš„ç³»ç»Ÿæ€§èƒ½ã€‚æˆ‘ä»¬å°†å®éªŒè®¾ç½®æ§åˆ¶ä¸ºç›¸åŒï¼Œä»¥ä¾¿ä¸€æ¬¡æµ‹è¯•ä¸€ä¸ªçƒ­è¡¥ä¸ã€‚æ¯ä¸ªå®éªŒé‡å¤10æ¬¡ï¼Œå–å¹³å‡åˆ†ä»¥é¿å…å™ªå£°å¼•èµ·çš„å˜åŒ–ã€‚è¡¨12åˆ—å‡ºäº†å…·æœ‰5ä¸ªå•ç‹¬CVEè¡¥ä¸çš„å†…æ ¸çš„æ€§èƒ½ä»¥åŠåº”ç”¨æ‰€æœ‰21ä¸ªè¡¥ä¸çš„æ€»ä½“æ€§èƒ½ã€‚\n\næ‰€æœ‰ç»“æœéƒ½åœ¨åˆç†èŒƒå›´å†…ï¼Œä¸åŸå§‹å†…æ ¸ç»“æœç›¸æ¯”ï¼Œè¯¥èŒƒå›´ç•¥é«˜æˆ–ç•¥ä½ã€‚å› æ­¤ï¼Œè¡¥ä¸ä½¿ç³»ç»Ÿçš„å¼€é”€è¾ƒä½ã€‚\n ç¼ºç‚¹å’Œä¸è¶³ï¼ˆé€‰ï¼‰\n\nVulmetçš„å‰æä¹‹ä¸€æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„çƒ­è¡¥ä¸æ— æ³•ä¿®æ”¹å†…å­˜å’ŒåŸå§‹ç¨‹åºçš„å†…å®¹ã€‚è¿™å°±ä½¿å¾—è¯¸å¦‚å˜é‡ç±»å‹ä¿®æ”¹ï¼Œå˜é‡æ•°å€¼ä¿®æ”¹ï¼Œå‡½æ•°è¿‡ç¨‹é‡æ„ç­‰è¡¥ä¸ç±»å‹æ— æ³•è‡ªåŠ¨ç”Ÿæˆã€‚\nVulmetä¾é å®˜æ–¹è¡¥ä¸è¯­ä¹‰çš„ç²¾ç¡®æ€»ç»“æ¥ç”Ÿæˆæ­£ç¡®çš„çƒ­è¡¥ä¸ã€‚åœ¨å®éªŒä¸­ï¼Œç”±äºVulmetæ— æ³•å®Œå…¨æå–è¯­ä¹‰ï¼Œå› æ­¤æŸäº›ç”Ÿæˆçš„çƒ­è¡¥ä¸ä¸å®Œæ•´ã€‚\næœ‰äº›è¡¥ä¸è¿‡äºå¤æ‚è€Œæ— æ³•åˆ†æã€‚å¾ˆéš¾æ‰¾åˆ°å¤§è¡¥ä¸çš„ç²¾ç¡®è¯­ä¹‰ã€‚å½“å‰Vulmetåªèƒ½å¤„ç†ï¼Œä»…å¯¹ä¸€ä¸ªå‡½æ•°è¿‡ç¨‹è¿›è¡Œä¿®è¡¥çš„è¡¥ä¸ã€‚\n\n å¯¹æˆ‘æœ‰ä»€ä¹ˆå¯å‘\nHot Patch æŠ€æœ¯æ˜¯æˆ‘æ²¡æœ‰æ¥è§¦è¿‡çš„ï¼Œä¸»è¦å€ŸåŠ©æ­¤ç¯‡æ–‡ç« äº†è§£å†…æ ¸è¡¥ä¸æŠ€æœ¯ã€çƒ­è¡¥ä¸æŠ€æœ¯ï¼Œå¸Œæœ›èƒ½æ›´åŠ æ·±å…¥çš„äº†è§£å†…æ ¸çº§è¡¥ä¸ä¿®è¡¥å’Œåº”ç”¨åŸç†ã€‚\n è¿™é¡¹ç ”ç©¶çš„æœªæ¥æ–¹å‘\nå¯èƒ½ä¼šå’Œäººå·¥æ™ºèƒ½ç»“åˆçš„æ¯”è¾ƒç´§å¯†å§ï¼Œå°±å¦‚ç¼ºç‚¹2å’Œ3æ‰€è¿°ï¼Œè¡¥ä¸çš„ç”Ÿæˆä¾èµ–è¯­ä¹‰åˆ†æï¼Œå¦‚æœè¯­ä¹‰åˆ†æå™¨èƒ½å€ŸåŠ©äººå·¥æ™ºèƒ½æŠ€æœ¯çš„å‘å±•ï¼Œå¼ºå¤§åˆ°æ ¹æ®æ¼æ´ç±»å‹è‡ªåŠ¨åˆ†æå‡ºæŸæ®µä»£ç çš„ä¿®è¡¥æ–¹æ¡ˆï¼Œè¿™æ ·çš„è¯ï¼Œæ²¡æœ‰æ¼æ´çš„ä¸–ç•Œå°±å®Œæˆäº†ã€‚ğŸ˜ƒ\nè®ºæ–‡é“¾æ¥ï¼šhttps://www.usenix.org/conference/usenixsecurity20/presentation/xu\nå‚è€ƒæ–‡ç« ï¼šåº”ç”¨ç¨‹åºçƒ­è¡¥ä¸ï¼ˆä¸€ï¼‰ï¼šå‡ è¡Œä»£ç æ„é€ å…é‡å¯ä¿®å¤è¡¥ä¸\n","categories":["è®ºæ–‡é˜…è¯»"],"tags":["Android","è®ºæ–‡","ç¬”è®°","Hot-Patch"]},{"title":"Noteã€ŠFANS Fuzzing Android Native System Services via Automated Interface Analysisã€‹","url":"https://ch3nye.top/Note-FANS-Fuzzing-Android-Native-System-Services/","content":" FANS: Fuzzing Android Native System Services via Automated Interface Analysis\n ä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜\nå°†FuzzingæŠ€æœ¯åº”ç”¨åˆ°Android Native system services é¢ä¸´çš„é—®é¢˜æœ‰ï¼š\n\nandroid native system services é€šè¿‡ç‰¹æ®Šçš„ç¨‹åºé—´é€šä¿¡æœºåˆ¶è°ƒç”¨ï¼Œå³åä¸ºbinderçš„æœºåˆ¶ï¼Œå®ƒé€šè¿‡æœåŠ¡ç‰¹å®šçš„æ¥å£è°ƒç”¨æœåŠ¡ã€‚å› æ­¤Fuzzer éœ€è¦è¾¨è¯†æ‰€æœ‰æ¥å£ï¼Œè‡ªåŠ¨åŒ–åœ°ç”Ÿæˆç‰¹å®šæ¥å£çš„æµ‹è¯•ç”¨ä¾‹\næœ‰æ•ˆçš„æµ‹è¯•ç”¨ä¾‹åº”è¯¥æ»¡è¶³æ‰€æœ‰æ¥å£çš„æ¥å£æ¨¡å‹\næµ‹è¯•ç”¨ä¾‹ä¹Ÿåº”è¯¥æ»¡è¶³è¯­ä¹‰è¦æ±‚ï¼ŒåŒ…æ‹¬å˜é‡ä¾èµ–æ€§å’Œæ¥å£ä¾èµ–æ€§\n\nAndroid ç³»ç»Ÿä¸­system services è¦æ³¨å†Œåˆ° Service Mangerã€‚ç”¨æˆ·app é€šè¿‡æŸ¥è¯¢manger è·å¾—è®¿é—®ç›®æ ‡services çš„æ¥å£ï¼ˆå°è£…åœ¨ä»£ç†ç»‘å®šå™¨å¯¹è±¡ä¸­ Proxy Binder objectï¼‰ï¼Œç„¶åé€šè¿‡å½¢å¦‚IBinder::transact(code,data,reply,flags)çš„ç»Ÿä¸€è¿œç¨‹è¿‡ç¨‹è°ƒç”¨(RPC)æ¥å£ï¼Œè°ƒç”¨è¯¥æ¥å£æä¾›çš„ä¸åŒäº‹åŠ¡ã€‚codeå†³å®šè¦è°ƒç”¨çš„äº‹åŠ¡ï¼Œdataæ˜¯äº‹åŠ¡çš„è¾“å…¥çš„åºåˆ—åŒ–å½¢å¼ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç»Ÿä¸€çš„IPCæ–¹æ³•æ¥æµ‹è¯•æ‰€æœ‰çš„ç³»ç»ŸæœåŠ¡ã€‚ä¸ºäº†å½»åº•æµ‹è¯•ç›®æ ‡æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥é¦–å…ˆæ‰¾åˆ°æ‰€æœ‰æ¥å£å’Œå¯ç”¨çš„äº‹åŠ¡ï¼Œç„¶åç”¨æ»¡è¶³è¯¥æœåŠ¡ç‰¹å®šçš„æ ¼å¼å’Œè¯­ä¹‰è¦æ±‚çš„è¾“å…¥æ•°æ®æ¥è°ƒç”¨å®ƒä»¬ã€‚å…·ä½“è€Œè¨€ï¼Œæœ‰ä¸‰ä¸ªæŒ‘æˆ˜éœ€è¦åº”å¯¹ï¼š\n\nå¤šçº§æ¥å£è¯†åˆ«\næ¥å£æ¨¡å‹æå–\nç”Ÿæˆè¯­ä¹‰æ­£ç¡®çš„è¾“å…¥\n\npropose a generation-based fuzzing solution FANS to address the aforementioned challenges.\nåœ¨https://github.com/iromise/fans.å¼€æºäº†FANSçš„åŸå‹\næ€»ç»“æœ¬æ–‡åšå‡ºçš„è´¡çŒ®ï¼š\n\næˆ‘ä»¬ç³»ç»Ÿåœ°ç ”ç©¶äº†Android native system services ä¸­æ¥å£ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼ŒæŒ–æ˜äº†æ›´æ·±çš„å¤šå±‚æ¥å£ã€‚\næå‡ºäº†ä¸€ç§è‡ªåŠ¨æå–è¾“å…¥æ¥å£æ¨¡å‹å’Œè¯­ä¹‰çš„è§£å†³æ–¹æ¡ˆã€‚è¿™ç§æ–¹æ³•ä¹Ÿå¯ä»¥åº”ç”¨äºå…¶ä»–åŸºäºæ¥å£çš„ç¨‹åºã€‚\næˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–pairä¸­åˆ©ç”¨ å˜é‡åå’Œç±»å‹çŸ¥è¯† æ¥æ¨æ–­äº‹åŠ¡é—´çš„ä¾èµ–å…³ç³»ã€‚\næˆ‘ä»¬å®ç°äº†ä¸€ä¸ªFANSåŸå‹æ¥ç³»ç»Ÿåœ°æ¨¡ç³ŠAndroidæœ¬åœ°ç³»ç»ŸæœåŠ¡ï¼Œå¹¶å‘ç°äº†30ä¸ªç‹¬ç‰¹çš„æœ¬åœ°æ¼æ´å’Œ138ä¸ªç‹¬ç‰¹çš„Javaå¼‚å¸¸\n\n ä½¿ç”¨çš„æ–¹æ³•\n\nä¸Šå›¾å±•ç¤ºäº†æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆFANSçš„è®¾è®¡æ¦‚è¿°ã€‚é¦–å…ˆï¼Œæ¥å£æ”¶é›†å™¨(ç¬¬3.3èŠ‚)æ”¶é›†ç›®æ ‡æœåŠ¡ä¸­çš„æ‰€æœ‰æ¥å£ï¼ŒåŒ…æ‹¬é¡¶çº§æ¥å£å’Œå¤šçº§æ¥å£ã€‚ç„¶åæ¥å£æ¨¡å‹æå–å™¨(ç¬¬3.4èŠ‚)ä¸ºè¿™äº›æ¥å£ä¸­çš„æ¯ä¸ªå€™é€‰äº‹åŠ¡æå–è¾“å…¥å’Œè¾“å‡ºæ ¼å¼ä»¥åŠå˜é‡è¯­ä¹‰ï¼Œå³å˜é‡åå’Œç±»å‹ã€‚æå–å™¨è¿˜æ”¶é›†ä¸å˜é‡ç›¸å…³çš„ç»“æ„ã€æšä¸¾å’Œç±»å‹åˆ«åçš„å®šä¹‰ã€‚æ¥ä¸‹æ¥ï¼Œä¾èµ–æ¨æ–­å™¨(ç¬¬3.5èŠ‚)æ¨æ–­æ¥å£ä¾èµ–ï¼Œä»¥åŠäº‹åŠ¡å†…å’Œäº‹åŠ¡é—´å˜é‡ä¾èµ–ã€‚æœ€åï¼ŒåŸºäºä¸Šè¿°ä¿¡æ¯ï¼Œæ¨¡ç³Šå¼•æ“(ç¬¬3.6èŠ‚)éšæœºç”Ÿæˆäº‹åŠ¡ï¼Œå¹¶è°ƒç”¨ç›¸åº”çš„æ¥å£æ¥æ¨¡ç³Šæœ¬åœ°ç³»ç»ŸæœåŠ¡ã€‚fuzzerå¼•æ“è¿˜æœ‰ä¸€ä¸ªç®¡ç†å™¨ï¼Œè´Ÿè´£åŒæ­¥ä¸»æœºå’Œè¢«æµ‹æ‰‹æœºä¹‹é—´çš„æ•°æ®ã€‚\n 3.3Interface Collector\né¡¶å±‚æˆ–å¤šå±‚æ¥å£éƒ½æœ‰è°ƒåº¦äº‹åŠ¡çš„onTransactæ–¹æ³•ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ¥è¯†åˆ«æ¥å£ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¹¶ä¸ç›´æ¥æ‰«æAOSPä»£ç åº“ä¸­çš„C/Cæ–‡ä»¶æ¥è·å–onTransactæ–¹æ³•ã€‚ç›¸åï¼Œæˆ‘ä»¬æ£€æŸ¥åœ¨AOSPç¼–è¯‘å‘½ä»¤ä¸­ä½œä¸ºæºå‡ºç°çš„æ¯ä¸ªC/Cæ–‡ä»¶ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥æ”¶é›†åœ¨ç¼–è¯‘æœŸé—´ç”±AIDLå·¥å…·åŠ¨æ€ç”Ÿæˆçš„æ¥å£ï¼Œå¦åˆ™è¿™äº›æ¥å£å°†è¢«å¿½ç•¥ã€‚\n 3.4Interface Model Extractor\nDesign Choices\nRPC-centric testingï¼šä»¥RPCï¼ˆremote procedure callï¼‰ä¸ºä¸­å¿ƒçš„æµ‹è¯•ï¼Œæ”»å‡»è€…å¿…é¡»é€šè¿‡IPCæ¥å£ä¸ç›®æ ‡serviceäº¤äº’ï¼Œå¹¶ä¸”åªèƒ½äº§ç”Ÿæœ‰é™æ•°é‡çš„äº‹ä»¶ã€‚ä¸ºäº†å‡å°‘è¯¯æŠ¥ï¼Œé€‰æ‹©é€šè¿‡RPCæ¥å£æµ‹è¯•ç›®æ ‡æœåŠ¡ã€‚\nGeneration-based fuzzingï¼šåŸºäºç”Ÿæˆçš„fuzzingæ¯”mutation-based fuzzing æœ‰æ›´é«˜çš„ä»£ç è¦†ç›–ç‡ï¼Œæ›´å¥½çš„è¯­ä¹‰ï¼Œæ›´å°‘çš„æ¼æŠ¥ç­‰ä¼˜ç‚¹ã€‚\nLearn input model from codeï¼šå¤§æ„å°±æ˜¯ï¼šåŸºäºç”Ÿæˆçš„æ¨¡ç³Šæµ‹è¯•å™¨ä¾èµ–äºè¾“å…¥æ¨¡å‹çŸ¥è¯†æ¥ç”Ÿæˆæœ‰æ•ˆçš„æµ‹è¯•ç”¨ä¾‹ã€‚FANSæ˜¯é€šè¿‡åˆ†æAndroid æºç è‡ªåŠ¨åŒ–æ„å»ºè¾“å…¥æ¨¡å‹ã€‚\nInterface Model Extractor\n\nä»æœåŠ¡ç«¯ä»£ç ä¸­æå–æ¥å£\nå…ˆå°†AIDLæ–‡ä»¶è½¬ä¸ºC++æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ASTæå–æ¥å£æ¨¡å‹\n\nTransaction Code Identification\né€šè¿‡åˆ†æASTä¸­çš„switch-caseçš„caseèŠ‚ç‚¹ï¼Œå°±å¯ä»¥è½»æ¾çš„åˆ†æå‡ºæ¥å£çš„æ‰€æœ‰äº‹åŠ¡ï¼Œå¹¶è¯†åˆ«å‡ºç›¸å…³çš„å¸¸é‡äº‹åŠ¡ä»£ç ï¼ˆconstant transaction codeï¼‰\nInput and Output Variable Extraction\nè¯†åˆ«å‡ºäº‹åŠ¡ä»£ç ä»¥åï¼Œéœ€è¦ä»å‘æ¯ä¸ªäº‹åŠ¡ä¼ é€’çš„å‚æ•°dataä¸­æå–è¾“å…¥çš„ååºåˆ—åŒ–ã€‚æ­¤å¤–ï¼Œç”±äºæˆ‘ä»¬æƒ³æ¨æ–­äº‹åŠ¡çš„å†…éƒ¨ä¾èµ–ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æå–äº‹åŠ¡çš„è¾“å‡ºï¼Œè¾“å…¥æ˜¯è¢«åºåˆ—åŒ–åˆ°replyçš„æ•°æ®\näº‹åŠ¡ä¸­ä½¿ç”¨çš„å˜é‡æœ‰ä¸‰ç§å¯èƒ½çš„ç±»åˆ«ï¼š\n\nSequential Variables è¿™ç§ç±»å‹çš„å˜é‡æ²¡æœ‰ä»»ä½•å‰ææ¡ä»¶ã€‚\nConditional Variables è¿™ç§ç±»å‹çš„å˜é‡å–å†³äºä¸€äº›æ¡ä»¶ã€‚å¦‚æœä¸æ»¡è¶³è¿™äº›æ¡ä»¶ï¼Œå˜é‡å¯èƒ½ä¸ºç©ºï¼Œæˆ–è€…ä¸å‡ºç°åœ¨æ•°æ®ä¸­ï¼Œç”šè‡³ä¸æ»¡è¶³æ¡ä»¶æ—¶çš„ç±»å‹ä¸åŒ\nLoop Variables è¿™ç§ç±»å‹çš„å˜é‡åœ¨å¾ªç¯ç”šè‡³åµŒå¥—å¾ªç¯ä¸­è¢«ååºåˆ—åŒ–\n\nè¿™ä¸‰ç±»å˜é‡æ°å¥½å¯¹åº”ç¨‹åºä¸­çš„ä¸‰ç±»è¯­å¥ï¼Œå³é¡ºåºè¯­å¥ã€æ¡ä»¶è¯­å¥å’Œå¾ªç¯è¯­å¥ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†ä¸»è¦åœ¨ASTä¸­å¤„ç†è¿™ç±»è¯­å¥ã€‚\nType Definition Extraction\né™¤äº†æå–äº‹åŠ¡ä¸­çš„è¾“å…¥å’Œè¾“å‡ºå˜é‡ï¼Œæˆ‘ä»¬è¿˜æå–ç±»å‹å®šä¹‰ã€‚å®ƒæœ‰åŠ©äºä¸°å¯Œå˜é‡è¯­ä¹‰ï¼Œä»¥ä¾¿ç”Ÿæˆæ›´å¥½çš„è¾“å…¥ã€‚æœ‰ä¸‰ç§ç±»å‹éœ€è¦åˆ†æ:\n\nStructure-like Definition è¿™ç§ç±»å‹åŒ…æ‹¬è”åˆå’Œç»“æ„\nEnumeration Definition æå–æ‰€æœ‰ç»™å®šçš„(å¸¸é‡)æšä¸¾å€¼\nType Alias\n\n 3.5Dependency Inferer\nåœ¨æå–æ¥å£æ¨¡å‹åï¼Œæˆ‘ä»¬æ¨æ–­å‡ºä¸¤ç§ä¾èµ–å…³ç³»:\n(1)æ¥å£ä¾èµ–ã€‚å³å¦‚ä½•è¯†åˆ«å’Œç”Ÿæˆå¤šçº§æ¥å£ã€‚å®ƒè¿˜æš—ç¤ºäº†ä¸€ä¸ªæ¥å£å¦‚ä½•è¢«å…¶ä»–æ¥å£ä½¿ç”¨ã€‚\n(2)å˜é‡ä¾èµ–ã€‚äº‹åŠ¡ä¸­çš„å˜é‡ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ã€‚ä»¥å¾€çš„ç ”ç©¶å¾ˆå°‘è€ƒè™‘è¿™äº›ä¾èµ–æ€§ã€‚\nå…·ä½“çš„ä¾èµ–è¯†åˆ«æ–¹æ³•å°±ä¸èµ˜è¿°äº†\n 3.6Fuzzer Engine\né¦–å…ˆï¼Œfuzzerç®¡ç†å™¨ä¼šå°†fuzzerç¨‹åºçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€æ¥å£æ¨¡å‹å’Œä¾èµ–åŒæ­¥åˆ°æ‰‹æœºä¸Šï¼Œå¹¶åœ¨æ‰‹æœºä¸Šå¯åŠ¨fuzzerã€‚ç„¶åFuzzerå°†ç”Ÿæˆä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œå³ä¸€ä¸ªäº‹åŠ¡åŠå…¶ç›¸åº”çš„æ¥å£æ¥æ¨¡ç³Šæµ‹è¯•è¿œç¨‹ä»£ç ã€‚åŒæ—¶ï¼Œfuzzerç®¡ç†å™¨å°†å®šæœŸåŒæ­¥æ‰‹æœºä¸Šçš„å´©æºƒæ—¥å¿—ã€‚\n ç»“æœè¯„ä¼°\nExperimental Setup As shown in Fig Overview-of-FANS, we implement the first three components on Ubuntu 18.04 with i9-9900K CPU, 32 GB memory, 2.5 T SSD. As for test devices, we use the following Googleâ€™s Pixel series products: Pixel * 1, Pixel 2XL * 4, and Pixel 3XL * 1. We flash systems of these smartphones with AOSP build number PQ3A.190801.002, i.e., android-9.0.0_r46, which is a recent version supporting these devices when writing this paper. Although the Android release versions are the same, the source code can be slightly different for different Pixel models. For the following two sections (Section 5.1, Section 5.2), we report the experiment results carried out on Pixel 2XL.\nHow many interfaces have been found? What is the relationship between them? (Section 5.1)\n\n\nWhat does the extracted interface model look like? Is the model complete and precise? (Section 5.2)\n\nè™½ç„¶ä¸èƒ½åšåˆ°å®Œå…¨ç²¾ç¡®å’Œå®Œæ•´ï¼Œä½†æ˜¯è¶³å¤Ÿå¥½äº†\nHow effective is FANS in discovering vulnerabilities of Android native system services? (Section 5.3)\nä¸ºäº†è¯„ä¼°FANSçš„æœ‰æ•ˆæ€§ï¼Œæˆ‘ä»¬åœ¨å…­éƒ¨æ™ºèƒ½æ‰‹æœºä¸Šæ–­æ–­ç»­ç»­è¿è¡Œäº†å¤§çº¦30å¤©ã€‚æˆ‘ä»¬å·²ç»ä»FANSæŠ¥å‘Šçš„æˆåƒä¸Šä¸‡çš„å´©æºƒä¸­å‘ç°äº†30ä¸ªç‹¬ç‰¹çš„é”™è¯¯ï¼Œä¸‹è¡¨åˆ—å‡ºäº†æ‰€æœ‰30ä¸ªæ¼æ´ã€‚é™¤äº†åœ¨AndroidåŸç”Ÿç³»ç»ŸæœåŠ¡ä¸­å‘ç°çš„22ä¸ªæ¼æ´ä¹‹å¤–ï¼Œåœ¨ä½œä¸ºAndroidåŸç”Ÿç³»ç»ŸæœåŠ¡ä¸­çš„å…¬å…±åº“çš„libcutils.soã€libutils.soå’Œlibgui.soåº“ä¸­è¿˜æœ‰5ä¸ªæ¼æ´ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨Linuxç³»ç»Ÿç»„ä»¶ä¸­å‘ç°äº†ä¸‰ä¸ªæ¼æ´ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨iptables-restoreä¸­å‘ç°äº†ä¸€ä¸ªå †æ ˆæº¢å‡ºã€‚è¿™ä¸ªç¨‹åºæ˜¯firewallconfigurationæä¾›çš„ç”¨æˆ·ç©ºé—´ç¨‹åºã€‚è¿™äº›æ¼æ´è¯æ˜äº†FANSç”Ÿæˆçš„è¾“å…¥å¯ä»¥åœ¨å¤æ‚çš„çº¦æŸä¸‹é©±åŠ¨æ§åˆ¶æµè¿›å…¥æ·±å±‚è·¯å¾„ã€‚\n\næ­¤å¤–ï¼Œè™½ç„¶æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å‘ç°ç”¨C++å®ç°çš„AndroidåŸç”Ÿç³»ç»ŸæœåŠ¡ä¸­çš„æ¼æ´ï¼Œä½†æˆ‘ä»¬è§¦å‘äº†138ä¸ªJavaå¼‚å¸¸ï¼Œå¦‚FileNotFoundExceptionã€DateTimeExceptionã€NoSuchElementExceptionå’ŒNullPointerExceptionã€‚è¿™å¯ä»¥å½’å› äºJavaåº”ç”¨ç¨‹åºæœ‰æ—¶ä¾èµ–AndroidåŸç”Ÿç³»ç»ŸæœåŠ¡çš„äº‹å®ã€‚ä¸€äº›æœ¬åœ°æœåŠ¡ä¹Ÿè°ƒç”¨Javaæ–¹æ³•ã€‚ç”±äºå¥å£®æ€§å’Œç¨³å®šæ€§å¯¹äºAndroidåŸç”Ÿç³»ç»ŸæœåŠ¡å¾ˆé‡è¦ï¼Œæ‰€ä»¥è¿™äº›Javaå¼‚å¸¸åº”è¯¥ä¸ä¼šå‘ç”Ÿã€‚åº”è¯¥å®æ–½æ›´ä¸¥æ ¼çš„æ£€æŸ¥æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\næˆ‘ä»¬å·²ç»å‘è°·æ­ŒæŠ¥å‘Šäº†æ‰€æœ‰æœ¬åœ°æ¼æ´ã€‚å…¶ä¸­20ä¸ªè¢«ç¡®è®¤ï¼Œ18ä¸ªè¢«ç»™äºˆå®‰å“èº«ä»½è¯ï¼Œå…¶ä¸­ä¸‰ä¸ªä¸æœªæŠ«éœ²çš„æ¼æ´æŠ¥å‘Šé‡å¤ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè°·æ­Œå·²ç»ç»™å®‰å“ID 143895055å’Œ143899228åˆ†é…äº†ä¸­ç­‰ä¸¥é‡åº¦ã€‚è°·æ­Œè¿˜å°†CVE-2019-2088åˆ†é…ç»™å®‰å“æ ‡è¯†143895055ï¼Œå¹¶å°†åœ¨æœªæ¥å°†æˆ‘ä»¬æ”¾å…¥ä»–ä»¬çš„ç¡®è®¤é¡µé¢ã€‚æ­£åœ¨æäº¤Javaå¼‚å¸¸ã€‚\n å¯¹æˆ‘æœ‰ä»€ä¹ˆå¯å‘\næ­¤å‰æ²¡äº†è§£è¿‡FuzzingæŠ€æœ¯ï¼Œå€Ÿæ­¤æ–‡ç« è¿›è¡Œå­¦ä¹ ã€‚åŒæ—¶ï¼Œä¹Ÿå°è¯•ä»ä¸åŒè§’åº¦äº†è§£android ç³»ç»ŸåŸç†ã€‚æ–‡ä¸­æåˆ°çš„Native Servicesï¼Œ Services Manager ç­‰æŠ€æœ¯å¯ä»¥å‚è€ƒæ–‡æœ«é“¾æ¥ã€‚\nè®ºæ–‡é“¾æ¥ï¼šhttps://www.usenix.org/conference/usenixsecurity20/presentation/liu\nå‚è€ƒæ–‡ç« ï¼š\nServiceä¸Androidç³»ç»Ÿè®¾è®¡ï¼ˆ6ï¼‰â€” Native Service https://blog.csdn.net/21cnbao/article/details/8087328\nServiceä¸Androidç³»ç»Ÿè®¾è®¡ï¼ˆ4ï¼‰-- ServiceManager https://blog.csdn.net/21cnbao/article/details/8087304\nServiceä¸Androidç³»ç»Ÿè®¾è®¡ï¼ˆ2ï¼‰-- Parcel https://blog.csdn.net/21cnbao/article/details/8086619\nAndroidç³»ç»ŸæœåŠ¡(SystemService)ç®€ä»‹ https://blog.csdn.net/geyunfei_/article/details/78851024\n","categories":["è®ºæ–‡é˜…è¯»"],"tags":["Android","è®ºæ–‡","ç¬”è®°","Fuzzing","System-Service"]},{"title":"ELMO, BERT, GPT","url":"https://ch3nye.top/ELMO-BERT-GPT/","content":"\n ELMO, BERT, GPT\nè¿™èŠ‚è¯¾è¦è®²çš„æ˜¯å…³äºå¦‚ä½•è®©æœºå™¨çœ‹æ‡‚äººç±»çš„æ–‡å­—ï¼Œä¹Ÿå°±æ˜¯è‡ªç„¶è¯­è¨€æ¨¡å‹ã€‚ä»Šå¤©è¦å°†çš„æ˜¯åˆ°ä»Šå¤©ä¸ºæ­¢ï¼ˆ2019å¹´6æœˆï¼‰ï¼Œè¿™ä¸ªæ–¹å‘ä¸Šæœ€è¾ƒæ–°çš„æ¨¡å‹åŒ…æ‹¬BERT è¿˜æœ‰å’ŒBERT å¾ˆç›¸ä¼¼çš„ä¹Ÿå¾ˆçŸ¥åçš„æ¨¡å‹ELMO å’ŒGPT ã€‚\n Representation of Word\nå…ˆå›é¡¾ä¸€ä¸‹ï¼Œåœ¨è®¡ç®—æœºä¸­æ€ä¹ˆè¡¨ç¤ºä¸€ä¸ªè¯ã€‚\n\n1-of-N Encoding\næœ€æ—©çš„è¯è¡¨ç¤ºæ–¹æ³•ã€‚å®ƒå°±æ˜¯one-hot encoding æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå°±æ˜¯è¯´å¦‚æœè¯å…¸ä¸­æœ‰Nä¸ªè¯ï¼Œå°±ç”¨Nç»´å‘é‡è¡¨ç¤ºæ¯ä¸ªè¯ï¼Œå‘é‡ä¸­åªæœ‰ä¸€ä¸ªä½ç½®æ˜¯1ï¼Œå…¶ä½™ä½ç½®éƒ½æ˜¯0.\nä½†æ˜¯è¿™æ ·çš„æ–¹å¼å°±å¤±å»çš„è¯æ„ï¼Œæ¯”å¦‚è¯´dog cat bird éƒ½æ˜¯åŠ¨ç‰©ï¼Œè¿™äº›è¯çš„è¡¨ç¤ºåœ¨æ•°å­¦ä¸Šè¦æ˜¯æ¥è¿‘çš„ã€‚\nWord Class\næ ¹æ®è¯çš„ç±»å‹åˆ’åˆ†ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•è¿˜æ˜¯å¤ªç²—ç³™äº†ï¼Œæ¯”å¦‚è¯´dog cat éƒ½æ˜¯å“ºä¹³åŠ¨ç‰©ï¼Œbirdæ˜¯é¸Ÿç±»åº”è¯¥å†ç»†åˆ†ï¼Œè€Œdog cat åˆä¸æ˜¯åŒä¸€ç§‘åˆå¯ä»¥å†åˆ†ï¼Œä¸”cat å’Œcaréƒ½æ˜¯å››ä¸ªè…¿æˆ–è®¸è¿™ä¸¤ä¸ªè¯åº”è¯¥è¿‘ä¸€äº›ã€‚äºæ˜¯å°±æœ‰äº†Word Embedding\nWord Embedding\næœ‰ç‚¹åƒæ˜¯soft çš„word classï¼ŒæŠŠè¯åµŒå…¥åˆ°é«˜ç»´ç©ºé—´ä¸­ï¼Œå…·æœ‰ç›¸åŒå±æ€§ï¼Œæˆ–è€…ç›¸ä¼¼çš„è¯ä¹‹é—´ï¼Œè·ç¦»è¿‘ä¸€äº›ã€‚Word Embeddingçš„æŠ€æœ¯è¿‡å»è®²è¿‡ï¼Œå‚è€ƒï¼šhttps://www.youtube.com/watch?v=X7PH3NuYW0Q\næ¥ä¸‹æ¥è¿›å…¥æ²¡è®²è¿‡çš„çŸ¥è¯†\n ä¸€è¯å¤šä¹‰\n\n\nhttps://arxiv.org/abs/1902.06006\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸Šé¢äº”ä¸ªbankæœ‰ä¸‰ç§æ„æ€ã€‚ä¹Ÿå°±æ˜¯è¯´åŒä¸€ä¸ªè¯å¾€å¾€åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­å…·æœ‰ä¸ä¸€æ ·çš„æ„æ€ï¼Œå°±æ˜¯è¯´æˆ‘ä»¬å¸Œæœ›ä¸€ä¸ªè¯å¯ä»¥æœ‰å¤šä¸ªembedding ã€‚ä»¥å‰è¦å¤„ç†è¿™ä»¶äº‹ï¼Œæˆ‘ä»¬æ˜¯è®©æœºå™¨å»æŸ¥è¯å…¸ï¼Œçœ‹è¿™ä¸ªè¯æœ‰å‡ ç§è§£é‡Šå°±ç»™å®ƒè®¾ç½®å‡ ä¸ªembeddingï¼Œç„¶åé€šè¿‡è¯­æ–™åº“train å‡ºè¿™äº›å‘é‡ã€‚ä½†æ˜¯ä¸åŒçš„è¯å…¸å¯¹åŒä¸€ä¸ªè¯æœ‰ä¸åŒçš„è§£é‡Šï¼Œæ¯”å¦‚è¯´ä¸Šå›¾ç¬¬äº”ä¸ªblood bankï¼ˆè¡€åº“ï¼‰ï¼Œæœ‰çš„è¯å…¸è®¤ä¸ºè¿™ä¸ªbankå°±æ˜¯é“¶è¡Œçš„æ„æ€ï¼Œæœ‰çš„è¯å…¸è®¤ä¸ºè¿™æ˜¯åŒºåˆ«äºé“¶è¡Œçš„ç¬¬ä¸‰ç§æ„æ€ã€‚äº‹å®ä¸Šï¼Œæœ‰å¾ˆå¤šè¿™ç§å¾®å¦™çš„è¯æ±‡ï¼Œè®©äººéš¾ä»¥åˆ¤æ–­å®ƒåº”è¯¥è®¾ç½®å‡ ä¸ªembedding ã€‚\n Contextualized Word Embedding\n\næˆ‘ä»¬å¸Œæœ›æœºå™¨èƒ½åšåˆ°ï¼š\n\n\næ¯ä¸ªtokenï¼ˆä¸åŒä¸Šä¸‹æ–‡ä¸­çš„è¯ï¼‰éƒ½æœ‰ä¸€ä¸ªembedding ï¼ˆæ— è®ºå®ƒä»¬åœ¨è¯å…¸è§£é‡Šä¸­æ˜¯å¦å±äºåŒä¸€ç±»ï¼‰\n\n\nword token çš„embedding ä¾èµ–äºä¸Šä¸‹æ–‡\n\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸‰ä¸ªbankæ˜¯ä¸åŒçš„tokenï¼Œå®ƒä»¬çš„ä¸Šä¸‹æ–‡æ˜¯ä¸ä¸€æ ·çš„ï¼Œæœªæ¥å°†æœ‰ä¸åŒçš„embedding ï¼ˆåŒ…æ‹¬ç°è‰²çš„æ–¹å—ï¼Œæ¯ä¸ªtokenéƒ½ä¼šè¾“å‡ºä¸€ä¸ªembeddingï¼‰ã€‚è¿™ä¸ªæŠ€æœ¯å«åšContextualized Word Embedding ã€‚\né‚£æ€ä¹ˆåšåˆ°Contextualized Word Embedding å‘¢ï¼Œæœ‰ä¸€ä¸ªå®ç°çš„æŠ€æœ¯å«åšï¼šEmbeddings from Language Model (ELMO)\n Embeddings from Language Model (ELMO)\n\n\nhttps://arxiv.org/abs/1802.05365\n\nELMOæ˜¯ä¸€ä¸ªRNN-based Language Modelï¼Œè®­ç»ƒçš„æ–¹æ³•å°±æ˜¯æ‰¾ä¸€å¤§å †çš„å¥å­ï¼Œä¹Ÿä¸éœ€è¦åšæ ‡æ³¨ï¼Œç„¶ååšä¸Šå›¾æ‰€ç¤ºçš„è®­ç»ƒï¼ŒRNNå¿˜è®°äº†çš„è¯å»çœ‹ä»¥å‰çš„è®²è§£å§ã€‚\nRNN-based Language Model çš„è®­ç»ƒè¿‡ç¨‹å°±æ˜¯ä¸æ–­å­¦ä¹ é¢„æµ‹ä¸‹ä¸€ä¸ªå•è¯æ˜¯ä»€ä¹ˆã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä½ è¦è®­ç»ƒæ¨¡å‹è¾“å‡ºâ€œæ½®æ°´é€€äº†å°±çŸ¥é“è°æ²¡ç©¿è£¤å­â€ï¼Œä½ æ•™modelï¼Œå¦‚æœçœ‹åˆ°ä¸€ä¸ªå¼€å§‹ç¬¦å·&lt;BOS&gt; ï¼Œå°±è¾“å‡ºæ½®æ°´ï¼Œå†ç»™å®ƒæ½®æ°´ï¼Œå°±è¾“å‡ºé€€äº†ï¼Œå†ç»™å®ƒé€€äº†ï¼Œå°±è¾“å‡ºå°±â€¦å­¦å®Œä»¥åä½ å°±æœ‰Contextualized Word Embedding ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠRNN çš„hidden layer æ‹¿å‡ºæ¥ä½œä¸ºEmbedding ã€‚\nä¸ºä»€ä¹ˆè¯´è¿™ä¸ªhidden layer åšEmbedding å°±æ˜¯Contextualized å‘¢ï¼Œå› ä¸ºRNNä¸­æ¯ä¸ªè¾“å‡ºéƒ½æ˜¯ç»“åˆå‰é¢æ‰€æœ‰çš„è¾“å…¥åšå‡ºçš„ã€‚\nä½ å¯èƒ½ä¼šç–‘æƒ‘ä¸Šå›¾ä¸æ˜¯åªçœ‹äº†å•è¯çš„å‰æ–‡å—ï¼Œæ€ä¹ˆè¯´æ˜¯ä¸Šä¸‹æ–‡å‘¢ï¼Ÿ\näº‹å®ä¸Šï¼Œæˆ‘ä»¬æ˜¯å¦‚ä¸Šå›¾æ‰€ç¤ºåšäº†æ­£ååŒå‘çš„è®­ç»ƒï¼Œæœ€ç»ˆçš„word embedding æ˜¯æŠŠæ­£å‘çš„RNN å¾—åˆ°çš„token embedding å’Œåå‘RNN å¾—åˆ°çš„token embedding æ¥èµ·æ¥ä½œä¸ºæœ€ç»ˆçš„Contextualized Word Embedding ã€‚\nç°åœ¨å‡ºç°äº†æ–°çš„é—®é¢˜ï¼Œé€šå¸¸æ¥è¯´RNNéƒ½æ˜¯Deepçš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nä¸­é—´çš„word embeddingé€šå¸¸æ˜¯å¤šä¸ªï¼Œæ€ä¹ˆè§£å†³å‘¢ï¼ŸELMOçš„è§£å†³æ–¹æ³•å¾ˆç®€å•å°±æ˜¯ï¼šæˆ‘å…¨éƒ¨éƒ½è¦\n\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒELMOä¼šå°†æ¯ä¸ªè¯è¾“å‡ºå¤šä¸ªembeddingï¼Œè¿™é‡Œæˆ‘ä»¬å‡è®¾LSTMå ä¸¤å±‚ã€‚ELMOä¼šç”¨åšweighted sumï¼Œweightæ˜¯æ ¹æ®ä½ åšçš„ä¸‹æ¸¸ä»»åŠ¡è®­ç»ƒå‡ºæ¥çš„ï¼Œä¸‹æ¸¸ä»»åŠ¡å°±æ˜¯è¯´ä½ ç”¨EMLOåšSRLï¼ˆSematic Role Labeling è¯­ä¹‰è§’è‰²æ ‡æ³¨ï¼‰ã€Corefï¼ˆCoreference resolution å…±æŒ‡è§£æï¼‰ã€SNLIï¼ˆStanford Natural Language Inference è‡ªç„¶è¯­è¨€æ¨ç†ï¼‰ã€SQuADï¼ˆStanford Question Answering Datasetï¼‰ è¿˜æ˜¯SST-5ï¼ˆ5åˆ†ç±»æƒ…æ„Ÿåˆ†ææ•°æ®é›†ï¼‰ã€‚\nå…·ä½“æ¥è¯´ï¼Œä½ è¦å…ˆtrainå¥½EMLOï¼Œå¾—åˆ°æ¯ä¸ªtoken å¯¹åº”çš„å¤šä¸ªembeddingï¼Œç„¶åå†³å®šä½ è¦åšä»€ä¹ˆtaskï¼Œç„¶ååœ¨ä¸‹æ¸¸task çš„model ä¸­å­¦ä¹ weight çš„å€¼ã€‚\nåŸå§‹ELMOçš„paper ä¸­ç»™å‡ºäº†ä¸Šå›¾å®éªŒç»“æœï¼ŒTokenæ˜¯è¯´æ²¡æœ‰åšContextualized Embeddingä¹‹å‰çš„åŸå§‹å‘é‡ï¼ŒLSTM-1ã€LSTM-2æ˜¯EMLOçš„ä¸¤å±‚å¾—åˆ°çš„embeddingï¼Œç„¶åæ ¹æ®ä¸‹æ¸¸5ä¸ªtask å­¦å‡ºæ¥çš„weight çš„æ¯”é‡æƒ…å†µã€‚æˆ‘ä»¬å¯ä»¥çœ‹å‡ºCoref å’ŒSQuAD è¿™ä¸¤ä¸ªä»»åŠ¡æ¯”è¾ƒçœ‹é‡LSTM-1æŠ½å‡ºçš„embeddingï¼Œè€Œå…¶ä»–task éƒ½æ¯”è¾ƒå¹³å‡çš„çœ‹äº†ä¸‰ä¸ªè¾“å…¥ã€‚\n Bidirectional Encoder Representations from Transformers (BERT)\nBERT = Encoder of Transformer\næˆ‘ä»¬åœ¨transformer ä¸€èŠ‚ä¸­è®²è¿‡Transformer äº†ï¼ŒBERT ä¹Ÿæœ‰æåŠã€‚\nå¦‚æœåé¢è®²çš„ä¸œè¥¿ä½ æ²¡æœ‰å¬çš„å¾ˆæ‡‚çš„è¯ï¼Œä½ å°±è®°ä½BERTçš„ç”¨æ³•å°±æ˜¯åƒä¸€ä¸ªå¥å­ï¼Œè¾“å‡ºå¥ä¸­æ¯ä¸ªè¯çš„embedding ã€‚\n\nè¿™é‡Œè€å¸ˆåšäº†ä¸€ä¸ªæé†’ï¼Œç”±äºä¸­æ–‡çš„è¯å¤ªå¤šï¼Œæ‰€ä»¥ç”¨è¯ä½œä¸ºsequenceçš„åŸºæœ¬å•ä½ï¼Œå¯èƒ½å¯¼è‡´è¾“å…¥å‘é‡è¿‡é•¿ï¼ˆone-hotï¼‰ï¼Œæ‰€ä»¥ä¹Ÿè®¸ä½¿ç”¨å­—ä½œä¸ºåŸºæœ¬å•ä½æ›´å¥½ã€‚\n Training of BERT\npaperä¸ŠæåŠçš„BERTçš„è®­ç»ƒæ–¹æ³•æœ‰ä¸¤ç§ï¼ŒMasked LM å’ŒNext Sentence Prediction ã€‚\nMasked LM\n\nåŸºæœ¬æ€è·¯ï¼šç›–ä½è¾“å…¥çš„å¥å­ä¸­15%çš„è¯ï¼Œè®©BERTæŠŠè¯å¡«å›æ¥ã€‚å…·ä½“æ–¹æ³•æ˜¯ï¼ŒæŒ–ç©ºçš„ä½ç½®ç”¨ç¬¦å·[MASK]æ›¿æ¢ï¼Œç„¶åè¾“å…¥åˆ°BERTï¼ŒBERTç»™å‡ºè¾“å‡ºå‘é‡ï¼Œå°†æŒ–ç©ºåœ°æ–¹çš„è¾“å‡ºå‘é‡ï¼Œè¾“å…¥åˆ°ä¸€ä¸ªç®€å•çš„çº¿æ€§æ¨¡å‹ä¸­ï¼Œè¿™ä¸ªæ¨¡å‹ä¼šåˆ†è¾¨è¿™ä¸ªå‘é‡æ˜¯é‚£ä¸ªè¯ã€‚æ‰€ä»¥è¯´ï¼ŒBERTå¿…é¡»å¥½å¥½åšembedding ï¼Œåªæœ‰BERTæŠ½å‡ºçš„å‘é‡èƒ½å¾ˆå¥½åœ°è¡¨ç¤ºè¢«æŒ–ç©ºçš„è¯ï¼Œè¿™ä¸ªç®€å•çš„çº¿æ€§æ¨¡å‹æ‰èƒ½æ‰¾åˆ°åˆ°åº•æ˜¯å“ªä¸ªè¯è¢«Maskedã€‚\nNext Sentence Prediction\n\nåŸºæœ¬æ€è·¯ï¼šç»™BERTä¸¤ä¸ªå¥å­ï¼Œç„¶ååˆ¤æ–­è¿™ä¸¤ä¸ªå¥å­æ˜¯ä¸æ˜¯åº”è¯¥æ¥åœ¨ä¸€èµ·ã€‚å…·ä½“åšæ³•æ˜¯ï¼Œ[SEP]ç¬¦å·å‘Šè¯‰BERTäº¤æ¥çš„åœ°æ–¹åœ¨å“ªé‡Œï¼Œ[CLS]è¿™ä¸ªç¬¦å·é€šå¸¸æ”¾åœ¨å¥å­å¼€å¤´ï¼Œå®ƒé€šè¿‡BERTå¾—åˆ°çš„embedding è¾“å…¥åˆ°ç®€å•çš„çº¿æ€§åˆ†ç±»å™¨ä¸­ï¼Œåˆ†ç±»å™¨åˆ¤æ–­å½“å‰è¿™ä¸ªä¸¤ä¸ªå¥å­æ˜¯ä¸æ˜¯åº”è¯¥æ¥åœ¨ä¸€èµ·ã€‚\nä½ å¯èƒ½ä¼šç–‘æƒ‘[CLS]éš¾é“ä¸åº”è¯¥æ”¾åœ¨å¥æœ«ï¼Œè®©BERTçœ‹å®Œæ•´ä¸ªå¥å­å†åšåˆ¤æ–­å—ï¼Ÿ\nä½ ä»”ç»†æƒ³æƒ³çœ‹ï¼ŒBERTé‡Œé¢ä¸€èˆ¬ç”¨çš„æ˜¯Transformerçš„Encoderï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒåšçš„æ˜¯self-attentionï¼Œæˆ‘ä»¬ä¹‹å‰è¯´self-attention layer ä¸å—ä½ç½®çš„å½±å“ï¼Œå®ƒä¼šçœ‹å®Œæ•´ä¸ªå¥å­ï¼Œæ‰€ä»¥ä¸€ä¸ªtokenæ”¾åœ¨å¥å­çš„å¼€å¤´æˆ–è€…ç»“å°¾æ˜¯æ²¡æœ‰å·®åˆ«çš„ã€‚\næœ€åæä¸€ä¸‹ä¸Šè¿°ä¸¤ä¸ªæ–¹æ³•ä¸­ï¼ŒLinear classifier æ˜¯å’ŒBERTä¸€èµ·è®­ç»ƒçš„ã€‚ä¸Šè¿°ä¸¤ä¸ªæ–¹æ³•åœ¨æ–‡çŒ®ä¸Šæ˜¯åŒæ—¶ä½¿ç”¨çš„ï¼Œè®©BERTçš„è¾“å‡ºå»è§£è¿™ä¸¤ä¸ªä»»åŠ¡çš„æ—¶å€™ä¼šå¾—åˆ°æœ€å¥½çš„è®­ç»ƒæ•ˆæœã€‚\n How to use BERT\nä½ å½“ç„¶å¯ä»¥æŠŠBERTå½“ä½œä¸€ä¸ªæŠ½embedding çš„å·¥å…·ï¼ŒæŠ½å‡ºembedding ä»¥åå»åšåˆ«çš„taskï¼Œä½†æ˜¯åœ¨æ–‡çŒ®ä¸­å¹¶ä¸æ˜¯è¿™æ ·ï¼Œæ–‡çŒ®ä¸­æ˜¯æŠŠBERTå’Œdown stream task ä¸€èµ·åšè®­ç»ƒğŸ˜®ã€‚ä¸¾äº†å››ä¸ªæ —å­ï¼š\n\nå¦‚ä¸Šå›¾ï¼Œè¾“å…¥ä¸€ä¸ªsentence è¾“å‡ºä¸€ä¸ªclass ï¼Œæœ‰ä»£è¡¨æ€§çš„ä»»åŠ¡æœ‰æƒ…æ„Ÿåˆ†æï¼Œæ–‡ç« åˆ†ç±»ç­‰ã€‚\nå…·ä½“åšæ³•ï¼Œä»¥å¥å­æƒ…æ„Ÿåˆ†æä¸ºä¾‹ï¼Œä½ æ‰¾ä¸€å †å¸¦æœ‰æƒ…æ„Ÿæ ‡ç­¾çš„å¥å­ï¼Œä¸¢ç»™BERTï¼ˆBERTæœ‰trained modelï¼‰ï¼Œå†å¥å­å¼€å¤´è®¾ä¸€ä¸ªåˆ¤æ–­æƒ…æ„Ÿçš„ç¬¦å·[CLS]ï¼ŒæŠŠè¿™ä¸ªç¬¦å·é€šè¿‡BERTçš„è¾“å‡ºä¸¢ç»™ä¸€ä¸ªçº¿æ€§åˆ†ç±»å™¨åšæƒ…æ„Ÿåˆ†ç±»ã€‚çº¿æ€§åˆ†ç±»å™¨æ˜¯éšæœºåˆå§‹åŒ–å‚æ•°ç”¨ä½ çš„è®­ç»ƒèµ„æ–™train çš„ï¼Œè¿™ä¸ªè¿‡ç¨‹ä½ ä¹Ÿå¯ä»¥å †BRETè¿›è¡Œfine-tune ï¼Œæˆ–è€…å°±fix ä½BRETçš„å‚æ•°ï¼Œéƒ½è¡Œã€‚\n\nå¦‚ä¸Šå›¾ï¼Œè¾“å…¥ä¸€ä¸ªå¥å­ï¼Œè¾“å‡ºæ¯ä¸ªå•è¯çš„ç±»åˆ«ã€‚æœ‰ä»£è¡¨æ€§çš„æ —å­ï¼ŒSlot fillingã€‚\nå’Œä¸Šä¸€ä¸ªæ —å­ç±»ä¼¼ï¼Œè¿™é‡Œä½ å°±å»train æ¯ä¸ªçº¿æ€§åˆ†ç±»å™¨å°±å¥½äº†ï¼ŒBERTä¹Ÿå¯ä»¥å»fine-tune ã€‚\n\nå¦‚ä¸Šå›¾ï¼Œè¾“å…¥ä¸¤ä¸ªå¥å­ï¼Œè¾“å‡ºè‡ªç„¶è¯­è¨€æ¨ç†çš„ç»“æœã€‚ä¸¾æ —æ¥è¯´ï¼Œç»™å‡ºä¸€ä¸ªå‰æä¸€ä¸ªå‡è®¾ï¼Œæœºå™¨æ ¹æ®è¿™ä¸ªå‰æåˆ¤æ–­è¿™ä¸ªå‡è®¾æ˜¯T/F/unknown.\nåšæ³•å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä½ åœ¨å¼€å¤´è®¾ä¸€ä¸ªæé—®çš„ç¬¦å·ï¼Œåœ¨æŠŠä¸¤ä¸ªå¥å­ç”¨[SEP]æ¥èµ·æ¥ï¼Œä¸Šé¢æ¥ä¸€ä¸ªçº¿æ€§åˆ†ç±»å™¨ï¼ˆ3åˆ†ç±»ï¼‰ï¼ŒåŒä¸Šçš„è®­ç»ƒæ–¹æ³•ã€‚\n\né‚£BERTè§£QAé—®é¢˜ï¼Œè€Œä¸”æ˜ç¡®æ˜¯Extraction-based Question Answering ï¼Œè¿™ç§QAé—®é¢˜æ˜¯è¯´ï¼Œæ–‡ä¸­ä¸€å®šèƒ½æ‰¾åˆ°é—®é¢˜çš„ç­”æ¡ˆã€‚\nè§£è¿™ç§QAé—®é¢˜çš„model å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ¨¡å‹è¾“å…¥Document D æœ‰Nä¸ªå•è¯ï¼ŒQuery Qæœ‰Mä¸ªå•è¯ï¼Œæ¨¡å‹è¾“å‡ºç­”æ¡ˆåœ¨æ–‡ä¸­çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼šså’Œeã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸Šå›¾ä¸­ç¬¬ä¸€ä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯gravityï¼Œæ˜¯Document ä¸­ç¬¬17ä¸ªå•è¯ï¼›ç¬¬ä¸‰ä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯within a cloudï¼Œæ˜¯Document ä¸­ç¬¬77åˆ°ç¬¬79ä¸ªå•è¯ã€‚\næ€ä¹ˆç”¨BERTè§£è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ\n\nè¾“å…¥å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒDocument ä¸­æ¯ä¸ªè¯éƒ½ä¼šæœ‰ä¸€ä¸ªå‘é‡è¡¨ç¤ºï¼Œç„¶åä½ å†å»learn ä¸¤ä¸ªå‘é‡ï¼Œä¸Šå›¾çº¢è‰²å’Œè“è‰²æ¡ï¼Œè¿™ä¸¤ä¸ªå‘é‡çš„ç»´åº¦å’ŒBERTçš„è¾“å‡ºå‘é‡ç›¸åŒï¼Œçº¢è‰²å‘é‡å’ŒDocument ä¸­çš„è¯æ±‡åšç‚¹ç§¯å¾—åˆ°ä¸€å †æ•°å€¼ï¼ŒæŠŠè¿™äº›æ•°å€¼åšsoftmax æœ€å¤§å€¼çš„ä½ç½®å°±æ˜¯sï¼ŒåŒæ ·çš„è“è‰²çš„å‘é‡åšç›¸åŒçš„è¿ç®—ï¼Œå¾—åˆ°eï¼š\n\nå¦‚æœeè½åœ¨sçš„å‰é¢ï¼Œæœ‰å¯èƒ½å°±æ˜¯æ— æ³•å›ç­”çš„é—®é¢˜ã€‚\nè¿™ä¸ªè®­ç»ƒæ–¹æ³•ï¼Œä½ éœ€è¦labelå¾ˆå¤šdataï¼Œæ¯ä¸ªé—®é¢˜çš„ç­”æ¡ˆéƒ½éœ€è¦ç»™å‡ºåœ¨æ–‡ä¸­çš„ä½ç½®ã€‚ä¸¤ä¸ªå‘é‡æ˜¯ç™½æ‰‹èµ·å®¶learnå‡ºæ¥çš„ï¼ŒBERTå¯èƒ½éœ€è¦fine-tune ã€‚\n BERT å± æ¦œ\nç°åœ¨BERTåœ¨NLPä»»åŠ¡ä¸­å‡ ä¹æ˜¯å± æ¦œçš„ï¼Œå‡ ä¹æ¯ä¸ªNLPä»»åŠ¡éƒ½å·²ç»è¢«BERTæ´—è¿‡äº†ã€‚\n\n Enhanced Representation through Knowledge Integration (ERNIE)\n\n\nhttps://arxiv.org/abs/1904.09223\nhttps://zhuanlan.zhihu.com/p/59436589\n\nERNIEæ˜¯è½¬ä¸ºä¸­æ–‡è®¾è®¡çš„NLPé¢„è®­ç»ƒæ¨¡å‹ï¼Œby ç™¾åº¦ã€‚ç»†èŠ‚å¯ä»¥çœ‹ä¸€ä¸‹æ–‡ç« ã€‚\n What does BERT learn?\n\n\nhttps://arxiv.org/abs/1905.05950\nhttps://openreview.net/pdf?id=SJzSgnRcKX\n\næ€è€ƒä¸€ä¸‹BERTæ¯ä¸€å±‚éƒ½åœ¨åšä»€ä¹ˆï¼Œåˆ—å‡ºä¸Šè¿°ä¸¤ä¸ªreference ç»™å¤§å®¶åšå‚è€ƒã€‚å‡å¦‚è¯´æˆ‘ä»¬çš„BERTæœ‰24å±‚ï¼Œdown stream taskæœ‰POSã€Constsç­‰ç­‰ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ä¸Šè¿°å®éªŒç»“æœã€‚è¿™ä¸ªå®éªŒæŠŠBERTçš„æ¯ä¸€å±‚çš„Contextualized Embedding æŠ½å‡ºæ¥åšweighted sumï¼Œå°±å’ŒEMLOçš„åšæ³•ä¸€æ ·ï¼ŒELMOå°±æ˜¯æŠŠæ¯å±‚çš„Contextualized Embedding æŠ½å‡ºæ¥åšweighted sumï¼Œç„¶åé€šè¿‡ä¸‹æ¸¸ä»»åŠ¡learn å‡ºweightã€‚\nè¿™é‡Œä¹Ÿä¸€æ ·ï¼Œå‡è®¾æˆ‘ä»¬æ˜¯å•çº¯ç”¨BERTåšembedding ï¼Œç”¨å¾—åˆ°çš„è¯å‘é‡åšä¸‹æ¸¸ä»»åŠ¡ã€‚é‚£BERTæœ‰24å±‚ï¼Œæ‰€ä»¥æ¯ä¸ªè¯éƒ½ä¼šæŠ½å‡º24ä¸ªvector ï¼ŒæŠŠè¿™äº›vector åšweighted sumï¼Œweight æ˜¯æ ¹æ®ä¸‹æ¸¸ä»»åŠ¡learnå‡ºæ¥çš„ï¼Œçœ‹æœ€ålearnå‡ºçš„weight çš„æƒ…å†µï¼Œå°±å¯ä»¥çŸ¥é“è¿™ä¸ªä»»åŠ¡æ›´éœ€è¦é‚£äº›å±‚çš„vector ã€‚\nä¸Šå›¾ä¸­å³ä¾§è“è‰²çš„å¤šä¸ªæŸ±çŠ¶å›¾ï¼Œä»£è¡¨é€šè¿‡ä¸åŒä»»åŠ¡learn å‡ºçš„BERTå„å±‚çš„weight ï¼ŒPOSæ˜¯åšè¯æ€§æ ‡æ³¨ä»»åŠ¡ï¼Œä¼šæ›´ä¾èµ–11-14å±‚ï¼ŒCorefæ˜¯åšåˆ†æä»£è¯æŒ‡ä»£ï¼Œä¼šæ›´ä¾èµ–BERTé«˜å±‚çš„å‘é‡ï¼Œè€ŒSRLè¯­ä¹‰è§’è‰²æ ‡æ³¨å°±æ¯”è¾ƒå¹³å‡åœ°ä¾èµ–å„å±‚æŠ½å‡ºçš„ä¿¡æ¯ã€‚\n Multilingual BERT\n\n\nhttps://arxiv.org/abs/1904.09077\n\nMultilingual BERT ç”¨104ç§è¯­è¨€å»è®­ç»ƒã€‚google åˆ°wikiç™¾ç§‘ä¸Šçˆ¬äº†104ç§è¯­è¨€çš„ç™¾ç§‘ç»™BERTå­¦ä¹ ï¼Œè™½ç„¶BERTæ²¡çœ‹è¿‡è¿™äº›è¯­è¨€ä¹‹é—´çš„ç¿»è¯‘ï¼Œä½†æ˜¯å®ƒçœ‹è¿‡104ç§è¯­è¨€çš„ç™¾ç§‘ä»¥åï¼Œå®ƒä¼¼ä¹è‡ªåŠ¨å­¦ä¼šäº†ä¸åŒè¯­è¨€ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚\næ‰€ä»¥ï¼Œå¦‚æœä½ ç°åœ¨è¦ç”¨è¿™ä¸ªé¢„è®­ç»ƒå¥½çš„BERTå»åšæ–‡ç« åˆ†ç±»ï¼Œä½ åªè¦ç»™ä»–è‹±æ–‡æ–‡ç« åˆ†ç±»çš„label data setï¼Œå®ƒå­¦å®Œä¹‹åï¼Œç«Ÿç„¶å¯ä»¥ç›´æ¥å»åšä¸­æ–‡æ–‡ç« çš„åˆ†ç±» amazingğŸ˜®ã€‚æ›´å¤šç»†èŠ‚ä½ å¯ä»¥å‚è€ƒä¸Šè¿°reference\n Generative Pre-Training (GPT)\n\n\nhttps://d4mucfpksywv.cloudfront.net/better-language-models/language_models_are_unsupervised_multitask_learners.pdf\nSource of image: https://huaban.com/pins/1714071707/\n\nä»ä¸Šå›¾ä½ å°±å¯ä»¥çœ‹å‡ºï¼ŒGPTéå¸¸å·¨å¤§ï¼Œå…¶å®å®ƒçš„å–ç‚¹å°±æ˜¯å¤§ã€‚\nGPTç›®å‰æœ‰ä¸‰ä¸ªç‰ˆæœ¬ï¼ŒGPTå°±æ˜¯æœ€å¼€å§‹ç‰ˆæœ¬ï¼Œå®ƒçš„å¤§å°æ˜¯å¹³å¹³æ— å¥‡çš„ï¼Œåªæ˜¯æå‡ºäº†ä¸€ç§NLPé¢„è®­ç»ƒæ¨¡å‹æ¶æ„ï¼ŒGPT-2æ˜¯GPTçš„åŠ å¤§ç‰ˆæœ¬ï¼ŒGPT-3æ˜¯ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„åŠ å¤§ç‰ˆæœ¬ã€‚ä¹Ÿå°±æ˜¯ä¸­æ¯ã€å¤§æ¯å’Œè¶…å¤§æ¯ã€‚å°¤å…¶æ˜¯GPT-3åœ¨2020å¹´å¼•èµ·äº†è¾ƒå¤§è½°åŠ¨ï¼Œæœ‰äººè¯´å®ƒèƒ½ä¸ºäººå·¥æ™ºèƒ½çš„çƒ­æ½®ç»­å‘½5å¹´ï¼Œå…³äºGPT-3çš„æ–‡ç« å·²ç»æœ‰å¾ˆå¤šäº†ï¼Œæ„Ÿå…´è¶£å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ï¼Œæœ¬èŠ‚ä¸»è¦æ¢ç©¶GPTçš„æ¶æ„ã€‚\nä¸ºä»€ä¹ˆç”¨ç‹¬è§’å…½çš„å½¢è±¡ï¼Œåé¢ä¼šè§£é‡Šã€‚\næˆ‘ä»¬ä¸Šé¢è¯´BERTæ˜¯Transformer çš„Encoder ï¼ŒGPTå…¶å®æ˜¯Transformer çš„Decoder ã€‚\n\nGPTå’Œä¸€èˆ¬çš„Language Model åšçš„äº‹æƒ…ä¸€æ ·ï¼Œå°±æ˜¯ä½ ç»™ä»–ä¸€äº›è¯æ±‡ï¼Œå®ƒé¢„æµ‹æ¥ä¸‹æ¥çš„è¯æ±‡ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒæŠŠâ€œæ½®æ°´çš„â€qæ‹¿å‡ºæ¥åšself-attentionï¼Œç„¶ååšsoftmax äº§ç”Ÿ Î±^\\hat{\\alpha}Î±^ ï¼Œå†åˆ†åˆ«å’Œvåšç›¸ä¹˜æ±‚å’Œå¾—åˆ°bï¼Œself-attention å¯ä»¥æœ‰å¾ˆå¤šå±‚ï¼ˆbæ˜¯vectorï¼Œä¸Šé¢è¿˜å¯ä»¥å†æ¥self-attention layerï¼‰ï¼Œé€šè¿‡å¾ˆå¤šå±‚ä»¥åè¦é¢„æµ‹â€œé€€äº†â€è¿™ä¸ªè¯æ±‡ã€‚\n\né¢„æµ‹å‡ºâ€œé€€äº†â€ä»¥åï¼ŒæŠŠâ€œé€€äº†â€æ‹¿ä¸‹æ¥ï¼ŒåšåŒæ ·çš„è®¡ç®—ï¼Œé¢„æµ‹â€œå°±â€è¿™ä¸ªè¯æ±‡ï¼Œå¦‚æ­¤å¾€å¤ã€‚\n Result of GPT\n\nGPT-2æ˜¯ä¸€ä¸ªå·¨å¤§çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œå®ƒå¯ä»¥åœ¨æ²¡æœ‰æ›´å¤šè®­ç»ƒèµ„æ–™çš„æƒ…å†µä¸‹åšä»¥ä¸‹ä»»åŠ¡ï¼š\n\nReading Comprehension\n\nBERTä¹Ÿå¯ä»¥åšReading Comprehensionï¼Œä½†æ˜¯BERTéœ€è¦æ–°çš„è®­ç»ƒèµ„æ–™train çº¿æ€§åˆ†ç±»å™¨ï¼Œå¯¹BERTæœ¬èº«è¿›è¡Œå¾®è°ƒã€‚è€ŒGPTå¯ä»¥åœ¨æ²¡æœ‰è®­ç»ƒèµ„æ–™çš„æƒ…å†µä¸‹åšè¿™ä¸ªä»»åŠ¡ã€‚\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä½ å°±ç»™GPT-2ä¸€æ®µæ–‡ç« ï¼Œç»™å‡ºä¸€ä¸ªé—®é¢˜ï¼Œå†å†™ä¸€ä¸ªA:ï¼Œä»–å°±ä¼šå°è¯•åšå‡ºå›ç­”ã€‚å³ä¾§æ˜¯GPT-2åœ¨CoQAä¸Šçš„ç»“æœï¼Œæœ€å¤§çš„GPT-2å¯ä»¥å’ŒDrQAè¾¾åˆ°ç›¸åŒçš„æ•ˆæœï¼Œä¸è¦å¿˜äº†GPT-2åœ¨è¿™ä¸ªä»»åŠ¡ä¸Šæ˜¯zero-shot learning ï¼Œä»æ¥æ²¡æœ‰äººæ•™è¿‡å®ƒåšQA ã€‚\n\nSummarization\n\nç»™å‡ºä¸€æ®µæ–‡ç« åŠ ä¸€ä¸ªtoo long donâ€™t read çš„ç¼©å†™&quot;TL;DR:&quot; å°±ä¼šå°è¯•æ€»ç»“è¿™æ®µæ–‡å­—ã€‚\n\nTranslation\n\nä»¥ä¸Šå›¾æ‰€ç¤ºçš„å½¢å¼ç»™å‡º ä¸€æ®µè‹±æ–‡=å¯¹åº”çš„æ³•è¯­ï¼Œè¿™æ ·çš„æ —å­ï¼Œç„¶åæœºå™¨å°±çŸ¥é“è¦ç»™å‡ºç¬¬ä¸‰å¥è‹±æ–‡çš„æ³•è¯­ç¿»è¯‘ã€‚\nå…¶å®åä¸¤ä¸ªä»»åŠ¡æ•ˆæœå…¶å®ä¸æ˜¯å¾ˆå¥½ï¼ŒSummarizationå°±åƒæ˜¯éšæœºç”Ÿæˆçš„å¥å­ä¸€æ ·ã€‚\n Visualization\n\n\nhttps://arxiv.org/abs/1904.02679\n\næœ‰äººåˆ†æäº†ä¸€ä¸‹GTP-2çš„attentionåšçš„äº‹æƒ…æ˜¯ä»€ä¹ˆã€‚\nä¸Šå›¾å³ä¾§çš„ä¸¤åˆ—ï¼ŒGPT-2ä¸­å·¦åˆ—è¯æ±‡æ˜¯ä¸‹ä¸€å±‚çš„ç»“æœï¼Œå³åˆ—æ˜¯å‰ä¸€å±‚éœ€è¦è¢«attentionçš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ï¼ŒShe æ˜¯é€šè¿‡nurse attention å‡ºæ¥çš„ï¼ŒHeæ˜¯é€šè¿‡doctor attention å‡ºæ¥çš„ï¼Œæ‰€ä»¥æœºå™¨å­¦åˆ°äº†æŸäº›è¯æ±‡æ˜¯å’Œæ€§åˆ«æœ‰å…³ç³»çš„ï¼ˆè™½ç„¶å®ƒå¤§æ¦‚ä¸çŸ¥é“æ€§åˆ«æ˜¯ä»€ä¹ˆï¼‰ã€‚\nä¸Šå›¾å·¦ä¾§ï¼Œæ˜¯å¯¹ä¸åŒå±‚çš„ä¸åŒhead åšä¸€ä¸‹åˆ†æï¼Œä½ ä¼šå‘ç°ä¸€ä¸ªç°è±¡ï¼Œå¾ˆå¤šä¸åŒçš„è¯æ±‡éƒ½è¦attend åˆ°ç¬¬ä¸€ä¸ªè¯æ±‡ã€‚ä¸€ä¸ªå¯èƒ½çš„åŸå› æ˜¯ï¼Œå¦‚æœæœºå™¨ä¸çŸ¥é“åº”è¯¥attend åˆ°å“ªé‡Œï¼Œæˆ–è€…è¯´ä¸éœ€è¦attend çš„æ—¶å€™å°±attend åœ¨ç¬¬ä¸€ä¸ªè¯æ±‡ã€‚å¦‚æœçœŸæ˜¯è¿™æ ·çš„è¯ï¼Œä»¥åæˆ‘ä»¬æœªæ¥åœ¨åšè¿™ç§model çš„æ—¶å€™å¯ä»¥è®¾ä¸€ä¸ªç‰¹åˆ«çš„è¯æ±‡ï¼Œå½“æœºå™¨ä¸çŸ¥é“è¦attend åˆ°å“ªé‡Œçš„æ—¶å€™å°±attend åˆ°è¿™ä¸ªç‰¹æ®Šè¯æ±‡ä¸Šã€‚è¿™å°±æ˜¯Visualization å¯ä»¥å‘Šè¯‰æˆ‘ä»¬çš„äº‹æƒ…ã€‚\n GPT-2 write novel\n\nGPT-2æ˜¯OpenAI åšçš„ï¼Œä¸Šå›¾æ˜¯OpenAI ç”¨GPT-2 åšäº†ä¸€ä¸ªç»­å†™æ•…äº‹çš„æ —å­ï¼Œä»–ä»¬ç»™æœºå™¨çœ‹ç¬¬ä¸€æ®µï¼Œåé¢éƒ½æ˜¯æœºå™¨è„‘éƒ¨å‡ºæ¥çš„ã€‚æœºå™¨ç”Ÿæˆçš„æ®µè½ä¸­æåˆ°äº†ç‹¬è§’å…½å’Œå®‰ç¬¬æ–¯å±±ï¼Œæ‰€ä»¥ç°åœ¨éƒ½æ‹¿ç‹¬è§’å…½å’Œå®‰ç¬¬æ–¯å±±æ¥éšå–»GPTï¼š\n\nOpenAI æ‹…å¿ƒGPT-2æœ€å¤§çš„æ¨¡å‹è¿‡äºå¼ºå¤§ï¼Œå¯èƒ½ä¼šè¢«ç”¨æ¥äº§ç”Ÿå‡æ–°é—»è¿™ç§åäº‹ä¸Šï¼Œæ‰€ä»¥åªå‘å¸ƒäº†GPT-2çš„å°æ¨¡å‹ã€‚BERTæ˜¯ä½ èƒ½å¾—åˆ°æ¨¡å‹ï¼ŒGPT-2å´æ˜¯ä½ å¾—ä¸åˆ°çš„ï¼Œäºæ˜¯ä¸Šå›¾å°±å¾ˆå½¢è±¡çš„è¡¨è¾¾äº†ä¼—å¤šå¹³æ°‘AI Master çš„å¿ƒæƒ…ã€‚\næœ‰äººç”¨GPT-2çš„å…¬å¼€æ¨¡å‹åšäº†ä¸€ä¸ªåœ¨çº¿demoï¼Œå¤§å®¶å¯ä»¥å»è¯•è¯•ï¼š\nhttps://app.inferkit.com/demo\nå‚è€ƒæ–‡ç« ï¼š\n\nAttention isnâ€™t all you needï¼BERTçš„åŠ›é‡ä¹‹æºè¿œä¸æ­¢æ³¨æ„åŠ›ï¼šhttps://zhuanlan.zhihu.com/p/58430637\n\n","categories":["æå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°"],"tags":["ML","note","Next-Step-of-ML"]},{"title":"Noteã€ŠFIRMSCOPE Automatic Uncovering of Privilege-Escala Vulnerabilities in Pre-Installed Apps in Android Firmwareã€‹","url":"https://ch3nye.top/Note-FIRMSCOPE-Automatic-Uncovering-of-Privilege-Escala/","content":" FIRMSCOPE: Automatic Uncovering of Privilege-Escalation Vulnerabilities in Pre-Installed Apps in Android Firmware\n ä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜\nandroid ç³»ç»Ÿå›ºä»¶çš„é¢„è£…è½¯ä»¶ä¸­æœ‰å¾ˆå¤šappå­˜åœ¨æ¼æ´ï¼Œè€Œä¸”è¿™äº›appæƒé™å¾€å¾€æ¯”è¾ƒé«˜ï¼Œæ‰€ä»¥å®¹æ˜“é€ æˆå®‰å…¨å¨èƒã€‚æœ¬æ–‡æ„åœ¨è‡ªåŠ¨æŒ–æ˜é¢„è£…appä¸­å­˜åœ¨çš„æƒé™æå‡æ¼æ´ã€‚\n ä½¿ç”¨çš„æ–¹æ³•\nç³»ç»Ÿæ¶æ„ï¼Œworkflowï¼š\n\n 1.unpack firmware\nè§£å‹Androidå›ºä»¶ç¯èŠ‚å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå„å›ºä»¶å‚å•†çš„æ ¼å¼ä¸ä¸€æ ·ã€‚å¤§éƒ¨åˆ†å‚å•†ä½¿ç”¨Android Sparse Image (SIMG) format è¿™ç§ext4æ ¼å¼çš„å›ºä»¶å‹ç¼©æ–¹å¼ï¼Œä½¿ç”¨è¯¸å¦‚e2toolsè¿™æ ·çš„å·¥å…·è¿›è¡Œè§£å‹å’ŒæŒ‚è½½ã€‚ä½†æ˜¯ï¼Œè§£å‹ä¹‹åå¤„ç†(unpack)å°±ä¸æ˜¯ä¸€è‡´çš„äº†ï¼Œæœ‰äº›å‚å•†æä¾›äº†ç¬¬ä¸‰æ–¹çš„unpackå·¥å…·ï¼Œæ¯”å¦‚åä¸ºçš„UAppæ ¼å¼ï¼Œéœ€è¦ä½¿ç”¨Splituappè¿›è¡Œunpackï¼ŒHTCçš„RUUæ¶æ„éœ€è¦ç”¨HTC RUU DecryptToolï¼ŒSony çš„.sin æ¶æ„éœ€è¦ç”¨AnyXperia Dumperã€‚ä¸€äº›å‚å•†ä½¿ç”¨Sparse Data(SDAT)æŠŠimageåˆ†å—ï¼Œåˆ†å—æ–‡ä»¶å¯ä»¥ä½¿ç”¨Sdat2imgé‡æ„å›SIMGã€‚\nå¯¹äºæ²¡æœ‰å¯ç”¨çš„è§£åŒ…å·¥å…·çš„å‚å•†å›ºä»¶ï¼Œé‡‡ç”¨å¯å‘å¼çš„æ–¹æ³•æœç´¢ä¸€è‡´çš„SIMG/ext4 å¤´ï¼Œå°è¯•unpackã€‚é€šå¸¸ï¼Œé•œåƒæ–‡ä»¶ä¼šè¢«é¢å¤–çš„å¤´å¡«å……ï¼Œåªè¦å‰¥ç¦»è¿™äº›é¢å¤–çš„å¤´ï¼Œå°±èƒ½å¾—åˆ°æ ‡å‡†é•œåƒæ–‡ä»¶ã€‚\nåŒæ—¶ï¼ŒåŠªåŠ›å¯»æ‰¾é•œåƒæ–‡ä»¶ä¸­çš„build.propå’Œdefault.propæ–‡ä»¶ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«äº†build fingerprintï¼Œos versionï¼Œbuild configurationï¼Œexact make and modelç­‰ä¿¡æ¯ã€‚\nå¦å¤–ï¼Œæˆ‘æ‰¾åˆ°ä¸€ç¯‡å‚è€ƒæ–‡ç« ï¼šAndroidå„å‚å•†RomåŒ…è§£å‹æ–¹å¼\n 2.Extracting and Disassembling Apps\nä»unpackçš„imageæ–‡ä»¶ä¸­æ‰¾å‡ºæ‰€æœ‰DEX,ODEX,VDEX,OAT,JAR, å’ŒAPKæ ¼å¼æ–‡ä»¶ï¼Œå…³äºè¿™äº›æ ¼å¼çš„æ›´å¤šä¿¡æ¯å¯ä»¥å‚è€ƒhere , å› ä¸ºé¢„è£…appçš„æ ¼å¼å„ä¸ç›¸åŒï¼Œæ–‡ä¸­å°†å°†æ‰€æœ‰æå–å‡ºçš„appè½¬æ¢æˆAPKçš„è§„èŒƒæ ¼å¼ã€‚å¯¹äºé¢„ç¼–è¯‘çš„OAT appï¼Œç»“åˆOat2Dexå’ŒBaksmaliï¼Œå¹¶å‚è€ƒä¹‹å‰æå–å‡ºçš„framework filesï¼ŒæŠŠåµŒå…¥åˆ°ODEXã€VDEXã€OATæ–‡ä»¶ä¸­çš„DEX classesæå–å‡ºæ¥ï¼Œè¿™ä¸€æ­¥è¾“å‡ºæ±‡ç¼–çš„DEX classes æˆ–åæ±‡ç¼–çš„smaliã€‚\næŠŠæ‰€æœ‰Dalvik bytecodeåæ±‡ç¼–æˆsmali ä»£ç ï¼Œç„¶åè½¬æ¢ä¸ºä¸­é—´è¡¨ç¤ºILï¼ˆintermediate Languageï¼‰Jasmin [35] and Jimple[36]ï¼Œæˆ‘ä»¬è¿˜åç¼–è¯‘åº”ç”¨ç¨‹åºçš„äºŒè¿›åˆ¶çš„XML manifestæ–‡ä»¶ï¼Œå¹¶æå–æœ‰å…³åº”ç”¨ç¨‹åºåŠå…¶æ‰€æœ‰å£°æ˜çš„ç»„ä»¶çš„å…ƒæ•°æ®ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬æå–åº”ç”¨ç¨‹åºåŒ…çš„åç§°å’Œç‰ˆæœ¬ä¿¡æ¯ï¼Œä½¿ç”¨å’Œå£°æ˜çš„æƒé™ï¼Œä»¥åŠæ‰€æœ‰å¯¼å‡ºçš„ç»„ä»¶çš„å…¨åå’Œç±»å‹ï¼Œä»¥åŠæ‰€æœ‰æŒ‡å®šè®¿é—®æƒé™çš„å¯¼å‡ºç»„ä»¶ã€‚\n 3.Static Taint Analysis\nå®ƒé¦–å…ˆå»ºç«‹äº†è¿‡ç¨‹é—´æ§åˆ¶æµå›¾inter-procedural Control-Flow Graphsï¼ˆICFGï¼‰ï¼›ç„¶åï¼Œé‡å»ºç±»å±‚æ¬¡ç»“æ„å¹¶è§£æè°ƒç”¨æƒ…å†µï¼ˆç¬¬4.2.1èŠ‚ï¼‰ï¼›æ¨æ–­Def-Useé“¾ï¼Œå¹¶æ„å»ºè¿‡ç¨‹é—´æ•°æ®æµå›¾inter-procedural Data-Flow Graphï¼ˆIDFGï¼‰ï¼ˆç¬¬4.2.2èŠ‚ï¼‰ï¼›æœ€åæ‰§è¡Œè‡ªå®šä¹‰çš„æµæ•æ„Ÿã€ä¸Šä¸‹æ–‡æ•æ„Ÿã€å­—æ®µæ•æ„Ÿå’Œéƒ¨åˆ†å¯¹è±¡æ•æ„Ÿçš„æ±¡ç‚¹åˆ†æï¼Œä»¥è¯†åˆ«æ˜“å—æ”»å‡»çš„æ‰§è¡Œè·¯å¾„ï¼ˆç¬¬4.2.3èŠ‚ï¼‰ã€‚\nICFGå’ŒIDFGçš„éƒ¨åˆ†è·³è¿‡ï¼Œæ¥é‡ç‚¹çœ‹çœ‹æ±¡ç‚¹åˆ†æéƒ¨åˆ†ï¼šï¼ˆè¿™éƒ¨åˆ†å…ˆç¡¬ç¿»è¯‘ä¸€ä¸‹ğŸ˜¥ï¼‰\næ ¹æ®å…ˆå‰IDFGæ¶æ„ï¼Œæ±¡ç‚¹è·Ÿè¸ªé—®é¢˜å°±è½¬å˜ä¸ºå›¾éå†é—®é¢˜ï¼Œä»ä¸€ä¸ªæ±¡ç‚¹æºåˆ°ä¸€ä¸ªæ±¡ç‚¹æ±‡èšç‚¹æˆ–åˆ°å¤šä¸ªæ±¡ç‚¹æ±‡èšç‚¹ï¼Œæ±¡ç‚¹æºå’Œæ±‡èšç‚¹éƒ½æ˜¯å¤šé‡å›¾ä¸­çš„èŠ‚ç‚¹ã€‚åœ¨éå†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åº”ç”¨éªŒè¯è§„åˆ™é›†å»ä¿®å‰ªä¸ä¼šåˆ°è¾¾æ•æ„Ÿç‚¹çš„è·¯å¾„ã€‚è¿™äº›ä¸Šä¸‹æ–‡éªŒè¯è§„åˆ™å¯¹äºæ•ˆç‡å’Œç²¾ç¡®åº¦éå¸¸æœ‰å½±å“ï¼Œå› ä¸ºå…ˆå‰çš„æ–¹æ³•åœ¨å®ä½œä¸Šåœ¨æˆäº†ä¸å¿…è¦çš„å¤æ‚åº¦æ‰©å¤§ã€‚ä¾‹å¦‚ï¼Œç”±äºæ— æ³•å¤§è§„æ¨¡åœ°ä½¿ç”¨call-site stackæä¾›ä¸Šä¸‹æ–‡æ•æ„Ÿæ€§ï¼Œå› ä¸ºä¸ºæ¯ä¸ªcall siteåˆ›å»ºstackåœ¨è®¡ç®—ä¸Šæ˜¯ä¸å¯å®ç°çš„ ï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠè™šæ‹Ÿè°ƒç”¨æ—¶ï¼Œæ¯ä¸ªcall siteéœ€è¦ç»´æŠ¤å¤šä¸ªstackã€‚æ­¤å¤–ï¼Œé€šè¿‡ å­—æ®µ çš„æµå¿…é¡»å§‹ç»ˆä¿æŒæµæ•æ„Ÿå’Œä¸Šä¸‹æ–‡æ•æ„Ÿï¼Œä½†æ˜¯ç”±äºæ˜æ˜¾è¿‡åº¦çš„å¼€é”€ä»¥åŠè·Ÿè¸ªå’Œå°†æ‰€æœ‰è¿™äº›å‰¯æœ¬é“¾æ¥å¤åˆ¶åˆ°å…¶è¯»å†™æ•´ä¸ªappæ‰€åœ¨ä½ç½®çš„å¤æ‚æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åœ¨æ¯æ¬¡è®¿é—®è¯¥å­—æ®µæ—¶å°±å¤åˆ¶ä¸è¯¥å­—æ®µç›¸åº”çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚å› æ­¤ï¼Œæœ€ç»ˆï¼Œæˆ‘ä»¬çš„åˆ†æ å®ç°äº†ä¸Šä¸‹æ–‡æ•æ„Ÿï¼Œæµæ•æ„Ÿå’Œå­—æ®µæ•æ„Ÿä»¥åŠéƒ¨åˆ†å¯¹è±¡æ•æ„Ÿï¼š\nContext-Sensitiveï¼š\næˆ‘ä»¬é€šè¿‡å°†æ¯ä¸ªcallæŒ‡ä»¤ä¸å…¶è‡ªèº«çš„è¿”å›ä¼ªå¯„å­˜å™¨é…å¯¹ï¼Œå¹¶åœ¨æ±¡ç‚¹è·Ÿè¸ªæœŸé—´ä¿æŒä¸€ä¸ªè°ƒç”¨æ ˆè¦†ç›–åœ¨æ¯ä¸ªæ ‡è®°ä¸ºæ±¡ç‚¹è·¯å¾„çš„ä¸Šæ–¹ï¼Œæ¥ç¡®ä¿ä¸Šä¸‹æ–‡æ•æ„Ÿã€‚\nFlow- and Field-Sensitiveï¼š\næˆ‘ä»¬çš„IDFGæ„é€ å¯¹æµæ•æ„Ÿï¼Œå› ä¸ºæˆ‘ä»¬è€ƒè™‘äº†è¯­å¥é¡ºåºå¹¶è·Ÿè¸ªæ¯ä¸ªç¨‹åºç‚¹çš„æµã€‚å› ä¸ºæˆ‘ä»¬è·Ÿè¸ªæ¯ä¸ªç±»å­—æ®µçš„æµï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æ„é€ ä¹Ÿå¯¹å­—æ®µæ•æ„Ÿã€‚\nPartially-Insensitiveï¼š\nç¡®ä¿ç±»å‹å…¼å®¹æ€§ä½¿æˆ‘ä»¬çš„åˆ†æå¯¹åŒçº§å’Œä¸ç›¸å…³ç±»æ•æ„Ÿï¼Œå¯¹å¯¹è±¡æ•æ„Ÿï¼Œå¯¹å•å®šä¹‰æ–¹æ³•ä¸æ•æ„Ÿï¼Œå¯¹å­å¯¹è±¡å’Œå…¶ç¥–å…ˆä¹‹ä¸€å…·æœ‰å®šä¹‰çš„è™šæ‹Ÿæ–¹æ³•ä¸æ•æ„Ÿã€‚\nPath-Insensitiveï¼š\nFIRMSCOPEå¯¹è·¯å¾„ä¸æ•æ„Ÿï¼Œå› ä¸ºå®ƒè™½ç„¶æ ¹æ®æ§åˆ¶æµå›¾æµåŠ¨ä¿¡æ¯ï¼Œä½†ä¿¡æ¯æµåŠ¨ä¸ä¸ç›¸å…³çš„æ¡ä»¶åˆ†æ”¯ä¹‹é—´å¯èƒ½å­˜åœ¨çš„æ¡ä»¶ä¾èµ–æ€§æ— å…³ã€‚è·¯å¾„æ•æ„Ÿæ€§æ˜¯ä¸€ä¸ªå·²çŸ¥çš„éš¾é¢˜ï¼Œåœ¨å®è·µä¸­æ²¡æœ‰ç»å¯¹è§£å†³æ–¹æ¡ˆ[39]ã€‚\nDetection Rules\næˆ‘ä»¬å¼€å‘äº†ä¸€å¥—è§„åˆ™å¼•æ“ï¼Œç”¨YAMLæ–‡ä»¶å†™æ¢æµ‹è§„åˆ™ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å®æ–½äº†è§„åˆ™å’Œæ’ä»¶æ¥æ£€æµ‹ä»¥ä¸‹ææƒæ¼æ´ï¼š\n(i) command injection;\n(ii) arbitrary app installation/removal;\n(iii) code injection;\n(iv) factory reset of the device;\n(v) SMS injection, including accessing, sending, and manipulating text messages;\n(vi) device recording, including audio, video, and screen recording;\n(vii) log leakage to external storage or to other apps;\n(viii) AT Command injection;\n(ix) wireless settings modification;\n(x) system settings modification.\n ç»“æœè¯„ä¼°\næˆ‘ä»¬æ”¶é›†äº†ä»v4.0åˆ°v9.0çš„2,017ä¸ªå…¬å¼€å¯ç”¨çš„Androidå›ºä»¶æ˜ åƒï¼ˆè¯·å‚é˜…é™„å½•Aä»¥è·å¾—è¯¦ç»†ä¿¡æ¯ï¼‰ï¼Œæ€»å…±æ¶µç›–äº†100å¤šå®¶Androidä¾›åº”å•†ï¼Œå…¶ä¸­åŒ…æ‹¬å…¨çƒæ’åå‰20çš„Androidä¾›åº”å•†ã€‚å›ºä»¶æ˜ åƒåŒ…å«331,342ä¸ªåº”ç”¨ç¨‹åºï¼Œå…·æœ‰15,144ä¸ªå”¯ä¸€çš„è½¯ä»¶åŒ…åç§°å’Œ39,541ä¸ªå”¯ä¸€çš„è½¯ä»¶åŒ…ç‰ˆæœ¬ã€‚è¯¥æ•°æ®åº“çš„è¯¦ç»†ä¿¡æ¯å¦‚è¡¨1æ‰€ç¤ºã€‚\n\næˆ‘ä»¬åœ¨ä¸‰å°æœåŠ¡å™¨ä¸Šéƒ¨ç½²äº†FIRMSCOPEï¼Œæ¯å°æœåŠ¡å™¨åœ¨Intel Xeon E5-2630 v4 2.20GHzä¸Šè¿è¡Œ64ä½Ubuntu 18.04ï¼Œå…·æœ‰40ä¸ªé€»è¾‘æ ¸å¿ƒå’Œ150 GiBçš„RAMã€‚æˆ‘ä»¬ä½¿ç”¨GNU Parallel [41]å®ç°äº†ä¸€ä¸ªæµæ°´çº¿æ¥ç®¡ç†ä½œä¸šå¹¶åœ¨ä¸‰ä¸ªæœåŠ¡å™¨ä¸Šåˆ†é…å›ºä»¶æ˜ åƒï¼Œå¹¶å°½å¯èƒ½å¹¶è¡Œåœ°åˆ†æå¤šä¸ªåº”ç”¨ç¨‹åºï¼Œä»¥ä¿æŒæœ€å¤§80ï¼…çš„æœåŠ¡å™¨è´Ÿè½½è€Œæ— å†…å­˜äº¤æ¢ã€‚æˆ‘ä»¬å…¨é¢åˆ†æäº†æ¯ä¸ªå›ºä»¶æ˜ åƒï¼Œæ— è®ºå…¶æŸäº›åº”ç”¨ç¨‹åºæ˜¯å¦å¯èƒ½å‡ºç°åœ¨å…¶ä»–åˆ†ææ˜ åƒä¸­ã€‚\nè¡¨2æ˜¯ç ”ç©¶ç»“æœæ‘˜è¦ã€‚æˆ‘ä»¬å‘ç°äº†850ä¸ªç‹¬ç‰¹çš„ç‰¹æƒå‡çº§æ¼æ´ï¼ˆå…±3,483ä¸ªï¼‰ï¼Œå åˆ†æå›ºä»¶çš„77ï¼…ã€‚å‘½ä»¤æ³¨å…¥æ¼æ´æ’åœ¨æœ€å‰é¢ï¼Œå½±å“äº†ä¸‰åˆ†ä¹‹ä¸€ä»¥ä¸Šçš„å›ºä»¶æ˜ åƒã€‚\n\næˆ‘ä»¬æŒ‰å¼±ç‚¹ç±»åˆ«æŒ‰ä¾›åº”å•†æä¾›ç»†åˆ†ï¼š\n\næ€»ç»“ï¼šè¡¨4ä¸­æ˜¾ç¤ºäº†AOSPä¸ä¾›åº”å•†åº”ç”¨ç¨‹åºä¸­å·²è¯†åˆ«çš„æ¼æ´çš„æ€»æ•°ã€‚å¤§çº¦92ï¼…çš„æ¼æ´æ˜¯ç”±ä¾›åº”å•†å¼•å…¥çš„åº”ç”¨ç¨‹åºï¼ˆ375ä¸ªå”¯ä¸€çš„è½¯ä»¶åŒ…åç§°ï¼‰ä¸­ï¼Œè€ŒAOSPä¸­åªæœ‰8ï¼…çš„æ¼æ´ï¼ˆ18ä¸ªå”¯ä¸€çš„AOSPè½¯ä»¶åŒ…åç§°ï¼‰ã€‚è¿™äº›ç»“æœè¯´æ˜ï¼Œç±»AOSPçš„é•œåƒæ¯”ä¾›åº”å•†å®šåˆ¶çš„é•œåƒæ›´å®‰å…¨ã€‚ä¾›åº”å•†çš„ä¿®æ”¹é€šå¸¸ä¼šå¸¦æ¥æ— æ³•é¢„æ–™çš„æ¼æ´ã€‚\n\n å¯¹æˆ‘æœ‰ä»€ä¹ˆå¯å‘\nè¿™æ–‡ç« å¯¹æˆ‘è¿™ä¸ªåˆå­¦è€…æ¥è¯´æœ‰å‡ æ–¹é¢çš„æ„ä¹‰ï¼š\n\næ›´æ·±å…¥çš„æ¥è§¦åˆ°android ç³»ç»Ÿé•œåƒ\nå¯¹android run time(art), aot(ahead of time), oat(Ahead of time)file format, odex(Optimized Dalvik Executable file)çš„ç†è§£åŠ æ·±\nåˆæ¬¡æ¥è§¦åˆ°taint analysisï¼ˆæ±¡ç‚¹åˆ†ææŠ€æœ¯ï¼‰\nCFGã€DFGçš„æ„å»ºæ˜¯ä»¥åè¦å­¦ä¹ çš„å†…å®¹\n\n è¿™é¡¹ç ”ç©¶çš„æœªæ¥æ–¹å‘\nå…¶å®æˆ‘æ„Ÿè§‰å®ƒæ²¡æœ‰ç”¨å¾ˆæ–°çš„çŸ¥è¯†ï¼Œå°±æ˜¯æŠŠAPPæ¼æ´æ£€æµ‹è½¬åˆ°é¢„è£…APPä¸Šåšï¼Œå¤šäº†ä¸€ä¸ªæ‹†åŒ…çš„è¿‡ç¨‹ï¼Œç ”ç©¶äº†ä¸€ä¸‹AOSP-likeçš„ç³»ç»Ÿé•œåƒå’ŒOEMå‚å•†é•œåƒä¸­ææƒæ¼æ´çš„ç±»å‹å’Œåˆ†å¸ƒï¼Œå¹¶æ²¡æœ‰å¤ªå¤šçš„åˆ›æ–°ç‚¹ã€‚\næ–‡ä¸­æ„å»ºçš„FIRMSCOPEç³»ç»Ÿä½¿ç”¨é™æ€æ£€æµ‹æŠ€æœ¯ï¼Œæ¶‰åŠçš„ä¸»è¦æŠ€æœ¯ç‚¹åŒ…æ‹¬è¿‡ç¨‹é—´CFGã€è¿‡ç¨‹é—´DFGçš„æ„å»ºï¼Œæ±¡ç‚¹åˆ†ææŠ€æœ¯ã€‚\næœªæ¥ï¼Œå¯¹äºæ¼æ´æ£€æµ‹æŠ€æœ¯æˆ–è®¸å¯ä»¥å¢åŠ fuzzingã€åŠ¨æ€ç¬¦å·æ‰§è¡Œï¼ˆConcoliï¼‰ç­‰åŠ¨æ€åˆ†ææŠ€æœ¯ã€‚\n\nref:https://www.usenix.org/conference/usenixsecurity20/presentation/elsabagh\n\n","categories":["è®ºæ–‡é˜…è¯»"],"tags":["Android","è®ºæ–‡","ç¬”è®°","æ¼æ´æŒ–æ˜"]},{"title":"Androidæµé‡æŠ“åŒ…ç¯å¢ƒé…ç½®","url":"https://ch3nye.top/Androidæµé‡æŠ“åŒ…ç¯å¢ƒé…ç½®/","content":" Androidæµé‡æŠ“åŒ…ç¯å¢ƒé…ç½®\n å‰è¨€\nå¦‚æœä½ çš„æ‰‹æœºæœ‰magisk æ¨èä½ ç›´æ¥æŒ‰ç…§æ­¥éª¤-PCç«¯å‰åŠéƒ¨åˆ†ï¼Œå®‰è£…ç”¨æˆ·è¯ä¹¦ï¼Œæ­¤åå‚è€ƒæ­¥éª¤-æœ€ç»ˆæ›²çº¿æ•‘å›½ä¸€èŠ‚å°±å¥½ã€‚\n ç¯å¢ƒï¼š\nredmik305G MIUI12 Android 10ï¼ˆwith Magiskï¼‰\nFiddler v5.0.20204.45441 for .NET 4.6.1Built: 2020å¹´11æœˆ3æ—¥\n æ­¥éª¤\n PCç«¯\nå®‰è£…Fiddler ï¼ˆæ³¨æ„æ˜¯classicç‰ˆæœ¬ä¸æ˜¯Fiddler Everywhereï¼‰\né…ç½®Fiddler å¯ä»¥å‚è€ƒFiddleræŠ“åŒ…ï¼ˆAndroid appï¼‰ å‰å››èŠ‚\nåˆ°è¿™é‡ŒFiddlerçš„è¯ä¹¦æ˜¯ä»¥ç”¨æˆ·è¯ä¹¦çš„æ–¹å¼å®‰è£…çš„ï¼Œæ­¤æ—¶ä½ çš„fiddlerå·²ç»èƒ½æ”¶åˆ°å¾ˆå¤šæµé‡äº†ï¼Œä½†æ˜¯å¾ˆå¤šAPPéƒ½é»˜è®¤å¿½è§†ç”¨æˆ·è¯ä¹¦ï¼Œæ‰€ä»¥è¿˜æ˜¯æ²¡åŠæ³•æŠ“ï¼Œéœ€è¦æŠŠè¯ä¹¦è£…åˆ°system CAåˆ—è¡¨ä¸­ã€‚\nç„¶åéœ€è¦PCç«¯å¯¼å‡ºFiddler è¯ä¹¦ï¼Œå¯¼å‡ºçš„è¯ä¹¦æ˜¯ceræ ¼å¼ï¼Œæ ¹æ®éƒ¨åˆ†APPæ— æ³•ä»£ç†æŠ“åŒ…çš„åŸå› åŠè§£å†³æ–¹æ³•ï¼ˆflutter æŠ“åŒ…ï¼‰ è¿™ç¯‡æ–‡ç« çš„å™è¿°ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤å°†cerè¯ä¹¦è½¬ä¸ºpemæ ¼å¼ï¼š\nopenssl x509 -inform der -in FiddlerRoot.cer -out FiddlerRoot.pem\nå†å°†pemè¯ä¹¦é‡å‘½åä¸ºAndroid system CAè¯ä¹¦çš„æ ¼å¼ï¼š\nopenssl x509 -subject_hash_old -in FiddlerRoot.pem -noout\næˆ–è€…\nopenssl x509 -inform der -subject_hash_old -in FiddlerRoot.cer -noout\nå¾—åˆ°subject_hash_oldå€¼ä¸º269953fb\né‡å‘½åFiddlerRoot.pemä¸º269953fb.0 ï¼Œåé¢çš„.&lt;number&gt;æ˜¯ä¸ºäº†å¦‚æœæœ‰hashé‡å¤çš„è¯ä¹¦åˆ™åŠ 1ä»¥åŒºåˆ†è¯ä¹¦ã€‚\nï¼ˆå¥½åƒceræ ¼å¼çš„è¯ä¹¦MIUI12 ä¸è®¤ï¼Œç–¯ç‹‚å¡æ­»ï¼ŒæŠ¥é”™ï¼Œåªèƒ½é‡å¯ï¼Œè£…è¯ä¹¦çš„æ—¶å€™å¯çƒ¦æ­»æˆ‘äº†ğŸ˜¥ï¼‰\n Android ç«¯\nåœ¨ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶ä¹‹å‰æœ€å¥½å…ˆç¦ç”¨ç³»ç»ŸéªŒè¯ï¼š\nadb disable-verity\nå°†269953fb.0è¯ä¹¦æ–‡ä»¶ä¼ åˆ°androidè®¾å¤‡çš„/system/etc/security/cacertsç›®å½•ä¸‹ï¼Œå¦‚æœæŠ¥åªè¯»æ–‡ä»¶ç³»ç»Ÿçš„é”™è¯¯å°±remountä¸€ä¸‹ï¼š\nadb remount\nç„¶å\nadb push ./269953fb.0 /system/etc/security/cacerts/\nè¿™æ ·å®Œæˆå°±å¯ä»¥æ­£å¸¸ç”¨fiddleræŠ“åŒ…äº†ã€‚\n å¦‚æœä½ å¤±è´¥äº†\nä½†æ˜¯å¦‚æœä½ é‡å¯çš„è¯å¯èƒ½ä¼šå‘ç°è¯ä¹¦æ— äº†ï¼Œé‚£ä½ å°±å’Œæˆ‘é‡åˆ°åŒæ ·çš„é—®é¢˜äº†ã€‚\nå¦‚æœä½ æ­¤æ—¶æ‰§è¡Œadb remountï¼Œå°±å‘ç°è¿™ä¸ªæ–‡ä»¶åˆå›æ¥äº†ğŸ˜¥ï¼Œæˆ‘çŒœæµ‹æ˜¯magisk è™šæ‹Ÿsystemæ–‡ä»¶ç³»ç»Ÿæ¯æ¬¡é‡å¯éƒ½é‡ç½®äº†ã€‚\næ®è¯´è¦å›ºå®šæ–‡ä»¶ç³»ç»Ÿæ›´æ”¹è¦ä½¿ç”¨sync å‘½ä»¤ï¼š\nadb shell sync\nä½†æ˜¯å®æµ‹æ²¡æœ‰ç”¨ï¼Œä»–å¯èƒ½æ˜¯åœ¨çœŸå®çš„æ–‡ä»¶ç³»ç»Ÿï¼ˆwithout magiskï¼‰çš„æƒ…å†µä¸‹æ‰å¥½ç”¨å§ğŸ˜¥\nä¸ç®¡æ˜¯åˆ é™¤æ–‡ä»¶è¿˜æ˜¯å¢åŠ æ–‡ä»¶ï¼Œä¼¼ä¹æ‰§è¡Œsyncæ— æ•ˆï¼Œåªè¦ä¸€é‡å¯å°±æ’¤é”€äº†ä¿®æ”¹ï¼Œè€Œremountä»¥åå°±èƒ½çœ‹åˆ°ä¿®æ”¹ï¼Œæ‰€ä»¥åˆç†çŒœæµ‹ï¼Œremountä»¥åä¿®æ”¹çš„æ–‡ä»¶æ˜¯å¦å¤–ä¸€ä¸ªåˆ†åŒºï¼Œæ¯æ¬¡remount å°±æŒ‚è½½äº†é‚£ä¸ªåˆ†åŒºï¼Œæˆ‘åŠ çš„è¯ä¹¦å°±æ˜¯æ”¾åˆ°é‚£ä¸ªåˆ†åŒºäº†ï¼Œè€Œmagiské»˜è®¤å¯åŠ¨æ—¶æŒ‚è½½çš„åˆ†åŒºä¸­æˆ‘æ²¡æœ‰åšä¿®æ”¹ã€‚\nä½†æ˜¯ä¸€é‡å¯è¯ä¹¦å°±æ²¡äº†ä¹Ÿä¸æ˜¯åŠæ³•ï¼Œæˆ‘ä»¬æ¢ä¸€ç§æ–¹å¼ï¼Œä½¿ç”¨magiskæ¨¡å—ï¼Œå¼€æœºæ—¶è‡ªåŠ¨å°†ç”¨æˆ·CAè£…è½½åˆ°System CAã€‚\n æœ€ç»ˆæ›²çº¿æ•‘å›½\nä½¿ç”¨magisk æ¨¡å—æŠŠç”¨æˆ·CAè£…è½½åˆ°system CAåˆ—è¡¨ä¸­ï¼Œå‚è€ƒï¼šå®‰å“7.0+httpsæŠ“åŒ…æ–°å§¿åŠ¿ï¼ˆæ— éœ€Rootï¼‰ å…·ä½“è¿‡ç¨‹å°±æ˜¯ï¼š\n1.å®‰è£…magiskï¼ˆæˆ‘æœ‰ï¼‰\n2.å®‰è£…æ¨¡å—ï¼šhttps://github.com/NVISO-BE/MagiskTrustUserCerts\n3.å®‰è£…fiddlerè¯ä¹¦ï¼ˆå…ˆå‰ä»¥ç”¨æˆ·æ–¹å¼å®‰è£…è¿‡äº†ï¼‰\n4.reboot\n åè®°\næˆ‘ä¸ºäº†éªŒè¯ä¸Šé¢è¯´çš„ï¼ŒMIUIå¯¹pemæ ¼å¼è¯ä¹¦å’Œcerè¯ä¹¦æ ¼å¼çš„æ”¯æŒï¼Œåˆ é™¤äº†æ‰€æœ‰é…ç½®é‡æ–°åšäº†ä¸€éï¼ŒæŠŠè‡ªå·±æå´©äº†ï¼Œç°åœ¨åªè¦ä¸€remountå°±ç–¯ç‹‚å¡æ­»ï¼ŒæŠ¥é”™ã€‚disable-verifyä¹Ÿæ²¡ç”¨ï¼Œæˆ‘çŒœæ˜¯æˆ‘æŠŠremountçš„é‚£ä¸ªsystemåˆ†åŒºæåäº†éªŒè¯å‡ºé—®é¢˜äº†ï¼ˆä½†æ˜¯æˆ‘é™¤äº†æ·»åŠ åˆ é™¤è¯ä¹¦ä¹Ÿæ²¡åšåˆ«çš„å‘€555ï¼‰ï¼Œéš¾é“ä»¥åéƒ½ä¸èƒ½remountä¿®æ”¹åˆ†åŒºäº†å—ï¼Œæˆ‘ç°åœ¨æ„Ÿè§‰è€¶ç¨£éƒ½æ•‘ä¸äº†æˆ‘ğŸ˜¥ğŸ˜¥ğŸ˜¥ã€‚\nå…ˆè¿™æ ·å§ï¼Œé magiskæ¨¡å—ï¼Œå…ˆç”¨ç€ã€‚\n æ›´æ–°-HttpCanary\nHttpCanary æ˜¯ä¸€æ¬¾ä¸é”™çš„ Android æ‰‹æœºç«¯æŠ“åŒ…è½¯ä»¶ï¼Œç›¸æ¯” Packet Capture è€Œè¨€è§†å›¾æ›´åŠ å‹å¥½ï¼Œæ›´åŠ æ–¹ä¾¿å¤åˆ¶æ•°æ®ï¼Œçª—å£æ¨¡å¼æŠ“åŒ…ï¼Œè¿˜å¯ä»¥ json æ ¼å¼åŒ–ã€å®ç°æ³¨å…¥æ‹¦æˆªç­‰æ“ä½œã€‚å¦‚æœæ—  root åˆ™éœ€è¦å®‰è£…å¹³è¡Œç©ºé—´æ¥æŠ“å– SSL/TLS åŠ å¯†æ•°æ®åŒ…ã€‚\nç›®å‰ Android 11 æ”¶ç´§äº† APP å®‰è£… CA è¯ä¹¦çš„æƒé™ï¼Œåªèƒ½ç”¨æˆ·æ‰‹åŠ¨å®‰è£…ã€‚è€Œ HttpCanary å·²ç»å¾ˆé•¿ä¸€æ®µæ—¶é—´æ²¡æœ‰æ›´æ–°äº†ï¼Œå¯¼è‡´ Android 11 ä¸Šé¢æ— æ³•æ­£å¸¸å®‰è£…è¯ä¹¦æŠ“åŒ…ã€‚\nä¸‹é¢æˆ‘ä»¬æ¥è§£å†³è¯ä¹¦å®‰è£…é—®é¢˜ï¼Œå®ç° Android 11 ä¸‹ HttpCanary çš„æ­£å¸¸ä½¿ç”¨ã€‚\nå…·ä½“çš„åˆ†æè¿‡ç¨‹å¯ä»¥å‚è€ƒï¼šhttps://www.52pojie.cn/thread-1367926-1-1.html\nå…·ä½“æ¥è¯´HttpCanary é‡å†™äº† onActivityResult()ï¼Œé€šè¿‡è‡ªåŠ¨å®‰è£…è¿”å›çš„ resultCode åˆ¤æ–­äº†è¯ä¹¦æ˜¯å¦å®‰è£…ï¼Œå¦‚æœå®‰è£…æˆåŠŸä¾¿ä¼šåœ¨ cache ç›®å½•ä¸‹å†™å…¥ä¸€ä¸ªæ— å†…å®¹çš„ .jksã€‚å®‰è£…å¤±è´¥å°±æ— æ“ä½œã€‚è€Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯å®ƒåˆ¤æ–­æ˜¯å¦å®‰è£…äº†è¯ä¹¦ã€‚å› æ­¤ï¼ŒAndroid 11 ä¸Šä¸èƒ½è‡ªåŠ¨å®‰è£…è¯ä¹¦ï¼Œå°±æ²¡æœ‰ .jks æ–‡ä»¶ï¼Œé‚£ä¹ˆåº”ç”¨ä¹Ÿå°±æ— æ³•è¯†åˆ«å®‰è£…äº†è¯ä¹¦ï¼Œå³ä½¿ä½ æ—©å·²æ‰‹åŠ¨å®‰è£…ã€‚\n è·å–è¯ä¹¦\nè¾ƒæ–°çš„ç‰ˆæœ¬æœªå®‰è£…è¯ä¹¦æ˜¯æ— æ³•å¯¼å‡ºè¯ä¹¦çš„ï¼Œæ‰€ä»¥éœ€è¦åœ¨ /data/data/com.guoshi.httpcanary/cache/ ç›®å½•ä¸‹æ‰¾åˆ° HttpCanary.pemï¼Œå°† HttpCanary.pem å¤åˆ¶åˆ°å†…éƒ¨å‚¨å­˜ç©ºé—´ä¸Šï¼ŒæŒ‰ç…§ä¸Šè¿°æ–¹æ³•æ›´åè¯ä¹¦æ–‡ä»¶ï¼š\nopenssl x509 -subject_hash_old -in HttpCanary.pem -noout\n å®‰è£…è¯ä¹¦\nå®‰è£…ä¸ºç³»ç»Ÿè¯ä¹¦ï¼šå°†è¯ä¹¦ç§»åˆ° /system/etc/security/cacerts/ ç›®å½•ä¸‹è®¾ç½®å¥½æƒé™ï¼Œæˆ–è€…è‡ªå·±å¼„ä¸€ä¸ª Magisk æ¨¡å—æ›¿æ¢ã€‚è¿™ä¸ª Magisk æ¨¡å—ä¸éš¾ï¼Œå°±æ˜¯æ¨¡æ¿å‹ç¼©åŒ…é‡Œæ·»åŠ ä¸€ä¸ªæ–‡ä»¶è€Œå·²ã€‚\n ä¿®æ”¹æ•°æ®\nåœ¨ /data/data/com.guoshi.httpcanary/cache/ ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª HttpCanary.jks æ— å†…å®¹çš„æ–‡ä»¶ï¼Œæ”¹å¥½æƒé™ 600ï¼Œå°±æ˜¯æ”¹å¾—è·Ÿæ—è¾¹çš„æ–‡ä»¶ä¸€æ ·çš„æƒé™å°±è¡Œäº†ã€‚\n å…¶ä»–æ”¹æ³•\nè¯´åˆ°åº•ï¼Œå°±æ˜¯å®‰è£…è¯ä¹¦åéœ€è¦åˆ›å»º .jks æ–‡ä»¶æ¥ä½¿å¾— APP è¯†åˆ«ä¸ºå·²å®‰è£…è¯ä¹¦ã€‚è‡³äºå®‰è£…ä¸ºç³»ç»Ÿè¯ä¹¦éƒ½å¯ä»¥è‡ªè¡Œå®‰è£…ã€‚æ¯”å¦‚é€šè¿‡æ‰‹æœºè®¾ç½®é‡Œçš„å®‰è£…è¯ä¹¦å®‰è£…ä¸ºç”¨æˆ·è¯ä¹¦ï¼Œå†åœ¨ Magisk åº“é‡Œæœç´¢å®‰è£… Move Certificates æ¨¡å—å°†ç”¨æˆ·è¯ä¹¦è¿ç§»ä¸ºç³»ç»Ÿè¯ä¹¦ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚\nå‚è€ƒæ–‡ç« éƒ½ä¸é”™ï¼š\n\nFiddleræŠ“åŒ…ï¼ˆAndroid appï¼‰ ç¬¬äº”èŠ‚å¼€å§‹è®²äº†ä¸€äº›Fiddlerçš„ä½¿ç”¨æ–¹æ³•ï¼Œå€¼å¾—ä¸€çœ‹\néƒ¨åˆ†APPæ— æ³•ä»£ç†æŠ“åŒ…çš„åŸå› åŠè§£å†³æ–¹æ³•ï¼ˆflutter æŠ“åŒ…ï¼‰ è®²äº†ä»£ç†æŠ“HTTPSæµé‡çš„åŸç†ï¼Œå€¼å¾—ä¸€çœ‹\n\n","categories":["å¤‡å¿˜"],"tags":["Android","æµé‡æŠ“åŒ…","æ•™ç¨‹","Fiddler"]},{"title":"åŒºå—é“¾æŠ€æœ¯åŸç†ç¬”è®°","url":"https://ch3nye.top/åŒºå—é“¾æŠ€æœ¯åŸç†ç¬”è®°/","content":" ox0 å‰è¨€\n2008å¹´10æœˆ31æ—¥ï¼Œä¸€ä¸ªåä¸ºSatoshi Nakamoto ï¼ˆä¸­æœ¬èªï¼‰çš„ID åœ¨cypherpunk è®ºå›å‘å¸ƒäº†ä¸€ç¯‡åä¸ºã€ŠBitcoin: A Peer-to-Peer Electronic Cash Systemã€‹çš„æ–‡ç« ï¼Œç°åœ¨æ­¤æ–‡è¢«çœ‹ä½œæ¯”ç‰¹å¸çš„ç™½çš®ä¹¦ï¼Œæ–‡ä¸­æå‡ºäº†&quot;åŒºå—é“¾&quot;çš„æ¦‚å¿µã€‚éšååœ¨2008å¹´11æœˆï¼Œä¸­æœ¬èªå‘å¸ƒäº†æ¯”ç‰¹å¸çš„ç¬¬ä¸€ç‰ˆä»£ç ã€‚2009å¹´1æœˆï¼Œä¸­æœ¬èªæŒ–å‡ºäº†æ¯”ç‰¹å¸çš„ç¬¬ä¸€ä¸ªåŒºå—â€”â€”åˆ›ä¸–åŒºå—ï¼Œæ¯”ç‰¹å¸ç½‘ç»œæ­£å¼å¼€å§‹è¿è¡Œã€‚\nç°åœ¨æˆ‘ä»¬çŸ¥é“è¿™ä¸ªå«åšä¸­æœ¬èªçš„ç¥ç§˜äººï¼Œå‡­å€Ÿè¿™ç¯‡æ–‡ç« åˆ›é€ äº†ä¸‡äº¿äººæ°‘å¸çš„æ¯”ç‰¹å¸å¸‚åœºã€‚\n\n2010å¹´12æœˆ12 æ—¥ï¼Œä¸­æœ¬èªåœ¨æ¯”ç‰¹å¸è®ºå›ä¸­å‘è¡¨äº†æœ€åä¸€ç¯‡æ–‡ç« ï¼Œéšåä¾¿ä¸å†å…¬å¼€éœ²é¢ï¼Œåªé€šè¿‡ç”µå­é‚®ä»¶ä¸æ¯”ç‰¹å¸æ ¸å¿ƒå¼€å‘å›¢é˜Ÿçš„å°‘æ•°äººè”ç³»ã€‚2011å¹´4æœˆ26æ—¥ï¼Œåœ¨ä¸æ¯”ç‰¹å¸æ ¸å¿ƒå¼€å‘å›¢é˜Ÿé¢†å¯¼äººåŠ æ–‡Â·å®‰å¾·çƒˆæ£®è”ç³»è¿‡åï¼Œä¸­æœ¬èªéšå³å…³é—­äº†ç”µå­é‚®ä»¶ï¼Œå†ä¹Ÿæ²¡æœ‰ä¸ä»»ä½•äººæ¥å¾€è¿‡ã€‚ä¸­æœ¬èªååˆ†ä½è°ƒï¼Œåœ¨ç½‘ç»œä¸Šå¯ä»¥è¿½æº¯çš„è¡Œè¸ªå¾ˆå°‘ï¼Œä»–ä¸ä»»ä½•äººäº¤æµåšæŒä½¿ç”¨PGPåŠ å¯†å’ŒTorç½‘ç»œï¼Œè€Œä¸”ä»–åœ¨è®ºå›ä¸­çš„å‘è¨€æ—¶é—´å’Œè¯´è¯æ–¹å¼ä¹Ÿåœ¨åˆ»æ„éšç’è‡ªå·±çš„æ—¶åŒºï¼Œä¼ªè£…è‡ªå·±çš„è¡¨è¾¾ä¹ æƒ¯ã€‚ç”±äºä»–çš„ä»£ç é€»è¾‘ååˆ†ç²¾å·§ï¼Œè®¾è®¡åŒºå—é“¾çš„å…·ä½“æ•°å­¦ç»†èŠ‚ä¹Ÿååˆ†å·§å¦™ï¼Œæ‰€ä»¥æœ‰äººæ€€ç–‘ä¸­æœ¬èªæ˜¯ä¸€ä¸ªç»„ç»‡å…¬ç”¨çš„IDã€‚ä½†æ˜¯ï¼Œæ—¶è‡³ä»Šæ—¥ä¹Ÿä»æ²¡æœ‰ç¡®åˆ‡çš„è¯æ®è¯æ˜æŸäººæˆ–æŸç»„ç»‡å°±æ˜¯ä¸­æœ¬èªã€‚\nå…³äºç¥ç§˜äººä¸­æœ¬èªçš„æ•…äº‹å°±ä¸è¿‡å¤šå™è¿°äº†ï¼Œæœ¬æ–‡ä¸»è¦è®°è¿°åŒºå—é“¾çš„æŠ€æœ¯åŸç†ï¼Œæ¶‰åŠçš„è¦ç‚¹æœ‰ï¼š\n\nåŒºå—é“¾çš„æŠ€æœ¯åŸç†\np2päº¤æ˜“åŸç†\næ¯”ç‰¹å¸æŒ–çŸ¿\nHDé’±åŒ…ï¼Ÿ\n\næœ¬æ–‡æ˜¯æˆ‘åœ¨äº†è§£åŒºå—é“¾æŠ€æœ¯è¿‡ç¨‹ä¸­çš„å­¦ä¹ ç¬”è®°ï¼Œå¦‚æœä½ ä¹Ÿå¸Œæœ›äº†è§£å…¶ä¸­çš„æŠ€æœ¯åŸç†ï¼Œæœ¬æ–‡ä¹Ÿè®¸ä¼šå¯¹ä½ æœ‰å¸®åŠ©ã€‚æœ¬æ–‡ç»“åˆæ¯”ç‰¹å¸è®²è§£åŒºå—é“¾æŠ€æœ¯çš„åŸç†å’Œåº”ç”¨æ–¹æ³•ï¼Œæ¯”ç‰¹å¸åªæ˜¯åŒºå—é“¾æŠ€æœ¯çš„åº”ç”¨ä¹‹ä¸€ï¼Œæ–‡ä¸­è®¨è®ºçš„å…·ä½“æ–¹æ³•ä¹Ÿæ¯”è¾ƒåŸå§‹ï¼Œä½†å°±ç®€å•ç†è§£åŒºå—é“¾æŠ€æœ¯æ¥è¯´è¶³ä»¥ã€‚\nä¸»è¦æ‘˜å½•æ•´ç†å»–é›ªå³°è€å¸ˆçš„æ–‡ç« ï¼Œæ‰€æœ‰å‚è€ƒæ–‡ç« é™„åœ¨æ–‡æœ«ã€‚ä»£ç ä»¥å»–é›ªå³°è€å¸ˆç»™å‡ºçš„javascript ä»£ç ä¸ºä¾‹ï¼Œæ¯ä¸ªä»£ç å—ä¸‹æ–¹ä»¥å¼•ç”¨çš„æ ¼å¼ç»™å‡ºè¿è¡Œç»“æœã€‚\n 0x1 åŒºå—é“¾åŸç†\nåŒºå—é“¾å°±æ˜¯ä¸€ä¸ªä¸æ–­å¢é•¿çš„å…¨ç½‘æ€»è´¦æœ¬ï¼ŒåŒºå—é“¾ç½‘ç»œä¸­çš„æ¯ä¸ªå®Œå…¨èŠ‚ç‚¹éƒ½æ‹¥æœ‰å®Œæ•´çš„åŒºå—é“¾ï¼Œå¹¶ä¸”ï¼ŒèŠ‚ç‚¹æ€»æ˜¯ä¿¡ä»»æœ€é•¿çš„åŒºå—é“¾ï¼Œä¼ªé€ åŒºå—é“¾éœ€è¦æ‹¥æœ‰è¶…è¿‡51%çš„å…¨ç½‘ç®—åŠ›ã€‚åé¢ä¼šè§£é‡Šä¸ºä»€ä¹ˆè¶…è¿‡51%çš„å…¨ç½‘ç®—åŠ›å°±å¯ä»¥è‚†æ„å¦„ä¸ºã€‚\nåŒºå—é“¾çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§å°±æ˜¯ä¸å¯ç¯¡æ”¹ã€‚ä¸ºä»€ä¹ˆåŒºå—é“¾ä¸å¯ç¯¡æ”¹ï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹åŒºå—é“¾çš„ç»“æ„ã€‚\nåŒºå—é“¾æ˜¯ç”±ä¸€ä¸ªä¸€ä¸ªåŒºå—æ„æˆçš„æœ‰åºé“¾è¡¨ï¼Œæ¯ä¸€ä¸ªåŒºå—éƒ½è®°å½•äº†ä¸€ç³»åˆ—äº¤æ˜“ï¼ˆç°åœ¨ä¸€ä¸ªæ¯”ç‰¹å¸åŒºå—çº¦è®°å½•2000~3000ç¬”äº¤æ˜“ï¼‰ï¼Œå¹¶ä¸”ï¼Œæ¯ä¸ªåŒºå—éƒ½æŒ‡å‘å‰ä¸€ä¸ªåŒºå—ï¼Œä»è€Œå½¢æˆä¸€ä¸ªé“¾æ¡ï¼š\n\nå¦‚æœæˆ‘ä»¬è§‚å¯ŸæŸä¸€ä¸ªåŒºå—ï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªåŒºå—éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„å“ˆå¸Œæ ‡è¯†ï¼Œè¢«ç§°ä¸ºåŒºå—å“ˆå¸Œï¼ˆä¸‹å›¾ä¸­çˆ¶åŒºå—å“ˆå¸Œï¼‰ï¼ŒåŒæ—¶ï¼ŒåŒºå—é€šè¿‡è®°å½•ä¸Šä¸€ä¸ªåŒºå—çš„å“ˆå¸Œæ¥æŒ‡å‘ä¸Šä¸€ä¸ªåŒºå—ï¼š\n\næ¯ä¸€ä¸ªåŒºå—è¿˜æœ‰ä¸€ä¸ªMerkleå“ˆå¸Œç”¨æ¥ç¡®ä¿è¯¥åŒºå—çš„æ‰€æœ‰äº¤æ˜“è®°å½•æ— æ³•è¢«ç¯¡æ”¹ã€‚\nåŒºå—é“¾ä¸­çš„ä¸»è¦æ•°æ®å°±æ˜¯ä¸€ç³»åˆ—äº¤æ˜“ï¼Œç¬¬ä¸€æ¡äº¤æ˜“é€šå¸¸æ˜¯Coinbaseäº¤æ˜“ï¼Œä¹Ÿå°±æ˜¯çŸ¿å·¥çš„æŒ–çŸ¿å¥–åŠ±ï¼Œåç»­äº¤æ˜“éƒ½æ˜¯ç”¨æˆ·çš„äº¤æ˜“ã€‚\n ä¸å¯ç¯¡æ”¹æ€§\nåŒºå—é“¾çš„ä¸å¯ç¯¡æ”¹ç‰¹æ€§æ˜¯ç”±å“ˆå¸Œç®—æ³•ä¿è¯çš„ã€‚\nå¸¸ç”¨çš„å“ˆå¸Œç®—æ³•ä»¥åŠå®ƒä»¬çš„è¾“å‡ºé•¿åº¦å¦‚ä¸‹ï¼š\n\n\n\nå“ˆå¸Œç®—æ³•\nè¾“å‡ºé•¿åº¦(bit)\nè¾“å‡ºé•¿åº¦(å­—èŠ‚)\n\n\n\n\nMD5\n128 bit\n16 bytes\n\n\nRipeMD160\n160 bits\n20 bytes\n\n\nSHA-1\n160 bits\n20 bytes\n\n\nSHA-256\n256 bits\n32 bytes\n\n\nSHA-512\n512 bits\n64 bytes\n\n\n\næ¯”ç‰¹å¸ä½¿ç”¨çš„å“ˆå¸Œç®—æ³•æœ‰ä¸¤ç§ï¼šSHA-256å’ŒRipeMD160\nSHA-256çš„ç†è®ºç¢°æ’æ¦‚ç‡æ˜¯ï¼šå°è¯• 21302^{130}2130 æ¬¡éšæœºè¾“å…¥ï¼Œæœ‰99.8%çš„æ¦‚ç‡ç¢°æ’ã€‚æ³¨æ„ 21302^{130}2130 æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æ•°å­—ï¼Œå¤§çº¦æ˜¯1361ä¸‡äº¿äº¿äº¿äº¿ã€‚ä»¥ç°æœ‰çš„è®¡ç®—æœºçš„è®¡ç®—èƒ½åŠ›ï¼Œæ˜¯ä¸å¯èƒ½åœ¨çŸ­æœŸå†…ç ´è§£çš„ã€‚\næ¯”ç‰¹å¸ä½¿ç”¨ä¸¤ç§å“ˆå¸Œç®—æ³•ï¼Œä¸€ç§æ˜¯å¯¹æ•°æ®è¿›è¡Œä¸¤æ¬¡SHA-256è®¡ç®—ï¼Œè¿™ç§ç®—æ³•åœ¨æ¯”ç‰¹å¸åè®®ä¸­é€šå¸¸è¢«ç§°ä¸ºhash256æˆ–è€…dhashã€‚\nå¦ä¸€ç§ç®—æ³•æ˜¯å…ˆè®¡ç®—SHA-256ï¼Œå†è®¡ç®—RipeMD160ï¼Œè¿™ç§ç®—æ³•åœ¨æ¯”ç‰¹å¸åè®®ä¸­é€šå¸¸è¢«ç§°ä¸ºhash160ã€‚\nconst\n    bitcoin = require('bitcoinjs-lib'),\n    createHash = require('create-hash');\n\nfunction standardHash(name, data) &#123;\n    let h = createHash(name);\n    return h.update(data).digest();\n&#125;\n\nfunction hash160(data) &#123;\n    let h1 = standardHash('sha256', data);\n    let h2 = standardHash('ripemd160', h1);\n    return h2;\n&#125;\n\nfunction hash256(data) &#123;\n    let h1 = standardHash('sha256', data);\n    let h2 = standardHash('sha256', h1);\n    return h2;\n&#125;\n\nlet s = 'bitcoin is awesome';\nconsole.log('ripemd160 = ' + standardHash('ripemd160', s).toString('hex'));\nconsole.log('  hash160 = ' + hash160(s).toString('hex'));\nconsole.log('   sha256 = ' + standardHash('sha256', s).toString('hex'));\nconsole.log('  hash256 = ' + hash256(s).toString('hex'));\n\nripemd160 = 46c047bd035afb64dad2293cba29994a95b8b216\nhash160 = fe56649aa4f8fdb1edf6b88d2d41f3c1f72cf431\nsha256 = 23d4a09295be678b21a5f1dceae1f634a69c1b41775f680ebf8165266471401b\nhash256 = 1c78f53758ac96f43b99ed080f36327d2a823c4df4fa094e59b006d945bbb84d\n\nè¿è¡Œä¸Šè¿°ä»£ç ï¼Œè§‚å¯Ÿå¯¹ä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡ŒSHA-256ã€RipeMD160ã€hash256å’Œhash160çš„ç»“æœ\n Merkle Hash\nåœ¨åŒºå—çš„å¤´éƒ¨ï¼Œæœ‰ä¸€ä¸ªMerkle Hashå­—æ®µï¼Œå®ƒè®°å½•äº†æœ¬åŒºå—æ‰€æœ‰äº¤æ˜“çš„Merkle Hashï¼š\n\næ³¨æ„åˆ°å“ˆå¸Œå€¼ä¹Ÿå¯ä»¥çœ‹åšæ•°æ®ï¼Œæ‰€ä»¥å¯ä»¥æŠŠa1å’Œa2æ‹¼èµ·æ¥ï¼Œa3å’Œa4æ‹¼èµ·æ¥ï¼Œå†è®¡ç®—å‡ºä¸¤ä¸ªå“ˆå¸Œå€¼b1å’Œb2ï¼š\n       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n       â”‚b1&#x3D;dhash(a1+a2)â”‚               â”‚b2&#x3D;dhash(a3+a4)â”‚\n       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n               â–²                               â–²\n       â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”\n       â”‚               â”‚               â”‚               â”‚\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚a1&#x3D;dhash(tx1)â”‚ â”‚a2&#x3D;dhash(tx2)â”‚ â”‚a3&#x3D;dhash(tx3)â”‚ â”‚a4&#x3D;dhash(tx4)â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\næœ€åï¼ŒæŠŠb1å’Œb2è¿™ä¸¤ä¸ªå“ˆå¸Œå€¼æ‹¼èµ·æ¥ï¼Œè®¡ç®—å‡ºæœ€ç»ˆçš„å“ˆå¸Œå€¼ï¼Œè¿™ä¸ªå“ˆå¸Œå°±æ˜¯Merkle Hashï¼š\n                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                     â”‚merkle&#x3D;dhash(b1+b2)â”‚\n                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                               â–²\n               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n               â”‚                               â”‚\n       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n       â”‚b1&#x3D;dhash(a1+a2)â”‚               â”‚b2&#x3D;dhash(a3+a4)â”‚\n       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n               â–²                               â–²\n       â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”\n       â”‚               â”‚               â”‚               â”‚\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚a1&#x3D;dhash(tx1)â”‚ â”‚a2&#x3D;dhash(tx2)â”‚ â”‚a3&#x3D;dhash(tx3)â”‚ â”‚a4&#x3D;dhash(tx4)â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\nå¦‚æœäº¤æ˜“çš„æ•°é‡ä¸æ°å¥½æ˜¯4ä¸ªæ€ä¹ˆåŠï¼Ÿä¾‹å¦‚ï¼Œåªæœ‰3ä¸ªäº¤æ˜“æ—¶ï¼Œç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªäº¤æ˜“çš„å“ˆå¸Œa1å’Œa2å¯ä»¥æ‹¼èµ·æ¥ç®—å‡ºb1ï¼Œç¬¬ä¸‰ä¸ªäº¤æ˜“åªèƒ½ç®—å‡ºä¸€ä¸ªå“ˆå¸Œa3ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±æŠŠa3ç›´æ¥å¤åˆ¶ä¸€ä»½ï¼Œç®—å‡ºb2ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½æœ€ç»ˆè®¡ç®—å‡ºMerkle Hashï¼š\n                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                     â”‚merkle&#x3D;dhash(b1+b2)â”‚\n                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                               â–²\n               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n               â”‚                               â”‚\n       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n       â”‚b1&#x3D;dhash(a1+a2)â”‚               â”‚b2&#x3D;dhash(a3+a3)â”‚\n       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n               â–²                               â–²\n       â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”\n       â”‚               â”‚               â”‚               â”‚\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œ â”€ â”€ â”€ â”€ â”€ â”€ â”\nâ”‚a1&#x3D;dhash(tx1)â”‚ â”‚a2&#x3D;dhash(tx2)â”‚ â”‚a3&#x3D;dhash(tx3)â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”” â”€ â”€ â”€ â”€ â”€ â”€ â”˜\nå¦‚æœæœ‰5ä¸ªäº¤æ˜“ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œa5è¢«å¤åˆ¶äº†ä¸€ä»½ï¼Œä»¥ä¾¿è®¡ç®—å‡ºb3ï¼Œéšåb3ä¹Ÿè¢«å¤åˆ¶äº†ä¸€ä»½ï¼Œä»¥ä¾¿è®¡ç®—å‡ºc2ã€‚æ€»ä¹‹ï¼Œåœ¨æ¯ä¸€å±‚è®¡ç®—ä¸­ï¼Œå¦‚æœæœ‰å•æ•°ï¼Œå°±æŠŠæœ€åä¸€ä»½æ•°æ®å¤åˆ¶ï¼Œæœ€åä¸€å®šèƒ½è®¡ç®—å‡ºMerkle Hashï¼š\n                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                  â”‚ merkle  â”‚\n                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                       â–²\n           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n           â”‚                       â”‚\n         â”Œâ”€â”€â”€â”                   â”Œâ”€â”€â”€â”\n         â”‚c1 â”‚                   â”‚c2 â”‚\n         â””â”€â”€â”€â”˜                   â””â”€â”€â”€â”˜\n           â–²                       â–²\n     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”\n     â”‚           â”‚           â”‚           â”‚\n   â”Œâ”€â”€â”€â”       â”Œâ”€â”€â”€â”       â”Œâ”€â”€â”€â”       â”Œ â”€ â”\n   â”‚b1 â”‚       â”‚b2 â”‚       â”‚b3 â”‚        b3\n   â””â”€â”€â”€â”˜       â””â”€â”€â”€â”˜       â””â”€â”€â”€â”˜       â”” â”€ â”˜\n     â–²           â–²           â–²\n  â”Œâ”€â”€â”´â”€â”€â”     â”Œâ”€â”€â”´â”€â”€â”     â”Œâ”€â”€â”´â”€â”€â”\n  â”‚     â”‚     â”‚     â”‚     â”‚     â”‚\nâ”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œ â”€ â”\nâ”‚a1 â”‚ â”‚a2 â”‚ â”‚a3 â”‚ â”‚a4 â”‚ â”‚a5 â”‚  a5\nâ””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â”” â”€ â”˜\nä»Merkle Hashçš„è®¡ç®—æ–¹æ³•å¯ä»¥å¾—å‡ºç»“è®ºï¼šä¿®æ”¹ä»»æ„ä¸€ä¸ªäº¤æ˜“å“ªæ€•ä¸€ä¸ªå­—èŠ‚ï¼Œæˆ–è€…äº¤æ¢ä¸¤ä¸ªäº¤æ˜“çš„é¡ºåºï¼Œéƒ½ä¼šå¯¼è‡´Merkle HashéªŒè¯å¤±è´¥ï¼Œä¹Ÿå°±ä¼šå¯¼è‡´è¿™ä¸ªåŒºå—æœ¬èº«æ˜¯æ— æ•ˆçš„ï¼Œæ‰€ä»¥ï¼ŒMerkle Hashè®°å½•åœ¨åŒºå—å¤´éƒ¨ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ä¿è¯äº¤æ˜“è®°å½•æ°¸è¿œæ— æ³•ä¿®æ”¹ã€‚\n Block Hash\nåŒºå—æœ¬èº«ç”¨Block Hashâ€”â€”ä¹Ÿå°±æ˜¯åŒºå—å“ˆå¸Œæ¥æ ‡è¯†ã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªåŒºå—è‡ªå·±çš„åŒºå—å“ˆå¸Œå¹¶æ²¡æœ‰è®°å½•åœ¨åŒºå—å¤´éƒ¨ï¼Œè€Œæ˜¯é€šè¿‡è®¡ç®—åŒºå—å¤´éƒ¨çš„å“ˆå¸Œå¾—åˆ°çš„ï¼š\n\nåŒºå—å¤´éƒ¨çš„Prev Hashè®°å½•äº†ä¸Šä¸€ä¸ªåŒºå—çš„Block Hashï¼Œè¿™æ ·ï¼Œå¯ä»¥é€šè¿‡Prev Hashè¿½è¸ªåˆ°ä¸Šä¸€ä¸ªåŒºå—ã€‚\nç”±äºä¸‹ä¸€ä¸ªåŒºå—çš„Prev Hashåˆä¼šæŒ‡å‘å½“å‰åŒºå—ï¼Œè¿™æ ·ï¼Œæ¯ä¸ªåŒºå—çš„Prev Hashéƒ½æŒ‡å‘è‡ªå·±çš„ä¸Šä¸€ä¸ªåŒºå—ï¼Œè¿™äº›åŒºå—ä¸²èµ·æ¥å°±å½¢æˆäº†åŒºå—é“¾ã€‚\nåŒºå—é“¾çš„ç¬¬ä¸€ä¸ªåŒºå—ï¼ˆåˆç§°åˆ›ä¸–åŒºå—ï¼‰å¹¶æ²¡æœ‰ä¸Šä¸€ä¸ªåŒºå—ï¼Œå› æ­¤ï¼Œå®ƒçš„Prev Hashè¢«è®¾ç½®ä¸º00000000...000ã€‚\nå¦‚æœä¸€ä¸ªæ¶æ„çš„æ”»å‡»è€…ä¿®æ”¹äº†ä¸€ä¸ªåŒºå—ä¸­çš„æŸä¸ªäº¤æ˜“ï¼Œé‚£ä¹ˆMerkle HashéªŒè¯å°±ä¸ä¼šé€šè¿‡ã€‚æ‰€ä»¥ï¼Œä»–åªèƒ½é‡æ–°è®¡ç®—Merkle Hashï¼Œç„¶åæŠŠåŒºå—å¤´çš„Merkle Hashä¹Ÿä¿®æ”¹äº†ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±ä¼šå‘ç°ï¼Œè¿™ä¸ªåŒºå—æœ¬èº«çš„Block Hashå°±å˜äº†ï¼Œæ‰€ä»¥ï¼Œä¸‹ä¸€ä¸ªåŒºå—æŒ‡å‘å®ƒçš„é“¾æ¥å°±æ–­æ‰äº†ã€‚\n\nç”±äºæ¯”ç‰¹å¸åŒºå—çš„å“ˆå¸Œå¿…é¡»æ»¡è¶³ä¸€ä¸ªéš¾åº¦å€¼ï¼Œå› æ­¤ï¼Œæ”»å‡»è€…å¿…é¡»å…ˆé‡æ–°è®¡ç®—è¿™ä¸ªåŒºå—çš„Block Hashï¼Œç„¶åï¼Œå†æŠŠåç»­æ‰€æœ‰åŒºå—å…¨éƒ¨é‡æ–°è®¡ç®—å¹¶ä¸”ä¼ªé€ å‡ºæ¥ï¼Œæ‰èƒ½å¤Ÿä¿®æ”¹æ•´ä¸ªåŒºå—é“¾ã€‚\nåœ¨åé¢çš„æŒ–çŸ¿ä¸­ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ï¼Œä¿®æ”¹ä¸€ä¸ªåŒºå—çš„æˆæœ¬å°±å·²ç»éå¸¸éå¸¸é«˜äº†ï¼Œè¦ä¿®æ”¹åç»­æ‰€æœ‰åŒºå—ï¼Œè¿™ä¸ªæ”»å‡»è€…å¿…é¡»æŒæ¡å…¨ç½‘51%ä»¥ä¸Šçš„ç®—åŠ›æ‰è¡Œï¼Œæ‰€ä»¥ï¼Œä¿®æ”¹åŒºå—é“¾çš„éš¾åº¦æ˜¯éå¸¸éå¸¸å¤§çš„ï¼Œå¹¶ä¸”ï¼Œç”±äºæ­£å¸¸çš„åŒºå—é“¾åœ¨ä¸æ–­å¢é•¿ï¼ŒåŒæ ·ä¸€ä¸ªåŒºå—ï¼Œä¿®æ”¹å®ƒçš„éš¾åº¦ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œä¸æ–­å¢åŠ ã€‚\n\n0x1 åŒºå—é“¾åŸç†æ€»ç»“ï¼š\nåŒºå—é“¾ä¾é å®‰å…¨çš„å“ˆå¸Œç®—æ³•ä¿è¯æ‰€æœ‰åŒºå—æ•°æ®ä¸å¯æ›´æ”¹ï¼›\näº¤æ˜“æ•°æ®ä¾é Merkle Hashç¡®ä¿æ— æ³•ä¿®æ”¹ï¼Œæ•´ä¸ªåŒºå—ä¾é Block Hashç¡®ä¿åŒºå—æ— æ³•ä¿®æ”¹ï¼›\nä¿è¯ä¿®æ”¹åŒºå—é“¾çš„éš¾åº¦éå¸¸å·¨å¤§çš„æœºåˆ¶ï¼šå·¥ä½œé‡è¯æ˜æœºåˆ¶ï¼ˆPoW-Proof of Work å³æŒ–çŸ¿ï¼‰åœ¨åé¢ç« èŠ‚ä»‹ç»\n\n 0x2 P2Päº¤æ˜“åŸç†\næ¯”ç‰¹å¸çš„äº¤æ˜“æ˜¯ä¸€ç§æ— éœ€ä¿¡ä»»ä¸­ä»‹å‚ä¸çš„P2Pï¼ˆPeer-to-peerï¼‰äº¤æ˜“ã€‚\nä¼ ç»Ÿçš„ç”µå­äº¤æ˜“ï¼Œäº¤æ˜“åŒæ–¹å¿…é¡»é€šè¿‡é“¶è¡Œè¿™æ ·çš„ä¿¡ä»»æœºæ„ä½œä¸ºä¸­ä»‹ï¼Œè¿™æ ·å¯ä»¥ä¿è¯äº¤æ˜“çš„å®‰å…¨æ€§ï¼Œå› ä¸ºé“¶è¡Œè®°å½•äº†äº¤æ˜“åŒæ–¹çš„è´¦æˆ·èµ„é‡‘ï¼Œèƒ½ä¿è¯åœ¨ä¸€ç¬”äº¤æ˜“ä¸­ï¼Œè¦ä¹ˆä¿è¯æˆåŠŸï¼Œè¦ä¹ˆäº¤æ˜“æ— æ•ˆï¼Œä¸å­˜åœ¨ä¸€æ–¹åˆ°è´¦è€Œå¦ä¸€æ–¹æ²¡æœ‰ä»˜æ¬¾çš„æƒ…å†µã€‚ä½†æ˜¯åœ¨æ¯”ç‰¹å¸è¿™ç§å»ä¸­å¿ƒåŒ–çš„P2Pç½‘ç»œä¸­ï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªç±»ä¼¼é“¶è¡Œè¿™æ ·çš„ä¿¡ä»»æœºæ„å­˜åœ¨ï¼Œè¦æƒ³åœ¨ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´è¾¾æˆäº¤æ˜“ï¼Œå°±å¿…é¡»å®ç°ä¸€ç§åœ¨é›¶ä¿¡ä»»çš„æƒ…å†µä¸‹å®‰å…¨äº¤æ˜“çš„æœºåˆ¶ã€‚\nä¸€ç§åˆ›å»ºäº¤æ˜“çš„æ–¹æ³•æ˜¯ï¼šå°æ˜å£°ç§°ä»–ç»™äº†å°çº¢ä¸€ä¸‡å—é’±ï¼Œåªè¦èƒ½éªŒè¯è¿™ä¸ªå£°æ˜ç¡®å®æ˜¯å°æ˜ä½œå‡ºçš„ï¼Œå¹¶ä¸”å°æ˜çœŸçš„æœ‰1ä¸‡å—é’±ï¼Œé‚£ä¹ˆè¿™ç¬”äº¤æ˜“å°±è¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆçš„ï¼š\n\n æ•°å­—ç­¾å\nå¦‚ä½•éªŒè¯è¿™ä¸ªå£°æ˜ç¡®å®æ˜¯å°æ˜ä½œå‡ºçš„å‘¢ï¼Ÿæ•°å­—ç­¾åå°±å¯ä»¥éªŒè¯è¿™ä¸ªå£°æ˜æ˜¯å¦æ˜¯å°æ˜åšçš„ï¼Œå¹¶ä¸”ï¼Œä¸€æ—¦éªŒè¯é€šè¿‡ï¼Œå°æ˜æ˜¯æ— æ³•æŠµèµ–çš„ã€‚åœ¨æ¯”ç‰¹å¸äº¤æ˜“ä¸­ï¼Œä»˜æ¬¾æ–¹å°±æ˜¯é€šè¿‡æ•°å­—ç­¾åæ¥è¯æ˜è‡ªå·±æ‹¥æœ‰æŸä¸€ç¬”æ¯”ç‰¹å¸ï¼Œå¹¶ä¸”ï¼Œè¦æŠŠè¿™ç¬”æ¯”ç‰¹å¸è½¬ç§»ç»™æŒ‡å®šçš„æ”¶æ¬¾æ–¹ã€‚ä½¿ç”¨ç­¾åæ˜¯ä¸ºäº†éªŒè¯æŸä¸ªå£°æ˜ç¡®å®æ˜¯ç”±æŸä¸ªäººåšå‡ºçš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ä»˜æ¬¾åˆåŒä¸­ç­¾åï¼Œå¯ä»¥é€šè¿‡éªŒè¯ç¬”è¿¹çš„æ–¹å¼æ ¸å¯¹èº«ä»½ï¼š\n\nè€Œåœ¨è®¡ç®—æœºä¸­ï¼Œç”¨å¯†ç å­¦ç†è®ºè®¾è®¡çš„æ•°å­—ç­¾åç®—æ³•æ¯”éªŒè¯ç¬”è¿¹æ›´åŠ å¯ä¿¡ã€‚ä½¿ç”¨æ•°å­—ç­¾åæ—¶ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥è‡ªå·±ç”Ÿæˆä¸€ä¸ªç§˜é’¥å¯¹ï¼Œè¿™ä¸ªç§˜é’¥å¯¹åŒ…å«ä¸€ä¸ªç§é’¥å’Œä¸€ä¸ªå…¬é’¥ï¼šç§é’¥è¢«ç§°ä¸ºSecret Keyæˆ–è€…Private Keyï¼Œç§é’¥å¿…é¡»ä¸¥æ ¼ä¿å¯†ï¼Œä¸èƒ½æ³„æ¼ç»™å…¶ä»–äººï¼›å…¬é’¥è¢«ç§°ä¸ºPublic Keyï¼Œå¯ä»¥å…¬å¼€ç»™ä»»ä½•äººã€‚è¿™ç§ä½¿ç”¨ä¸€å¯¹å…¬ç§å¯†é’¥è¿›è¡ŒåŠ å¯†è§£å¯†çš„æ–¹æ³•å°±æ˜¯éå¯¹ç§°åŠ å¯†ï¼Œæ—©å·²ç»æ™®éåº”ç”¨äºç°å®ä¸–ç•Œä¸­ï¼Œå¦‚æœå…·å¤‡éå¯¹ç§°åŠ å¯†çš„åŸºç¡€çŸ¥è¯†ç†è§£åé¢çš„å†…å®¹ä¼šç›¸å½“å®¹æ˜“ï¼Œæ¨èéå¯¹ç§°åŠ å¯†ç®—æ³•RSAåŸç†ä¸€ã€RSAåŸç†äºŒã€‚\nå½“ç§é’¥æŒæœ‰äººï¼Œä¾‹å¦‚ï¼Œå°æ˜å¸Œæœ›å¯¹æŸä¸ªæ¶ˆæ¯ç­¾åçš„æ—¶å€™ï¼Œä»–å¯ä»¥ç”¨è‡ªå·±çš„ç§é’¥å¯¹æ¶ˆæ¯è¿›è¡Œç­¾åï¼Œç„¶åï¼ŒæŠŠæ¶ˆæ¯ã€ç­¾åå’Œè‡ªå·±çš„å…¬é’¥å‘é€å‡ºå»ï¼š\n\nå…¶ä»–ä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡å°æ˜çš„å…¬é’¥å¯¹è¿™ä¸ªç­¾åè¿›è¡ŒéªŒè¯ï¼Œå¦‚æœéªŒè¯é€šè¿‡ï¼Œå¯ä»¥è‚¯å®šï¼Œè¯¥æ¶ˆæ¯æ˜¯å°æ˜å‘å‡ºçš„ã€‚è¿™é‡Œçš„ç­¾åå’ŒéªŒè¯å°±æ˜¯æŒ‡éå¯¹ç§°åŠ å¯†ä¸­çš„åŠ å¯†å’Œè§£å¯†è¿‡ç¨‹ã€‚\n\nè¿™é‡Œè¦è§£é‡Šä¸€ä¸‹éå¯¹ç§°åŠ å¯†åº”ç”¨çš„æ—¶å€™å…¬é’¥å’Œç§é’¥åˆ°åº•è°è´Ÿè´£åŠ å¯†è°è´Ÿè´£è§£å¯†ï¼Ÿ\nç¬¬ä¸€ç§ç”¨æ³•ï¼šå…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ã€‚â€”â€”ç”¨äºåŠ è§£å¯†\nç¬¬äºŒç§ç”¨æ³•ï¼šç§é’¥ç­¾åï¼Œå…¬é’¥éªŒç­¾ã€‚â€”â€”ç”¨äºç­¾å\næœ‰ç‚¹æ··ä¹±ï¼Œä¸è¦å»ç¡¬è®°ï¼Œæ€»ç»“ä¸€ä¸‹:\nä½ åªè¦æƒ³ï¼š\næ—¢ç„¶æ˜¯åŠ å¯†ï¼Œé‚£è‚¯å®šæ˜¯ä¸å¸Œæœ›åˆ«äººçŸ¥é“æˆ‘çš„æ¶ˆæ¯ï¼Œæ‰€ä»¥åªæœ‰æˆ‘æ‰èƒ½è§£å¯†ï¼Œæ‰€ä»¥å¯å¾—å‡ºå…¬é’¥è´Ÿè´£åŠ å¯†ï¼Œç§é’¥è´Ÿè´£è§£å¯†ï¼›\næ—¢ç„¶æ˜¯ç­¾åï¼Œé‚£è‚¯å®šæ˜¯ä¸å¸Œæœ›æœ‰äººå†’å……æˆ‘å‘æ¶ˆæ¯ï¼Œåªæœ‰æˆ‘æ‰èƒ½å‘å¸ƒè¿™ä¸ªç­¾åï¼Œæ‰€ä»¥å¯å¾—å‡ºç§é’¥è´Ÿè´£ç­¾åï¼Œå…¬é’¥è´Ÿè´£éªŒè¯ã€‚\nref:https://blog.csdn.net/qq_23167527/article/details/80614454\n\næ•°å­—ç­¾åç®—æ³•åœ¨ç”µå­å•†åŠ¡ã€åœ¨çº¿æ”¯ä»˜è¿™äº›é¢†åŸŸæœ‰éå¸¸é‡è¦çš„ä½œç”¨ï¼š\né¦–å…ˆï¼Œç­¾åä¸å¯ä¼ªé€ ï¼Œå› ä¸ºç§é’¥åªæœ‰ç­¾åäººè‡ªå·±çŸ¥é“ï¼Œæ‰€ä»¥å…¶ä»–äººæ— æ³•ä¼ªé€ ç­¾åã€‚\nå…¶æ¬¡ï¼Œæ¶ˆæ¯ä¸å¯ç¯¡æ”¹ï¼Œå¦‚æœåŸå§‹æ¶ˆæ¯è¢«äººç¯¡æ”¹äº†ï¼Œé‚£ä¹ˆå¯¹ç­¾åè¿›è¡ŒéªŒè¯å°†å¤±è´¥ã€‚\næœ€åï¼Œç­¾åä¸å¯æŠµèµ–ã€‚å¦‚æœå¯¹ç­¾åè¿›è¡ŒéªŒè¯é€šè¿‡äº†ï¼Œé‚£ä¹ˆï¼Œè¯¥æ¶ˆæ¯è‚¯å®šæ˜¯ç”±ç­¾åäººè‡ªå·±å‘å‡ºçš„ï¼Œä»–ä¸èƒ½æŠµèµ–è‡ªå·±æ›¾ç»å‘è¿‡è¿™ä¸€æ¡æ¶ˆæ¯ã€‚\n\nç®€å•åœ°è¯´æ¥ï¼Œæ•°å­—ç­¾åçš„ä¸‰ä¸ªä½œç”¨ï¼šé˜²ä¼ªé€ ï¼Œé˜²ç¯¡æ”¹ï¼Œé˜²æŠµèµ–ã€‚\n\n ç­¾åå’ŒéªŒè¯è¿‡ç¨‹\nä¸Šé¢æˆ‘ä»¬è¯´äº†åœ¨p2pç½‘ç»œä¸­æ•°å­—ç­¾åçš„å¤§è‡´å®šä¹‰ã€ä½œç”¨å’Œæ•ˆæœï¼Œæˆ‘ä»¬æ¥ç¨å¾®å…·ä½“è®²ä¸€ä¸‹åŒºå—é“¾æ•°å­—ç­¾åçš„ç­¾åè¿‡ç¨‹å’ŒéªŒè¯è¿‡ç¨‹ï¼š\nç­¾å\nå¯¹æ¶ˆæ¯è¿›è¡Œç­¾åï¼Œå®é™…ä¸Šæ˜¯å¯¹æ¶ˆæ¯çš„å“ˆå¸Œè¿›è¡Œç­¾åï¼Œè¿™æ ·å¯ä»¥ä½¿ä»»æ„é•¿åº¦çš„æ¶ˆæ¯åœ¨ç­¾åå‰å…ˆè½¬æ¢ä¸ºå›ºå®šé•¿åº¦çš„å“ˆå¸Œæ•°æ®ã€‚å¯¹å“ˆå¸Œè¿›è¡Œç­¾åç›¸å½“äºä¿è¯äº†åŸå§‹æ¶ˆæ¯çš„ä¸å¯ä¼ªé€ æ€§ã€‚\næˆ‘ä»¬æ¥çœ‹çœ‹ä½¿ç”¨ECDSAå¦‚ä½•é€šè¿‡ç§é’¥å¯¹æ¶ˆæ¯è¿›è¡Œç­¾åã€‚å…³é”®ä»£ç æ˜¯é€šè¿‡sign()æ–¹æ³•ç­¾åï¼Œå¹¶è·å–ä¸€ä¸ªECSignatureå¯¹è±¡è¡¨ç¤ºç­¾åï¼š\nconst bitcoin = require('bitcoinjs-lib');\nlet\n    message = 'a secret message!', // åŸå§‹æ¶ˆæ¯\n    hash = bitcoin.crypto.sha256(message), // æ¶ˆæ¯å“ˆå¸Œ\n    wif = 'KwdMAjGmerYanjeui5SHS7JkmpZvVipYvB2LJGU1ZxJwYvP98617',\n    keyPair = bitcoin.ECPair.fromWIF(wif);\n// ç”¨ç§é’¥ç­¾å:\nlet signature = keyPair.sign(hash).toDER(); // ECSignatureå¯¹è±¡\n// æ‰“å°ç­¾å:\nconsole.log('signature = ' + signature.toString('hex'));\n// æ‰“å°å…¬é’¥ä»¥ä¾¿éªŒè¯ç­¾å:\nconsole.log('public key = ' + keyPair.getPublicKeyBuffer().toString('hex'));\n\nsignature = 304402205d0b6e817e01e22ba6ab19c0ab9cdbb2dbcd0612c5b8f990431dd0634f5a96530220188b989017ee7e830de581d4e0d46aa36bbe79537774d56cbe41993b3fd66686\npublic key = 02d0de0aaeaefad02b8bdc8a01a1b8b11c696bd3d66a2c5f10780d95b7df42645c\n\nECSignatureå¯¹è±¡å¯åºåˆ—åŒ–ä¸ºåå…­è¿›åˆ¶è¡¨ç¤ºçš„å­—ç¬¦ä¸²ã€‚\néªŒè¯\nåœ¨è·å¾—ç­¾åã€åŸå§‹æ¶ˆæ¯å’Œå…¬é’¥çš„åŸºç¡€ä¸Šï¼Œå¯ä»¥å¯¹ç­¾åè¿›è¡ŒéªŒè¯ã€‚éªŒè¯ç­¾åéœ€è¦å…ˆæ„é€ ä¸€ä¸ªä¸å«ç§é’¥çš„ECPairï¼Œç„¶åè°ƒç”¨verify()æ–¹æ³•éªŒè¯ç­¾åï¼š\nconst bitcoin = require('bitcoinjs-lib');\nlet signAsStr = '304402205d0b6e817e01e22ba6ab19c0'\n              + 'ab9cdbb2dbcd0612c5b8f990431dd063'\n              + '4f5a96530220188b989017ee7e830de5'\n              + '81d4e0d46aa36bbe79537774d56cbe41'\n              + '993b3fd66686'\n\nlet\n    signAsBuffer = Buffer.from(signAsStr, 'hex'),\n    signature = bitcoin.ECSignature.fromDER(signAsBuffer), // ECSignatureå¯¹è±¡\n    message = 'a secret message!', // åŸå§‹æ¶ˆæ¯\n    hash = bitcoin.crypto.sha256(message), // æ¶ˆæ¯å“ˆå¸Œ\n    pubKeyAsStr = '02d0de0aaeaefad02b8bdc8a01a1b8b11c696bd3d66a2c5f10780d95b7df42645c',\n    pubKeyAsBuffer = Buffer.from(pubKeyAsStr, 'hex'),\n    pubKeyOnly = bitcoin.ECPair.fromPublicKeyBuffer(pubKeyAsBuffer); // ä»public keyæ„é€ ECPair\n\n// éªŒè¯ç­¾å:\nlet result = pubKeyOnly.verify(hash, signature);\nconsole.log('Verify result: ' + result);\n\nVerify result: true\n\næ³¨æ„ä¸Šè¿°ä»£ç åªå¼•å…¥äº†å…¬é’¥ï¼Œå¹¶æ²¡æœ‰å¼•å…¥ç§é’¥ã€‚\nä¿®æ”¹signAsStrã€messageå’ŒpubKeyAsStrçš„ä»»æ„ä¸€ä¸ªå˜é‡çš„ä»»æ„ä¸€ä¸ªå­—èŠ‚ï¼Œå†å°è¯•éªŒè¯ç­¾åï¼Œåˆ™ä¸èƒ½é€šè¿‡ã€‚\næ•°å­—ç­¾åçš„éªŒè¯å®é™…ä¸Šå°±æ˜¯éå¯¹ç§°åŠ å¯†ä¸­çš„è§£å¯†è¿‡ç¨‹ï¼Œå¦‚æœäº¤æ˜“åˆ›é€ è€…ä½¿ç”¨ç§é’¥åŠ å¯†äº¤æ˜“æ•°æ®çš„hashå¾—åˆ°çš„ç­¾åå€¼ï¼ˆå¯†æ–‡ï¼‰èƒ½é¡ºåˆ©è¢«ç½‘ç»œä¸­å…¶ä»–äººæ‰‹ä¸­å¯¹åº”è¯¥ç§é’¥çš„å…¬é’¥è§£å¯†ï¼Œå³è§£å¯†å€¼==hash(äº¤æ˜“æ•°æ®)ï¼Œå°±ç®—æ˜¯ç­¾åéªŒè¯æˆåŠŸã€‚æ•°å­—ç­¾åç®—æ³•ï¼Œç§é’¥å’Œå…¬é’¥çš„ç”Ÿæˆæ–¹å¼ä»¥åŠå…¬é’¥å’Œåœ°å€çš„å¯¹åº”å…³ç³»æˆ‘ä»¬åœ¨ä¸‹ä¸€èŠ‚æ•°å­—ç­¾åç®—æ³•ä¸­å™è¿°ã€‚\næ¯”ç‰¹å¸å¯¹äº¤æ˜“æ•°æ®è¿›è¡Œç­¾åå’Œå¯¹æ¶ˆæ¯è¿›è¡Œç­¾åçš„åŸç†æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯æ ¼å¼æ›´åŠ å¤æ‚ã€‚é€šè¿‡ç§é’¥å¯ä»¥å¯¹æ¶ˆæ¯è¿›è¡Œç­¾åï¼Œç­¾åå¯ä»¥ä¿è¯æ¶ˆæ¯é˜²ä¼ªé€ ï¼Œé˜²ç¯¡æ”¹ï¼Œé˜²æŠµèµ–ã€‚å¯¹äº¤æ˜“ç­¾åç¡®ä¿äº†åªæœ‰æŒæœ‰ç§é’¥çš„äººæ‰èƒ½å¤ŸèŠ±è´¹å¯¹åº”åœ°å€çš„èµ„é‡‘ã€‚\n æ•°å­—ç­¾åç®—æ³•\nè¿™ä¸€å°èŠ‚è®²ä»‹ç»æ¯”ç‰¹å¸é‡‡ç”¨çš„ï¼š\n\nç­¾åç®—æ³•\nç§é’¥å’Œå…¬é’¥çš„ç”Ÿæˆæ–¹å¼\nå…¬é’¥å’Œåœ°å€çš„å¯¹åº”å…³ç³»ã€‚\n\n ç­¾åç®—æ³•\nå¸¸ç”¨çš„æ•°å­—ç­¾åç®—æ³•æœ‰ï¼šRSAç®—æ³•ï¼ŒDSAç®—æ³•å’ŒECDSAç®—æ³•ã€‚æ¯”ç‰¹å¸é‡‡ç”¨çš„ç­¾åç®—æ³•æ˜¯æ¤­åœ†æ›²çº¿ç­¾åç®—æ³•ï¼šECDSAï¼Œä½¿ç”¨çš„æ¤­åœ†æ›²çº¿æ˜¯ä¸€ä¸ªå·²ç»å®šä¹‰å¥½çš„æ ‡å‡†æ›²çº¿secp256k1ï¼š\ny2=x3+7y^2 = x^3 + 7\ny2=x3+7\nè¿™æ¡æ›²çº¿çš„å›¾åƒé•¿è¿™æ ·ï¼š\n\næ¯”ç‰¹å¸é‡‡ç”¨çš„ECDSAç­¾åç®—æ³•éœ€è¦ä¸€ä¸ªç§é’¥å’Œå…¬é’¥ç»„æˆçš„ç§˜é’¥å¯¹ï¼šç§é’¥æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª1ï½22561ï½2^{256}1ï½2256çš„éšæœºæ•°ï¼Œå…¬é’¥æ˜¯ç”±ç§é’¥æ ¹æ®ECDSAç®—æ³•æ¨ç®—å‡ºæ¥çš„ï¼Œé€šè¿‡ç§é’¥å¯ä»¥å¾ˆå®¹æ˜“æ¨ç®—å‡ºå…¬é’¥ï¼Œæ‰€ä»¥ä¸å¿…ä¿å­˜å…¬é’¥ï¼Œä½†æ˜¯ï¼Œé€šè¿‡å…¬é’¥æ— æ³•åæ¨ç§é’¥ï¼Œåªèƒ½æš´åŠ›ç ´è§£ã€‚\n ç§é’¥\næ¯”ç‰¹å¸çš„ç§é’¥æ˜¯ä¸€ä¸ªéšæœºçš„éå¸¸å¤§çš„22562^{256}2256ä½æ•´æ•°ã€‚å®ƒçš„ä¸Šé™ï¼Œç¡®åˆ‡åœ°è¯´ï¼Œæ¯”22562^{256}2256è¦ç¨å¾®å°ä¸€ç‚¹ï¼š\n\n0xFFFF FFFF FFFF FFFF FFFF FFFF FFFF FFFE BAAE DCE6 AF48 A03B BFD2 5E8C D036 4140\n\nè€Œæ¯”ç‰¹å¸çš„å…¬é’¥æ˜¯æ ¹æ®ç§é’¥æ¨ç®—å‡ºçš„ä¸¤ä¸ª256ä½æ•´æ•°ã€‚\nå¦‚æœç”¨é“¶è¡Œå¡ä½œæ¯”è¾ƒçš„è¯ï¼Œæ¯”ç‰¹å¸çš„å…¬é’¥ç›¸å½“äºé“¶è¡Œå¡å¡å·ï¼Œå®ƒæ˜¯ä¸¤ä¸ª256ä½æ•´æ•°ï¼š\n\næ¯”ç‰¹å¸çš„ç§é’¥ç›¸å½“äºé“¶è¡Œå¡å¯†ç ï¼Œå®ƒæ˜¯ä¸€ä¸ª256ä½æ•´æ•°ï¼š\n\n18E14A7B6A307F426A94F8114701E7C8E774E7F9A47E2C2035DB29A206321725\n\né“¶è¡Œå¡çš„å¡å·ç”±é“¶è¡ŒæŒ‡å®šï¼Œé“¶è¡Œå¡çš„å¯†ç å¯ä»¥ç”±ç”¨æˆ·éšæ—¶ä¿®æ”¹ã€‚è€Œæ¯”ç‰¹å¸â€œå¡â€å’Œé“¶è¡Œå¡çš„ä¸åŒç‚¹åœ¨äºï¼šå¯†ç ï¼ˆå®é™…ä¸Šæ˜¯ç§é’¥ï¼‰ç”±ç”¨æˆ·å…ˆç¡®å®šä¸‹æ¥ï¼Œç„¶åè®¡ç®—å‡ºâ€œå¡å·â€ï¼ˆå®é™…ä¸Šæ˜¯å…¬é’¥ï¼‰ï¼Œå³å¡å·æ˜¯ç”±å¯†ç é€šè¿‡ECDSAç®—æ³•æ¨å¯¼å‡ºæ¥çš„ï¼Œä¸èƒ½æ›´æ¢å¯†ç ã€‚\nç”±äºæ¯”ç‰¹å¸è´¦æœ¬æ˜¯å…¨ç½‘å…¬å¼€çš„ï¼Œæ‰€ä»¥ï¼Œä»»ä½•äººéƒ½å¯ä»¥æ ¹æ®å…¬é’¥æŸ¥è¯¢ä½™é¢ï¼Œä½†æ˜¯ï¼Œä¸çŸ¥é“æŒå¡äººæ˜¯è°ã€‚è¿™å°±æ˜¯æ¯”ç‰¹å¸çš„åŒ¿åç‰¹æ€§ã€‚\n\nå¦‚æœä¸¢å¤±äº†ç§é’¥ï¼Œå°±æ°¸è¿œæ— æ³•èŠ±è´¹å¯¹åº”å…¬é’¥çš„æ¯”ç‰¹å¸ï¼\n\nåœ¨æ¯”ç‰¹å¸çš„P2Pç½‘ç»œä¸­ä¸å­˜åœ¨ä¸­å¤®èŠ‚ç‚¹ï¼Œç§é’¥åªæœ‰æŒæœ‰äººè‡ªå·±çŸ¥é“ï¼Œå› æ­¤ï¼Œä¸¢å¤±äº†ç§é’¥ï¼Œå¯¹åº”çš„æ¯”ç‰¹å¸å°±æ°¸è¿œæ— æ³•èŠ±è´¹ã€‚å¦‚æœç§é’¥è¢«ç›—ï¼Œé»‘å®¢å°±å¯ä»¥èŠ±è´¹å¯¹åº”å…¬é’¥çš„æ¯”ç‰¹å¸ï¼Œå¹¶ä¸”è¿™æ˜¯æ— æ³•è¿½å›çš„ã€‚\næˆ‘ä»¬ä»¥JavaScriptä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•åˆ›å»ºæ¯”ç‰¹å¸ç§é’¥ã€‚åœ¨JavaScriptä¸­ï¼Œå†…ç½®çš„Numberç±»å‹ä½¿ç”¨56ä½è¡¨ç¤ºæ•´æ•°å’Œæµ®ç‚¹æ•°ï¼Œæœ€å¤§å¯è¡¨ç¤ºçš„æ•´æ•°æœ€å¤§åªæœ‰9007199254740991ã€‚å…¶ä»–è¯­è¨€å¦‚Javaä¸€èˆ¬ä¹Ÿä»…æä¾›64ä½çš„æ•´æ•°ç±»å‹ã€‚è¦è¡¨ç¤ºä¸€ä¸ª256ä½çš„æ•´æ•°ï¼Œåªèƒ½ä½¿ç”¨æ•°ç»„æ¥æ¨¡æ‹Ÿã€‚bitcoinjsä½¿ç”¨bigiè¿™ä¸ªåº“æ¥è¡¨ç¤ºä»»æ„å¤§å°çš„æ•´æ•°ã€‚\nä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†ä½¿ç”¨ä¸€ä¸ªéšæœºç”Ÿæˆçš„æ•°å­—ï¼Œé€šè¿‡ECPairåˆ›å»ºä¸€ä¸ªæ–°çš„ç§é’¥åï¼Œè¡¨ç¤ºç§é’¥çš„æ•´æ•°å°±æ˜¯å­—æ®µdï¼Œæˆ‘ä»¬æŠŠå®ƒæ‰“å°å‡ºæ¥ï¼š\nconst bitcoin = require('bitcoinjs-lib');\nlet keyPair = bitcoin.ECPair.makeRandom();\n// æ‰“å°ç§é’¥:\nconsole.log('private key = ' + keyPair.d);\n// ä»¥åå…­è¿›åˆ¶æ‰“å°:\nconsole.log('hex = ' + keyPair.d.toHex());\n// è¡¥é½32ä½:\nconsole.log('hex = ' + keyPair.d.toHex(32));\n\nprivate key = 81014991225650123107594446292560463009575145732738301659501234189040494639354\nhex = b31cdc2d854be1d2047b0290d7b3039977bd29c036a62b63b2550c87d28cf8fa\nhex = b31cdc2d854be1d2047b0290d7b3039977bd29c036a62b63b2550c87d28cf8fa\n\næƒ³è¦è®°ä½ä¸€ä¸ª256ä½çš„æ•´æ•°æ˜¯éå¸¸å›°éš¾çš„ï¼Œå¹¶ä¸”ï¼Œå¦‚æœè®°é”™äº†å…¶ä¸­æŸäº›ä½ï¼Œè¿™ä¸ªè®°é”™çš„æ•´æ•°ä»ç„¶æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ç§é’¥ï¼Œå› æ­¤ï¼Œæ¯”ç‰¹å¸æœ‰ä¸€ç§å¯¹ç§é’¥è¿›è¡Œç¼–ç çš„æ–¹å¼ï¼Œè¿™ç§ç¼–ç æ–¹å¼å°±æ˜¯å¸¦æ ¡éªŒçš„Base58ç¼–ç ã€‚\nå¯¹ç§é’¥è¿›è¡ŒBase58ç¼–ç æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯éå‹ç¼©çš„ç§é’¥æ ¼å¼ï¼Œä¸€ç§æ˜¯å‹ç¼©çš„ç§é’¥æ ¼å¼ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”éå‹ç¼©çš„å…¬é’¥æ ¼å¼å’Œå‹ç¼©çš„å…¬é’¥æ ¼å¼ã€‚\nå…·ä½“åœ°æ¥è¯´ï¼Œéå‹ç¼©çš„ç§é’¥æ ¼å¼æ˜¯æŒ‡åœ¨32å­—èŠ‚çš„ç§é’¥å‰æ·»åŠ ä¸€ä¸ª0x80å­—èŠ‚å‰ç¼€ï¼Œå¾—åˆ°33å­—èŠ‚çš„æ•°æ®ï¼Œå¯¹å…¶è®¡ç®—4å­—èŠ‚çš„æ ¡éªŒç ï¼Œé™„åŠ åˆ°æœ€åï¼Œä¸€å…±å¾—åˆ°37å­—èŠ‚çš„æ•°æ®ï¼š\n0x80           256bit             check\nâ”Œâ”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚1â”‚              32              â”‚  4  â”‚\nâ””â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\nè®¡ç®—æ ¡éªŒç éå¸¸ç®€å•ï¼Œå¯¹å…¶è¿›è¡Œä¸¤æ¬¡SHA256ï¼Œå–å¼€å¤´4å­—èŠ‚ä½œä¸ºæ ¡éªŒç ã€‚\nå¯¹è¿™37å­—èŠ‚çš„æ•°æ®è¿›è¡ŒBase58ç¼–ç ï¼Œå¾—åˆ°æ€»æ˜¯ä»¥5å¼€å¤´çš„å­—ç¬¦ä¸²ç¼–ç ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å°±æ˜¯æˆ‘ä»¬éœ€è¦éå¸¸å°å¿ƒåœ°ä¿å­˜çš„ç§é’¥åœ°å€ï¼Œåˆç§°ä¸ºé’±åŒ…å¯¼å…¥æ ¼å¼ï¼šWIFï¼ˆWallet Import Formatï¼‰ã€‚å¯ä»¥ä½¿ç”¨wifè¿™ä¸ªåº“å®ç°WIFç¼–ç ï¼š\nconst wif = require('wif');\n// åå…­è¿›åˆ¶è¡¨ç¤ºçš„ç§é’¥:\nlet privateKey = '0c28fca386c7a227600b2fe50b7cae11ec86d3bf1fbe471be89827e19d72aa1d';\n// å¯¹ç§é’¥ç¼–ç :\nlet encoded = wif.encode(\n        0x80, // 0x80å‰ç¼€\n        Buffer.from(privateKey, 'hex'), // è½¬æ¢ä¸ºå­—èŠ‚\n        false // éå‹ç¼©æ ¼å¼\n);\nconsole.log(encoded);\n\n5HueCGU8rMjxEXxiPuD5BDku4MkFqeZyd4dZ1jvhTVqvbTLvyTJ\n\nï¼ˆå¦‚æœä½ å»éªŒè¯äº†è¿™ä¸ªç®—æ³•å‘ç°5HueCâ€¦è§£ä¸å‡ºæ¥0c28â€¦ï¼Œæˆ–è€…800c28â€¦aa1d507a5b8dç¼–ç ç»“æœä¸æ˜¯5HueCâ€¦ï¼Œæ˜¯å› ä¸ºä½ ç”¨çš„base58å·¥å…·æŠŠä½ æ‹¼æ¥çš„38å­—èŠ‚æ•°æ®çœ‹ä½œå­—ç¬¦ä¸²è§£æçš„ï¼Œè€Œå®é™…ä¸Šåº”è¯¥æ˜¯çœ‹ä½œ16è¿›åˆ¶æ•°å€¼è§£æã€‚ç§é’¥åœ°å€æ€»æ˜¯ä»¥5å¼€å¤´å°±æ˜¯å› ä¸ºåå…­è¿›åˆ¶ç§é’¥ä»¥0x80å¼€å¤´base58ç»“æœæ€»æ˜¯5ï¼‰\nå¦ä¸€ç§å‹ç¼©æ ¼å¼çš„ç§é’¥ç¼–ç æ–¹å¼ï¼Œä¸éå‹ç¼©æ ¼å¼ä¸åŒçš„æ˜¯ï¼Œå‹ç¼©çš„ç§é’¥æ ¼å¼ä¼šåœ¨32å­—èŠ‚çš„ç§é’¥å‰åå„æ·»åŠ ä¸€ä¸ª0x80å­—èŠ‚å‰ç¼€å’Œ0x01å­—èŠ‚åç¼€ï¼Œå…±34å­—èŠ‚çš„æ•°æ®ï¼Œå¯¹å…¶è®¡ç®—4å­—èŠ‚çš„æ ¡éªŒç ï¼Œé™„åŠ åˆ°æœ€åï¼Œä¸€å…±å¾—åˆ°38å­—èŠ‚çš„æ•°æ®ï¼š\n0x80           256bit           0x01 check\nâ”Œâ”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚1â”‚              32              â”‚1â”‚  4  â”‚\nâ””â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”´â”€â”€â”€â”€â”€â”˜\nå¯¹è¿™38å­—èŠ‚çš„æ•°æ®è¿›è¡ŒBase58ç¼–ç ï¼Œå¾—åˆ°æ€»æ˜¯ä»¥Kæˆ–Lå¼€å¤´çš„å­—ç¬¦ä¸²ç¼–ç ã€‚é€šè¿‡ä»£ç å®ç°å‹ç¼©æ ¼å¼çš„WIFç¼–ç å¦‚ä¸‹ï¼š\nconst wif = require('wif');\n// åå…­è¿›åˆ¶è¡¨ç¤ºçš„ç§é’¥:\nlet privateKey = '0c28fca386c7a227600b2fe50b7cae11ec86d3bf1fbe471be89827e19d72aa1d';\n// å¯¹ç§é’¥ç¼–ç :\nlet encoded = wif.encode(\n        0x80, // 0x80å‰ç¼€\n        Buffer.from(privateKey, 'hex'), // è½¬æ¢ä¸ºå­—èŠ‚\n        true // å‹ç¼©æ ¼å¼\n);\nconsole.log(encoded);\n\nKwdMAjGmerYanjeui5SHS7JkmpZvVipYvB2LJGU1ZxJwYvP98617\n\nç›®å‰ï¼Œéå‹ç¼©çš„æ ¼å¼å‡ ä¹å·²ç»ä¸ä½¿ç”¨äº†ã€‚bitcoinjsæä¾›çš„ECPairæ€»æ˜¯ä½¿ç”¨å‹ç¼©æ ¼å¼çš„ç§é’¥è¡¨ç¤ºï¼š\nconst\n    bitcoin = require('bitcoinjs-lib'),\n    BigInteger = require('bigi');\nlet\n    priv = '0c28fca386c7a227600b2fe50b7cae11ec86d3bf1fbe471be89827e19d72aa1d',\n    d = BigInteger.fromBuffer(Buffer.from(priv, 'hex')),\n    keyPair = new bitcoin.ECPair(d);\n// æ‰“å°WIFæ ¼å¼çš„ç§é’¥:\nconsole.log(keyPair.toWIF());\n\nKwdMAjGmerYanjeui5SHS7JkmpZvVipYvB2LJGU1ZxJwYvP98617\n\n\nç§é’¥å°ç»“ï¼š\næ¯”ç‰¹å¸çš„ç§é’¥æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª256ä½æ•´æ•°ï¼Œå¯¹ç§é’¥è¿›è¡ŒWIFæ ¼å¼ç¼–ç å¯ä»¥å¾—åˆ°ä¸€ä¸ªå¸¦æ ¡éªŒçš„å­—ç¬¦ä¸²ã€‚\nä½¿ç”¨éå‹ç¼©æ ¼å¼çš„WIFæ˜¯ä»¥5å¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œä½¿ç”¨å‹ç¼©æ ¼å¼çš„WIFæ˜¯ä»¥Kæˆ–Lå¼€å¤´çš„å­—ç¬¦ä¸²ã€‚\n\n å…¬é’¥\næ¯”ç‰¹å¸çš„å…¬é’¥æ˜¯æ ¹æ®ç§é’¥è®¡ç®—å‡ºæ¥çš„ã€‚\nç§é’¥æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª256ä½æ•´æ•°ï¼Œè®°ä½œkã€‚æ ¹æ®æ¯”ç‰¹å¸é‡‡ç”¨çš„ECDSAç®—æ³•ï¼Œå¯ä»¥æ¨å¯¼å‡ºä¸¤ä¸ª256ä½æ•´æ•°ï¼Œè®°ä½œ(x, y)ï¼Œè¿™ä¸¤ä¸ª256ä½æ•´æ•°å³ä¸ºéå‹ç¼©æ ¼å¼çš„å…¬é’¥ã€‚\nç”±äºECCæ›²çº¿çš„ç‰¹ç‚¹ï¼Œæ ¹æ®éå‹ç¼©æ ¼å¼çš„å…¬é’¥(x, y)çš„xå®é™…ä¸Šä¹Ÿå¯æ¨ç®—å‡ºyï¼Œä½†éœ€è¦çŸ¥é“yçš„å¥‡å¶æ€§ï¼Œå› æ­¤ï¼Œå¯ä»¥æ ¹æ®(x, y)æ¨ç®—å‡ºx'ï¼Œä½œä¸ºå‹ç¼©æ ¼å¼çš„å…¬é’¥ã€‚\nå‹ç¼©æ ¼å¼çš„å…¬é’¥å®é™…ä¸Šæ˜¯ï¼Œæ ¹æ®yçš„å¥‡å¶æ€§åœ¨xå‰é¢æ·»åŠ 02æˆ–03å‰ç¼€ï¼Œyä¸ºå¶æ•°æ—¶æ·»åŠ 02ï¼Œå¦åˆ™æ·»åŠ 03ï¼Œè¿™æ ·ï¼Œå¾—åˆ°ä¸€ä¸ª1+32=33å­—èŠ‚çš„å‹ç¼©æ ¼å¼çš„å…¬é’¥æ•°æ®ï¼Œè®°ä½œx'ï¼Œè¿™ä¸ª284ä½çš„æ•´æ•°ä½œä¸ºå‹ç¼©æ ¼å¼çš„å…¬é’¥ã€‚\næ³¨æ„å‹ç¼©æ ¼å¼çš„å…¬é’¥å’Œéå‹ç¼©æ ¼å¼çš„å…¬é’¥æ˜¯å¯ä»¥äº’ç›¸è½¬æ¢çš„ï¼Œä½†å‡ä¸å¯åå‘æ¨å¯¼å‡ºç§é’¥ã€‚\néå‹ç¼©æ ¼å¼çš„å…¬é’¥ç›®å‰å·²å¾ˆå°‘ä½¿ç”¨ï¼ŒåŸå› æ˜¯éå‹ç¼©æ ¼å¼çš„å…¬é’¥ç­¾åè„šæœ¬æ•°æ®ä¼šæ›´é•¿ã€‚\næˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•æ ¹æ®ç§é’¥æ¨ç®—å‡ºå…¬é’¥ï¼š\nconst bitcoin = require('bitcoinjs-lib');\nlet\n    wif = 'KwdMAjGmerYanjeui5SHS7JkmpZvVipYvB2LJGU1ZxJwYvP98617',\n    ecPair = bitcoin.ECPair.fromWIF(wif); // å¯¼å…¥ç§é’¥\n// è®¡ç®—å…¬é’¥:\nlet pubKey = ecPair.getPublicKeyBuffer(); // è¿”å›Bufferå¯¹è±¡\nconsole.log(pubKey.toString('hex')); // 02æˆ–03å¼€å¤´çš„å‹ç¼©å…¬é’¥\n\n02d0de0aaeaefad02b8bdc8a01a1b8b11c696bd3d66a2c5f10780d95b7df42645c\n\næ„é€ å‡ºECPairå¯¹è±¡åï¼Œå³å¯é€šè¿‡getPublicKeyBuffer()ä»¥Bufferå¯¹è±¡è¿”å›å…¬é’¥æ•°æ®ã€‚\n åœ°å€\nè¦ç‰¹åˆ«æ³¨æ„ï¼Œæ¯”ç‰¹å¸çš„åœ°å€å¹¶ä¸æ˜¯å…¬é’¥ï¼Œè€Œæ˜¯å…¬é’¥çš„å“ˆå¸Œï¼Œå³ä»å…¬é’¥èƒ½æ¨å¯¼å‡ºåœ°å€ï¼Œä½†ä»åœ°å€ä¸èƒ½åæ¨å…¬é’¥ï¼Œå› ä¸ºå“ˆå¸Œå‡½æ•°æ˜¯å•å‘å‡½æ•°ã€‚\nä»¥å‹ç¼©æ ¼å¼çš„å…¬é’¥ä¸ºä¾‹ï¼Œä»å…¬é’¥è®¡ç®—åœ°å€çš„æ–¹æ³•æ˜¯ï¼Œé¦–å…ˆå¯¹1+32=33å­—èŠ‚çš„å…¬é’¥æ•°æ®è¿›è¡ŒHash160ï¼ˆå³å…ˆè®¡ç®—SHA256ï¼Œå†è®¡ç®—RipeMD160ï¼‰ï¼Œå¾—åˆ°20å­—èŠ‚çš„å“ˆå¸Œã€‚ç„¶åï¼Œæ·»åŠ 0x00å‰ç¼€ï¼Œå¾—åˆ°1+20=21å­—èŠ‚æ•°æ®ï¼Œå†è®¡ç®—4å­—èŠ‚æ ¡éªŒç ï¼Œæ‹¼åœ¨ä¸€èµ·ï¼Œæ€»è®¡å¾—åˆ°1+20+4=25å­—èŠ‚æ•°æ®ï¼š\n0x00      hash160         check\nâ”Œâ”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”\nâ”‚1â”‚          20          â”‚  4  â”‚\nâ””â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜\nå¯¹ä¸Šè¿°25å­—èŠ‚æ•°æ®è¿›è¡ŒBase58ç¼–ç ï¼Œå¾—åˆ°æ€»æ˜¯ä»¥1å¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²å³ä¸ºæ¯”ç‰¹å¸åœ°å€ã€‚ä½¿ç”¨JavaScriptå®ç°å…¬é’¥åˆ°åœ°å€çš„ç¼–ç å¦‚ä¸‹ï¼š\nconst bitcoin = require('bitcoinjs-lib');\nlet\n    publicKey = '02d0de0aaeaefad02b8bdc8a01a1b8b11c696bd3d66a2c5f10780d95b7df42645c',\n    ecPair = bitcoin.ECPair.fromPublicKeyBuffer(Buffer.from(publicKey, 'hex')); // å¯¼å…¥å…¬é’¥\n// è®¡ç®—åœ°å€:\nlet address = ecPair.getAddress();\nconsole.log(address); // 1å¼€å¤´çš„åœ°å€\n\n1LoVGDgRs9hTfTNJNuXKSpywcbdvwRXpmK\n\nè®¡ç®—åœ°å€çš„æ—¶å€™ï¼Œä¸å¿…çŸ¥é“ç§é’¥ï¼Œå¯ä»¥ç›´æ¥ä»å…¬é’¥è®¡ç®—åœ°å€ï¼Œå³é€šè¿‡ECPair.fromPublicKeyBufferæ„é€ ä¸€ä¸ªä¸å¸¦ç§é’¥çš„ECPairå³å¯è®¡ç®—å‡ºåœ°å€ã€‚\nè¦æ³¨æ„ï¼Œå¯¹éå‹ç¼©æ ¼å¼çš„å…¬é’¥å’Œå‹ç¼©æ ¼å¼çš„å…¬é’¥è¿›è¡Œå“ˆå¸Œç¼–ç å¾—åˆ°çš„åœ°å€ï¼Œéƒ½æ˜¯ä»¥1å¼€å¤´çš„ï¼Œå› æ­¤ï¼Œä»åœ°å€æœ¬èº«å¹¶æ— æ³•åŒºåˆ†å‡ºä½¿ç”¨çš„æ˜¯å‹ç¼©æ ¼å¼è¿˜æ˜¯éå‹ç¼©æ ¼å¼çš„å…¬é’¥ã€‚\nä»¥1å¼€å¤´çš„å­—ç¬¦ä¸²åœ°å€å³ä¸ºæ¯”ç‰¹å¸æ”¶æ¬¾åœ°å€ï¼Œå¯ä»¥å®‰å…¨åœ°å…¬å¼€ç»™ä»»ä½•äººã€‚\nä»…æä¾›åœ°å€å¹¶ä¸èƒ½è®©å…¶ä»–äººå¾—çŸ¥å…¬é’¥ã€‚é€šå¸¸æ¥è¯´ï¼Œå…¬å¼€å…¬é’¥å¹¶æ²¡æœ‰å®‰å…¨é£é™©ã€‚å®é™…ä¸Šï¼Œå¦‚æœæŸä¸ªåœ°å€ä¸Šæœ‰å¯¹åº”çš„èµ„é‡‘ï¼Œè¦èŠ±è´¹è¯¥èµ„é‡‘ï¼Œå°±éœ€è¦æä¾›å…¬é’¥ã€‚å¦‚æœæŸä¸ªåœ°å€çš„èµ„é‡‘è¢«èŠ±è´¹è¿‡è‡³å°‘ä¸€æ¬¡ï¼Œè¯¥åœ°å€çš„å…¬é’¥å®é™…ä¸Šå°±å…¬å¼€äº†ã€‚\nç§é’¥ã€å…¬é’¥ä»¥åŠåœ°å€çš„æ¨å¯¼å…³ç³»å¦‚ä¸‹ï¼š\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚Private Keyâ”‚â”€â”€â”€â”€â”€â–¶â”‚Public Key â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n      â–²                  â”‚\n      â”‚                  â”‚\n      â–¼                  â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚    WIF    â”‚      â”‚  Address  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nå¯¹æ•°å­—ç­¾åè¿™ä¸€èŠ‚åšä¸€ä¸ªæ€»ç»“ï¼š\n1.æ•°å­—ç­¾ååº”ç”¨äºp2päº¤æ˜“è¿‡ç¨‹ï¼Œç›®çš„æ˜¯å¯¹äº¤æ˜“å‘èµ·è€…ï¼ˆä»˜æ¬¾äººï¼‰è¿›è¡ŒéªŒè¯ã€‚æ•°å­—ç­¾åçš„ä¸‰ä¸ªä½œç”¨ï¼šé˜²ä¼ªé€ ï¼Œé˜²ç¯¡æ”¹ï¼Œé˜²æŠµèµ–ã€‚\n2.æ¯”ç‰¹å¸ä½¿ç”¨çš„æ•°å­—ç­¾åç®—æ³•æ˜¯ECDSA\n3.æ¯”ç‰¹å¸ç§é’¥æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª256ä½éšæœºæ•´æ•°ï¼Œå¯¹ç§é’¥è¿›è¡ŒWIFæ ¼å¼ç¼–ç å¯ä»¥å¾—åˆ°ä¸€ä¸ªå¸¦æ ¡éªŒçš„å­—ç¬¦ä¸²ã€‚ç§é’¥ç”±æŒæœ‰è€…è‡ªè¡Œä¿ç®¡ï¼Œä¸€æ—¦ä¸¢å¤±ä¸å¯æ‰¾å›ï¼Œé’±åŒ…å†ä¹Ÿæ— æ³•æ‰¾å›\n4.æ¯”ç‰¹å¸å…¬é’¥æ ¹æ®ç§é’¥è®¡ç®—çš„æ¥ï¼Œç®—æ³•æ˜¯ECDSAï¼ˆå³éå¯¹ç§°åŠ å¯†ç§é’¥è®¡ç®—å…¬é’¥ï¼‰ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸¤ä¸ª256ä½æ•´æ•°ï¼Œå…¬é’¥æœ‰å‹ç¼©å’Œéå‹ç¼©ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ï¼Œå¯äº’ç›¸è½¬æ¢\n5.æ¯”ç‰¹å¸çš„åœ°å€æ˜¯å…¬é’¥å“ˆå¸Œçš„ç¼–ç ï¼Œå¹¶ä¸æ˜¯å…¬é’¥æœ¬èº«ï¼Œé€šè¿‡å…¬é’¥å¯æ¨å¯¼å‡ºåœ°å€ï¼›é€šè¿‡åœ°å€ä¸å¯æ¨å¯¼å‡ºå…¬é’¥ï¼Œé€šè¿‡å…¬é’¥ä¸å¯æ¨å¯¼å‡ºç§é’¥ã€‚\n\n æ¯”ç‰¹å¸é’±åŒ…\næ¯”ç‰¹å¸é’±åŒ…å®é™…ä¸Šå°±æ˜¯å¸®åŠ©ç”¨æˆ·ç®¡ç†ç§é’¥çš„è½¯ä»¶ã€‚å› ä¸ºæ¯”ç‰¹å¸çš„é’±åŒ…æ˜¯ç»™æ™®é€šç”¨æˆ·ä½¿ç”¨çš„ï¼Œå®ƒæœ‰å‡ ç§åˆ†ç±»ï¼š\n\næœ¬åœ°é’±åŒ…ï¼šæ˜¯æŠŠç§é’¥ä¿å­˜åœ¨æœ¬åœ°è®¡ç®—æœºç¡¬ç›˜ä¸Šçš„é’±åŒ…è½¯ä»¶ï¼Œå¦‚Electrumï¼›\næ‰‹æœºé’±åŒ…ï¼šå’Œæœ¬åœ°é’±åŒ…ç±»ä¼¼ï¼Œä½†å¯ä»¥ç›´æ¥åœ¨æ‰‹æœºä¸Šè¿è¡Œï¼Œå¦‚Bitpayï¼›\nåœ¨çº¿é’±åŒ…ï¼šæ˜¯æŠŠç§é’¥å§”æ‰˜ç»™ç¬¬ä¸‰æ–¹åœ¨çº¿æœåŠ¡å•†ä¿å­˜ï¼›\nçº¸é’±åŒ…ï¼šæ˜¯æŒ‡æŠŠç§é’¥æ‰“å°å‡ºæ¥ä¿å­˜åœ¨çº¸ä¸Šï¼›\nè„‘é’±åŒ…ï¼šæ˜¯æŒ‡æŠŠç§é’¥è®°åœ¨è‡ªå·±è„‘è¢‹é‡Œã€‚\n\nå¯¹å¤§å¤šæ•°æ™®é€šç”¨æˆ·æ¥è¯´ï¼Œæƒ³è¦è®°ä½ç§é’¥éå¸¸å›°éš¾ï¼Œæ‰€ä»¥å¼ºçƒˆä¸å»ºè®®ä½¿ç”¨è„‘é’±åŒ…ã€‚\nä½œä¸ºç”¨æˆ·ï¼Œå¯ä»¥ç”Ÿæˆä»»æ„æ•°é‡çš„ç§é’¥-å…¬é’¥å¯¹ï¼Œå…¬é’¥æ˜¯æ¥æ”¶åˆ«äººè½¬è´¦çš„åœ°å€ï¼Œè€Œç§é’¥æ˜¯èŠ±è´¹æ¯”ç‰¹å¸çš„å”¯ä¸€æ‰‹æ®µï¼Œé’±åŒ…ç¨‹åºå¯ä»¥å¸®åŠ©ç”¨æˆ·ç®¡ç†ç§é’¥-å…¬é’¥å¯¹ã€‚\n äº¤æ˜“\næˆ‘ä»¬å†æ¥çœ‹è®°å½•åœ¨åŒºå—é“¾ä¸Šçš„äº¤æ˜“ã€‚æ¯ä¸ªåŒºå—éƒ½è®°å½•äº†è‡³å°‘ä¸€ç¬”äº¤æ˜“ï¼Œä¸€ç¬”äº¤æ˜“å°±æ˜¯æŠŠä¸€å®šé‡‘é¢çš„æ¯”ç‰¹å¸ä»ä¸€ä¸ªè¾“å…¥è½¬ç§»åˆ°ä¸€ä¸ªè¾“å‡ºï¼š\n\nä¾‹å¦‚ï¼Œå°æ˜æŠŠä¸¤ä¸ªæ¯”ç‰¹å¸è½¬ç§»ç»™å°çº¢ï¼Œè¿™ç¬”äº¤æ˜“çš„è¾“å…¥æ˜¯å°æ˜ï¼Œè¾“å‡ºå°±æ˜¯å°çº¢ã€‚å®é™…è®°å½•çš„æ˜¯åŒæ–¹çš„å…¬é’¥åœ°å€ã€‚\nå¦‚æœå°æ˜æœ‰50ä¸ªæ¯”ç‰¹å¸ï¼Œä»–è¦è½¬ç»™å°çº¢ä¸¤ä¸ªæ¯”ç‰¹å¸ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„48ä¸ªæ¯”ç‰¹å¸åº”è¯¥è®°å½•åœ¨å“ªï¼Ÿæ¯”ç‰¹å¸åè®®è§„å®šä¸€ä¸ªè¾“å‡ºå¿…é¡»ä¸€æ¬¡æ€§èŠ±å®Œï¼Œæ‰€ä»¥ï¼Œå°æ˜ç»™å°çº¢çš„ä¸¤ä¸ªæ¯”ç‰¹å¸çš„äº¤æ˜“å¿…é¡»è¡¨ç¤ºæˆï¼š\n\nå°æ˜ç»™å°çº¢2ä¸ªæ¯”ç‰¹å¸ï¼ŒåŒæ—¶å°æ˜åˆç»™è‡ªå·±48ä¸ªæ¯”ç‰¹å¸ï¼Œè¿™48ä¸ªæ¯”ç‰¹å¸å°±æ˜¯æ‰¾é›¶ã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªäº¤æ˜“ä¸­ï¼Œä¸€ä¸ªè¾“å…¥å¯ä»¥å¯¹åº”å¤šä¸ªè¾“å‡ºã€‚\nå½“å°çº¢æœ‰ä¸¤ç¬”æ”¶å…¥æ—¶ï¼Œä¸€ç¬”2.0ï¼Œä¸€ç¬”1.5ï¼Œå¥¹æƒ³ç»™å°ç™½è½¬3.5æ¯”ç‰¹å¸æ—¶ï¼Œå°±ä¸èƒ½å•ç”¨ä¸€ç¬”è¾“å‡ºï¼Œå¥¹å¿…é¡»æŠŠä¸¤ç¬”é’±åˆèµ·æ¥å†èŠ±æ‰ï¼Œè¿™ç§æƒ…å†µå°±æ˜¯ä¸€ä¸ªäº¤æ˜“å¯¹åº”å¤šä¸ªè¾“å…¥å’Œ1ä¸ªè¾“å‡ºï¼š\n\næœå­˜åœ¨æ‰¾é›¶ï¼Œè¿™ç¬”äº¤æ˜“å°±æ—¢åŒ…å«å¤šä¸ªè¾“å…¥ä¹ŸåŒ…å«å¤šä¸ªè¾“å‡ºï¼š\n\nåœ¨å®é™…çš„äº¤æ˜“ä¸­ï¼Œè¾“å…¥æ¯”è¾“å‡ºè¦ç¨å¾®å¤§ä¸€ç‚¹ç‚¹ï¼Œè¿™ä¸ªå·®é¢å°±æ˜¯éšå«çš„äº¤æ˜“è´¹ç”¨ï¼Œäº¤æ˜“è´¹ç”¨ä¼šç®—å…¥å½“å‰åŒºå—çš„çŸ¿å·¥æ”¶å…¥ä¸­ä½œä¸ºçŸ¿å·¥å¥–åŠ±çš„ä¸€éƒ¨åˆ†ï¼š\n\nè®¡ç®—å‡ºçš„äº¤æ˜“è´¹ç”¨ï¼š\näº¤æ˜“è´¹ç”¨ &#x3D; è¾“å…¥ - è¾“å‡º &#x3D; (2.0 + 1.5) - (2.99 + 0.49) &#x3D; 3.5 - 3.48 &#x3D; 0.02\næ¯”ç‰¹å¸å®é™…çš„äº¤æ˜“è®°å½•æ˜¯ç”±ä¸€ç³»åˆ—äº¤æ˜“æ„æˆï¼Œæ¯ä¸€ä¸ªäº¤æ˜“éƒ½åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥ï¼Œä»¥åŠä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡ºã€‚æœªèŠ±è´¹çš„è¾“å‡ºè¢«ç§°ä¸ºUTXOï¼ˆUnspent Transaction Ouptutï¼‰ã€‚\nå½“æˆ‘ä»¬è¦ç®€å•éªŒè¯æŸä¸ªäº¤æ˜“çš„æ—¶å€™ï¼Œä¾‹å¦‚ï¼Œå¯¹äºäº¤æ˜“f36abdï¼Œå®ƒè®°å½•çš„è¾“å…¥æ˜¯3f96abï¼Œç´¢å¼•å·æ˜¯1ï¼ˆç´¢å¼•å·ä»0å¼€å§‹ï¼Œ0è¡¨ç¤ºç¬¬ä¸€ä¸ªè¾“å‡ºï¼Œ1è¡¨ç¤ºç¬¬äºŒä¸ªè¾“å‡ºï¼Œä»¥æ­¤ç±»æ¨ï¼‰ï¼Œæˆ‘ä»¬å°±æ ¹æ®3f96abæ‰¾åˆ°å‰é¢å·²å‘ç”Ÿçš„äº¤æ˜“ï¼Œå†æ ¹æ®ç´¢å¼•å·æ‰¾åˆ°å¯¹åº”çš„è¾“å‡ºæ˜¯0.5ä¸ªæ¯”ç‰¹å¸ï¼Œæ‰€ä»¥ï¼Œäº¤æ˜“f36abdçš„è¾“å…¥æ€»è®¡æ˜¯0.5ä¸ªæ¯”ç‰¹å¸ï¼Œè¾“å‡ºåˆ†åˆ«æ˜¯0.4ä¸ªæ¯”ç‰¹å¸å’Œ0.09ä¸ªæ¯”ç‰¹å¸ï¼Œéšå«çš„äº¤æ˜“è´¹ç”¨æ˜¯0.01ä¸ªæ¯”ç‰¹å¸ï¼š\n\nå†æ¥è§£é‡Šä¸€ä¸‹ä¸Šå›¾ï¼Œé˜²æ­¢å¤§å®¶çœ‹ä¸æ‡‚ã€‚ä¸Šå›¾ä¸­æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€æ¬¡äº¤æ˜“ï¼Œä¸€æ¬¡äº¤æ˜“ä¸­input å¿…é¡»æ¥è‡ªè¿‡å»å‘ç”Ÿçš„äº¤æ˜“çš„output ï¼ˆç›´åˆ°è¿½æº¯åˆ°Coinbaseäº¤æ˜“ï¼Œå³æŒ–çŸ¿è€…åˆ›å»ºçš„é“¸å¸äº¤æ˜“ï¼‰ï¼ŒUTXO çš„å€¼ç´¢å¼•è¿‡å»çš„æŸä¸€ç¬”äº¤æ˜“ä¸­çš„æŸä¸ªè¾“å‡ºåœ°å€å’Œé’±æ•°ï¼Œæ¯”å¦‚è¯´ï¼Œf36abdæ­¤æ¬¡äº¤æ˜“çš„input æ˜¯äº¤æ˜“3f96abä¸­è¾“å‡ºç»™1mPvuPAçš„0.5ä¸ªæ¯”ç‰¹å¸ï¼Œæ­¤æ¬¡äº¤æ˜“è¾“å‡ºç»™16Gr9nBå’Œ1vg47TLå„0.4ï¼Œ0.09ä¸ªæ¯”ç‰¹å¸ï¼Œæ€»è¾“å‡ºæ¯”è¾“å…¥å°‘äº†0.01ä¸ªæ¯”ç‰¹å¸ï¼Œè¿™äº›é’±å°±æ˜¯äº¤æ˜“è´¹ç”¨ï¼Œç»™çŸ¿å·¥äº†ã€‚\n\näº¤æ˜“å°ç»“\næ¯”ç‰¹å¸ä½¿ç”¨æ•°å­—ç­¾åä¿è¯é›¶ä¿¡ä»»çš„å¯é P2Päº¤æ˜“ï¼š\n\nç§é’¥æ˜¯èŠ±è´¹æ¯”ç‰¹å¸çš„å”¯ä¸€æ‰‹æ®µï¼›\né’±åŒ…è½¯ä»¶æ˜¯ç”¨æ¥å¸®åŠ©ç”¨æˆ·ç®¡ç†ç§é’¥ï¼›\næ‰€æœ‰äº¤æ˜“è¢«è®°å½•åœ¨åŒºå—é“¾ä¸­ï¼Œå¯ä»¥é€šè¿‡å…¬é’¥æŸ¥è¯¢æ‰€æœ‰äº¤æ˜“ä¿¡æ¯ã€‚\n\n\n 0x3 æŒ–çŸ¿åŸç†\nåœ¨æ¯”ç‰¹å¸çš„P2Pç½‘ç»œä¸­ï¼Œæœ‰ä¸€ç±»èŠ‚ç‚¹ï¼Œå®ƒä»¬æ—¶åˆ»ä¸åœåœ°è¿›è¡Œè®¡ç®—ï¼Œè¯•å›¾æŠŠæ–°çš„äº¤æ˜“æ‰“åŒ…æˆæ–°çš„åŒºå—å¹¶é™„åŠ åˆ°åŒºå—é“¾ä¸Šï¼Œè¿™ç±»èŠ‚ç‚¹å°±æ˜¯çŸ¿å·¥ã€‚å› ä¸ºæ¯æ‰“åŒ…ä¸€ä¸ªæ–°çš„åŒºå—ï¼Œæ‰“åŒ…è¯¥åŒºå—çš„çŸ¿å·¥å°±å¯ä»¥è·å¾—ä¸€ç¬”æ¯”ç‰¹å¸ä½œä¸ºå¥–åŠ±ã€‚æ‰€ä»¥ï¼Œæ‰“åŒ…æ–°åŒºå—å°±è¢«ç§°ä¸ºæŒ–çŸ¿ã€‚\næ¯”ç‰¹å¸çš„æŒ–çŸ¿åŸç†å°±æ˜¯ä¸€ç§å·¥ä½œé‡è¯æ˜æœºåˆ¶ã€‚å·¥ä½œé‡è¯æ˜POWæ˜¯è‹±æ–‡Proof of Workçš„ç¼©å†™ã€‚\nåœ¨è®¨è®ºPOWä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šåœ¨ä¸€ä¸ªæ–°åŒºå—ä¸­ï¼Œå‡­ä»€ä¹ˆæ˜¯å°æ˜å¾—åˆ°50ä¸ªå¸çš„å¥–åŠ±ï¼Œè€Œä¸æ˜¯å°çº¢æˆ–è€…å°å†›ï¼Ÿ\n\nå½“å°æ˜æˆåŠŸåœ°æ‰“åŒ…äº†ä¸€ä¸ªåŒºå—åï¼Œé™¤äº†ç”¨æˆ·çš„äº¤æ˜“ï¼Œå°æ˜ä¼šåœ¨ç¬¬ä¸€ç¬”äº¤æ˜“è®°å½•é‡Œå†™ä¸Šä¸€ç¬”â€œæŒ–çŸ¿â€å¥–åŠ±çš„äº¤æ˜“ï¼Œä»è€Œç»™è‡ªå·±çš„åœ°å€æ·»åŠ 50ä¸ªæ¯”ç‰¹å¸ã€‚ä¸ºä»€ä¹ˆæ¯”ç‰¹å¸çš„P2Pç½‘ç»œä¼šæ‰¿è®¤å°æ˜æ‰“åŒ…çš„åŒºå—ï¼Œå¹¶ä¸”è®¤å¯å°æ˜å¾—åˆ°çš„åŒºå—å¥–åŠ±å‘¢ï¼Ÿ\nå› ä¸ºæ¯”ç‰¹å¸çš„æŒ–çŸ¿ä½¿ç”¨äº†å·¥ä½œé‡è¯æ˜æœºåˆ¶ï¼Œå°æ˜çš„åŒºå—è¢«è®¤å¯ï¼Œæ˜¯å› ä¸ºä»–åœ¨æ‰“åŒ…åŒºå—çš„æ—¶å€™ï¼Œåšäº†ä¸€å®šçš„å·¥ä½œï¼Œè€ŒP2Pç½‘ç»œçš„å…¶ä»–èŠ‚ç‚¹å¯ä»¥éªŒè¯å°æ˜çš„å·¥ä½œé‡ã€‚\n å·¥ä½œé‡è¯æ˜\næ¯”ç‰¹å¸çš„å·¥ä½œé‡è¯æ˜éœ€è¦å½’ç»“ä¸ºè®¡ç®—æœºè®¡ç®—ï¼Œä¹Ÿå°±æ˜¯æ•°å­¦é—®é¢˜ã€‚å·¥ä½œé‡è¯æ˜é—®é¢˜è½¬ä¸ºå¦‚ä½•æ„é€ ä¸€ä¸ªæ•°å­¦é—®é¢˜æ¥å®ç°å·¥ä½œé‡è¯æ˜ã€‚\nåœ¨æ¯”ç‰¹å¸ç½‘ç»œä¸­ï¼ŒçŸ¿å·¥çš„æŒ–çŸ¿ä¹Ÿæ˜¯ä¸€ç§å·¥ä½œé‡è¯æ˜ï¼Œè¦è®©è®¡ç®—æœºå®ç°å·¥ä½œé‡è¯æ˜ï¼Œå¿…é¡»æ‰¾åˆ°ä¸€ç§å·¥ä½œé‡ç®—æ³•ï¼Œè®©è®¡ç®—æœºæ— æ³•åœ¨çŸ­æ—¶é—´å†…ç®—å‡ºæ¥ã€‚è¿™ç§ç®—æ³•å°±æ˜¯å“ˆå¸Œç®—æ³•ã€‚\né€šè¿‡æ”¹å˜åŒºå—å¤´éƒ¨çš„ä¸€ä¸ªnonceå­—æ®µçš„å€¼ï¼Œè®¡ç®—æœºå¯ä»¥è®¡ç®—å‡ºä¸åŒçš„åŒºå—å“ˆå¸Œå€¼ï¼š\n\nç›´åˆ°è®¡ç®—å‡ºæŸä¸ªç‰¹å®šçš„å“ˆå¸Œå€¼çš„æ—¶å€™ï¼Œè®¡ç®—ç»“æŸã€‚è¿™ä¸ªå“ˆå¸Œå’Œå…¶ä»–çš„å“ˆå¸Œç›¸æ¯”ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯å‰é¢æœ‰å¥½å‡ ä¸ª0ï¼š\nhash256(block data, nonce&#x3D;0) &#x3D; 291656f37cdcf493c4bb7b926e46fee5c14f9b76aff28f9d00f5cca0e54f376f\nhash256(block data, nonce&#x3D;1) &#x3D; f7b2c15c4de7f482edee9e8db7287a6c5def1c99354108ef33947f34d891ea8d\nhash256(block data, nonce&#x3D;2) &#x3D; b6eebc5faa4c44d9f5232631f39ddf4211443d819208da110229b644d2a99e12\nhash256(block data, nonce&#x3D;3) &#x3D; 00aeaaf01166a93a2217fe01021395b066dd3a81daffcd16626c308c644c5246\nhash256(block data, nonce&#x3D;4) &#x3D; 26d33671119c9180594a91a2f1f0eb08bdd0b595e3724050acb68703dc99f9b5\nhash256(block data, nonce&#x3D;5) &#x3D; 4e8a3dcab619a7ce5c68e8f4abdc49f98de1a71e58f0ce9a0d95e024cce7c81a\nhash256(block data, nonce&#x3D;6) &#x3D; 185f634d50b17eba93b260a911ba6dbe9427b72f74f8248774930c0d8588c193\nhash256(block data, nonce&#x3D;7) &#x3D; 09b19f3d32e3e5771bddc5f0e1ee3c1bac1ba4a85e7b2cc30833a120e41272ed\n...\nhash256(block data, nonce&#x3D;124709132) &#x3D; 00000000fba7277ef31c8ecd1f3fef071cf993485fe5eab08e4f7647f47be95c\næ¯”ç‰¹å¸æŒ–çŸ¿çš„å·¥ä½œé‡è¯æ˜åŸç†å°±æ˜¯ï¼Œä¸æ–­å°è¯•è®¡ç®—åŒºå—çš„å“ˆå¸Œï¼Œç›´åˆ°è®¡ç®—å‡ºä¸€ä¸ªç‰¹å®šçš„å“ˆå¸Œå€¼ï¼Œå®ƒæ¯”éš¾åº¦å€¼è¦å°ã€‚è¿™é‡Œçš„å°æ˜¯è¯´å“ˆå¸Œå€¼çœ‹ä½œæ•°å€¼æ¯”ç›®æ ‡å°ï¼Œä¸¾ä¾‹æ¥è¯´å¦‚æœç›®æ ‡çš„æ˜¯å‰5ä½æ˜¯é›¶ï¼Œé‚£ä½ æ‰¾åˆ°çš„å“ˆå¸Œå€¼éœ€è¦å°äº0x00000fffffffâ€¦è¿™å°±æ˜¯æ¯”ç‰¹å¸æŒ–çŸ¿çš„å·¥ä½œé‡è¯æ˜æ–¹æ³•ã€‚\næ¯”ç‰¹å¸ä½¿ç”¨çš„SHA-256ç®—æ³•å¯ä»¥çœ‹ä½œå¯¹éšæœºè¾“å…¥äº§ç”Ÿéšæœºè¾“å‡ºï¼Œè¿™ä¸ªéšæœºå¾ˆé‡è¦ï¼Œå°±æ˜¯è¯´hashå€¼çš„æ¯ä¸€ä½éƒ½æ˜¯éšæœºçš„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯¹å­—ç¬¦ä¸²Helloå†åŠ ä¸Šä¸€ä¸ªæ•°å­—è®¡ç®—ä¸¤æ¬¡SHA-256ï¼Œæ ¹æ®æ•°å­—çš„ä¸åŒï¼Œå¾—åˆ°çš„å“ˆå¸Œæ˜¯å®Œå…¨æ— è§„å¾‹çš„256ä½éšæœºæ•°ï¼š\nhash256(&quot;Hello?&quot;) &#x3D; ????????????????????????????????????????????????????????????????\nå¤§çº¦è®¡ç®—16æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¾—åˆ°çš„å“ˆå¸Œä¸­æ‰¾åˆ°é¦–ä½æ˜¯0çš„å“ˆå¸Œå€¼ï¼Œå› ä¸ºé¦–ä½æ˜¯0å‡ºç°çš„æ¦‚ç‡æ˜¯1/16ï¼š\nhash256(&quot;Hello1&quot;) &#x3D; ffb7a43d629d363026b3309586233ab7ffc1054c4f56f43a92f0054870e7ddc9\nhash256(&quot;Hello2&quot;) &#x3D; e085bf19353eb3bd1021661a17cee97181b0b369d8e16c10ffb7b01287a77173\n...\nhash256(&quot;Hello15&quot;) &#x3D; 0442e1c38b810f5d3c022fc2820b1d7999149460b83dc680abdebc9c7bd65cae\nå¦‚æœæˆ‘ä»¬è¦æ‰¾å‡ºå‰ä¸¤ä½æ˜¯0çš„å“ˆå¸Œå€¼ï¼Œç†è®ºä¸Šéœ€è¦è®¡ç®—256æ¬¡ï¼Œå› ä¸º00å‡ºç°çš„æ¦‚ç‡æ˜¯16^2=256ï¼Œå®é™…è®¡ç®—44æ¬¡ï¼š\nhash256(&quot;Hello44&quot;) &#x3D; 00e477f95283a544ffac7a8efc7decb887f5c073e0f3b43b3797b5dafabb49b5\nå¦‚æœæˆ‘ä»¬è¦æ‰¾å‡ºå‰6ä½æ˜¯0çš„å“ˆå¸Œå€¼ï¼Œç†è®ºä¸Šéœ€è¦è®¡ç®—16^6=1677ä¸‡æ¬¡ï¼Œå®é™…è®¡ç®—1558ä¸‡æ¬¡ï¼š\nhash256(&quot;Hello15583041&quot;) &#x3D; 0000009becc5cf8c9e6ba81b1968575a1d15a93112d3bd67f4546f6172ef7e76\næ¯å¢åŠ ä¸€ä¸ª0ï¼Œç†è®ºè®¡ç®—é‡å°†å¢åŠ 16å€ã€‚\nå¯¹äºæ¯”ç‰¹å¸æŒ–çŸ¿æ¥è¯´ï¼Œå°±æ˜¯å…ˆç»™å®šä¸€ä¸ªéš¾åº¦å€¼ï¼Œç„¶åä¸æ–­å˜æ¢nonceï¼Œè®¡ç®—Block Hashï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªæ¯”ç»™å®šéš¾åº¦å€¼ä½çš„Block Hashï¼Œå°±ç®—æˆåŠŸæŒ–çŸ¿ã€‚\næˆ‘ä»¬ç”¨ç®€åŒ–çš„æ–¹æ³•æ¥è¯´æ˜éš¾åº¦ï¼Œä¾‹å¦‚ï¼Œå¿…é¡»è®¡ç®—å‡ºè¿ç»­17ä¸ª0å¼€å¤´çš„å“ˆå¸Œå€¼ï¼ŒçŸ¿å·¥å…ˆç¡®å®šPrev Hashï¼ŒMerkle Hashï¼ŒTimestampï¼Œbitsï¼Œç„¶åï¼Œä¸æ–­å˜åŒ–nonceæ¥è®¡ç®—å“ˆå¸Œï¼Œç›´åˆ°æ‰¾å‡ºè¿ç»­17ä¸ª0å¼€å¤´çš„å“ˆå¸Œå€¼ã€‚æˆ‘ä»¬å¯ä»¥å¤§è‡´æ¨ç®—ä¸€ä¸‹ï¼Œ17ä¸ªåå…­è¿›åˆ¶çš„0ç›¸å½“äºè®¡ç®—äº†1617æ¬¡ï¼Œå¤§çº¦éœ€è¦è®¡ç®—2.9ä¸‡äº¿äº¿æ¬¡ã€‚\n17ä¸ª0 &#x3D; 16^17 &#x3D; 295147905179352825856 &#x3D; 2.9ä¸‡äº¿äº¿æ¬¡\nå®é™…çš„éš¾åº¦æ˜¯æ ¹æ®bitsç”±ä¸€ä¸ªå…¬å¼è®¡ç®—å‡ºæ¥ï¼Œæ¯”ç‰¹å¸åè®®è¦æ±‚è®¡ç®—å‡ºçš„åŒºå—çš„å“ˆå¸Œå€¼æ¯”éš¾åº¦å€¼è¦å°ï¼Œè¿™ä¸ªåŒºå—æ‰ç®—æœ‰æ•ˆã€‚ä¾‹å¦‚ï¼š\nDifficulty &#x3D; 402937298\n           &#x3D; 0x180455d2\n           &#x3D; 0x0455d2 * 2^(8 * (0x18 - 3))\n           &#x3D; 106299667504289830835845558415962632664710558339861315584\n           &#x3D; 0x00000000000000000455d2000000000000000000000000000000000000000000\nä¸Šè¿°è®¡ç®—è¿‡ç¨‹ï¼Œ0x180455d2æ˜¯å‹ç¼©çš„éš¾åº¦æ ‡è®°ï¼Œæœ«3å­—èŠ‚ä½œä¸ºåº•ï¼Œå‰é¢0x18ä½œä¸ºå¹‚ï¼Œåšä¸Šè¿°è¿ç®—å¾—åˆ°éš¾åº¦å€¼ã€‚\næ³¨æ„ï¼Œéš¾åº¦å€¼è¶Šå°ï¼Œè¯´æ˜å“ˆå¸Œå€¼å‰é¢çš„0è¶Šå¤šï¼Œè®¡ç®—éš¾åº¦è¶Šå¤§ã€‚\n éš¾åº¦è°ƒæ•´\næ¯”ç‰¹å¸ç½‘ç»œçš„éš¾åº¦å€¼æ˜¯ä¸æ–­å˜åŒ–çš„ï¼Œå®ƒçš„éš¾åº¦å€¼ä¿è¯å¤§çº¦æ¯10åˆ†é’Ÿäº§ç”Ÿä¸€ä¸ªåŒºå—ï¼Œè€Œéš¾åº¦å€¼åœ¨æ¯2015ä¸ªåŒºå—è°ƒæ•´ä¸€æ¬¡ï¼šå¦‚æœåŒºå—å¹³å‡ç”Ÿæˆæ—¶é—´å°äº10åˆ†é’Ÿï¼Œè¯´æ˜å…¨ç½‘ç®—åŠ›å¢åŠ ï¼Œéš¾åº¦å€¼ä¹Ÿä¼šå¢åŠ ï¼Œå¦‚æœåŒºå—å¹³å‡ç”Ÿæˆæ—¶é—´å¤§äº10åˆ†é’Ÿï¼Œè¯´æ˜å…¨ç½‘ç®—åŠ›å‡å°‘ï¼Œéš¾åº¦å€¼ä¹Ÿä¼šå‡å°‘ã€‚å› æ­¤ï¼Œéš¾åº¦å€¼éšç€å…¨ç½‘ç®—åŠ›çš„å¢å‡ä¼šåŠ¨æ€è°ƒæ•´ã€‚\nå…³äºæ¯”ç‰¹å¸æŒ–çŸ¿éš¾åº¦ä¸æ”¶ç›Šè®¡ç®—å¯ä»¥å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/28805231\n\næ¯”ç‰¹å¸è®¾è®¡æ—¶æœ¬æ¥æ‰“ç®—æ¯2016ä¸ªåŒºå—è°ƒæ•´ä¸€æ¬¡éš¾åº¦ï¼Œä¹Ÿå°±æ˜¯ä¸¤å‘¨ä¸€æ¬¡ï¼Œä½†æ˜¯ç”±äºç¬¬ä¸€ç‰ˆä»£ç çš„ä¸€ä¸ªbugï¼Œå®é™…è°ƒæ•´å‘¨æœŸæ˜¯2015ä¸ªåŒºå—ã€‚\n\næ ¹æ®æ¯”ç‰¹å¸æ¯ä¸ªåŒºå—çš„éš¾åº¦å€¼å’Œäº§å‡ºæ—¶é—´ï¼Œå°±å¯ä»¥æ¨ç®—å‡ºæ•´ä¸ªæ¯”ç‰¹å¸ç½‘ç»œçš„å…¨ç½‘ç®—åŠ›ã€‚\næ¯”ç‰¹å¸ç½‘ç»œçš„å…¨ç½‘ç®—åŠ›ä¸€ç›´åœ¨è¿…é€Ÿå¢åŠ ã€‚ç›®å‰ï¼Œå…¨ç½‘ç®—åŠ›å·²ç»è¶…è¿‡äº†100EH/æ¯ç§’ï¼Œä¹Ÿå°±æ˜¯å¤§çº¦æ¯ç§’é’Ÿè®¡ç®—1ä¸‡äº¿äº¿æ¬¡å“ˆå¸Œï¼š\n\næ‰€ä»¥æ¯”ç‰¹å¸çš„å·¥ä½œé‡è¯æ˜è¢«é€šä¿—åœ°ç§°ä¹‹ä¸ºæŒ–çŸ¿ã€‚åœ¨åŒä¸€æ—¶é—´ï¼Œæ‰€æœ‰çŸ¿å·¥éƒ½åœ¨åŠªåŠ›è®¡ç®—ä¸‹ä¸€ä¸ªåŒºå—çš„å“ˆå¸Œã€‚è€ŒæŒ–çŸ¿éš¾åº¦å–å†³äºå…¨ç½‘æ€»ç®—åŠ›çš„ç™¾åˆ†æ¯”ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾å°æ˜æ‹¥æœ‰å…¨ç½‘æ€»ç®—åŠ›çš„ç™¾åˆ†ä¹‹ä¸€ï¼Œé‚£ä¹ˆä»–æŒ–åˆ°ä¸‹ä¸€ä¸ªåŒºå—çš„å¯èƒ½æ€§å°±æ˜¯1%ï¼Œæˆ–è€…è¯´ï¼Œæ¯æŒ–å‡º100ä¸ªåŒºå—ï¼Œå¤§çº¦æœ‰1ä¸ªå°±æ˜¯å°æ˜æŒ–çš„ã€‚\nç”±äºç›®å‰å…¨ç½‘ç®—åŠ›è¶…è¿‡äº†100EH/sï¼Œè€Œå•æœºCPUç®—åŠ›ä¸è¿‡å‡ Mï¼ŒGPUç®—åŠ›ä¹Ÿä¸è¿‡1Gï¼Œæ‰€ä»¥ï¼Œå•æœºæŒ–çŸ¿çš„æˆåŠŸç‡å‡ ä¹ç­‰äº0ã€‚æ¯”ç‰¹å¸æŒ–çŸ¿å·²ç»ä»æ—©æœŸçš„CPUã€GPUå‘å±•åˆ°ä¸“ç”¨çš„ASICèŠ¯ç‰‡æ„å»ºçš„çŸ¿æ± æŒ–çŸ¿ã€‚\n\nå½“æŸä¸ªçŸ¿å·¥æˆåŠŸæ‰¾åˆ°ç‰¹å®šå“ˆå¸Œçš„æ–°åŒºå—åï¼Œä»–ä¼šç«‹åˆ»å‘å…¨ç½‘å¹¿æ’­è¯¥åŒºå—ã€‚å…¶ä»–çŸ¿å·¥åœ¨æ”¶åˆ°æ–°åŒºå—åï¼Œä¼šå¯¹æ–°åŒºå—è¿›è¡ŒéªŒè¯ï¼Œå¦‚æœæœ‰æ•ˆï¼Œå°±æŠŠå®ƒæ·»åŠ åˆ°åŒºå—é“¾çš„å°¾éƒ¨ã€‚åŒæ—¶è¯´æ˜ï¼Œåœ¨æœ¬è½®å·¥ä½œé‡è¯æ˜çš„ç«äº‰ä¸­ï¼Œè¿™ä¸ªçŸ¿å·¥èƒœå‡ºï¼Œè€Œå…¶ä»–çŸ¿å·¥éƒ½å¤±è´¥äº†ã€‚å¤±è´¥çš„çŸ¿å·¥ä¼šæŠ›å¼ƒè‡ªå·±å½“å‰æ­£åœ¨è®¡ç®—è¿˜æ²¡æœ‰ç®—å®Œçš„åŒºå—ï¼Œè½¬è€Œå¼€å§‹è®¡ç®—ä¸‹ä¸€ä¸ªåŒºå—ï¼Œè¿›è¡Œä¸‹ä¸€è½®å·¥ä½œé‡è¯æ˜çš„ç«äº‰ã€‚\nä¸ºä»€ä¹ˆåŒºå—å¯ä»¥å®‰å…¨å¹¿æ’­ï¼Ÿå› ä¸ºMerkle Hashé”å®šäº†è¯¥åŒºå—çš„æ‰€æœ‰äº¤æ˜“ï¼Œè€Œè¯¥åŒºå—çš„ç¬¬ä¸€ä¸ªCoinbaseäº¤æ˜“è¾“å‡ºåœ°å€æ˜¯è¯¥çŸ¿å·¥åœ°å€ã€‚æ¯ä¸ªçŸ¿å·¥åœ¨æŒ–çŸ¿æ—¶äº§ç”Ÿçš„åŒºå—æ•°æ®éƒ½æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥æ— æ³•çªƒå–åˆ«äººçš„å·¥ä½œé‡ã€‚\næ¯”ç‰¹å¸æ€»é‡è¢«é™åˆ¶ä¸ºçº¦2100ä¸‡ä¸ªæ¯”ç‰¹å¸ï¼Œåˆå§‹æŒ–çŸ¿å¥–åŠ±ä¸ºæ¯ä¸ªåŒºå—50ä¸ªæ¯”ç‰¹å¸ï¼Œä»¥åæ¯4å¹´å‡åŠã€‚\n å…±è¯†ç®—æ³•\nå¦‚æœä¸¤ä¸ªçŸ¿å·¥åœ¨åŒä¸€æ—¶é—´å„è‡ªæ‰¾åˆ°äº†æœ‰æ•ˆåŒºå—ï¼Œæ³¨æ„ï¼Œè¿™ä¸¤ä¸ªåŒºå—æ˜¯ä¸åŒçš„ï¼Œå› ä¸ºcoinbaseäº¤æ˜“ä¸åŒï¼Œæ‰€ä»¥Merkle Hashä¸åŒï¼ŒåŒºå—å“ˆå¸Œä¹Ÿä¸åŒã€‚ä½†å®ƒä»¬åªè¦ç¬¦åˆéš¾åº¦å€¼ï¼Œå°±éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚è¿™ä¸ªæ—¶å€™ï¼Œç½‘ç»œä¸Šçš„å…¶ä»–çŸ¿å·¥åº”è¯¥æ¥æ”¶å“ªä¸ªåŒºå—å¹¶æ·»åŠ åˆ°åŒºå—é“¾çš„æœ«å°¾å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼Œéƒ½æœ‰å¯èƒ½ã€‚\né€šå¸¸ï¼ŒçŸ¿å·¥æ¥æ”¶å…ˆæ”¶åˆ°çš„æœ‰æ•ˆåŒºå—ï¼Œç”±äºP2Pç½‘ç»œå¹¿æ’­çš„é¡ºåºæ˜¯ä¸ç¡®å®šçš„ï¼Œä¸åŒçš„çŸ¿å·¥å…ˆæ”¶åˆ°çš„åŒºå—æ˜¯æœ‰å¯èƒ½çš„ä¸åŒçš„ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬è¯´åŒºå—å‘ç”Ÿäº†åˆ†å‰ï¼š\n\nåœ¨åˆ†å‰çš„æƒ…å†µä¸‹ï¼Œæœ‰çš„çŸ¿å·¥åœ¨ç»¿è‰²çš„åˆ†å‰ä¸Šç»§ç»­æŒ–çŸ¿ï¼Œæœ‰çš„çŸ¿å·¥åœ¨è“è‰²çš„åˆ†å‰ä¸Šç»§ç»­æŒ–çŸ¿ï¼š\n\nä½†æ˜¯æœ€ç»ˆï¼Œæ€»æœ‰ä¸€ä¸ªåˆ†å‰é¦–å…ˆæŒ–åˆ°åç»­åŒºå—ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œç”±äºæ¯”ç‰¹å¸ç½‘ç»œé‡‡ç”¨æœ€é•¿åˆ†å‰çš„å…±è¯†ç®—æ³•ï¼Œç»¿è‰²åˆ†å‰èƒœå‡ºï¼Œè“è‰²åˆ†å‰è¢«åºŸå¼ƒï¼Œæ•´ä¸ªç½‘ç»œä¸Šçš„æ‰€æœ‰çŸ¿å·¥åˆä¼šç»§ç»­åœ¨æœ€é•¿çš„é“¾ä¸Šç»§ç»­æŒ–çŸ¿ã€‚\nç”±äºåŒºå—é“¾è™½ç„¶æœ€ç»ˆä¼šä¿æŒæ•°æ®ä¸€è‡´ï¼Œä½†æ˜¯ï¼Œä¸€ä¸ªäº¤æ˜“å¯èƒ½è¢«æ‰“åŒ…åˆ°ä¸€ä¸ªåç»­è¢«å­¤ç«‹çš„åŒºå—ä¸­ã€‚æ‰€ä»¥ï¼Œè¦ç¡®è®¤ä¸€ä¸ªäº¤æ˜“è¢«æ°¸ä¹…è®°å½•åˆ°åŒºå—é“¾ä¸­ï¼Œéœ€è¦å¯¹äº¤æ˜“è¿›è¡Œç¡®è®¤ã€‚å¦‚æœåç»­çš„åŒºå—è¢«è¿½åŠ åˆ°åŒºå—é“¾ä¸Šï¼Œå®é™…ä¸Šå°±ä¼šå¯¹åŸæœ‰çš„äº¤æ˜“è¿›è¡Œç¡®è®¤ï¼Œå› ä¸ºé“¾è¶Šé•¿ï¼Œä¿®æ”¹çš„éš¾åº¦è¶Šå¤§ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç»è¿‡6ä¸ªåŒºå—ç¡®è®¤çš„äº¤æ˜“å‡ ä¹æ˜¯ä¸å¯èƒ½è¢«ä¿®æ”¹çš„ã€‚\n\n\n0x3 æŒ–çŸ¿åŸç†å°ç»“\næ¯”ç‰¹å¸æŒ–çŸ¿æ˜¯ä¸€ç§å¸¦ç»æµæ¿€åŠ±çš„å·¥ä½œé‡è¯æ˜æœºåˆ¶\nå·¥ä½œé‡è¯æ˜ä¿è¯äº†ä¿®æ”¹åŒºå—é“¾éœ€è¦æé«˜çš„æˆæœ¬ï¼Œä»è€Œä½¿å¾—åŒºå—é“¾çš„ä¸å¯ç¯¡æ”¹ç‰¹æ€§å¾—åˆ°ä¿æŠ¤\næ¯”ç‰¹å¸çš„ç½‘ç»œå®‰å…¨å®é™…ä¸Šå°±æ˜¯ä¾é å¼ºå¤§çš„ç®—åŠ›ä¿éšœçš„\næ¯”ç‰¹å¸ç½‘ç»œçš„éš¾åº¦å€¼æ˜¯ä¸æ–­å˜åŒ–çš„ï¼Œå®ƒçš„éš¾åº¦å€¼ä¿è¯å¤§çº¦æ¯10åˆ†é’Ÿäº§ç”Ÿä¸€ä¸ªåŒºå—\næœ€é•¿åˆ†å‰å…±è¯†ç®—æ³•ä¿è¯äº†åŒºå—é“¾ç½‘ç»œä¸­åªæœ‰ä¸€æ¡åˆæ³•é“¾å­˜åœ¨\n\n 0x4 æ›´å¤šç»†èŠ‚\né€šè¿‡ä¸Šé¢çš„å™è¿°ï¼Œç›¸ä¿¡ä½ å·²ç»ç†è§£äº†åŒºå—é“¾çš„åŸºæœ¬åŸç†å’Œæ¯”ç‰¹å¸çš„äº¤æ˜“æ–¹å¼ã€‚æœ¬èŠ‚è®²ç¬¼ç»Ÿçš„å™è¿°ä¸€äº›ç»†èŠ‚ä¸Šçš„æ¦‚å¿µå’ŒåŸç†ï¼Œä¸å†å±•å¼€æ„Ÿå…´è¶£çš„è¯å¯ä»¥å»å»–é›ªå³°è€å¸ˆçš„ç½‘ç«™ä¸Šäº†è§£ç»†èŠ‚ã€‚\n å¯ç¼–ç¨‹æ”¯ä»˜åŸç†\næ¯”ç‰¹å¸çš„æ‰€æœ‰äº¤æ˜“çš„ä¿¡æ¯éƒ½è¢«è®°å½•åœ¨æ¯”ç‰¹å¸çš„åŒºå—é“¾ä¸­ï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥é€šè¿‡å…¬é’¥æŸ¥è¯¢åˆ°æŸä¸ªäº¤æ˜“çš„è¾“å…¥å’Œè¾“å‡ºé‡‘é¢ã€‚å½“æŸä¸ªç”¨æˆ·å¸Œæœ›èŠ±è´¹ä¸€ä¸ªè¾“å‡ºæ—¶ï¼Œä¾‹å¦‚ï¼Œå°æ˜æƒ³è¦æŠŠæŸä¸ªå…¬é’¥åœ°å€çš„è¾“å‡ºæ”¯ä»˜ç»™å°çº¢ï¼Œä»–å°±éœ€è¦ä½¿ç”¨è‡ªå·±çš„ç§é’¥å¯¹è¿™ç¬”äº¤æ˜“è¿›è¡Œç­¾åï¼Œè€ŒçŸ¿å·¥éªŒè¯è¿™ç¬”äº¤æ˜“çš„ç­¾åæ˜¯æœ‰æ•ˆçš„ä¹‹åï¼Œå°±ä¼šæŠŠè¿™ç¬”äº¤æ˜“æ‰“åŒ…åˆ°åŒºå—ä¸­ï¼Œä»è€Œä½¿å¾—è¿™ç¬”äº¤æ˜“è¢«ç¡®è®¤ã€‚\nä½†æ¯”ç‰¹å¸çš„æ”¯ä»˜å®é™…ä¸Šå¹¶ä¸æ˜¯ç›´æ¥æ”¯ä»˜åˆ°å¯¹æ–¹çš„åœ°å€ï¼Œè€Œæ˜¯ä¸€ä¸ªè„šæœ¬ï¼Œè¿™ä¸ªè„šæœ¬çš„æ„æ€æ˜¯ï¼šè°èƒ½å¤Ÿæä¾›å¦å¤–ä¸€ä¸ªè„šæœ¬ï¼Œè®©è¿™ä¸¤ä¸ªè„šæœ¬èƒ½é¡ºåˆ©æ‰§è¡Œé€šè¿‡ï¼Œè°å°±èƒ½èŠ±æ‰è¿™ç¬”é’±ã€‚\næ¯”ç‰¹å¸çš„è„šæœ¬é€šè¿‡ä¸åŒçš„æŒ‡ä»¤è¿˜å¯ä»¥å®ç°æ›´çµæ´»çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå¤šé‡ç­¾åå¯ä»¥è®©ä¸€ç¬”äº¤æ˜“åªæœ‰åœ¨å¤šæ•°äººåŒæ„çš„æƒ…å†µä¸‹æ‰èƒ½å¤Ÿè¿›è¡Œã€‚æœ€å¸¸è§çš„å¤šé‡ç­¾åè„šæœ¬å¯ä»¥æä¾›3ä¸ªç­¾åï¼Œåªè¦ä»»æ„ä¸¤ä¸ªç­¾åè¢«éªŒè¯æˆåŠŸï¼Œè¿™ç¬”äº¤æ˜“å°±å¯ä»¥æˆåŠŸã€‚\næ”¯ä»˜çš„æœ¬è´¨\nä»æ¯”ç‰¹å¸æ”¯ä»˜çš„è„šæœ¬å¯ä»¥çœ‹å‡ºï¼Œæ¯”ç‰¹å¸æ”¯ä»˜çš„æœ¬è´¨æ˜¯ç”±ç¨‹åºè§¦å‘çš„æ•°å­—èµ„äº§è½¬ç§»ã€‚è¿™ç§æ”¯ä»˜æ–¹å¼æ— éœ€ä¿¡ä»»ä¸­ä»‹çš„å‚ä¸ï¼Œå¯ä»¥åœ¨é›¶ä¿¡ä»»çš„åŸºç¡€ä¸Šå®Œæˆæ•°å­—èµ„äº§çš„äº¤æ˜“ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ•°å­—è´§å¸åˆè¢«ç§°ä¸ºå¯ç¼–ç¨‹çš„è´§å¸ã€‚\nç”±æ­¤å‚¬ç”Ÿå‡ºäº†æ™ºèƒ½åˆçº¦ï¼šå½“ä¸€ä¸ªé¢„å…ˆç¼–å¥½çš„æ¡ä»¶è¢«è§¦å‘æ—¶ï¼Œæ™ºèƒ½åˆçº¦å¯ä»¥è‡ªåŠ¨æ‰§è¡Œç›¸åº”çš„ç¨‹åºï¼Œè‡ªåŠ¨å®Œæˆæ•°å­—èµ„äº§çš„è½¬ç§»ã€‚ä¿é™©ã€è´·æ¬¾ç­‰é‡‘èæ´»åŠ¨åœ¨å°†æ¥éƒ½å¯ä»¥ä»¥æ™ºèƒ½åˆçº¦çš„å½¢å¼æ‰§è¡Œã€‚æ™ºèƒ½åˆçº¦ä»¥ç¨‹åºæ¥æ›¿ä»£ä¼ ç»Ÿçš„çº¸è´¨æ–‡ä»¶æ¡æ¬¾ï¼Œå¹¶ç”±è®¡ç®—æœºå¼ºåˆ¶æ‰§è¡Œï¼Œå°†å…·æœ‰æ›´é«˜çš„æ›´ä½çš„ä¿¡ä»»æˆæœ¬å’Œè¿è¥æˆæœ¬ã€‚\n å¤šé‡ç­¾å\nç”±æ¯”ç‰¹å¸çš„ç­¾åæœºåˆ¶å¯çŸ¥ï¼Œå¦‚æœä¸¢å¤±äº†ç§é’¥ï¼Œæ²¡æœ‰ä»»ä½•åŠæ³•å¯ä»¥èŠ±è´¹å¯¹åº”åœ°å€çš„èµ„é‡‘ã€‚\nè¿™æ ·å°±ä½¿å¾—å› ä¸ºä¸¢å¤±ç§é’¥å¯¼è‡´èµ„é‡‘ä¸¢å¤±çš„é£é™©ä¼šå¾ˆé«˜ã€‚ä¸ºäº†é¿å…ä¸€ä¸ªç§é’¥çš„ä¸¢å¤±å¯¼è‡´åœ°å€çš„èµ„é‡‘ä¸¢å¤±ï¼Œæ¯”ç‰¹å¸å¼•å…¥äº†å¤šé‡ç­¾åæœºåˆ¶ï¼Œå¯ä»¥å®ç°åˆ†æ•£é£é™©çš„åŠŸèƒ½ã€‚\nå…·ä½“æ¥è¯´ï¼Œå°±æ˜¯å‡è®¾Nä¸ªäººåˆ†åˆ«æŒæœ‰Nä¸ªç§é’¥ï¼Œåªè¦å…¶ä¸­Mä¸ªäººåŒæ„ç­¾åå°±å¯ä»¥åŠ¨ç”¨æŸä¸ªâ€œè”åˆåœ°å€â€çš„èµ„é‡‘ã€‚\n\nä»¥3å¼€å¤´çš„åœ°å€å°±æ˜¯æ¯”ç‰¹å¸çš„å¤šé‡ç­¾ååœ°å€ï¼Œä½†ä»åœ°å€æœ¬èº«æ— æ³•å¾—çŸ¥ç­¾åæ‰€éœ€çš„M/Nã€‚\n\n UTXOæ¨¡å‹\næ¯”ç‰¹å¸çš„åŒºå—é“¾ç”±ä¸€ä¸ªä¸ªåŒºå—ä¸²è”æ„æˆï¼Œè€Œæ¯ä¸ªåŒºå—åˆåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªäº¤æ˜“ã€‚\nå¦‚æœæˆ‘ä»¬è§‚å¯Ÿä»»ä½•ä¸€ä¸ªäº¤æ˜“ï¼Œå®ƒæ€»æ˜¯ç”±è‹¥å¹²ä¸ªè¾“å…¥ï¼ˆInputï¼‰å’Œè‹¥å¹²ä¸ªè¾“å‡ºï¼ˆOutputï¼‰æ„æˆï¼Œä¸€ä¸ªInputæŒ‡å‘çš„æ˜¯å‰é¢åŒºå—çš„æŸä¸ªOutputï¼Œåªæœ‰Coinbaseäº¤æ˜“ï¼ˆçŸ¿å·¥å¥–åŠ±çš„é“¸å¸äº¤æ˜“ï¼‰æ²¡æœ‰è¾“å…¥ï¼Œåªæœ‰å‡­ç©ºè¾“å‡ºã€‚æ‰€ä»¥ï¼Œä»»ä½•äº¤æ˜“ï¼Œæ€»æ˜¯å¯ä»¥ç”±Inputæº¯æºåˆ°Coinbaseäº¤æ˜“ã€‚\nè¿˜æ²¡æœ‰è¢«ä¸‹ä¸€ä¸ªäº¤æ˜“èŠ±è´¹çš„Outputè¢«ç§°ä¸ºUTXOï¼šUnspent TX Outputï¼Œå³æœªèŠ±è´¹äº¤æ˜“è¾“å‡ºã€‚ç»™å®šä»»ä½•ä¸€ä¸ªåŒºå—ï¼Œè®¡ç®—å½“å‰æ‰€æœ‰çš„UXTOé‡‘é¢ä¹‹å’Œï¼Œç­‰åŒäºè‡ªåˆ›ä¸–åŒºå—åˆ°ç»™å®šåŒºå—çš„æŒ–çŸ¿å¥–åŠ±ä¹‹å’Œã€‚\né’±åŒ…çš„å½“å‰ä½™é¢æ€»æ˜¯é’±åŒ…åœ°å€å…³è”çš„æ‰€æœ‰UTXOé‡‘é¢ä¹‹å’Œã€‚\nå¦‚æœåˆšè£…äº†ä¸€ä¸ªæ–°é’±åŒ…ï¼Œå¯¼å…¥äº†ä¸€ç»„ç§é’¥ï¼Œåœ¨é’±åŒ…æ‰«æå®Œæ•´ä¸ªæ¯”ç‰¹å¸åŒºå—ä¹‹å‰ï¼Œæ˜¯æ— æ³•å¾—çŸ¥å½“å‰ç®¡ç†çš„åœ°å€ä½™é¢çš„ã€‚\né‚£ä¹ˆï¼Œç»™å®šä¸€ä¸ªåœ°å€ï¼Œè¦æŸ¥è¯¢è¯¥åœ°å€çš„ä½™é¢ï¼Œéš¾é“è¦ä»å¤´æ‰«æå‡ ç™¾GBçš„åŒºå—é“¾æ•°æ®ï¼Ÿ\nå½“ç„¶ä¸æ˜¯ã€‚\nè¦åšåˆ°ç¬æ—¶æŸ¥è¯¢ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œä½¿ç”¨å…³ç³»æ•°æ®åº“çš„ä¸»é”®è¿›è¡ŒæŸ¥è¯¢ï¼Œç”±äºç”¨äº†ç´¢å¼•ï¼Œé€Ÿåº¦æå¿«ã€‚\nå› æ­¤ï¼Œå¯¹åŒºå—é“¾è¿›è¡ŒæŸ¥è¯¢ä¹‹å‰ï¼Œé¦–å…ˆè¦æ‰«ææ•´ä¸ªåŒºå—é“¾ï¼Œé‡å»ºä¸€ä¸ªç±»ä¼¼å…³ç³»æ•°æ®åº“çš„åœ°å€-ä½™é¢æ˜ å°„è¡¨ã€‚è¿™ä¸ªè¡¨çš„ç»“æ„å¦‚ä¸‹ï¼š\n\n\n\naddress\nbalance\nlastUpdatedAtBlock\n\n\n\n\naddress-1\n50.0\n0\n\n\n\nä¸€å¼€å§‹ï¼Œè¿™æ˜¯ä¸€ä¸ªç©ºè¡¨ã€‚æ¯å½“æ‰«æä¸€ä¸ªåŒºå—çš„æ‰€æœ‰äº¤æ˜“åï¼ŒæŸäº›åœ°å€çš„ä½™é¢å¢åŠ ï¼Œå¦ä¸€äº›åœ°å€çš„ä½™é¢å‡å°‘ï¼Œä¸¤è€…ä¹‹å·®æ°å¥½ä¸ºåŒºå—å¥–åŠ±ï¼š\n\n\n\naddress\nbalance\nlastUpdatedAtBlock\n\n\n\n\naddress-1\n50.0\n0\n\n\naddress-2\n40.0\n3\n\n\naddress-3\n50.0\n3\n\n\naddress-4\n10.0\n3\n\n\n\nè¿™æ ·ï¼Œæ‰«æå®Œæ‰€æœ‰åŒºå—åï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†æ•´ä¸ªåŒºå—é“¾æ‰€æœ‰åœ°å€çš„å®Œæ•´ä½™é¢è®°å½•ï¼ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯ä»åŒºå—é“¾æŸ¥è¯¢ï¼Œè€Œæ˜¯ä»æœ¬åœ°æ•°æ®åº“æŸ¥è¯¢ã€‚å¤§å¤šæ•°é’±åŒ…ç¨‹åºä½¿ç”¨LevelDBæ¥å­˜å‚¨è¿™äº›ä¿¡æ¯ï¼Œæ‰‹æœºé’±åŒ…ç¨‹åºåˆ™æ˜¯è¯·æ±‚æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨æŸ¥è¯¢æ•°æ®åº“åè¿”å›ç»“æœã€‚\næ€»è€Œè¨€ä¹‹ï¼Œé‡å»ºæ•´ä¸ªåœ°å€-ä½™é¢æ•°æ®åº“éœ€è¦æ‰«ææ•´ä¸ªåŒºå—é“¾ï¼Œå¹¶æŒ‰æ¯ä¸ªäº¤æ˜“ä¾æ¬¡æ›´æ–°è®°å½•ï¼Œå³å¯å¾—åˆ°å½“å‰çŠ¶æ€ï¼Œæ¯å½“æ–°çš„å—åŠ å…¥åŒºå—é“¾ï¼Œæ•°æ®åº“ä¹ŸåŒæ—¶æ›´æ–°ã€‚æ­¤åï¼ŒæŸ¥è¯¢ä½™é¢åªéœ€è¦ä»æ•°æ®åº“æŸ¥è¯¢å³å¯ã€‚\n 0x5 Q&amp;A\n\n\nQï¼šåŒºå—é“¾çš„å®‰å…¨æ€§ç”±å“ªäº›å› ç´ å†³å®šï¼Ÿ\næˆ‘è®¤ä¸ºåŒºå—é“¾çš„å®‰å…¨æ€§ä¸»è¦ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†å†³å®šï¼š\næ•°å­—ç­¾åå®‰å…¨æ€§ï¼šé‡‡å–çš„ECDSAæˆ–å…¶ä»–éå¯¹ç§°åŠ å¯†ç®—æ³•çš„å®‰å…¨æ€§\nå·¥ä½œé‡è¯æ˜æœºåˆ¶å®‰å…¨æ€§ï¼šæ¯”å¦‚æ¯”ç‰¹å¸ç½‘ç»œä¸­ï¼Œhashç®—æ³•çš„é˜²æ­¢ç¢°æ’çš„å¼ºåº¦\nåŒºå—é“¾ç½‘ç»œå®‰å…¨æ€§ï¼šå­˜åœ¨è¶³å¤Ÿå¤šçš„â€œçŸ¿å·¥â€èŠ‚ç‚¹ï¼Œä¿è¯åŒºå—ä¸æ–­æ›´æ–°\n\n\nQï¼šåŒºå—é“¾ä¸­æ¯ä¸ªåŒºå—éƒ½åŒ…å«é‚£äº›å…ƒç´ ï¼Œè¿™äº›å…ƒç´ æ˜¯æ€ä¹ˆå¾—æ¥çš„ï¼Œä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\nä»¥æ¯”ç‰¹å¸ç½‘ç»œä¸ºä¾‹ä¸»è¦åŒ…æ‹¬ï¼š\nçˆ¶åŒºå—hashï¼š=hash(çˆ¶åŒºå—)\nMerkleæ ¹ï¼šæŒ‰åºhashåŒºå—ä½“ä¸­çš„è®°å½•\néš¾åº¦ç›®æ ‡ï¼šå·¥ä½œé‡è¯æ˜æœºåˆ¶çš„ç›®æ ‡ï¼Œè®¡ç®—æ–¹æ³•å‚è€ƒ0x3-å·¥ä½œé‡è¯æ˜\næ—¶é—´æˆ³ï¼šåšå·¥ä½œé‡è¯æ˜ä¹‹å‰ä¼°è®¡ä¸€ä¸ªå€¼å°±å¯ä»¥ï¼Œè¦æ¯”ä¸Šä¸€ä¸ªåŒºå—å¤§\nnonceï¼šéœ€è¦ä¸æ–­å˜åŒ–ï¼Œè®¡ç®—åŒºå—hashï¼Œä»¥è¯æ˜å·¥ä½œé‡\nåŒºå—å¤§å°ï¼šå¦‚å\nåŒºå—ä½“ï¼šäº¤æ˜“è®°å½•\n\n\nQï¼šp2päº¤æ˜“å¦‚æ¯”ç‰¹å¸äº¤æ˜“ï¼Œæ¯ä¸ªå—èƒ½å­˜å‚¨å¤šå°‘ç¬”äº¤æ˜“ï¼Ÿ\nç›®å‰ä¸€ä¸ªæ¯”ç‰¹å¸åŒºå—ä¸­çº¦æœ‰2000-3000ç¬”äº¤æ˜“ã€‚æˆ‘çš„ç†è§£æ˜¯ï¼šå…·ä½“å¤šå°‘æ˜¯ç”±æ¯”ç‰¹å¸ç½‘ç»œè§„å®šçš„ä¿è¯çº¦10åˆ†é’Ÿæ‰“åŒ…ä¸€ä¸ªåŒºå—ï¼Œè¿™10åˆ†é’Ÿäº§ç”Ÿçš„äº¤æ˜“æ•°é‡å†³å®šçš„ã€‚\n\n\nQï¼šæŒ–çŸ¿çš„å·¥ä½œé‡æ•´æ˜ï¼Œå®é™…ä¸Šæ˜¯æ€ä¹ˆåšçš„ï¼Ÿ\nå®é™…ä¸Šå°±æ˜¯é€šè¿‡å˜æ¢åŒºå—å¤´ä¸­çš„nonceçš„å€¼ï¼Œè®¡ç®—æ•´ä¸ªåŒºå—çš„hashå€¼ï¼Œè¦æ±‚hashå€¼å‰nä½æ˜¯0ï¼Œå¦‚æœè®¡ç®—å‡ºæ¥äº†ï¼Œä½ å°±è·å¾—äº†è¿™ä¸ªåŒºå—çš„æ‰“åŒ…æƒåŠ›ï¼Œå°±å¯ä»¥å‘åŒºå—é“¾ç½‘ç»œå‘å‡ºå¹¿æ’­ï¼Œä½ æŒ–äº†ä¸€ä¸ªæ–°åŒºå—ï¼Œè¿™ä¸ªåŒºå—ä¸­æœ‰ä¸€ç¬”äº¤æ˜“æ˜¯ç»™ä½ çš„é’±åŒ…æ·»åŠ ä¸€ç¬”æŒ–çŸ¿å¥–åŠ±ï¼Œæ¥æºå°±æ˜¯æ˜¯æŒ–çŸ¿ã€‚\nnæ˜¯éš¾åº¦çš„è±¡å¾ï¼Œæ¯”ç‰¹å¸ç½‘ç»œæ¯æŒ–å‡º2015ä¸ªåŒºå—è¿›è¡Œä¸€æ¬¡éš¾åº¦è°ƒæ•´ï¼Œç»´æŒ10åˆ†é’Ÿä¸€ä¸ªåŒºå—çš„éš¾åº¦ã€‚\n\n\nå‚è€ƒæ–‡ç« ï¼š\n\nå»–é›ªå³°åŒºå—é“¾æ•™ç¨‹ï¼šhttps://www.liaoxuefeng.com/wiki/1207298049439968\nSatoshi Nakamotoï¼šBitcoin: A Peer-to-Peer Electronic Cash System https://bitcoin.org/bitcoin.pdf\nhttps://www.bitmain.com/\né˜®ä¸€å³°æ•°å­—ç­¾åæ˜¯ä»€ä¹ˆï¼šhttp://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html\næ¯”ç‰¹å¸æŒ–çŸ¿éš¾åº¦ä¸æ”¶ç›Šè®¡ç®—ï¼šhttps://zhuanlan.zhihu.com/p/28805231\nhttps://www.528btc.com/college/58842.html\n\n","categories":["ç¬”è®°"],"tags":["åŒºå—é“¾","æ¯”ç‰¹å¸"]},{"title":"Transformer","url":"https://ch3nye.top/Transformer/","content":"\n Transformer\n\nTransformer ç°åœ¨æœ‰ä¸€ä¸ªéå¸¸æœ‰åçš„åº”ç”¨å°±æ˜¯BERTï¼Œè¿™ä¸€èŠ‚è¿˜ä¸ä¼šè®²åˆ°BERTï¼Œæˆ‘ä»¬å…ˆè®²Transformerã€‚BERTå°±æ˜¯æ— ç›‘ç£train çš„Transformerã€‚Transformeræ˜¯ä¸€ä¸ªseq2seq modelï¼Œä¹‹å‰è®²çš„è¯¾ç¨‹ä¸­æ•™è¿‡seq2seq model æ‰€ä»¥è¿™é‡Œå°±å‡è®¾å¤§å®¶éƒ½æ‡‚è¿™ä¸ªä¸œè¥¿ã€‚Transformerå®ƒç‰¹åˆ«çš„åœ°æ–¹å°±æ˜¯åœ¨seq2seq modelä¸­å¤§é‡ä½¿ç”¨äº†&quot;self attention&quot;è¿™ç§layerã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¦è®²çš„å°±æ˜¯&quot;self attention&quot;è¿™ç§layer å®ƒå…·ä½“æ˜¯åœ¨åšä»€ä¹ˆã€‚\n Sequence\nä¸€èˆ¬é‡åˆ°å¤„ç†sequence çš„é—®é¢˜æœ€å¸¸æƒ³åˆ°çš„model å°±æ˜¯RNNï¼Œæ— è®ºæ˜¯å•å‘è¿˜æ˜¯åŒå‘æ€»ä¹‹RNNå°±æ˜¯æ¯”è¾ƒé€‚åˆå¤„ç†è¾“å…¥æ˜¯sequence çš„é—®é¢˜ã€‚\n\nRNNçš„æ¶æ„å°±å¦‚ä¸Šå›¾å·¦ä¾§æ‰€ç¤ºï¼ˆBiDirectionalï¼‰ï¼Œå®ƒçš„è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯ä¸€ä¸ªvector ã€‚åœ¨å•å‘RNNä¸­åœ¨è¾“å‡ºb4çš„æ—¶å€™a1-a4å®ƒéƒ½çœ‹è¿‡äº†ï¼Œåœ¨è¾“å‡ºb3çš„æ—¶å€™a1-a3å®ƒéƒ½çœ‹è¿‡äº†ï¼Œåœ¨åŒå‘RNNä¸­ï¼Œåœ¨è¾“å‡ºä»»æ„ä¸€ä¸ªbçš„æ—¶å€™ï¼Œæ‰€æœ‰è¾“å…¥å®ƒéƒ½è¦çœ‹è¿‡ï¼Œæ‰€ä»¥å®ƒçš„é—®é¢˜æ˜¯ä¸å¥½åšå¹³è¡Œè¿ç®—çš„ï¼Œå› ä¸ºä»–è®¡ç®—åä¸€ä¸ªè¾“å…¥çš„æ—¶å€™è¦ä¾èµ–å‰ä¸€ä¸ªè¾“å…¥ã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰äººæå‡ºäº†ç”¨CNNæ›¿ä»£RNNçš„æƒ³æ³•ï¼Œå¦‚ä¸Šå›¾å³ä¾§æ‰€ç¤ºã€‚æ¯ä¸ªä¸‰è§’å½¢ä»£è¡¨ä¸€ä¸ªfilterï¼Œå®ƒå°±åƒè¾“å…¥çš„ä¸€å°æ®µï¼Œè¾“å‡ºä¸€ä¸ªæ•°å€¼ï¼Œfilteræ‰«è¿‡è¾“å…¥äº§ç”Ÿä¸€æ’è¾“å‡ºï¼Œå³ä¸Šå›¾ä¸€æ’çº¢è‰²çš„ç‚¹ï¼Œè¿˜ä¼šæœ‰å…¶ä»–çš„filter æ‰«è¿‡è¾“å…¥äº§ç”Ÿä¸€æ’è¾“å‡ºï¼Œå³ä¸Šå›¾é»„è‰²çš„ç‚¹â€¦è¿™äº›filter å¯ä»¥å¹³è¡Œè®¡ç®—ã€‚é‚£ä½ å°±ä¼šè¯´äº†ï¼ŒCNNå®ƒæ²¡æœ‰è€ƒè™‘æ‰€æœ‰è¾“å…¥ï¼ŒRNNæ˜¯çœ‹è¿‡æ‰€æœ‰è¾“å…¥æ‰è®¡ç®—å‡ºè¾“å‡ºï¼Œè€ŒCNNåªçœ‹äº†ä¸€éƒ¨åˆ†å‘€ã€‚åªçœ‹ä¸€å±‚çš„è¯ç¡®å®æ˜¯è¿™æ ·ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å å¾ˆå¤šå±‚CNNï¼ˆå¦‚è“è‰²ä¸‰è§’ç¤ºä¾‹ï¼‰ï¼Œè¿™æ ·ä¸Šå±‚çš„CNNå°±ä¼šçœ‹åˆ°æ›´å¤šçš„è¾“å…¥ã€‚\næ€»è€Œè¨€ä¹‹ï¼ŒCNNç¡®å®å¯ä»¥å¹³è¡Œè®¡ç®—äº†ï¼Œä½†æ˜¯å®ƒéœ€è¦å å¾ˆå¤šå±‚æ‰èƒ½çœ‹åˆ°å…¨éƒ¨è¾“å…¥çš„ä¿¡æ¯ï¼Œé‚£æœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•å‘¢ï¼Œæ¥ä¸‹æ¥å°±ä»‹ç»Self Attention ã€‚\n Self Attention\nSelf Attention å°±æ˜¯æƒ³è¦å–ä»£RNN åšçš„äº‹æƒ…ï¼Œå¹¶ä¸”èƒ½å…‹æœRNNä¸èƒ½å¹³è¡Œè®¡ç®—çš„ç¼ºç‚¹ã€‚ä¸‹é¢çš„å†…å®¹å¦‚æœä½ çœ‹ä¸ä¸‹å»ï¼Œä½ å°±åªè¦è®°å¾—Self Attention èƒ½åšåˆ°å’ŒRNN ä¸€æ‘¸ä¸€æ ·çš„äº‹æƒ…ï¼Œå®ƒä¹Ÿæ˜¯åƒä¸€ä¸ªsequence åå‡ºä¸€ä¸ªsequence ï¼Œè¾“å‡ºsequence çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯çœ‹è¿‡æ‰€æœ‰è¾“å…¥è®¡ç®—å‡ºæ¥çš„ï¼Œè€Œä¸”æ˜¯å¹³è¡Œè®¡ç®—å‡ºæ¥çš„ã€‚\n\nå…³é”®å°±æ˜¯ä½ å¯ä»¥åœ¨ä½ è¦åšçš„äº‹æƒ…ä¸Šç”¨Self Attention å–ä»£RNN ã€‚\n\n\næœ€æ—©æå‡ºself-attention æ›¿æ¢RNN çš„paperï¼ˆby googleï¼‰ï¼šAttention Is All You Need\nhttps://arxiv.org/abs/1706.03762\n\nè¾“å…¥æ˜¯ x1x_1x1â€‹ åˆ° x4x_4x4â€‹ çš„sequence ï¼Œè¾“å…¥xé€šè¿‡ä¸€ä¸ªmatrix W åšembedding å¾—åˆ°sequence a ã€‚ï¼ˆæ³¨æ„ xix_ixiâ€‹ å’Œ aia^iai åº”è¯¥éƒ½æ˜¯vectorï¼Œåˆ—å‘é‡ï¼‰ ç„¶åæ¯ä¸ª aia^iai éƒ½ä¹˜ä¸Šä¸‰ä¸ªä¸åŒçš„matrix å¾—åˆ°ä¸‰ä¸ªè¾“å‡ºå‘é‡q k v ï¼ˆåˆ—å‘é‡ï¼‰ã€‚\nqä»£è¡¨query å®ƒæ˜¯è¦å»match åˆ«äººçš„\nkä»£è¡¨key å®ƒæ˜¯è¦è¢«matchçš„\nvä»£è¡¨information å°±æ˜¯è¦è¢«æŠ½å–å‡ºæ¥çš„ä¿¡æ¯\næ¥ä¸‹æ¥æˆ‘ä»¬å°±æ‹¿æ¯ä¸ªqå¯¹æ¯ä¸ªkåšattention ï¼š\n\nattention æ€ä¹ˆåšå‘¢ï¼Ÿï¼ˆæ ¹æ®googleè®ºæ–‡ä¸­æ‰€è¿°è¿™é‡Œè®²è§£çš„attention functionæ˜¯ç±»ä¼¼äºdot-proudct attentionï¼‰self-attention layer å®ƒè¦åšçš„å°±æ˜¯æ‹¿ q1q^1q1 å’Œ k1k^1k1 åšattentionï¼Œå¾—åˆ° Î±1,1\\alpha_{1,1}Î±1,1â€‹ ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºåŒæ ·çš„åšæ³•å¾—åˆ° Î±1,2\\alpha_{1,2}Î±1,2â€‹ ï¼ŒÎ±1,3\\alpha_{1,3}Î±1,3â€‹ ï¼ŒÎ±1,4\\alpha_{1,4}Î±1,4â€‹ ã€‚attention çš„å…·ä½“å…¬å¼å°±æ˜¯ä¸Šå›¾æ‰€ç¤ºçš„ï¼Œå¯¹äº Î±1,i\\alpha_{1,i}Î±1,iâ€‹ attentionå°±æ˜¯æŒ‡æŠŠ q1q^1q1 ç‚¹ç§¯ kik^iki ç„¶åé™¤ä»¥æ ¹å·dï¼Œdæ˜¯qå’Œkçš„ç»´åº¦ã€‚ï¼ˆÎ±\\alphaÎ± æ˜¯æ•°å€¼ï¼‰\nä¸ºä»€ä¹ˆé™¤ä»¥æ ¹å·dï¼Œè€Œä¸æ˜¯é™¤ä»¥å…¶ä»–ä¸œè¥¿å‘¢ï¼Ÿåœ¨google çš„Self-attention çš„paper ä¸­3.2.1èŠ‚attentionå…¬å¼ä¸‹æœ‰è§£é‡Šï¼Œä½ å¯ä»¥è‡ªå·±å»çœ‹çœ‹ï¼Œå¤§æ„å¥½åƒå°±æ˜¯ä¸ºäº†é¿å…dot-product attentionå°†softmaxå‡½æ•°æ¨å…¥æ¢¯åº¦æå°çš„åŒºåŸŸï¼Œæˆ‘ä¹Ÿè§£é‡Šä¸å¤ªå¥½ğŸ˜¥ã€‚è€å¸ˆä¹Ÿæ²¡æœ‰å®è·µè¿™ä¸ªé™¤ä»¥æ ¹å·då¯¹ç»“æœæœ‰å¤šå¤§å½±å“ã€‚\nå¦å¤–ï¼Œä½ è¿˜éœ€è¦çŸ¥é“attention functionæ˜¾ç„¶ä¸æ­¢ä¸€ç§ï¼Œpaperä¸­å¦å¤–æœ‰æåˆ°addictive attentionï¼Œä¸è¿‡æ²¡æœ‰å®è·µæ›¿æ¢attention function ä¼šå¯¹ç»“æœæœ‰å¤šå¤§å½±å“ã€‚\n\nç„¶åï¼Œä½ è¦æŠŠä¸Šè¿°å¾—åˆ°çš„ Î±\\alphaÎ± é€šè¿‡ä¸€ä¸ªsoftmax layer å¾—åˆ° Î±^\\hat\\alphaÎ±^ ï¼Œsoftmax layeråšçš„äº‹æƒ…å°±æ˜¯ä¸Šå›¾å…¬å¼æ‰€ç¤ºï¼Œç›¸å½“äºåšä¸€ä¸ªnormalization ã€‚\n\nå¾—åˆ° Î±^\\hat\\alphaÎ±^ ä»¥åè¦æŠŠæ¯ä¸ª Î±^\\hat\\alphaÎ±^ å’Œå¯¹åº”çš„v ç›¸ä¹˜ï¼Œå†æ±‚å’Œå°±å¾—åˆ° b1b^1b1 ã€‚æˆ‘ä»¬ä¸Šé¢è¯´self-attention ä¹Ÿæ˜¯è¾“å…¥ä¸€ä¸ªsequence è¾“å‡ºä¸€ä¸ªsequenceï¼Œè¿™ä¸ª b1b^1b1 å°±æ˜¯è¾“å‡ºçš„ç¬¬ä¸€ä¸ªelement ã€‚ä¹‹åæˆ‘ä»¬åªè¦ç”¨åŒæ ·çš„åŠæ³•æ±‚å‡º b2b^2b2 ï¼Œ b3b^3b3 ï¼Œ b4b^4b4  å°±ç»“æŸäº†ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­æ¯ä¸ªoutput element çš„è®¡ç®—éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œéƒ½ä¸ä¾èµ–å…¶ä»–çš„output element æ‰€ä»¥å¯ä»¥å¹¶è¡Œè®¡ç®—ã€‚\næˆ‘ä»¬å†çœ‹ä¸€ä¸‹ä¸Šå›¾ä¸­self-attention layer çš„ç»“æ„ï¼Œå¯¹äº b1b^1b1 æ¥è¯´å®ƒçœ‹è¿‡äº†æ•´ä¸ªinput sequence ï¼Œè€Œä¸”æˆ‘ä»¬ä¹Ÿå¯ä»¥è®©å®ƒçœ‹éƒ¨åˆ†çš„input sequenceï¼Œåªè¦æŠŠä¸å¸Œæœ›å®ƒçœ‹çš„éƒ¨åˆ†äº§ç”Ÿçš„ Î±\\alphaÎ± çš„å€¼è®¾ä¸º0å°±å¯ä»¥äº†ã€‚æ‰€ä»¥ä½¿ç”¨self-attention layer å¯¹äºoutput sequence ä¸­çš„element æ¥è¯´å®ƒå¯ä»¥çœ‹ä»»æ„å¤šä¸ªä»»æ„ä½ç½®çš„input sequence ä¸­çš„element ã€‚\n\nb2b^2b2 çš„è®¡ç®—ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œq2q^2q2 å’Œ kik^iki åšattention å¾—åˆ°å¯¹åº”çš„ Î±2,i\\alpha_{2,i}Î±2,iâ€‹ ç„¶ååšsoftmax å¾—åˆ° Î±^2,i\\hat\\alpha_{2,i}Î±^2,iâ€‹ å†ä¹˜ viv^ivi åšsummation å°±å¾—åˆ° b2b^2b2 ã€‚ä»¥æ­¤ç±»æ¨å¹³è¡Œè®¡ç®—æ‰€æœ‰bï¼š\n\nå¦‚æœä½ è§‰å¾—ä¸Šé¢çš„è®²è§£æ¯”è¾ƒä¹±ï¼Œçœ‹ä¸æ‡‚ï¼Œä½ å¯ä»¥åªè®°ä½self-attention layer çš„è¾“å…¥è¾“å‡ºå°±å¥½ã€‚\næ¥ä¸‹æ¥æˆ‘ä»¬è¦å…·ä½“è®²è§£ä¸€ä¸‹attention ä¸­çš„ä¸€è¿ä¸²çŸ©é˜µè¿ç®—ï¼Œä¸ºä»€ä¹ˆæ˜¯å®¹æ˜“è¢«å¹³è¡Œè®¡ç®—ï¼Œä¸ºä»€ä¹ˆæ˜¯å®¹æ˜“è¢«åŠ é€Ÿçš„ã€‚\n Why Could Speed Up\n\né¦–å…ˆæ¥çœ‹åˆ—å‘é‡qã€kã€vçš„è®¡ç®—æ–¹æ³•ï¼Œæ ¹æ®ä¸Šé¢è¯´è¿‡çš„ï¼Œå¦‚ä¸Šå›¾å³ä¸Šè§’æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥æŠŠåˆ—å‘é‡ aia^iai æ’åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªçŸ©é˜µ III ã€‚å°†å››ä¸ªqã€kã€vçš„è®¡ç®—è½¬æ¢æˆçŸ©é˜µè¿ç®—ã€‚\n\nå†æ¥çœ‹æ•°å€¼ Î±\\alphaÎ± çš„è®¡ç®—ï¼Œä»¥ Î±1,i\\alpha_{1,i}Î±1,iâ€‹ ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠkå’Œqçš„å†…ç§¯è½¬æ¢ä¸º kTk^TkT ä¸ qqq çš„ç§¯ï¼Œè¿›ä¸€æ­¥å¯ä»¥æŠŠå››ä¸ª Î±1,i\\alpha_{1,i}Î±1,iâ€‹ çš„è¿ç®—è½¬æ¢ä¸ºä¸Šå›¾å³ä¸‹è§’çš„çŸ©é˜µä¹˜å‘é‡ã€‚æ›´è¿›ä¸€æ­¥ï¼Œå¯¹äº Î±2,i\\alpha_{2,i}Î±2,iâ€‹ ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å¾—åˆ°äº†ä¸‹è¿°å…¬å¼ï¼š\n\nmatrix A ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯æˆ‘ä»¬è¦æ±‚çš„å€¼ï¼ŒAå¯ä»¥è½¬æ¢ä¸ºmatrix ä¹˜ç§¯ KTQK^T QKTQ ã€‚å†æŠŠAä¸­æ¯ä¸€åˆ—å…ƒç´ åšä¸€ä¸‹softmax å°±èƒ½å¾—åˆ° A^\\hat AA^ ã€‚\n\næ¥ç€ï¼ŒæŠŠåˆ—å‘é‡ v1,v2,v3,v4v^1,v^2,v^3,v^4v1,v2,v3,v4 åˆ†åˆ«ä¹˜ä»¥ Î±1,1^,Î±1,2^,Î±1,3^,Î±1,4^\\hat{\\alpha_{1,1}},\\hat{\\alpha_{1,2}},\\hat{\\alpha_{1,3}},\\hat{\\alpha_{1,4}}Î±1,1â€‹^â€‹,Î±1,2â€‹^â€‹,Î±1,3â€‹^â€‹,Î±1,4â€‹^â€‹ å†åŠ èµ·æ¥å°±å¾—åˆ° b1b^1b1 ï¼Œå¯¹äºå…¶ä»–çš„bä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå°±è¿™æ ·ç»“æŸã€‚\næˆ‘ä»¬å†æ¥æ€»çš„çœ‹ä¸€ä¸‹ä»input III åˆ°output OOO ç»å†äº†å“ªäº›æ­¥éª¤ï¼š\n\n Multi-head Self-attention\næ¥ä¸‹æ¥è®²ä¸€ä¸ªSelf-attention çš„å˜å½¢ (2 heads as example)\n\nåœ¨è¿™ç§æ–¹æ³•ä¸­qã€kã€véƒ½ä¼šæœ‰å¤šä¸ªï¼Œç”Ÿä¹˜çš„è¾“å‡ºä¹Ÿä¼šæœ‰å¤šç»„ï¼Œè¿™é‡Œä»¥2 head ä¸¾ä¾‹æ‰€ä»¥ç”»äº†ä¸¤ä¸ªï¼Œå…·ä½“çš„åšæ³•å¯ä»¥æ˜¯ä½ æŠŠ qiq^iqi ä¹˜ä¸€ä¸ªmatrix Wq,1W^{q,1}Wq,1 å¾—åˆ° qi,1q^{i,1}qi,1 ï¼Œä¹˜ä¸€ä¸ªmatrix Wq,2W^{q,2}Wq,2 å¾—åˆ° qi,2q^{i,2}qi,2 ã€‚ç„¶åä½ åœ¨åšattention çš„æ—¶å€™å°±æ˜¯æ¯ä¸ªhead ç”Ÿä¹˜çš„qã€kã€våªåœ¨æœ¬ç»„å†…åšè¿ç®—ï¼Œä¸¾ä¾‹æ¥è¯´å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¦‚æœä½ è¦è®¡ç®—head 1ç»„çš„ bi,1b^{i,1}bi,1 ä½ å°±ç”¨  aia^iai ç”Ÿæˆçš„ qi,1,ki,1,vi,1q^{i,1},k^{i,1},v^{i,1}qi,1,ki,1,vi,1 å’Œ aja^jaj ç”Ÿæˆçš„åŒheadç»„çš„ qj,1,kj,1,vj,1q^{j,1},k^{j,1},v^{j,1}qj,1,kj,1,vj,1 åšè®¡ç®—ã€‚å¯¹äºhead 2ç»„çš„ bi,2b^{i,2}bi,2ï¼š\n\nè¾“å‡ºçš„ä¸¤ç»„bä¼šconcatenate èµ·æ¥ï¼Œå¦‚æœä½ ä¸å¸Œæœ›bçš„ç»´åº¦å¢åŠ ï¼Œä½ å¯ä»¥ç”¨ä¸‹å›¾æ‰€ç¤ºçš„æ–¹æ³•åšä¸€ä¸‹é™ç»´ï¼š\n\nmulti-headçš„å¥½å¤„æ˜¯ï¼Œä¸åŒçš„head å¯ä»¥è€ƒè™‘ä¸åŒçš„äº‹æƒ…ã€‚æ¯”å¦‚è¯´æœ‰çš„head åªéœ€è¦è¿‘æœŸçš„ä¿¡æ¯ï¼Œæ‰€ä»¥åªçœ‹local çš„ä¿¡æ¯ï¼Œæœ‰çš„head éœ€è¦é•¿æ—¶é—´ä»¥å‰çš„ä¿¡æ¯ï¼Œçœ‹global çš„ä¿¡æ¯ã€‚\n Positional Encoding\n\nself-attention layer å®ƒæ²¡æœ‰è€ƒè™‘input sequence çš„é¡ºåºï¼Œä¸Šé¢æˆ‘ä»¬è¯´äº†ï¼Œå¯¹äºself-attention çš„è¾“å‡ºå¯ä»¥çœ‹ä»»æ„æ•°é‡ä»»æ„ä½ç½®çš„inputï¼Œæ‰€ä»¥å¯¹å®ƒæ¥è¯´æ²¡æœ‰é¡ºåºçš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ä»Šå¤©è¾“å…¥&quot;æˆ‘åƒé¥­äº†&quot;å’Œ&quot;é¥­åƒæˆ‘äº†&quot;å¯¹å®ƒæ¥è¯´å¯èƒ½æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œæˆ‘ä»¬æ˜¾ç„¶ä¸å¸Œæœ›æ˜¯è¿™æ ·ã€‚\nPositional Encodingå°±æ˜¯è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåšæ³•å°±æ˜¯åœ¨åˆ—å‘é‡ aia^iai ä¸ŠåŠ ä¸Šä¸€ä¸ªæ ‡è¯†ä½ç½®çš„åˆ—å‘é‡ eie^iei è¿™ä¸ª eie^iei åœ¨åŸå§‹paper ä¸­æ˜¯äººè®¾å®šçš„ï¼Œä½ç½®1å°±æ˜¯ e1e^1e1 ä½ç½®2å°±æ˜¯ e2e^2e2â€¦ ä½ å¯èƒ½ä¼šé—®ä¸ºä»€ä¹ˆæ˜¯åŠ ï¼Œä¸ºä»€ä¹ˆä¸concatenateèµ·æ¥ï¼Œä½ æŠŠä¸€ä¸ªå‘é‡åŠ ä¸Šå»é‚£åŸæ¥çš„ä¿¡æ¯ä¸å°±å˜äº†å—ï¼Œconcatenateä¸æ˜¯ä¼šæ›´å¥½å—ã€‚\nä¸ºäº†è®©ä½ ç†è§£è¿™ä¸ªåšæ³•ï¼Œè¿™é‡Œè€å¸ˆç”¨å¦ä¸€ç§æ–¹å¼æ¥è®²è§£ï¼Œå‡å¦‚è¯´æˆ‘ä»¬åœ¨xéƒ½åé¢concatenate ä¸€ä¸ªè¡¨ç¤ºä½ç½®çš„one-hotå‘é‡pï¼Œç„¶åå†åšæœ¬æ¥åšçš„é‚£ä¸ªä¹˜çŸ©é˜µWè½¬æ¢ä¸ºaçš„æ­¥éª¤ï¼Œå¦‚æœæˆ‘ä»¬æŠŠWæ‹†åˆ†æˆ WI,WPW^I,W^PWI,WP æ¥çœ‹å¾…ï¼Œæ ¹æ®çº¿æ€§ä»£æ•°çš„çŸ¥è¯†ï¼Œè¿™ä¸ªå…¬å¼å°±å¯ä»¥æ‹†åˆ†æˆä¸Šå›¾æ‰€ç¤ºçš„ä¸¤ä¸¤ç›¸ä¹˜å†ç›¸åŠ æ ·å­ï¼Œ WIxiW^I x^iWIxi å°±æ˜¯ aia^iai ï¼Œ WPpiW^P p^iWPpi å°±æ˜¯ eie^iei ã€‚è¿™æ ·æ˜¯ä¸æ˜¯å°±å¥½ç†è§£äº†ã€‚\nè®©äººéš¾ä»¥ç†è§£çš„æ˜¯ä½ å½“ç„¶å¯ä»¥learn WPW^PWP ï¼Œåœ¨self-attention çš„paper ä¸­æœ‰æåˆ°ä»¥å‰ç”¨CNNåšseq2seq model çš„æ—¶å€™å°±æœ‰äººè¯•è¿‡learn WPW^PWP äº†ï¼Œç»“æœæ²¡æœ‰æ›´å¥½ï¼Œä»–ä»¬çš„ WPW^PWP æ˜¯ç”¨ä¸€ä¸ªå¥‡æ€ªçš„å…¬å¼äº§ç”Ÿå‡ºæ¥çš„ï¼Œå®ƒå°±é•¿è¿™ä¸ªæ ·å­ï¼š\n\n Seq2seq with Attention\nä¸Šé¢è®²çš„æ˜¯åœ¨Seq2seq model ä¸­æˆ‘ä»¬å¯ä»¥ç”¨self-attention å–ä»£RNN ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥è®²åœ¨Seq2seq model ä¸­self-attention æ˜¯æ€ä¹ˆåº”ç”¨çš„ã€‚\n\n\nReview: https://www.youtube.com/watch?v=ZjfjPzXw6og&amp;feature=youtu.be\n\n\n\nsource:https://ai.googleblog.com/2017/08/transformer-novel-neural-network.html\n\nè¿™æ˜¯google ç”¨self-attention åšçš„ç¿»è¯‘æ¨¡å‹çš„gifæ¼”ç¤ºã€‚é¦–å…ˆæ¯ä¸ªstep ä¼šæŠŠinput sequence ä¸¤ä¸¤ä¹‹é—´åšattentionï¼Œç„¶åå¼¹å‡ºä¸€æ’ä¸€æ’çš„å°ç‚¹æ˜¯å‘Šè¯‰ä½ è¿™äº›step æ˜¯å¹³è¡Œè¿ç®—çš„ï¼Œæ¯ä¸€å±‚éƒ½åšself-attentionï¼Œæ¥ç€åšDecoding ï¼Œä¼šå¯¹input çš„encoderåšattentionï¼Œåœ¨decode ç¬¬äºŒä¸ªword çš„æ—¶å€™å®ƒå°±ä¸åªå¯¹input åšattention è¿˜ä¼šå¯¹ä¹‹å‰äº§ç”Ÿçš„ä¸œè¥¿åšattention ã€‚\n Transformer\n\nä¸Šå›¾æ˜¯ä¸€ä¸ªseq2seq model ï¼Œåšçš„ä»»åŠ¡æ˜¯ä¸­è‹±äº’è¯‘ï¼Œå·¦åŠéƒ¨æ˜¯encoder å³åŠéƒ¨æ˜¯decoderï¼Œæˆ‘ä»¬ä»¥ä¸­ç¿»è‹±ä¸ºä¾‹ï¼Œè¾“å…¥&quot;æœºå™¨å­¦ä¹ &quot;ï¼Œencoder è¿›è¡Œencoding ç„¶åè¾“å…¥ç»™deocder ï¼Œdecoder åƒè¿›å»äº§ç”Ÿè¾“å‡ºï¼Œmachine ç„¶åæŠŠmachine å½“ä½œè¾“å…¥å†åƒè¿›å»ï¼Œåœ¨äº§ç”Ÿlearning ï¼Œå¦‚æ­¤è¿è¡ŒçŸ¥é“è¾“å‡ºå¥æœ«æ ‡å¿—ç»“æŸã€‚\nä¸‹é¢æ¥ä»‹ç»ä¸€ä¸‹self-attention åœ¨è¿™ä¸ªæ¨¡å‹ä¸­çš„å…·ä½“è¿ä½œæ–¹å¼ï¼š\n\n\nLayer Norm: https://arxiv.org/abs/1607.06450\nBatch Norm: https://www.youtube.com/watch?v=BZh1ltr5Rkg\n\nå…ˆçœ‹encoderï¼Œinput ç»è¿‡embedding å’Œ positional encoding ä»¥åè¿›å…¥ç°è‰²çš„blockï¼Œè¿™éƒ¨åˆ†ä¼šé‡å¤Næ¬¡ã€‚åœ¨è¿™ä¸ªç°è‰²çš„blockä¸­ï¼Œå…ˆæ˜¯ä¸€ä¸ªmulti-head attention layerï¼›ä¸‹ä¸€ä¸ªlayeræ˜¯Add&amp;Normï¼Œæ„æ€æ˜¯è¯´æŠŠmulti-head attention layerçš„inputå’ŒoutputåŠ èµ·æ¥ï¼Œå†æŠŠå¾—åˆ°çš„bâ€²b&#x27;bâ€²åšLayer Normalizationï¼›ï¼ˆå¦‚æœè¦è¿›ä¸€æ­¥äº†è§£Layer Normå¯ä»¥å‚è€ƒä¸Šè¿°æ–‡çŒ®ï¼‰\næˆ‘ä»¬ä¹‹å‰è®²è¿‡Batch Normï¼ŒBatch Normæ˜¯è¯´æˆ‘ä»¬å¸Œæœ›ä¸€ä¸ªBatchçš„dataä¸­æ¯ä¸ªç»´åº¦çš„mean=0ï¼Œvariance=1ï¼›Layer Normæ˜¯ä¸éœ€è¦è€ƒè™‘Batch çš„ï¼Œä¸¾ä¾‹æ¥è¯´ç»™ä¸€ç¬”Data æˆ‘ä»¬å¸Œæœ›å®ƒæ‰€æœ‰ç»´åº¦çš„mean=0ï¼Œvariance=1ã€‚Layer Normä¸€èˆ¬ä¼šæ­é…RNNä½¿ç”¨ï¼Œtransformer å¾ˆåƒRNNï¼Œè¿™å¯èƒ½å°±æ˜¯Layer Normç”¨åœ¨è¿™é‡Œçš„åŸå› ã€‚\nå›åˆ°decoderï¼Œå†å¾€åï¼Œå°±å¦‚å›¾è¯´æ˜¯ï¼Œè¿›å…¥ä¸€ä¸ªå‰é¦ˆç¥ç»ç½‘ç»œï¼Œç„¶ååœ¨è·Ÿä¸€ä¸ªAdd&amp;Normã€‚\nå†çœ‹Deocderï¼ŒDeocderçš„è¾“å…¥æ˜¯å‰ä¸€ä¸ªstep äº§ç”Ÿçš„outputï¼Œå‰é¢çš„å¤„ç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œç°è‰²çš„blockä¼šé‡å¤Næ¬¡ï¼Œå…¶ä¸­ä¸Šæ¥å°±æ˜¯ä¸€ä¸ªMasked Multi-head Attentionï¼Œè¿™ä¸ªMaskedæ„æ€æ˜¯åœ¨åšself-attentionçš„æ—¶å€™decoder åªä¼šattendå·²ç»äº§ç”Ÿçš„sequenceï¼Œè¿™ä¹Ÿæ˜¯å¾ˆåˆç†å˜›ï¼Œæ¯•ç«Ÿè¿˜æ²¡æœ‰äº§ç”Ÿå‡ºæ¥çš„ä¸œè¥¿ä½ æ€ä¹ˆåšself-attentionã€‚æ¥ç€æ˜¯ä¸€ä¸ªMulti-head Attention è¿™ä¸ªlayer attendä¹‹å‰encoder çš„è¾“å‡ºï¼Œæ¥ç€è¿˜æœ‰ä¸€ä¸ªAdd&amp;Normï¼Œå†åé¢çš„ä¸œè¥¿ä¹Ÿæ˜¯å’Œencoder ä¸€æ ·çš„ä¸å†èµ˜è¿°ã€‚\n Attention Visualization\n\n\nhttps://arxiv.org/abs/1706.03762\n\nè¿™æ˜¯googleçš„paperä¸­æœ€ç»ˆç‰ˆæœ¬å¾—åˆ°çš„ç»“æœï¼Œæ‰€æœ‰å•è¯ä¸¤ä¸¤ä¹‹é—´éƒ½ä¼šæœ‰attentionï¼Œé¢œè‰²è¶Šæ·±è¡¨ç¤ºattentionçš„weightè¶Šå¤§ã€‚\n\n\nThe encoder self-attention distribution for the word â€œitâ€ from the 5th to the 6th layer of a Transformer trained on English to French translation (one of eight attention heads).\nhttps://ai.googleblog.com/2017/08/transformer-novel-neural-network.html\n\nä¸Šå›¾æ˜¯è¿™ä¸ªæ„æ€ï¼Œå·¦è¾¹è¾“å…¥çš„å¥å­æ˜¯è¿™åªåŠ¨ç‰©æ²¡èµ°è¿‡è¡—é“ï¼Œå› ä¸ºå®ƒå¤ªç´¯äº†ï¼Œæœºå™¨å­¦åˆ°äº†itæŒ‡ä»£çš„æ˜¯animalï¼Œè¿™ä¸¤ä¸ªè¯ä¹‹é—´çš„attentionå¾ˆæ·±ï¼Œè€Œå½“æˆ‘ä»¬æŠŠä¹‹åçš„tiredæ¢æˆwideï¼Œå¥å­å˜æˆè¿™åªåŠ¨ç‰©æ²¡èµ°è¿‡è¡—é“ï¼Œå› ä¸ºå®ƒå¤ªå®½äº†ï¼Œæœºå™¨å°±å­¦åˆ°itæ˜¯æŒ‡ä»£è¡—é“ã€‚amazing\n Multi-head Attention\n\nä¸Šå¦‚å›¾æ‰€ç¤ºæ˜¯ä¸¤ç»„qã€kã€vï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªhead åšå‡ºçš„ç»“æœï¼Œæ˜¾ç„¶ä¸Šé¢å°±åå‘äºattendå…¨å±€ä¿¡æ¯ï¼Œä¸‹é¢å°±åå‘äºattendå±€éƒ¨ä¿¡æ¯ã€‚\n Example Appplication\n\nTransformer å¯ä»¥ç”¨åœ¨å“ªé‡Œå‘¢ï¼ŸåŸºæœ¬ä¸ŠåŸæ¥ç”¨seq2seq model åšçš„ä»»åŠ¡éƒ½å¯ä»¥æ¢æˆtransformerï¼Œç°åœ¨è¿™äº›ä»»åŠ¡åŸºæœ¬ä¸Šå·²ç»è¢«æ´—è¿‡ä¸€è½®äº†ï¼Œéƒ½è¢«åšå¹²äº†ã€‚\n\nhttps://arxiv.org/abs/1801.10198\n\næ¯”è¾ƒæƒŠäººçš„æ˜¯åšSummarizerï¼Œè¿™ç¯‡æ–‡ç« æ˜¯google åšçš„ï¼Œä»–ä»¬çš„inputæ˜¯ä¸€å †æ–‡ç« ï¼Œç„¶åå†™å‡ºè¿™å †æ–‡ç« çš„æ€»ç»“å’Œæ‘˜è¦ï¼Œè¦æ±‚æœ‰wikiçš„é£æ ¼ï¼Œæ‰€ä»¥è¾“å‡ºä¹Ÿæ˜¯ä¸€ç¯‡æ–‡ç« ã€‚æ¯”å¦‚è¯´ä½ æœç´¢å°æ¹¾å¤§å­¦ï¼ŒæŠŠgoogleå‡ºæ¥çš„æ–‡ç« éƒ½ä½œä¸ºinputï¼Œæœºå™¨å°±ä¼šå†™ä¸€ä¸ªå°æ¹¾å¤§å­¦çš„wikiã€‚è¿™ä¸ªä»»åŠ¡çš„è®­ç»ƒèµ„æ–™æ˜¯å¾ˆå¤šçš„ï¼Œå‡ºç°transformerä¹‹å‰ï¼Œå¤§æ¦‚æ˜¯åšä¸èµ·æ¥çš„ã€‚\n Universal Transformer\n\n\nhttps://ai.googleblog.com/2018/08/moving-beyond-translation-with.html\n\nå‡ºç°Transformeråæå‡ºçš„ï¼Œæ—¶é—´ä¸Šæ¢æˆtransformerï¼Œçºµå‘æ·±åº¦ä¸Šä»ç„¶ç”¨RNNï¼Œå…·ä½“ç»†èŠ‚å¯ä»¥å‚è€ƒä¸Šè¿°é“¾æ¥ã€‚\n Self-Attention GAN\n\n\nhttps://arxiv.org/abs/1805.08318\n\ntransformer æœ€æ—©æå‡ºæ¥æ˜¯ç”¨åœ¨æ–‡å­—ä¸Šï¼Œç°åœ¨å®ƒä¹Ÿå¯ä»¥è¢«ç”¨åœ¨å½±åƒä¸Šï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªSelf-attention GAN ï¼Œä½ åœ¨å¤„ç†å½±åƒçš„æ—¶å€™å¯ä»¥è®©æ¯ä¸ªpixel éƒ½å»attention å…¶ä»–çš„pixel ï¼Œæ‰€ä»¥ä½ åœ¨å¤„ç†å½±åƒçš„æ—¶å€™å¯ä»¥è€ƒè™‘åˆ°æ¯”è¾ƒglobal çš„ä¿¡æ¯ã€‚\n","categories":["æå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°"],"tags":["ML","note","Next-Step-of-ML"]},{"title":"ç¬¦å·æ‰§è¡ŒæŠ€æœ¯ç¬”è®°","url":"https://ch3nye.top/ç¬¦å·æ‰§è¡ŒæŠ€æœ¯ç¬”è®°/","content":" ç¬¦å·æ‰§è¡ŒæŠ€æœ¯ç¬”è®°\næ­¤å‰æ²¡æœ‰æ¥è§¦è¿‡ç¬¦å·æ‰§è¡Œï¼Œæ‰€ä»¥æœ¬æ–‡æ˜¯åœ¨æˆ‘å­¦ä¹ è¿‡ç¨‹ä¸­å¯¹ä¸€äº›å¥½çš„æ–‡ç« çš„æ‘˜å½•ï¼Œç®—æ˜¯æ–¹ä¾¿æˆ‘æ—¥åå›é¡¾å­¦ä¹ ï¼Œç‰¹åˆ«æ„Ÿè°¢r1ceå’ŒK0rz3nçš„æ–‡ç« ï¼Œæ‰€æœ‰å‚è€ƒè¿æ¥å°†æ”¾åœ¨æ–‡æœ«ã€‚å¦‚æœæˆ‘åç»­ç ”ç©¶åˆ°ç¬¦å·æ‰§è¡ŒæŠ€æœ¯ç›¸å…³çš„å†…å®¹å¤§æ¦‚ä¼šè¡¥å……è¿›æ¥ã€‚æ–‡æœ«æœ‰ä¸€äº›æˆ‘è¯»æ–‡ç« æ—¶å€™çš„ç–‘é—®ï¼Œè¯»å®Œæœ¬æ–‡å†çœ‹ï¼Œå¯èƒ½æœ‰åŠ©äºä½ çš„ç†è§£ã€‚\n 0x1 é€šä¿—åœ°è§£é‡Šç¬¦å·æ‰§è¡Œ\nWikiä¸­çš„å®šä¹‰æ˜¯ï¼šåœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œç¬¦å·æ‰§è¡ŒæŠ€æœ¯æŒ‡çš„æ˜¯é€šè¿‡ç¨‹åºåˆ†æçš„æ–¹æ³•ï¼Œç¡®å®šå“ªäº›è¾“å…¥å‘é‡ä¼šå¯¹åº”å¯¼è‡´ç¨‹åºçš„æ‰§è¡Œç»“æœä¸ºæŸä¸ªå‘é‡çš„æ–¹æ³•(ç»•)ã€‚é€šä¿—çš„è¯´ï¼Œå¦‚æœæŠŠä¸€ä¸ªç¨‹åºæ¯”ä½œDOTAè‹±é›„ï¼Œè‹±é›„çš„æœ€ç»ˆå±æ€§å€¼ä¸ºç¨‹åºçš„è¾“å‡ºï¼ˆåŒ…æ‹¬æ”»å‡»åŠ›ã€é˜²å¾¡åŠ›ã€è¡€æ§½ã€è“æ§½ï¼‰ï¼Œè‹±é›„çš„æ­¦å™¨å‡ºè£…ä¸ºç¨‹åºçš„è¾“å…¥ï¼ˆå‡ºAæ–è¿˜æ˜¯BKBï¼‰ã€‚é‚£ä¹ˆç¬¦å·æ‰§è¡ŒæŠ€æœ¯çš„ä»»åŠ¡å°±æ˜¯ï¼Œç»™å®šäº†ä¸€ä¸ªè‹±é›„çš„æœ€ç»ˆå±æ€§å€¼ï¼Œåˆ†æå‡ºè¯¥è‹±é›„å¯ä»¥é€šè¿‡å“ªäº›å‡ºè£…æ–¹å¼è¾¾åˆ°è¿™ç§æœ€ç»ˆå±æ€§å€¼æ•ˆæœã€‚\nå¯ä»¥å‘ç°ï¼Œç¬¦å·æ‰§è¡ŒæŠ€æœ¯æ˜¯ä¸€ç§ç™½ç›’çš„é™æ€åˆ†ææŠ€æœ¯ã€‚å³åˆ†æç¨‹åºå¯èƒ½çš„è¾“å…¥éœ€è¦èƒ½å¤Ÿè·å–åˆ°ç›®æ ‡æºä»£ç çš„æ”¯æŒã€‚åŒæ—¶ï¼Œå®ƒæ˜¯é™æ€çš„ï¼Œå› ä¸ºå¹¶æ²¡æœ‰å®é™…çš„æ‰§è¡Œç¨‹åºæœ¬èº«ï¼Œè€Œæ˜¯åˆ†æç¨‹åºçš„æ‰§è¡Œè·¯å¾„ã€‚å¦‚æœæŠŠä¸Šè¿°è‹±é›„çš„æœ€ç»ˆå±æ€§å€¼æ›¿æ¢æˆç¨‹åºå½¢æˆçš„bugçŠ¶æ€ï¼Œæ¯”å¦‚ï¼Œå­˜åœ¨æ•°ç»„è¶Šç•Œå¤åˆ¶çš„çŠ¶æ€ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿåˆ©ç”¨æ­¤æŠ€æœ¯æŒ–æ˜æ¼æ´çš„è¾“å…¥å‘é‡äº†ã€‚\nå¯ä»¥å‘ç°ï¼Œç¬¦å·æ‰§è¡ŒæŠ€æœ¯æ˜¯ä¸€ç§ç™½ç›’çš„é™æ€åˆ†ææŠ€æœ¯ã€‚å³ï¼Œåˆ†æç¨‹åºå¯èƒ½çš„è¾“å…¥éœ€è¦èƒ½å¤Ÿè·å–åˆ°ç›®æ ‡æºä»£ç çš„æ”¯æŒã€‚åŒæ—¶ï¼Œå®ƒæ˜¯é™æ€çš„ï¼Œå› ä¸ºå¹¶æ²¡æœ‰å®é™…çš„æ‰§è¡Œç¨‹åºæœ¬èº«ï¼Œè€Œæ˜¯åˆ†æç¨‹åºçš„æ‰§è¡Œè·¯å¾„ã€‚å¦‚æœæŠŠä¸Šè¿°è‹±é›„çš„æœ€ç»ˆå±æ€§å€¼æ›¿æ¢æˆç¨‹åºå½¢æˆçš„bugçŠ¶æ€ï¼Œæ¯”å¦‚ï¼Œå­˜åœ¨æ•°ç»„è¶Šç•Œå¤åˆ¶çš„çŠ¶æ€ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿåˆ©ç”¨æ­¤æŠ€æœ¯æŒ–æ˜æ¼æ´çš„è¾“å…¥å‘é‡äº†ã€‚\nè¿™é‡Œå†ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œè®©å¤§å®¶æœ‰æ·±åˆ»çš„ç†è§£ã€‚\nä»¥ä¸‹é¢çš„æºä»£ç ä¸ºä¾‹å­ï¼š\nint m&#x3D;M, n&#x3D;N, q&#x3D;Q; \nint x1&#x3D;0,x2&#x3D;0,x3&#x3D;0;\nif(m!&#x3D;0)\n&#123;\n    x1&#x3D;-2;\n&#125;\nif(n&lt;12)\n&#123;\n    if(!m &amp;&amp; q)\n    &#123;\n        x2&#x3D;1;\n    &#125;\n    x3&#x3D;2;\n&#125;\nassert(x1+x2+x3!&#x3D;3) &#x2F;&#x2F; if &#x3D;3 then program crash\nä¸Šè¿°ä»£ç æ˜¯ä¸€ä¸ªç®€å•çš„cè¯­è¨€åˆ†æ”¯ç»“æ„ä»£ç ï¼Œå®ƒçš„è¾“å…¥æ˜¯M,N,Qä¸‰ä¸ªå˜é‡ï¼›è¾“å‡ºæ˜¯x1,x2,x3çš„ä¸‰ä¸ªå˜é‡çš„å’Œã€‚æˆ‘ä»¬è¿™é‡Œè®¾ç½®çš„æ¡ä»¶æ˜¯æƒ³çœ‹çœ‹ä»€ä¹ˆæ ·çš„è¾“å…¥å‘é‡&lt;M,N,Q&gt;çš„æƒ…å†µä¸‹ï¼Œå¾—åˆ°çš„ä¸‰ä¸ªè¾“å‡ºå˜é‡çš„å’Œç­‰äº3.\né‚£ä¹ˆæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„æ ‘å½¢ç»“æ„æ¥çœ‹çœ‹æ‰€æœ‰çš„æƒ…å†µï¼š\n\nä¸Šé¢çš„åˆ†æå›¾æŠŠæ‰€æœ‰å¯èƒ½çš„æƒ…å†µéƒ½åˆ—ä¸¾å‡ºæ¥äº†ï¼Œå…¶ä¸­ï¼Œå¶å­èŠ‚ç‚¹æ˜¾ç¤ºçš„æ•°å€¼è¡¨ç¤ºå½“å‰è¾“å…¥æƒ…å†µä¸‹ï¼Œå¯ä»¥å¾—åˆ°çš„æ•°å€¼ã€‚ï¼ˆæ¯”å¦‚ï¼Œå¦‚æœè‹±é›„å‡ºè£…æ˜¯M^(N&lt;12)ï¼Œé‚£ä¹ˆæœ€ç»ˆçš„å±æ€§å€¼R=0ï¼‰ã€‚å…¶ä¸­M^(N&lt;12)è¡¨è¾¾çš„æ˜¯ï¼ŒMæ˜¯éé›¶å€¼ä¸”Nè¦å°äº12ï¼ŒQä¸ºä»»æ„å€¼çš„æƒ…å†µä¸‹ï¼Œå¾—åˆ°R=0ã€‚å¯ä»¥å‘ç°ï¼Œå½“æ¡ä»¶ä¸º~M^(N&lt;5)^Qæ—¶ï¼Œå¾—åˆ°äº†æœ€ç»ˆç»“æœç­‰äº3.å³ï¼Œæˆ‘ä»¬é€šè¿‡è¿™ç§æ–¹å¼é€†å‘å‘ç°äº†è¾“å…¥å‘é‡ã€‚å¦‚æœæŠŠç»“æœæ¡ä»¶æ›´æ”¹ä¸ºæ¼æ´æ¡ä»¶ï¼Œç†è®ºä¸Šä¹Ÿæ˜¯èƒ½å¤Ÿè¿›è¡Œæ¼æ´æŒ–æ˜äº†ã€‚\nå¯¹äºå¦‚ä½•æ ¹æ®æœ€ç»ˆå¾—åˆ°çš„ç»“æœæ±‚è§£è¾“å…¥å‘é‡ï¼Œå·²ç»æœ‰å¾ˆå¤šç°æˆçš„æ•°å­¦å·¥å…·å¯ä»¥ä½¿ç”¨ã€‚ä¸Šè¿°é—®é¢˜å…¶å®å¯ä»¥è§„çº¦æˆçº¦æŸè§„åˆ’çš„æ±‚è§£é—®é¢˜ï¼ˆæ›´è¯¦ç»†çš„ä»‹ç»çœ‹è¿™é‡Œï¼šConstraint_programming ï¼‰ã€‚æ¯”è¾ƒè‘—åçš„å·¥å…·æ¯”å¦‚SMTï¼ˆSatisfiability Modulo Theoryï¼Œå¯æ»¡è¶³æ€§æ¨¡ç†è®ºï¼‰å’ŒSATã€‚\nä½†æ˜¯åœ¨å®é™…çš„æ¼æ´åˆ†æè¿‡ç¨‹ä¸­ï¼Œç›®æ ‡ç¨‹åºå¯èƒ½æ›´åŠ å¤æ‚ï¼Œæ²¡æœ‰æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­è¿™ä¹ˆç®€å•ã€‚å®é™…çš„ç¨‹åºä¸­ï¼Œå¯èƒ½åŒ…å«äº†ä¸å¤–è®¾äº¤äº’çš„ç³»ç»Ÿå‡½æ•°ï¼Œè€Œè¿™äº›ç³»ç»Ÿå‡½æ•°çš„è¾“å…¥è¾“å‡ºå¹¶ä¸ä¼šç›´æ¥èµ‹å€¼åˆ°ç¬¦å·ä¸­ï¼Œä»è€Œé˜»æ–­äº†æ­¤ç±»é—®é¢˜çš„æ±‚è§£ã€‚\næ¯”å¦‚ä¸‹é¢çš„è¿™ä¸ªåŒ…å«äº†æ–‡ä»¶è¯»å†™çš„ä¾‹å­ï¼š\nint main(int argc, char* argv[])\n&#123;\n    FILE *fop &#x3D; fopen(&quot;test.txt&quot;);\n    ...\n    if(argc &gt; 3)\n    &#123;\n        fputs(&quot;Too many parameters, exit.&quot;, fop);\n    &#125;\n    else\n    &#123;\n        fputs(&quot;Ok, we will run normally.&quot;, fop);\n    &#125;\n    ...\n    output &#x3D; fgets(..., fop);\n    assert(!strcmp(output, &quot;Ok, we will run normally.&quot;)); &#x2F;&#x2F; if str is &quot;OK,...&quot; then program crash\n    return 0;\n&#125;\nä¸Šè¿°ç¤ºä¾‹ä»£ç ä¸­ï¼Œæƒ³è¦å‘ç°ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå¾—åˆ°è¾“å‡ºâ€Ok, we will run normally.â€è¿™ä¸ªå­—ç¬¦ä¸²ã€‚é€šè¿‡ä¸€ç³»åˆ—çš„æ‰§è¡Œåˆ°ifè¯­å¥ï¼Œæ­¤æ—¶ï¼Œæ ¹æ®ç¨‹åºè¾“å…¥çš„å‚æ•°ä¸ªæ•°å°†ä¼šäº§ç”Ÿä¸¤ä¸ªåˆ†æ”¯ã€‚åˆ†æ”¯è¯­å¥ä¸­å°†æ‰§è¡Œç³»ç»Ÿçš„æ–‡ä»¶å†™æ“ä½œã€‚**åœ¨ä¼ ç»Ÿçš„ç¬¦å·æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ­¤ç±»å‡½æ•°å¦‚æœç»§ç»­æ²¿ç€ç³»ç»Ÿå‡½æ•°çš„è°ƒç”¨ä¼ é€’ä¸‹å»çš„è¯ï¼Œç¬¦å·æ•°å€¼çš„ä¼ é€’å°†ä¼šä¸¢å¤±ã€‚**è€Œåœ¨ä¹‹åçš„output = fgets(â€¦, fop);è¿™è¡Œä»£ç ä¸­ï¼Œç¬¦å·ä»å¤–éƒ¨è·å¾—çš„æ•°å€¼ä¹Ÿå°†æ— æ³•æ­£å¸¸çš„èµ‹å€¼åˆ°outputä¸­ã€‚å› æ­¤ï¼Œç¬¦å·æ‰§è¡Œæ— æ³•æ±‚è§£ä¸Šè¿°é—®é¢˜ï¼Œå› ä¸ºåœ¨è°ƒç”¨ç³»ç»Ÿå‡½æ•°ä¸å¤–è®¾äº¤äº’çš„æ—¶å€™ï¼Œç¬¦å·æ•°å€¼çš„èµ‹å€¼è¿‡ç¨‹è¢«æˆªæ–­äº†ã€‚\n\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ€ç»å…¸çš„é¡¹ç›®å°±æ˜¯åŸºäºLLVMçš„KLEEï¼ˆklee)å®ƒæŠŠä¸€ç³»åˆ—çš„ä¸å¤–è®¾æœ‰å…³çš„ç³»ç»Ÿå‡½æ•°ç»™é‡æ–°å†™äº†ä¸€ä¸‹ï¼Œä½¿å¾—ç¬¦å·æ•°å€¼çš„ä¼ é€’èƒ½å¤Ÿç»§ç»­ä¸‹å»ã€‚ä»æ¯”è¾ƒç®€åŒ–çš„è§’åº¦æ¥è¯´ï¼Œå°±æ˜¯æŠŠä¸Šé¢çš„fputså‡½æ•°ä¿®æ”¹æˆï¼Œå­—ç¬¦ä¸²èµ‹å€¼åˆ°æŸä¸ªå˜é‡ä¸­ï¼Œæ¯”å¦‚å¯ä»¥æ˜¯ä¸Šé¢çš„fopé‡Œé¢ã€‚å†æŠŠfgetså‡½æ•°ä¿®æ”¹æˆä»æŸä¸ªå˜é‡è·å–å†…å®¹ï¼Œæ¯”å¦‚å¯ä»¥æ˜¯æŠŠfopçš„åœ°å€ç»™outputã€‚è¿™æ ·ï¼Œå°±èƒ½å¤ŸæŠŠç¬¦å·æ•°å€¼çš„ä¼ é€’ç»™ç»­ä¸Šã€‚å½“ç„¶ï¼Œè¿™é‡Œä¸¾çš„ä¾‹å­æ˜¯æ¯”è¾ƒç®€å•çš„ä¾‹å­ï¼Œå®é™…åœ¨é‡å†™å‡½æ•°çš„æ—¶å€™ï¼Œä¼šè¦å¤„ç†æ›´å¤æ‚çš„æƒ…å†µã€‚åœ¨KLEEä¸­ï¼Œå®ƒé‡æ–°å¯¹40ä¸ªç³»ç»Ÿè°ƒç”¨è¿›è¡Œäº†å»ºæ¨¡ï¼Œæ¯”å¦‚open, read, write, stat, lseek, ftruncate, ioctlã€‚æ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥è¿›ä¸€æ­¥é˜…è¯»ä»–ä»¬å‘è¡¨åœ¨OSDI2008å¹´çš„è®ºæ–‡ï¼ˆKLEE-OSDI08)ä»–ä»¬çš„æ–‡ç« æ·±å…¥æµ…å‡ºï¼Œéå¸¸é€‚åˆå­¦ä¹ ã€‚\n 0x2 ä»å…¬å¼åŸç†ä¸Šç†è§£ç¬¦å·æ‰§è¡Œ\nç¬¦å·æ‰§è¡Œçš„å…³é”®æ€æƒ³å°±æ˜¯ï¼ŒæŠŠè¾“å…¥å˜ä¸ºç¬¦å·å€¼ï¼Œé‚£ä¹ˆç¨‹åºè®¡ç®—çš„è¾“å‡ºå€¼å°±æ˜¯ä¸€ä¸ªç¬¦å·è¾“å…¥å€¼çš„å‡½æ•°ã€‚è¿™ä¸ªç¬¦å·åŒ–çš„è¿‡ç¨‹åœ¨ä¸Šä¸€ç¯‡AEGæ–‡ç« ä¸­å·²æœ‰ç®€è¦é˜è¿°ï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ä¸€ä¸ªç¨‹åºæ‰§è¡Œçš„è·¯å¾„é€šå¸¸æ˜¯trueå’Œfalseæ¡ä»¶çš„åºåˆ—ï¼Œè¿™äº›æ¡ä»¶æ˜¯åœ¨åˆ†æ”¯è¯­å¥å¤„äº§ç”Ÿçš„ã€‚åœ¨åºåˆ—çš„ç¬¬iä½ç½®å¦‚æœå€¼æ˜¯trueï¼Œé‚£ä¹ˆæ„å‘³ç€ç¬¬iä¸ªæ¡ä»¶è¯­å¥èµ°çš„æ˜¯thenè¿™ä¸ªåˆ†æ”¯ï¼›åä¹‹å¦‚æœæ˜¯falseå°±æ„å‘³ç€ç¨‹åºæ‰§è¡Œèµ°çš„æ˜¯elseåˆ†æ”¯ã€‚\né‚£ä¹ˆï¼Œå¦‚ä½•å½¢å¼åŒ–åœ°è¡¨ç¤ºç¬¦å·æ‰§è¡Œçš„è¿‡ç¨‹å‘¢ï¼Ÿç¨‹åºçš„æ‰€æœ‰æ‰§è¡Œè·¯å¾„å¯ä»¥è¡¨ç¤ºä¸ºæ ‘ï¼Œå«åšæ‰§è¡Œæ ‘ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä»¥ä¸€ä¸ªä¾‹å­æ¥é˜è¿°é€šè¿‡ç¬¦å·æ‰§è¡Œéå†ç¨‹åºæ‰§è¡Œæ ‘çš„è¿‡ç¨‹ã€‚\nint twice(int v)&#123;\n\treturn 2*v;\n&#125;\n\nvoid testme(int x, int y)&#123;\n\tz &#x3D; twice(y); \n\tif(z &#x3D;&#x3D; x)&#123;\n\t\tif(x &gt; y+10)\n\t\t\tERROR;\n\t\t&#125;\n\t&#125;\n&#125;\n\n&#x2F;* simple driver exercising testme() with sym inputs *&#x2F;\nint main()&#123;\n    x &#x3D; sym_input();\n    y &#x3D; sym_input();\n    testme(x, y);\n    return 0;\n&#125;\n\nä»£ç ä¸­ï¼Œtestme()å‡½æ•°æœ‰3æ¡æ‰§è¡Œè·¯å¾„ï¼Œç»„æˆäº†ä¸Šå›¾ä¸­çš„æ‰§è¡Œæ ‘ã€‚ç›´è§‚ä¸Šæ¥çœ‹ï¼Œæˆ‘ä»¬åªè¦ç»™å‡ºä¸‰ç»„è¾“å…¥å°±å¯ä»¥éå†è¿™ä¸‰ä¸ªè·¯å¾„ï¼Œå³å›¾ä¸­åœ†åœˆä¸­çš„xå’Œyå–å€¼ã€‚ç¬¦å·æ‰§è¡Œçš„ç›®æ ‡å°±æ˜¯èƒ½å¤Ÿç”Ÿæˆè¿™æ ·çš„è¾“å…¥é›†åˆï¼Œåœ¨ç»™å®šçš„æ—¶é—´å†…æ¢ç´¢æ‰€æœ‰çš„è·¯å¾„ã€‚\nä¸ºäº†å½¢å¼åŒ–åœ°å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œç¬¦å·æ‰§è¡Œä¼šåœ¨å…¨å±€ç»´æŠ¤ä¸¤ä¸ªå˜é‡ã€‚å…¶ä¸€æ˜¯ç¬¦å·çŠ¶æ€ Ïƒ\\sigmaÏƒ ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªä»å˜é‡åˆ°ç¬¦å·è¡¨è¾¾å¼çš„æ˜ å°„ã€‚å…¶äºŒæ˜¯ç¬¦å·åŒ–è·¯å¾„çº¦æŸPCï¼ˆæˆ–è€…å«è·¯å¾„æ¡ä»¶ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ª==æ— é‡è¯çš„ä¸€é˜¶å…¬å¼==ï¼Œç”¨æ¥è¡¨ç¤ºè·¯å¾„æ¡ä»¶ã€‚åœ¨ç¬¦å·æ‰§è¡Œçš„å¼€å§‹ï¼Œç¬¦å·çŠ¶æ€ Ïƒ\\sigmaÏƒ ä¼šå…ˆåˆå§‹åŒ–ä¸ºä¸€ä¸ªç©ºçš„æ˜ å°„ï¼Œè€Œç¬¦å·åŒ–è·¯å¾„çº¦æŸPCåˆå§‹åŒ–ä¸ºtrueã€‚ Ïƒ\\sigmaÏƒ å’ŒPCåœ¨ç¬¦å·æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¼šä¸æ–­æ›´æ–°ã€‚åœ¨ç¬¦å·æ‰§è¡Œç»“æŸæ—¶ï¼ŒPCå°±ä¼šç”¨çº¦æŸæ±‚è§£å™¨è¿›è¡Œæ±‚è§£ï¼Œä»¥ç”Ÿæˆå®é™…çš„è¾“å…¥å€¼ã€‚è¿™ä¸ªå®é™…çš„è¾“å…¥å€¼å¦‚æœç”¨ç¨‹åºæ‰§è¡Œï¼Œå°±ä¼šèµ°ç¬¦å·æ‰§è¡Œè¿‡ç¨‹ä¸­æ¢ç´¢çš„é‚£æ¡è·¯å¾„ï¼Œå³æ­¤æ—¶PCçš„å…¬å¼æ‰€è¡¨ç¤ºçš„è·¯å¾„ã€‚\næˆ‘ä»¬ä»¥ä¸Šå›¾çš„ä¾‹å­æ¥é˜è¿°è¿™ä¸ªè¿‡ç¨‹ã€‚å½“ç¬¦å·æ‰§è¡Œå¼€å§‹æ—¶ï¼Œç¬¦å·çŠ¶æ€ Ïƒ\\sigmaÏƒ ä¸ºç©ºï¼Œç¬¦å·è·¯å¾„çº¦æŸPCä¸ºtrueã€‚å½“æˆ‘ä»¬é‡åˆ°ä¸€ä¸ªè¯»è¯­å¥ï¼Œå½¢å¼ä¸ºvar=sym_input()ï¼Œå³æ¥æ”¶ç¨‹åºè¾“å…¥ï¼Œç¬¦å·æ‰§è¡Œå°±ä¼šåœ¨ç¬¦å·çŠ¶æ€ Ïƒ\\sigmaÏƒ ä¸­åŠ å…¥ä¸€ä¸ªæ˜ å°„ varâ†’svar \\rightarrow svarâ†’s ï¼Œè¿™é‡Œså°±æ˜¯ä¸€ä¸ªæ–°çš„æœªçº¦æŸçš„ç¬¦å·å€¼ã€‚ä¸Šè¿°ä»£ç ä¸­ï¼Œmain()å‡½æ•°çš„å‰ä¸¤è¡Œä¼šå¾—åˆ°ç»“æœ Ïƒ={xâ†’x0,yâ†’y0}\\sigma=\\lbrace x \\rightarrow x_0, y \\rightarrow y_0\\rbraceÏƒ={xâ†’x0â€‹,yâ†’y0â€‹} ï¼Œå…¶ä¸­ x0x_0x0â€‹ å’Œ y0y_0y0â€‹ æ˜¯ä¸¤ä¸ªåˆå§‹çš„æœªçº¦æŸçš„ç¬¦å·åŒ–å€¼ã€‚\nå½“æˆ‘ä»¬é‡åˆ°ä¸€ä¸ªèµ‹å€¼è¯­å¥ï¼Œå½¢å¼ä¸ºv=eï¼Œç¬¦å·æ‰§è¡Œå°±ä¼šå°†ç¬¦å·çŠ¶æ€ Ïƒ\\sigmaÏƒ æ›´æ–°ï¼ŒåŠ å…¥ä¸€ä¸ªvåˆ° Ïƒ(e)\\sigma(e)Ïƒ(e) çš„æ˜ å°„ï¼Œå…¶ä¸­ Ïƒ(e)\\sigma(e)Ïƒ(e) å°±æ˜¯åœ¨å½“å‰ç¬¦å·åŒ–çŠ¶æ€è®¡ç®—eå¾—åˆ°çš„è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼Œåœ¨ä»£ç æ‰§è¡Œå®Œç¬¬6è¡Œæ—¶ï¼Œ Ïƒ={xâ†’x0,yâ†’y0,zâ†’2y0}\\sigma=\\lbrace x \\rightarrow x_0, y \\rightarrow y_0, z \\rightarrow 2y_0\\rbraceÏƒ={xâ†’x0â€‹,yâ†’y0â€‹,zâ†’2y0â€‹} ã€‚\nå½“æˆ‘ä»¬é‡åˆ°æ¡ä»¶è¯­å¥if(e) S1 else S2ï¼ŒPCä¼šæœ‰ä¸¤ä¸ªä¸åŒæ›´æ–°ã€‚é¦–å…ˆæ˜¯PCæ›´æ–°ä¸º PCâˆ§Ïƒ(e)PC \\wedge \\sigma(e)PCâˆ§Ïƒ(e) ï¼Œè¿™å°±è¡¨ç¤ºthen åˆ†æ”¯ï¼›ç„¶åæ˜¯å»ºç«‹ä¸€ä¸ªæ–°çš„è·¯å¾„çº¦æŸPCâ€™ï¼Œåˆå§‹åŒ–ä¸º PCâˆ§Â¬Ïƒ(e)PC \\wedge \\neg \\sigma(e)PCâˆ§Â¬Ïƒ(e) ï¼Œè¿™å°±è¡¨ç¤ºelseåˆ†æ”¯ã€‚å¦‚æœPCæ˜¯å¯æ»¡è¶³çš„ï¼Œå³å¯ä»¥ç»™ç¬¦å·åˆ†é…ä¸€äº›å®é™…å€¼ï¼Œé‚£ä¹ˆç¨‹åºæ‰§è¡Œå°±ä¼šèµ°then åˆ†æ”¯ï¼Œæ­¤æ—¶çš„çŠ¶æ€ä¸ºï¼šç¬¦å·çŠ¶æ€ Ïƒ\\sigmaÏƒ å’Œç¬¦å·è·¯å¾„çº¦æŸPCã€‚åŒæ ·ï¼Œå¦‚æœPCâ€™æ˜¯å¯æ»¡è¶³çš„ï¼Œé‚£ä¹ˆä¼šå»ºç«‹å¦ä¸€ä¸ªç¬¦å·æ‰§è¡Œå®ä¾‹ï¼Œå…¶ç¬¦å·çŠ¶æ€ä¸º Ïƒ\\sigmaÏƒ ï¼Œç¬¦å·è·¯å¾„çº¦æŸä¸ºPCâ€™ï¼Œèµ°elseåˆ†æ”¯ï¼ˆè¯·æ³¨æ„ï¼Œä¸å…·ä½“æ‰§è¡Œä¸åŒï¼Œç¬¦å·æ‰§è¡ŒæŠ€æœ¯å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªåˆ†æ”¯ï¼Œä»è€Œäº§ç”Ÿä¸¤ä¸ªæ‰§è¡Œè·¯å¾„ï¼‰ã€‚å¦‚æœPCå’ŒPCâ€™éƒ½ä¸èƒ½æ»¡è¶³ï¼Œé‚£ä¹ˆæ‰§è¡Œå°±ä¼šåœ¨å¯¹åº”è·¯å¾„ç»ˆæ­¢ã€‚ä¾‹å¦‚ï¼Œç¬¬7è¡Œå»ºç«‹äº†ä¸¤ä¸ªä¸åŒçš„ç¬¦å·æ‰§è¡Œå®ä¾‹ï¼Œè·¯å¾„çº¦æŸåˆ†åˆ«æ˜¯ x0=2y0x_0=2y_0x0â€‹=2y0â€‹ å’Œ x0=Ì¸2y0x_0 \\not= 2y_0x0â€‹î€ â€‹=2y0â€‹ ã€‚åœ¨ç¬¬8è¡Œï¼Œåˆå»ºç«‹äº†ä¸¤ä¸ªç¬¦å·æ‰§è¡Œå®ä¾‹ï¼Œè·¯å¾„çº¦æŸåˆ†åˆ«æ˜¯ (x0=2y0)âˆ§(x0&gt;y0+10)(x_0=2y_0) \\wedge (x_0 &gt; y_0 + 10)(x0â€‹=2y0â€‹)âˆ§(x0â€‹&gt;y0â€‹+10) å’Œ (x0=2y0)âˆ§(x0â‰¤y0+10)(x_0=2y_0) \\wedge (x_0 \\leq y_0 + 10)(x0â€‹=2y0â€‹)âˆ§(x0â€‹â‰¤y0â€‹+10) .\nå¦‚æœç¬¦å·æ‰§è¡Œé‡åˆ°äº†exitè¯­å¥æˆ–è€…é”™è¯¯ï¼ˆæŒ‡çš„æ˜¯ç¨‹åºå´©æºƒã€è¿åæ–­è¨€ç­‰ï¼‰ï¼Œç¬¦å·æ‰§è¡Œçš„å½“å‰å®ä¾‹ä¼šç»ˆæ­¢ï¼Œåˆ©ç”¨çº¦æŸæ±‚è§£å™¨å¯¹å½“å‰ç¬¦å·è·¯å¾„çº¦æŸèµ‹ä¸€ä¸ªå¯æ»¡è¶³çš„å€¼ï¼Œè€Œå¯æ»¡è¶³çš„èµ‹å€¼å°±æ„æˆäº†æµ‹è¯•è¾“å…¥ï¼šå¦‚æœç¨‹åºæ‰§è¡Œè¿™äº›å®é™…è¾“å…¥å€¼ï¼Œå°±ä¼šåœ¨åŒæ ·çš„è·¯å¾„ç»“æŸã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸Šå›¾ä¾‹å­ä¸­ï¼Œç»è¿‡ç¬¦å·æ‰§è¡Œçš„è®¡ç®—ä¼šå¾—åˆ°ä¸‰ä¸ªæµ‹è¯•è¾“å…¥: {x=0,y=1}\\lbrace x=0,y=1\\rbrace{x=0,y=1}, {x=2,y=1}\\lbrace x=2,y=1\\rbrace{x=2,y=1}, {x=30,y=15}\\lbrace x=30,y=15\\rbrace{x=30,y=15} .\nvoid testme_inf() &#123;          \n    int sum &#x3D; 0;\n    int N &#x3D; sym_input();      \n    while (N &gt; 0) &#123;\n        sum &#x3D; sum + N\n        N &#x3D; sym_input();\n    &#125;\n&#125;\nå½“æˆ‘ä»¬é‡åˆ°äº†å¾ªç¯å’Œé€’å½’åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå¦‚æœå¾ªç¯æˆ–é€’å½’çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ç¬¦å·åŒ–çš„ï¼ŒåŒ…å«å¾ªç¯å’Œé€’å½’çš„ç¬¦å·æ‰§è¡Œä¼šå¯¼è‡´æ— é™æ•°é‡çš„è·¯å¾„ã€‚æ¯”å¦‚ä¸Šé¢ä»£ç ä¸­è¿™ä¸ªä¾‹å­ï¼Œè¿™æ®µä»£ç å°±æœ‰æ— æ•°æ¡æ‰§è¡Œè·¯å¾„ï¼Œæ¯æ¡è·¯å¾„çš„å¯èƒ½æ€§æœ‰ä¸¤ç§ï¼šè¦ä¹ˆæ˜¯ä»»æ„æ•°é‡çš„trueåŠ ä¸Šä¸€ä¸ªfalseç»“å°¾ï¼Œè¦ä¹ˆæ˜¯æ— ç©·å¤šæ•°é‡çš„trueã€‚æˆ‘ä»¬å½¢å¼åŒ–åœ°è¡¨ç¤ºåŒ…å«nä¸ªtrueæ¡ä»¶å’Œ1ä¸ªfalseæ¡ä»¶çš„è·¯å¾„ï¼Œå…¶ç¬¦å·åŒ–çº¦æŸå¦‚ä¸‹ï¼š\n(âˆ§iâˆˆ[1,n]Ni&gt;0)âˆ§(Nn+1â‰¤10)(\\wedge_{i \\in [1,n]}N_i &gt; 0) \\wedge (N_{n+1} \\leq 10)\n(âˆ§iâˆˆ[1,n]â€‹Niâ€‹&gt;0)âˆ§(Nn+1â€‹â‰¤10)\nå…¶ä¸­æ¯ä¸ª NiN_iNiâ€‹ éƒ½æ˜¯ä¸€ä¸ªæ–°çš„ç¬¦å·åŒ–å€¼ï¼Œæ‰§è¡Œç»“å°¾çš„ç¬¦å·çŠ¶æ€æ˜¯ï¼š\n{Nâ†’Nn+1,sumâ†’âˆ‘iâˆˆ[1,n]Ni}\\Big\\lbrace N \\rightarrow N_{n+1}, sum \\rightarrow \\sum_{i \\in [1,n]} N_i \\Big\\rbrace\n{Nâ†’Nn+1â€‹,sumâ†’iâˆˆ[1,n]âˆ‘â€‹Niâ€‹}\nå…¶å®è¿™å°±æ˜¯ç¬¦å·æ‰§è¡Œé¢ä¸´çš„é—®é¢˜ä¹‹ä¸€ï¼Œå³å¦‚ä½•å¤„ç†å¾ªç¯ä¸­çš„æ— é™å¤šè·¯å¾„ã€‚åœ¨å®é™…ä¸­ï¼Œæœ‰ä¸€äº›æ–¹æ³•å¯ä»¥åº”å¯¹ï¼Œæ¯”å¦‚å¯¹æœç´¢åŠ å…¥é™åˆ¶ï¼Œè¦ä¹ˆæ˜¯é™åˆ¶æœç´¢æ—¶é—´çš„é•¿çŸ­ï¼Œè¦ä¹ˆæ˜¯é™åˆ¶è·¯å¾„æ•°é‡ã€å¾ªç¯è¿­ä»£æ¬¡æ•°ã€æ¢ç´¢æ·±åº¦ç­‰ç­‰ã€‚\nè¿˜éœ€è¦è€ƒè™‘åˆ°çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œå¦‚æœç¬¦å·è·¯å¾„çº¦æŸåŒ…å«ä¸èƒ½ç”±æ±‚è§£å™¨é«˜æ•ˆæ±‚è§£çš„å…¬å¼æ€ä¹ˆåŠï¼Ÿæ¯”å¦‚è¯´ï¼Œå¦‚æœåŸæœ¬çš„ä»£ç å‘ç”Ÿå˜åŒ–ï¼ŒæŠŠtwiceå‡½æ•°æ›¿æ¢ä¸ºä¸‹è¿°è¯­å¥ï¼š\nint twice(int v) &#123;\n    return (v*v) % 50;\n&#125;\né‚£ä¹ˆç¬¦å·æ‰§è¡Œå°±ä¼šäº§ç”Ÿè·¯å¾„çº¦æŸ x0â‰ (y0y0)mod50x_0 \\neq (y_0y_0)mod50x0â€‹î€ â€‹=(y0â€‹y0â€‹)mod50 ä»¥åŠ  x0=(y0y0)mod50x_0 = (y_0y_0)mod50x0â€‹=(y0â€‹y0â€‹)mod50 ã€‚æˆ‘ä»¬åšå¦å¤–ä¸€ä¸ªå‡è®¾ï¼Œå¦‚æœtwiceæ˜¯ä¸€ä¸ªæˆ‘ä»¬å¾—ä¸åˆ°æºç çš„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸çŸ¥é“è¿™ä¸ªå‡½æ•°æœ‰ä»€ä¹ˆåŠŸèƒ½ï¼Œé‚£ä¹ˆç¬¦å·æ‰§è¡Œä¼šäº§ç”Ÿè·¯å¾„çº¦æŸ x0â‰ twice(y0)x_0 \\neq twice(y_0)x0â€‹î€ â€‹=twice(y0â€‹) ä»¥åŠ  x0=twice(y0)x_0 = twice(y_0)x0â€‹=twice(y0â€‹) ï¼Œå…¶ä¸­twiceæ˜¯ä¸€ä¸ªæœªè§£é‡Šçš„å‡½æ•°ã€‚è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œçº¦æŸæ±‚è§£å™¨éƒ½æ˜¯ä¸èƒ½æ±‚è§£è¿™æ ·çš„çº¦æŸçš„ï¼Œæ‰€ä»¥ç¬¦å·æ‰§è¡Œä¸èƒ½äº§ç”Ÿè¾“å…¥ã€‚\nå…¶å®æˆ‘ä»¬ä¸Šè¿°ä»‹ç»çš„å†…å®¹ï¼Œåº”è¯¥å±äºçº¯ç²¹çš„é™æ€ç¬¦å·æ‰§è¡Œçš„èŒƒç•´ã€‚æˆ‘ä»¬æå‡ºçš„ä¸¤ä¸ªé—®é¢˜ï¼Œæ˜¯å¯¼è‡´é™æ€ç¬¦å·æ‰§è¡Œä¸èƒ½å¤Ÿå®ç”¨çš„åŸå› ä¹‹ä¸€ã€‚ç¬¦å·æ‰§è¡Œçš„æ¦‚å¿µæ—©åœ¨1975å¹´[4]å°±æå‡ºäº†ï¼Œä½†æ˜¯ç¬¦å·æ‰§è¡ŒæŠ€æœ¯çœŸæ­£å¾—åˆ°å®ç”¨ï¼Œå´æ˜¯åœ¨ä¸€ç§æ–¹å¼æå‡ºä¹‹åï¼Œå³æ··åˆå®é™…æ‰§è¡Œå’Œç¬¦å·æ‰§è¡Œï¼Œç§°ä¸ºconcolic executionï¼Œæ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„åŠ¨æ€ç¬¦å·æ‰§è¡Œã€‚æˆ‘ä»¬ä¼šåœ¨åé¢çš„å°èŠ‚ä¸­ä»‹ç»ã€‚\n 0x3 åŠ¨æ€ç¬¦å·æ‰§è¡Œ Concolic Execution\næœ€æ—©å°†å®é™…æ‰§è¡Œ(concrete execution)å’Œç¬¦å·æ‰§è¡Œ(symbolic execution)ç»“åˆèµ·æ¥çš„æ˜¯2005å¹´å‘è¡¨çš„DART[5]ï¼Œå…¨ç§°ä¸ºâ€œDirected Automated Random Testingâ€(æˆ–ç§°concolic testing)ï¼Œä»¥åŠ2005å¹´å‘è¡¨çš„CUTE[6]ï¼Œå³â€œA concolic unit testing engine for Câ€ã€‚\n**Concolicæ‰§è¡Œç»´æŠ¤ä¸€ä¸ªå®é™…çŠ¶æ€(concrete state)å’Œä¸€ä¸ªç¬¦å·åŒ–çŠ¶æ€(symbolic state)ï¼šå®é™…çŠ¶æ€å°†æ‰€æœ‰å˜é‡æ˜ å°„åˆ°å®é™…å€¼ï¼Œç¬¦å·çŠ¶æ€åªæ˜ å°„é‚£äº›æœ‰éå®é™…å€¼çš„å˜é‡ã€‚Concolicæ‰§è¡Œé¦–å…ˆç”¨ä¸€äº›ç»™å®šçš„æˆ–è€…éšæœºçš„è¾“å…¥æ¥æ‰§è¡Œç¨‹åºï¼Œæ”¶é›†æ‰§è¡Œè¿‡ç¨‹ä¸­æ¡ä»¶è¯­å¥å¯¹è¾“å…¥çš„ç¬¦å·åŒ–çº¦æŸï¼Œç„¶åä½¿ç”¨çº¦æŸæ±‚è§£å™¨å»æ¨ç†è¾“å…¥çš„å˜åŒ–ï¼Œä»è€Œå°†ä¸‹ä¸€æ¬¡ç¨‹åºçš„æ‰§è¡Œå¯¼å‘å¦ä¸€æ¡æ‰§è¡Œè·¯å¾„ã€‚**ç®€å•åœ°è¯´æ¥ï¼Œå°±æ˜¯åœ¨å·²æœ‰å®é™…è¾“å…¥å¾—åˆ°çš„è·¯å¾„ä¸Šï¼Œå¯¹åˆ†æ”¯è·¯å¾„æ¡ä»¶è¿›è¡Œå–åï¼Œå°±å¯ä»¥è®©æ‰§è¡Œèµ°å‘å¦å¤–ä¸€æ¡è·¯å¾„ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šä¸æ–­åœ°é‡å¤ï¼ŒåŠ ä¸Šç³»ç»ŸåŒ–æˆ–å¯å‘å¼çš„è·¯å¾„é€‰æ‹©ç®—æ³•ï¼Œç›´åˆ°æ‰€æœ‰çš„è·¯å¾„éƒ½è¢«æ¢ç´¢ï¼Œæˆ–è€…ç”¨æˆ·å®šä¹‰çš„è¦†ç›–ç›®æ ‡è¾¾åˆ°ï¼Œæˆ–è€…æ—¶é—´å¼€é”€è¶…è¿‡é¢„è®¡ã€‚\næˆ‘ä»¬ä¾æ—§ä»¥ä¸Šé¢é‚£ä¸ªç¨‹åºçš„ä¾‹å­æ¥è¯´æ˜ã€‚Concolicæ‰§è¡Œä¼šå…ˆäº§ç”Ÿä¸€äº›éšæœºè¾“å…¥ï¼Œä¾‹å¦‚{x=22, y=7}ï¼Œç„¶ååŒæ—¶å®é™…åœ°å’Œç¬¦å·åŒ–åœ°æ‰§è¡Œç¨‹åºã€‚è¿™ä¸ªå®é™…æ‰§è¡Œä¼šèµ°åˆ°ç¬¬7è¡Œçš„elseåˆ†æ”¯ï¼Œç¬¦å·åŒ–æ‰§è¡Œä¼šåœ¨å®é™…æ‰§è¡Œçš„è·¯å¾„ä¸Šç”Ÿæˆä¸€ä¸ªè·¯å¾„çº¦æŸï¼šx0â‰ 2y0x_0 \\neq 2y_0x0â€‹î€ â€‹=2y0â€‹ ã€‚ç„¶åConcolicæ‰§è¡Œä¼šå°†è·¯å¾„çº¦æŸçš„è¿æ¥è¯å–åï¼Œå¾—åˆ°æ–°çš„è·¯å¾„çº¦æŸ x0=2y0x_0 = 2y_0x0â€‹=2y0â€‹ ï¼Œçº¦æŸæ±‚è§£å¾—åˆ°ä¸€ä¸ªæ–°çš„æµ‹è¯•è¾“å…¥{x=2, y=1}ï¼Œè¿™ä¸ªæ–°è¾“å…¥å°±ä¼šè®©æ‰§è¡Œèµ°å‘ä¸€æ¡ä¸åŒçš„è·¯å¾„ã€‚ä¹‹åï¼ŒConcolicæ‰§è¡Œä¼šåœ¨è¿™ä¸ªæ–°çš„æµ‹è¯•è¾“å…¥ä¸Šå†åŒæ—¶è¿›è¡Œå®é™…çš„å’Œç¬¦å·åŒ–çš„æ‰§è¡Œï¼Œæ‰§è¡Œä¼šå–ä¸æ­¤å‰è·¯å¾„ä¸åŒçš„åˆ†æ”¯ï¼Œå³ç¬¬7è¡Œçš„thenåˆ†æ”¯å’Œç¬¬8è¡Œçš„elseåˆ†æ”¯ï¼Œè¿™æ—¶äº§ç”Ÿçš„çº¦æŸå°±æ˜¯ (x0=2y0)âˆ§(x0â‰¤y0+10)(x_0=2y_0) \\wedge (x_0 \\leq y_0 + 10)(x0â€‹=2y0â€‹)âˆ§(x0â€‹â‰¤y0â€‹+10) ï¼Œç”Ÿæˆæ–°çš„æµ‹è¯•è¾“å…¥è®©ç¨‹åºæ‰§è¡Œæ²¡æœ‰è¢«æ‰§è¡Œè¿‡çš„è·¯å¾„ã€‚å†æ¢ç´¢æ–°çš„è·¯å¾„ï¼Œå°±éœ€è¦å°†ä¸Šè¿°æ–°åŠ å…¥çš„çº¦æŸæ¡ä»¶å–åï¼Œä¹Ÿå°±æ˜¯ (x0=2y0)âˆ§(x0&gt;y0+10)(x_0=2y_0) \\wedge (x_0 &gt; y_0 + 10)(x0â€‹=2y0â€‹)âˆ§(x0â€‹&gt;y0â€‹+10) ï¼Œé€šè¿‡æ±‚è§£çº¦æŸå¾—åˆ°æµ‹è¯•è¾“å…¥{x=30, y=15}ï¼Œç¨‹åºä¼šåœ¨è¿™ä¸ªè¾“å…¥ä¸Šé‡åˆ°ERRORè¯­å¥ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†æ‰€æœ‰3æ¡è·¯å¾„çš„æ¢ç´¢ã€‚\nPSï¼šæ³¨æ„åœ¨è¿™ä¸ªæœç´¢è¿‡ç¨‹ä¸­ï¼Œå…¶å®Concolicæ‰§è¡Œä½¿ç”¨äº†æ·±åº¦ä¼˜å…ˆçš„æœç´¢ç­–ç•¥ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡äº§ç”Ÿæ–°çš„è¾“å…¥Concolicæ‰§è¡Œéƒ½å°†æ‰§è¡Œå®Œæ•´ä¸ªç¨‹åºï¼Œç›´åˆ°ç¨‹åºç»“æŸï¼Œç„¶åæ‰è¿”å›ä¸Šä¸€ä¸ªæ²¡æœ‰æµ‹è¯•çš„è·¯å¾„çº¦æŸæ¡ä»¶ï¼Œå–åçº¦æŸæ¡ä»¶ï¼Œå¾—åˆ°æ–°çš„è¾“å…¥ï¼Œè¿›å…¥æ–°çš„è·¯å¾„ã€‚\nè¿™ä¸Šè¿°è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»ä¸€ä¸ªå®é™…è¾“å…¥{x=22, y=7}å‡ºå‘ï¼Œå¾—åˆ°ç¬¬ä¸€ä¸ªçº¦æŸæ¡ä»¶ x0â‰ 2y0x_0 \\neq 2y_0x0â€‹î€ â€‹=2y0â€‹ ï¼Œç¬¬ä¸€æ¬¡å–åå¾—åˆ° x0=2y0x_0 = 2y_0x0â€‹=2y0â€‹ ï¼Œä»è€Œå¾—åˆ°æµ‹è¯•è¾“å…¥{x=2, y=1}å’Œæ–°çº¦æŸ (x0=2y0)âˆ§(x0â‰¤y0+10)(x_0=2y_0) \\wedge (x_0 \\leq y_0 + 10)(x0â€‹=2y0â€‹)âˆ§(x0â€‹â‰¤y0â€‹+10) ï¼›ç¬¬äºŒæ¬¡å–åå¾—åˆ° (x0=2y0)âˆ§(x0&gt;y0+10)(x_0=2y_0) \\wedge (x_0 &gt; y_0 + 10)(x0â€‹=2y0â€‹)âˆ§(x0â€‹&gt;y0â€‹+10) ï¼Œä»è€Œæ±‚è§£å‡ºæµ‹è¯•è¾“å…¥{x=30, y=15}ã€‚\nCristian Cadaråœ¨2006å¹´å‘è¡¨EXEï¼Œä»¥åŠ2008å¹´å‘è¡¨EXEçš„æ”¹è¿›ç‰ˆæœ¬KLEEï¼Œå¯¹ä¸Šè¿°Concolicæ‰§è¡Œçš„æ–¹æ³•åšäº†è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚å…¶åˆ›æ–°ç‚¹ä¸»è¦æ˜¯åœ¨å®é™…çŠ¶æ€å’Œç¬¦å·çŠ¶æ€ä¹‹é—´è¿›è¡ŒåŒºåˆ†ï¼Œç§°ä¹‹ä¸ºæ‰§è¡Œç”Ÿæˆçš„æµ‹è¯•ï¼ˆExecution-Generated Testingï¼‰ï¼Œç®€ç§°EGTã€‚è¿™ä¸ªæ–¹æ³•åœ¨æ¯æ¬¡è¿ç®—å‰åŠ¨æ€æ£€æŸ¥å€¼æ˜¯ä¸æ˜¯éƒ½æ˜¯å®é™…çš„ï¼Œå¦‚æœéƒ½æ˜¯å®é™…çš„å€¼ï¼Œé‚£ä¹ˆè¿ç®—å°±åŸæ ·æ‰§è¡Œï¼Œå¦åˆ™ï¼Œå¦‚æœè‡³å°‘æœ‰ä¸€ä¸ªå€¼æ˜¯ç¬¦å·åŒ–çš„ï¼Œè¿ç®—å°±ä¼šé€šè¿‡æ›´æ–°å½“å‰è·¯å¾„çš„æ¡ä»¶ç¬¦å·åŒ–åœ°è¿›è¡Œã€‚ä¾‹å¦‚ï¼Œå¯¹äºæˆ‘ä»¬çš„ä¾‹å­ç¨‹åºï¼Œç¬¬17è¡ŒæŠŠy=sym_input()æ”¹å˜æˆy=10ï¼Œé‚£ä¹ˆç¬¬6è¡Œå°±ä¼šç”¨å®é™…å‚æ•°10å»è°ƒç”¨å‡½æ•°twiceï¼Œå¹¶å®é™…æ‰§è¡Œã€‚ç„¶åç¬¬7è¡Œå˜æˆif(20==x)ï¼Œç¬¦å·æ‰§è¡Œè‹¥èµ°thenè·¯å¾„ï¼Œåˆ™åŠ å…¥çº¦æŸx=20ï¼›å¯¹æ¡ä»¶è¿›è¡Œå–åå°±å¯ä»¥èµ°elseè·¯å¾„ï¼Œçº¦æŸæ˜¯xâ‰ 20ã€‚åœ¨thenè·¯å¾„ä¸Šï¼Œç¬¬8è¡Œå˜æˆif(x&gt;20)ï¼Œé‚£ä¹ˆè¯¥ifçš„thenè·¯å¾„å°±ä¸èƒ½èµ°äº†ï¼Œå› ä¸ºæ­¤æ—¶æœ‰çº¦æŸx=20ã€‚ç®€è¨€ä¹‹ï¼ŒEGTæœ¬è´¨ä¸Šè¿˜æ˜¯å°†å®é™…æ‰§è¡Œä¸ç¬¦å·æ‰§è¡Œç›¸ç»“åˆï¼Œé€šè¿‡è·¯å¾„å–åæ¢ç´¢æ‰€æœ‰å¯èƒ½è·¯å¾„ã€‚\næ­£æ˜¯å› ä¸ºconcolicæ‰§è¡Œçš„å‡ºç°ï¼Œè®©ä¼ ç»Ÿé™æ€ç¬¦å·æ‰§è¡Œé‡åˆ°çš„å¾ˆå¤šé—®é¢˜èƒ½å¤Ÿå¾—åˆ°è§£å†³â€”â€”é‚£äº›ç¬¦å·æ‰§è¡Œä¸å¥½å¤„ç†çš„éƒ¨åˆ†ã€æ±‚è§£å™¨æ— æ³•æ±‚è§£çš„éƒ¨åˆ†ï¼Œç”¨å®é™…å€¼æ›¿æ¢å°±å¥½äº†ã€‚ä½¿ç”¨å®é™…å€¼ï¼Œå¯ä»¥è®©å› å¤–éƒ¨ä»£ç äº¤äº’å’Œçº¦æŸæ±‚è§£è¶…æ—¶é€ æˆçš„ä¸ç²¾ç¡®å¤§å¤§é™ä½ï¼Œä½†ä»˜å‡ºçš„ä»£ä»·å°±æ˜¯ï¼Œä¼šæœ‰ä¸¢å¤±è·¯å¾„çš„ç¼ºé™·ï¼Œç‰ºç‰²äº†è·¯å¾„æ¢ç´¢çš„å®Œå…¨æ€§ã€‚æˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜è¿™ä¸€ç‚¹ã€‚å‡è®¾æˆ‘ä»¬åŸå§‹ä¾‹å­ç¨‹åºåšäº†æ”¹åŠ¨ï¼Œå³æŠŠtwiceå‡½æ•°çš„å®šä¹‰æ”¹ä¸ºè¿”å›(v*v)%50ã€‚å‡è®¾æ‰§è¡Œä»éšæœºè¾“å…¥{x=22, y=7}å¼€å§‹ï¼Œif(x==z)æ¡ä»¶å–åç”Ÿæˆè·¯å¾„çº¦æŸ x0â‰ (y0y0)mod50x_0 \\neq (y_0y_0)mod50x0â€‹î€ â€‹=(y0â€‹y0â€‹)mod50 ã€‚å› ä¸ºçº¦æŸæ±‚è§£å™¨æ— æ³•æ±‚è§£éçº¿æ€§çº¦æŸï¼Œæ‰€ä»¥concolicæ‰§è¡Œçš„åº”å¯¹æ–¹æ³•æ˜¯ï¼ŒæŠŠç¬¦å·å€¼ç”¨å®é™…å€¼æ›¿æ¢ï¼Œæ­¤å¤„ä¼šæŠŠ y0y_0y0â€‹ çš„å€¼æ›¿æ¢ä¸º7ï¼Œè¿™å°±å°†ç¨‹åºçº¦æŸç®€åŒ–ä¸º x0â‰ 49x_0 \\neq 49x0â€‹î€ â€‹=49 ã€‚é€šè¿‡æ±‚è§£è¿™ä¸ªçº¦æŸï¼Œå¯ä»¥å¾—åˆ°è¾“å…¥{x=49, y=7}ï¼Œèµ°åˆ°ä¸€ä¸ªæ­¤å‰æ²¡æœ‰èµ°åˆ°çš„è·¯å¾„ã€‚ä¼ ç»Ÿé™æ€ç¬¦å·æ‰§è¡Œæ˜¯æ— æ³•åšåˆ°è¿™ä¸€æ­¥çš„ã€‚ä½†æ˜¯ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ— æ³•ç”Ÿæˆè·¯å¾„true-falseçš„è¾“å…¥ï¼Œå³çº¦æŸ (x0â‰ (y0y0)mod50)âˆ§(x0â‰¤y0+10)(x_0 \\neq (y_0y_0)mod50) \\wedge (x_0 \\leq y_0 + 10)(x0â€‹î€ â€‹=(y0â€‹y0â€‹)mod50)âˆ§(x0â€‹â‰¤y0â€‹+10)  ï¼Œå› ä¸º y0y_0y0â€‹ çš„å€¼å·²ç»å®é™…åŒ–äº†ï¼Œè¿™å°±é€ æˆäº†ä¸¢å¤±è·¯å¾„çš„é—®é¢˜ï¼Œé€ æˆä¸å®Œå…¨æ€§ã€‚\nç„¶è€Œæ€»çš„æ¥è¯´ï¼ŒConcolicæ‰§è¡Œçš„æ–¹æ³•æ˜¯éå¸¸å®ç”¨çš„ï¼Œæœ‰æ•ˆè§£å†³äº†é‡åˆ°ä¸æ”¯æŒçš„è¿ç®—ä»¥åŠåº”ç”¨ä¸å¤–ç•Œäº¤äº’çš„é—®é¢˜ã€‚æ¯”å¦‚è°ƒç”¨åº“å‡½æ•°å’Œç³»ç»Ÿè°ƒç”¨çš„æƒ…å†µä¸‹ï¼Œå› ä¸ºåº“å’Œç³»ç»Ÿè°ƒç”¨æ— æ³•æ’æ¡©ï¼Œæ‰€ä»¥è¿™äº›å‡½æ•°ç›¸å…³çš„è¿”å›å€¼ä¼šè¢«å®é™…åŒ–ï¼Œä»¥æ­¤è·å¾—ç®€åŒ–çš„ç¨‹åºçº¦æŸã€‚\n 0x3 é¢ä¸´æŒ‘æˆ˜&amp;è§£å†³æ–¹æ¡ˆ\nç¬¦å·æ‰§è¡Œæ›¾ç»é‡åˆ°è¿‡å¾ˆå¤šé—®é¢˜ï¼Œä½¿å…¶éš¾ä»¥åº”ç”¨åœ¨çœŸå®çš„ç¨‹åºåˆ†æä¸­ã€‚ç»è¿‡ç ”ç©¶è€…çš„ä¸æ‡ˆåŠªåŠ›ï¼Œè¿™äº›é—®é¢˜å¤šå¤šå°‘å°‘å¾—åˆ°äº†è§£å†³ï¼Œç”±æ­¤ä¹Ÿäº§ç”Ÿäº†ä¸€å¤§æ‰¹ä¼˜ç§€çš„å­¦æœ¯è®ºæ–‡ã€‚è¿™ä¸€éƒ¨åˆ†å°†ç®€å•ä»‹ç»å…¶ä¸­çš„ä¸€äº›å…³é”®æŒ‘æˆ˜ä»¥åŠå¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚\n 1.è·¯å¾„çˆ†ç‚¸(Path Explosion)\nç”±äºåœ¨æ¯ä¸€ä¸ªæ¡ä»¶åˆ†æ”¯éƒ½ä¼šäº§ç”Ÿä¸¤ä¸ªä¸åŒçº¦æŸï¼Œç¬¦å·æ‰§è¡Œè¦æ¢ç´¢çš„æ‰§è¡Œè·¯å¾„ä¾åˆ†æ”¯æ•°æŒ‡æ•°å¢é•¿ã€‚åœ¨æ—¶é—´å’Œèµ„æºæœ‰é™çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥å¯¹æœ€ç›¸å…³çš„è·¯å¾„è¿›è¡Œæ¢ç´¢ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†è·¯å¾„é€‰æ‹©çš„é—®é¢˜ã€‚é€šè¿‡è·¯å¾„é€‰æ‹©çš„æ–¹æ³•ç¼“è§£æŒ‡æ•°çˆ†ç‚¸é—®é¢˜ï¼Œä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š\n1ï¼‰ä½¿ç”¨å¯å‘å¼å‡½æ•°å¯¹è·¯å¾„è¿›è¡Œæœç´¢ï¼Œç›®çš„æ˜¯å…ˆæ¢ç´¢æœ€å€¼å¾—æ¢ç´¢çš„è·¯å¾„ï¼›\n2ï¼‰ä½¿ç”¨ä¸€äº›å¯é çš„ç¨‹åºåˆ†ææŠ€æœ¯å‡å°‘è·¯å¾„æ¢ç´¢çš„å¤æ‚æ€§ã€‚\nå¯å‘å¼æœç´¢æ˜¯ä¸€ç§è·¯å¾„æœç´¢ç­–ç•¥ï¼Œæ¯”æ·±åº¦ä¼˜å…ˆæˆ–è€…å®½åº¦ä¼˜å…ˆè¦æ›´å…ˆè¿›ä¸€äº›ã€‚å¤§å¤šæ•°å¯å‘å¼çš„ä¸»è¦ç›®æ ‡åœ¨äºè·å¾—è¾ƒé«˜çš„è¯­å¥å’Œåˆ†æ”¯çš„è¦†ç›–ç‡ï¼Œä¸è¿‡ä¹Ÿæœ‰å¯èƒ½ç”¨äºå…¶ä»–ä¼˜åŒ–ç›®çš„ã€‚æœ€ç®€å•çš„å¯å‘å¼å¤§æ¦‚æ˜¯éšæœºæ¢ç´¢çš„å¯å‘å¼ï¼Œå³åœ¨ä¸¤è¾¹éƒ½å¯è¡Œçš„ç¬¦å·åŒ–åˆ†æ”¯éšæœºé€‰æ‹©èµ°å“ªä¸€è¾¹ã€‚è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯ï¼Œä½¿ç”¨é™æ€æ§åˆ¶æµå›¾ï¼ˆCFGï¼‰æ¥æŒ‡å¯¼è·¯å¾„é€‰æ‹©ï¼Œå°½é‡é€‰æ‹©ä¸æœªè¦†ç›–æŒ‡ä»¤æœ€æ¥è¿‘çš„è·¯å¾„ã€‚å¦ä¸€ä¸ªæ–¹æ³•æ˜¯ç¬¦å·æ‰§è¡Œä¸è¿›åŒ–æœç´¢ç›¸ç»“åˆï¼Œå…¶fitness functionç”¨æ¥æŒ‡å¯¼è¾“å…¥ç©ºé—´çš„æœç´¢ï¼Œå…¶å…³é”®å°±åœ¨äºfitness functionçš„å®šä¹‰ï¼Œä¾‹å¦‚åˆ©ç”¨ä»åŠ¨æ€æˆ–é™æ€åˆ†æä¸­å¾—åˆ°çš„å®é™…çŠ¶æ€(concrete state)ä¿¡æ¯æˆ–è€…ç¬¦å·ä¿¡æ¯æ¥æå‡fitness functionã€‚\nç”¨ç¨‹åºåˆ†æå’Œè½¯ä»¶éªŒè¯çš„æ€è·¯å»å‡å°‘è·¯å¾„æ¢ç´¢çš„å¤æ‚æ€§ï¼Œä¹Ÿæ˜¯ä¸€ç§ç¼“è§£è·¯å¾„çˆ†ç‚¸é—®é¢˜çš„æ–¹å¼ã€‚ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ˜¯ï¼Œé€šè¿‡é™æ€èåˆå‡å°‘éœ€è¦æ¢ç´¢çš„è·¯å¾„ï¼Œå…·ä½“è¯´æ¥å°±æ˜¯ä½¿ç”¨selectè¡¨è¾¾å¼ç›´æ¥ä¼ é€’ç»™çº¦æŸæ±‚è§£å™¨ï¼Œä½†å®é™…ä¸Šæ˜¯å°†è·¯å¾„é€‰æ‹©çš„å¤æ‚æ€§ä¼ é€’ç»™äº†æ±‚è§£å™¨ï¼Œå¯¹æ±‚è§£å™¨æå‡ºäº†æ›´é«˜çš„è¦æ±‚ã€‚è¿˜æœ‰ä¸€ç§æ€è·¯æ˜¯é‡ç”¨ï¼Œå³é€šè¿‡ç¼“å­˜ç­‰æ–¹å¼å­˜å‚¨å‡½æ•°æ‘˜è¦ï¼Œå¯ä»¥å°†åº•å±‚å‡½æ•°çš„è®¡ç®—ç»“æœé‡ç”¨åˆ°é«˜çº§å‡½æ•°ä¸­ï¼Œä¸éœ€è¦é‡å¤è®¡ç®—ï¼Œå‡å°åˆ†æçš„å¤æ‚æ€§ã€‚è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯å‰ªæå†—ä½™è·¯å¾„ï¼ŒRWsetæŠ€æœ¯çš„å…³é”®æ€è·¯å°±æ˜¯ï¼Œå¦‚æœç¨‹åºè·¯å¾„ä¸æ­¤å‰æ¢ç´¢è¿‡çš„è·¯å¾„åœ¨åŒæ ·ç¬¦å·çº¦æŸçš„æƒ…å†µä¸‹åˆ°è¾¾ç›¸åŒçš„ç¨‹åºç‚¹ï¼Œé‚£ä¹ˆè¿™æ¡è·¯å¾„å°±ä¼šä»è¯¥ç‚¹ç»§ç»­æ‰§è¡Œï¼Œæ‰€ä»¥å¯ä»¥è¢«ä¸¢å¼ƒã€‚\n 2.çº¦æŸæ±‚è§£(Constraint Solving.)\nç¬¦å·æ‰§è¡Œåœ¨2005å¹´ä¹‹åçš„çªç„¶é‡æ–°æµè¡Œï¼Œä¸€å¤§éƒ¨åˆ†åŸå› æ˜¯å› ä¸ºæ±‚è§£å™¨èƒ½åŠ›çš„æå‡ï¼Œèƒ½å¤Ÿæ±‚è§£å¤æ‚çš„è·¯å¾„çº¦æŸã€‚ä½†æ˜¯çº¦æŸæ±‚è§£åœ¨æŸç§ç¨‹åº¦ä¸Šä¾ç„¶æ˜¯ç¬¦å·æ‰§è¡Œçš„å…³é”®ç“¶é¢ˆä¹‹ä¸€ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¦å·æ‰§è¡Œæ‰€éœ€æ±‚çš„çº¦æŸæ±‚è§£èƒ½åŠ›è¶…å‡ºäº†å½“å‰çº¦æŸæ±‚è§£å™¨çš„èƒ½åŠ›ã€‚æ‰€ä»¥ï¼Œå®ç°çº¦æŸæ±‚è§£ä¼˜åŒ–å°±å˜å¾—ååˆ†é‡è¦ã€‚è¿™é‡Œä¸»è¦ä»‹ç»ä¸¤ç§ä¼˜åŒ–æ–¹æ³•ï¼šä¸ç›¸å…³çº¦æŸæ¶ˆé™¤ï¼Œå¢é‡æ±‚è§£ã€‚\n a.ä¸ç›¸å…³çº¦æŸæ¶ˆé™¤(Irrelevant constraint elimination)\nåœ¨ç¬¦å·æ‰§è¡Œçš„çº¦æŸç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œå°¤å…¶æ˜¯åœ¨concolicæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ä¼šé€šè¿‡æ¡ä»¶å–åçš„æ–¹å¼å¢åŠ çº¦æŸï¼Œä¸€ä¸ªå·²çŸ¥è·¯å¾„çº¦æŸçš„åˆ†æ”¯è°“è¯ä¼šå–åï¼Œç„¶åç”±æ­¤äº§ç”Ÿçš„çº¦æŸé›†ä¼šæ£€æŸ¥å¯æ»¡è¶³æ€§ä»¥è¯†åˆ«å¦ä¸€æ¡è·¯å¾„æ˜¯å¦å¯è¡Œã€‚ä¸€ä¸ªå¾ˆé‡è¦çš„ç°è±¡æ˜¯ï¼Œä¸€ä¸ªç¨‹åºåˆ†æ”¯é€šå¸¸åªä¾èµ–ä¸€å°éƒ¨åˆ†ç¨‹åºå˜é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°è¯•ä»å½“å‰è·¯å¾„æ¡ä»¶ä¸­ç§»é™¤ä¸å†³å®šå½“å‰åˆ†æ”¯ç»“æœä¸ç›¸å…³çš„çº¦æŸã€‚ä¾‹å¦‚ï¼Œå½“å‰çš„è·¯å¾„æ¡ä»¶æ˜¯ (x+y&gt;10)âˆ§(z&gt;0)âˆ§(y&lt;12)âˆ§(zâˆ’x=0)(x+y&gt;10) \\wedge (z&gt;0) \\wedge (y&lt;12) \\wedge (zâˆ’x=0)(x+y&gt;10)âˆ§(z&gt;0)âˆ§(y&lt;12)âˆ§(zâˆ’x=0) å‡å¦‚æˆ‘ä»¬æƒ³å¯¹y&lt;12è¿™ä¸ªåˆ†æ”¯æ¡ä»¶æ¢ç´¢æ–°è·¯å¾„ï¼Œå¯ä»¥é€šè¿‡çº¦æŸ (x+y&gt;10)âˆ§(z&gt;0)âˆ§Â¬(y&lt;12)(x+y&gt;10) \\wedge (z&gt;0) \\wedge \\neg (y&lt;12)(x+y&gt;10)âˆ§(z&gt;0)âˆ§Â¬(y&lt;12) æ±‚è§£æ–°çš„è¾“å…¥ï¼Œ Â¬(y&lt;12)\\neg (y&lt;12)Â¬(y&lt;12) æ˜¯å–åçš„æ¡ä»¶åˆ†æ”¯ï¼Œæˆ‘ä»¬å¯ä»¥å»æ‰å¯¹zçš„çº¦æŸï¼Œæ˜¯å› ä¸ºzå¯¹ Â¬(y&lt;12)\\neg (y&lt;12)Â¬(y&lt;12) çš„åˆ†æ”¯æ˜¯ä¸ä¼šæœ‰å½±å“çš„ã€‚å‡å°çš„çº¦æŸé›†ä¼šç»™å‡ºxå’Œyçš„æ–°å€¼ï¼Œæˆ‘ä»¬ç”¨æ­¤å‰æ‰§è¡Œçš„zå€¼å°±å¯ä»¥ç”Ÿæˆæ–°è¾“å…¥äº†ã€‚å¦‚æœæ›´å½¢å¼åŒ–åœ°è¯´ï¼Œç®—æ³•ä¼šè®¡ç®—åœ¨å–åæ¡ä»¶æ‰€ä¾èµ–çš„æ‰€æœ‰çº¦æŸçš„ä¼ é€’é—­åŒ…ã€‚\nï¼ˆå…¶å®æ²ƒè§‰å¾—æ˜¯æœ‰å½±å“çš„ï¼Œx=zï¼Œz&gt;0ï¼Œé‚£ä¸å°±æ˜¯x&gt;0å—ï¼Œå¦‚æœå»æ‰x-z=0ï¼Œç›¸å½“äºå»æ‰x&gt;0ï¼Œxä¼šé€šè¿‡ç¬¬ä¸€é¡¹çº¦æŸæ¡ä»¶å½±å“yå•Šï¼Œä¸æ˜¯å—ï¼Ÿæ‰€ä»¥è¿™ä¸ªæ —å­å¯èƒ½ä¸æ°å½“ï¼Œè¿™é‡Œç†è§£ä¸ç›¸å…³çº¦æŸæ¶ˆé™¤çš„æ¦‚å¿µå°±è¡Œäº†ï¼Œå¦‚æœ‰ä¸åŒæ„è§æ¬¢è¿æŒ‡æ­£ï¼‰\n b.å¢é‡æ±‚è§£(Incremental solving)\næœ¬è´¨ä¸Šä¹Ÿæ˜¯åˆ©ç”¨é‡ç”¨çš„æ€æƒ³ã€‚ç¬¦å·æ‰§è¡Œä¸­ç”Ÿæˆçš„çº¦æŸé›†æœ‰ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œå°±æ˜¯è¡¨ç¤ºä¸ºç¨‹åºæºä»£ç ä¸­çš„é™æ€åˆ†æ”¯çš„å›ºå®šé›†åˆã€‚æ‰€ä»¥ï¼Œå¾ˆå¤šè·¯å¾„æœ‰ç›¸ä¼¼çš„çº¦æŸé›†ï¼Œå¯ä»¥æœ‰ç›¸ä¼¼çš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡é‡ç”¨ä»¥å‰ç›¸ä¼¼è¯·æ±‚çš„ç»“æœï¼Œå¯ä»¥åˆ©ç”¨è¿™ç§ç‰¹æ€§æ¥æå‡çº¦æŸæ±‚è§£çš„é€Ÿåº¦ï¼Œè¿™ç§æ–¹æ³•åœ¨CUTEå’ŒKLEEä¸­éƒ½æœ‰å®ç°ã€‚ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ï¼Œåœ¨KLEEä¸­ï¼Œæ‰€æœ‰çš„è¯·æ±‚ç»“æœéƒ½ä¿å­˜åœ¨ç¼“å­˜ä¸­ï¼Œè¯¥ç¼“å­˜å°†çº¦æŸé›†æ˜ å°„åˆ°å®é™…å˜é‡èµ‹å€¼ã€‚ä¾‹å¦‚ï¼Œç¼“å­˜ä¸­çš„ä¸€ä¸ªæ˜ å°„å¯èƒ½æ˜¯ï¼š\n(x+y&lt;10)âˆ§(x&gt;5)â‡’{x=6,y=3}(x+y&lt;10) \\wedge (x&gt;5) \\Rightarrow \\lbrace x=6,y=3 \\rbrace\n(x+y&lt;10)âˆ§(x&gt;5)â‡’{x=6,y=3}\nä½¿ç”¨è¿™äº›æ˜ å°„ï¼ŒKLEEå¯ä»¥è¿…é€Ÿè§£ç­”ä¸€äº›ç›¸ä¼¼çš„è¯·æ±‚ç±»å‹ï¼ŒåŒ…æ‹¬å·²ç»ç¼“å­˜çš„çº¦æŸé›†çš„å­é›†å’Œè¶…é›†ã€‚æ¯”å¦‚å¯¹äºè¯·æ±‚(x+y&lt;10)âˆ§(x&gt;5)âˆ§(yâ‰¥0)(x+y&lt;10) \\wedge (x&gt;5) \\wedge (y \\geq 0)(x+y&lt;10)âˆ§(x&gt;5)âˆ§(yâ‰¥0) ï¼ŒKLEEå¯ä»¥è¿…é€Ÿæ£€æŸ¥{x=6,y=3}æ˜¯ä¸€ä¸ªå¯è¡Œçš„ç­”æ¡ˆã€‚è¿™æ ·å°±å¯ä»¥è®©æ±‚è§£è¿‡ç¨‹åŠ å¿«å¾ˆå¤šã€‚\n 3.å†…å­˜å»ºæ¨¡(Memory Modeling)\nç¨‹åºè¯­å¥è½¬æ¢ä¸ºç¬¦å·çº¦æŸçš„ç²¾åº¦å¯¹ç¬¦å·æ‰§è¡Œèƒ½å®ç°çš„è¦†ç›–ç‡ä»¥åŠçº¦æŸæ±‚è§£çš„å¯ä¼¸ç¼©æ€§æœ‰å¾ˆå¤§å½±å“ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨æ•°å­¦æ•´æ•°(actual mathematical integers)å»è¿‘ä¼¼å»ä»£æ›¿å›ºå®šå®½åº¦çš„æ•´æ•°å˜é‡ï¼Œè¿™æ ·çš„å†…å­˜æ¨¡å‹å¯èƒ½ä¼šæ›´æœ‰æ•ˆç‡ï¼Œä½†å¦ä¸€æ–¹é¢ï¼Œæ ¹æ®è¯¸å¦‚ç®—æœ¯æº¢å‡ºä¹‹ç±»çš„æç«¯æƒ…å†µï¼Œå¯èƒ½å¯¼è‡´ä»£ç åˆ†æä¸ç²¾ç¡®-è¿™å¯èƒ½ä¼šå¯¼è‡´ç¬¦å·æ‰§è¡Œé—æ¼è·¯å¾„æˆ–æ¢ç´¢ä¸å¯è¡Œçš„è·¯å¾„ã€‚\nå¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯æŒ‡é’ˆã€‚åœ¨è®¿é—®å†…å­˜çš„æ—¶å€™ï¼Œå†…å­˜åœ°å€ï¼ˆæŒ‡é’ˆï¼‰ç”¨æ¥å¼•ç”¨ä¸€ä¸ªå†…å­˜å•å…ƒï¼Œå½“è¿™ä¸ªåœ°å€çš„å¼•ç”¨æ¥è‡ªäºç”¨æˆ·è¾“å…¥æ—¶ï¼Œå†…å­˜åœ°å€å°±æˆä¸ºäº†ä¸€ä¸ªè¡¨è¾¾å¼ã€‚å½“ç¬¦å·åŒ–æ‰§è¡Œæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»å†³å®šä»€ä¹ˆæ—¶å€™å°†è¿™ä¸ªå†…å­˜çš„å¼•ç”¨è¿›è¡Œå®é™…åŒ–ã€‚ä¸€ä¸ªå¯é çš„ç­–ç•¥æ˜¯ï¼Œè€ƒè™‘ä¸ºä»ä»»ä½•å¯èƒ½æ»¡è¶³èµ‹å€¼çš„åŠ è½½ï¼Œä½†è¿™ä¸ªå¯èƒ½å€¼çš„ç©ºé—´å¾ˆå¤§ï¼Œå¦‚æœå®é™…åŒ–ä¸å¤Ÿç²¾ç¡®ï¼Œä¼šé€ æˆä»£ç åˆ†æçš„ä¸ç²¾ç¡®ã€‚\nè¿˜æœ‰ä¸€ä¸ªæ˜¯åˆ«åé—®é¢˜ï¼Œå³åœ°å€åˆ«åå¯¼è‡´ä¸¤ä¸ªå†…å­˜è¿ç®—å¼•ç”¨åŒä¸€ä¸ªåœ°å€ï¼Œæ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯è¿›è¡Œåˆ«ååˆ†æï¼Œäº‹å…ˆæ¨ç†ä¸¤ä¸ªå¼•ç”¨æ˜¯å¦æŒ‡å‘ç›¸åŒçš„åœ°å€ï¼Œä½†è¿™ä¸ªæ­¥éª¤è¦é™æ€åˆ†æå®Œæˆã€‚KLEEä½¿ç”¨äº†åˆ«ååˆ†æå’Œè®©SMTè€ƒè™‘åˆ«åé—®é¢˜çš„æ··åˆæ–¹æ³•ã€‚è€ŒDARTå’ŒCUTEå‹æ ¹æ²¡è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåªå¤„ç†çº¿æ€§çº¦æŸçš„å…¬å¼ï¼Œä¸èƒ½å¤„ç†ä¸€èˆ¬çš„ç¬¦å·åŒ–å¼•ç”¨ã€‚\nç¬¦å·åŒ–è·³è½¬ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œä¸»è¦æ˜¯switchè¿™æ ·çš„è¯­å¥ï¼Œå¸¸ç”¨è·³è½¬è¡¨å®ç°ï¼Œè·³è½¬çš„ç›®æ ‡æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼è€Œä¸æ˜¯å®é™…å€¼ã€‚ä»¥å¾€çš„å·¥ä½œç”¨ä¸‰ç§å¤„ç†æ–¹æ³•ã€‚\n1ï¼‰ä½¿ç”¨concolicæ‰§è¡Œä¸­çš„å®é™…åŒ–ç­–ç•¥ï¼Œä¸€æ—¦è·³è½¬ç›®æ ‡åœ¨å®é™…æ‰§è¡Œä¸­è¢«æ‰§è¡Œï¼Œå°±å¯ä»¥å°†ç¬¦å·æ‰§è¡Œè½¬å‘è¿™ä¸ªå®é™…è·¯å¾„ï¼Œä½†ç¼ºé™·æ˜¯å®é™…åŒ–å¯¼è‡´å¾ˆéš¾æ¢ç´¢å®Œå…¨çš„çŠ¶æ€ç©ºé—´ï¼Œåªèƒ½æ¢ç´¢å·²çŸ¥çš„è·³è½¬ç›®æ ‡ã€‚\n2ï¼‰ä½¿ç”¨SMTæ±‚è§£å™¨ã€‚å½“æˆ‘ä»¬åˆ°è¾¾ç¬¦å·è·³è½¬æ—¶ï¼Œå‡è®¾è·¯å¾„è°“è¯ä¸º Î \\PiÎ  ï¼Œè·³è½¬åˆ°eï¼Œæˆ‘ä»¬å¯ä»¥è®©SMTæ±‚è§£å™¨æ‰¾åˆ°ç¬¦åˆ Î âˆ§e\\Pi \\wedge eÎ âˆ§e çš„ç­”æ¡ˆã€‚ä½†æ˜¯è¿™ç§æ–¹æ¡ˆç›¸æ¯”å…¶ä»–æ–¹æ¡ˆæ•ˆç‡ä¼šä½å¾ˆå¤šã€‚\n3ï¼‰ä½¿ç”¨é™æ€åˆ†æï¼Œæ¨ç†æ•´ä¸ªç¨‹åºï¼Œå®šä½å¯èƒ½çš„è·³è½¬ç›®æ ‡ã€‚\nå®é™…ä¸­ï¼Œæºä»£ç çš„é—´æ¥è·³è½¬åˆ†æä¸»è¦æ˜¯æŒ‡é’ˆåˆ†æã€‚äºŒè¿›åˆ¶çš„è·³è½¬é™æ€åˆ†ææ¨ç†åœ¨è·³è½¬ç›®æ ‡è¡¨è¾¾å¼ä¸­å“ªäº›å€¼å¯èƒ½è¢«å¼•ç”¨ã€‚ä¾‹å¦‚ï¼Œå‡½æ•°æŒ‡é’ˆè¡¨é€šå¸¸å®ç°ä¸ºå¯èƒ½çš„è·³è½¬ç›®æ ‡è¡¨ã€‚\n 4.å¤„ç†å¹¶å‘(Handling Concurrency)\nå¤§å‹ç¨‹åºé€šå¸¸æ˜¯å¹¶å‘çš„ã€‚å› ä¸ºè¿™ç§ç¨‹åºçš„å†…åœ¨ç‰¹æ€§ï¼ŒåŠ¨æ€ç¬¦å·æ‰§è¡Œç³»ç»Ÿå¯ä»¥è¢«ç”¨æ¥é«˜æ•ˆåœ°æµ‹è¯•å¹¶å‘ç¨‹åºï¼ŒåŒ…æ‹¬å¤æ‚æ•°æ®è¾“å…¥çš„åº”ç”¨ã€åˆ†å¸ƒå¼ç³»ç»Ÿä»¥åŠGPGPUç¨‹åºã€‚\n 0x4 å‘å±•è„‰ç»œ(è‡³2017)\næœ¬èŠ‚ä»ç„¶æ‘˜å½•è‡ªr1ceçš„æ–‡ç« ï¼Œä¸»è¦æ˜¯ä»¥æ—¶é—´çš„é¡ºåºæ¢³ç†ç¬¦å·æ‰§è¡ŒæŠ€æœ¯çš„å‘å±•è„‰ç»œï¼ŒåŒæ—¶å¯¹å€¼å¾—å…³æ³¨çš„é¡¹ç›®å’Œè®ºæ–‡åšä¸€ä¸ªå°å°æ€»ç»“å’Œæ¨èã€‚\nç¬¦å·æ‰§è¡Œæœ€åˆæå‡ºæ˜¯åœ¨70å¹´ä»£ä¸­æœŸï¼Œä¸»è¦æè¿°çš„æ˜¯é™æ€ç¬¦åˆæ‰§è¡Œçš„åŸç†ï¼Œåˆ°äº†2005å¹´å·¦å³çªç„¶å¼€å§‹é‡æ–°æµè¡Œï¼Œæ˜¯å› ä¸ºå¼•å…¥äº†ä¸€äº›æ–°çš„æŠ€æœ¯è®©ç¬¦å·æ‰§è¡Œæ›´åŠ å®ç”¨ã€‚Concolicæ‰§è¡Œçš„æå‡ºè®©ç¬¦å·æ‰§è¡ŒçœŸæ­£æˆä¸ºå¯å®ç”¨çš„ç¨‹åºåˆ†ææŠ€æœ¯ï¼Œå¹¶ä¸”å¤§é‡ç”¨äºè½¯ä»¶æµ‹è¯•ã€é€†å‘å·¥ç¨‹ç­‰é¢†åŸŸã€‚åœ¨2005å¹´ä½œç”¨æ¶Œç°å‡ºå¾ˆå¤šå·¥ä½œï¼Œå¦‚DART[5]ã€CUTE[6]ã€EGT/EXE[7]ã€CREST[8]ç­‰ç­‰ï¼Œä½†çœŸæ­£å€¼å¾—å…³æ³¨å’Œç»†è¯»çš„ï¼Œåº”è¯¥æ˜¯2008å¹´Cristian Cadarå¼€å‘çš„KLEE[3]ã€‚KLEEå¯ä»¥è¯´æ˜¯æºä»£ç ç¬¦å·æ‰§è¡Œçš„ç»å…¸ä½œå“ï¼Œåˆæ˜¯å¼€æºçš„ï¼Œåæ¥çš„è®¸å¤šä¼˜ç§€çš„ç¬¦å·æ‰§è¡Œå·¥å…·éƒ½æ˜¯å»ºç«‹åœ¨KLEEçš„åŸºç¡€ä¸Šï¼Œå› æ­¤æˆ‘è®¤ä¸ºç ”ç©¶ç¬¦å·æ‰§è¡Œï¼ŒKLEEçš„æ–‡ç« æ˜¯å¿…è¯»çš„ã€‚\nåŸºäºäºŒè¿›åˆ¶çš„ç¬¦å·æ‰§è¡Œå·¥å…·åˆ™æ˜¯2009å¹´EPFLçš„George Candeaå›¢é˜Ÿå¼€å‘çš„S2E[9]æœ€ä¸ºè‘—åï¼Œå…¶å¼€åˆ›äº†é€‰æ‹©ç¬¦å·æ‰§è¡Œè¿™ç§æ–¹å¼ã€‚2012å¹´CMUçš„David Brumleyå›¢é˜Ÿæå‡ºçš„Mayhem[10]åˆ™é‡‡ç”¨äº†æ··åˆofflineå’Œonlineçš„æ‰§è¡Œæ–¹å¼ã€‚2008å¹´UC Berkeldyçš„Dawn Songå›¢é˜Ÿæå‡ºçš„BitBlaze[11]äºŒè¿›åˆ¶åˆ†æå¹³å°ä¸­çš„Rudderæ¨¡å—ä½¿ç”¨äº†onlineçš„æ‰§è¡Œæ–¹å¼ï¼Œä¹Ÿå€¼å¾—ä¸€çœ‹ã€‚æ€»ä¹‹ï¼ŒåŸºäºäºŒè¿›åˆ¶çš„ç¬¦å·æ‰§è¡Œå·¥ä½œäº†è§£è¿™ä¸‰ä¸ªå°±è¶³å¤Ÿäº†ã€‚å…¶ä¸­ï¼ŒS2Eæœ‰å¼€æºçš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œéå¸¸å€¼å¾—ä»”ç»†ç ”ç©¶ã€‚æœ€è¿‘æ¯”è¾ƒç«çš„angr[12]ï¼Œæ˜¯ä¸€ä¸ªåŸºäºPythonå®ç°çš„äºŒè¿›åˆ¶åˆ†æå¹³å°ï¼Œå®Œå…¨å¼€æºä¸”è¿˜åœ¨ä¸æ–­æ›´æ–°ï¼Œå…¶ä¸­ä¹Ÿå®ç°äº†å¤šç§ä¸åŒçš„ç¬¦å·æ‰§è¡Œç­–ç•¥ã€‚\nåœ¨ä¼˜åŒ–æŠ€æœ¯ä¸Šï¼Œè¿‘å‡ å¹´çš„ä¸¤ä¸ªå·¥ä½œæ¯”è¾ƒå€¼å¾—ä¸€çœ‹å…¶ä¸€æ˜¯2014å¹´David Brumleyå›¢é˜Ÿæå‡ºçš„è·¯å¾„èåˆæ–¹æ³•ï¼Œå«åšVeritesting[13]ï¼Œæ˜¯æ¯”è¾ƒé‡è¦çš„å·¥ä½œä¹‹ä¸€ï¼Œangrä¸­ä¹Ÿå®ç°äº†è¿™ç§ç¬¦å·æ‰§è¡Œæ–¹å¼ã€‚å¦ä¸€ä¸ªæ˜¯2015å¹´Stanfordçš„Dawson Englerï¼ˆè¿™å¯æ˜¯Cristian Cadarçš„è€å¸ˆï¼‰å›¢é˜Ÿæå‡ºçš„Under-Constrained Symbolic Execution[14]ã€‚\nå¦å¤–ï¼Œè¿‘å¹´æµè¡Œçš„ç¬¦å·æ‰§è¡Œä¸fuzzingæŠ€æœ¯ç›¸ç»“åˆä»¥æå‡æŒ–æ˜æ¼æ´æ•ˆç‡ï¼Œå…¶å®æ—©åœ¨DARTå’Œ2012å¹´å¾®è½¯çš„SAGE[15]å·¥ä½œä¸­å°±å·²ç»æœ‰ç”¨åˆ°è¿™ç§æ€æƒ³ï¼Œä½†è¿™ä¸¤å¹´çœŸæ­£ç«èµ·æ¥æ˜¯2016å¹´UCSBçš„Shellphishå›¢é˜Ÿå‘è¡¨çš„Driller[16]è®ºæ–‡ï¼Œç§°ä½œç¬¦å·è¾…åŠ©çš„fuzzingï¼ˆsymbolic-assisted fuzzingï¼‰ï¼Œä¹Ÿéå¸¸å€¼å¾—ä¸€çœ‹ã€‚\n 0x5 æ€»ç»“\nç¬¦å·æ‰§è¡Œå·²æ˜¯ä¸€ç§æœ‰æ•ˆçš„ç¨‹åºæµ‹è¯•æŠ€æœ¯ï¼Œå®ƒæä¾›äº†ä¸€ç§è‡ªåŠ¨ç”Ÿæˆ&quot;è§¦å‘è½¯ä»¶é”™è¯¯çš„è¾“å…¥&quot;çš„æ–¹æ³•ï¼Œè¿™äº›é”™è¯¯ä»åº•å±‚ç¨‹åºå´©æºƒåˆ°é«˜å±‚è¯­ä¹‰ç‰¹æ€§ä¸ç­‰ã€‚ç¬¦å·æ‰§è¡ŒæŠ€æœ¯å¯ä»¥ç”¨äºæµ‹è¯•ä¾‹çš„è‡ªåŠ¨ç”Ÿæˆï¼Œä¹Ÿå¯ä»¥ç”¨äºæºä»£ç å®‰å…¨æ€§çš„æ£€æµ‹ã€‚è¿™ä¸¤é¡¹å·¥ä½œçš„æˆæ•ˆéƒ½ååˆ†ä¾èµ–äºçº¦æŸæ±‚è§£å™¨çš„æ€§èƒ½ï¼ŒåŒæ—¶è¿˜å—ç¡¬ä»¶è®¾å¤‡å¤„ç†èƒ½åŠ›çš„å½±å“ã€‚\nè™½ç„¶éœ€è¦æ›´å¤šçš„ç ”ç©¶æ¥æé«˜ç¬¦å·æ‰§è¡Œçš„ä»£ç è¦†ç›–ç‡ï¼Œæµ‹è¯•ç²¾åº¦ï¼Œåˆ†ææ•ˆç‡ç­‰ç­‰æŒ‡æ ‡ï¼Œä½†æ˜¯äº‹å®è¯æ˜ï¼Œç°æœ‰å·¥å…·å¯ä»¥æœ‰æ•ˆåœ°æµ‹è¯•å’Œå‘ç°å„ç§è½¯ä»¶ä¸­çš„é”™è¯¯ï¼Œä»ä½çº§ç½‘ç»œå’Œæ“ä½œç³»ç»Ÿä»£ç åˆ°é«˜çº§åº”ç”¨ç¨‹åºä»£ç ï¼Œä¸ä¸€è€Œè¶³ã€‚\nä»å®ç”¨æ€§çš„è§’åº¦æ¥è¯´ï¼š\nï¼ˆ2018å¹´ï¼‰ç°æœ‰çš„ç¬¦å·æ‰§è¡Œå·¥å…·ï¼Œåœ¨å¼€æºæ–¹é¢ï¼Œä¸»è¦è¿˜æ˜¯åŸºäºKLEEé¡¹ç›®çš„ã€‚å¯è§å¯¹äºKLEEé¡¹ç›®çš„æ·±å…¥ç†è§£ï¼Œå°†æœ‰åŠ©äºæˆ‘ä»¬æ‰“é€ æ›´åŠ é«˜æ•ˆçš„å·¥å…·ã€‚æœ‰äº†é«˜æ•ˆçš„å·¥å…·ï¼Œå°±èƒ½å¤Ÿä½¿å¾—æˆ‘ä»¬ä¸€è¾¹å­¦ä¹ ç†è®ºï¼Œä¸€ééªŒè¯ï¼Œä»è€Œèµ°ä¸Šé«˜é€Ÿå…¬è·¯ã€‚Inceptionå·¥å…·æ˜¯å°±ARMæ¶æ„ï¼Œè€Œå¯¹äºè·¯ç”±å™¨ä¸­å¸¸ä½¿ç”¨çš„MIPSæ¶æ„ï¼Œç°åœ¨åº”è¯¥è¿˜å°šæœªæœ‰ç±»ä¼¼çš„ç¬¦å·æ‰§è¡Œå·¥å…·å‘å¸ƒï¼ˆå¦‚æœå·²ç»ç”±ç±»ä¼¼å·¥å…·ï¼Œæ¬¢è¿è¯»è€…ç•™è¨€ï¼‰ã€‚å…¶ä¸­ï¼ŒåŸºäºIDAçš„è„šæœ¬å·¥å…·bugscamï¼Œç»è¿‡æ­ç§˜è·¯ç”±å™¨0DAYæ¼æ´çš„ä½œè€…ä¿®æ”¹ä¹‹åï¼Œä¹Ÿèƒ½å¤Ÿæ”¯æŒåˆ†æMIPSæ¶æ„çš„æ¼æ´äº†ã€‚ç„¶è€Œï¼Œå…¶è¯¯æŠ¥ç‡éå¸¸ä¹‹é«˜ï¼Œè¯¥å·¥å…·æŠ¥å‘Šçš„æ¼æ´åŸºæœ¬éƒ½ä¸å¯ç”¨ã€‚å› æ­¤ï¼Œå¦‚ä½•åŸºäºä¸Šè¿°ç¬¦å·æ‰§è¡Œçš„æ€æƒ³ï¼Œç»“åˆIDAå·¥å…·ä¸­å¼ºå¤§çš„åæ±‡ç¼–èƒ½åŠ›ï¼Œå¼€å‘ä¹Ÿå…·æœ‰ç¬¦å·æ‰§è¡ŒåŠŸèƒ½çš„MIPSæ¶æ„æ¼æ´åˆ†æå·¥å…·ï¼Œç›¸ä¿¡ä¹Ÿæ˜¯éå¸¸æœ‰ä»·å€¼çš„ã€‚\n 0x6 To Learn More\næ‘˜è‡ªr1ceçš„æ–‡ç« ï¼š\nå¯¹äºç¬¦å·æ‰§è¡Œå…¥é—¨ï¼Œæœ‰ä¸¤ç¯‡æ–‡ç« å¯ä»¥å‚è€ƒã€‚å…¶ä¸€æ˜¯2010å¹´David Brumleyå›¢é˜Ÿåœ¨S&amp;Pä¼šè®®ä¸Šå‘è¡¨çš„ã€ŠAll You Ever Wanted to Know about Dynamic Taint Analysis and Forward Symbolic Execution (but Might Have Been Afraid to Ask)ã€‹[1]ã€‚è¿™ç¯‡æ–‡ç« åŒæ—¶ä»‹ç»äº†åŠ¨æ€æ±¡ç‚¹åˆ†æå’Œå‰å‘ç¬¦å·æ‰§è¡Œçš„åŸºæœ¬æ¦‚å¿µï¼Œä½œè€…æ„é€ äº†ä¸€ç§ç®€åŒ–çš„ä¸­é—´è¯­è¨€ï¼Œç”¨æ¥å½¢å¼åŒ–åœ°æè¿°è¿™ä¸¤ç§ç¨‹åºåˆ†ææŠ€æœ¯çš„æ ¹æœ¬åŸç†ã€‚å…¶äºŒæ˜¯2011å¹´Cristian Cadarå‘è¡¨åœ¨ACMé€šè®¯ä¸Šçš„ä¸€ç¯‡çŸ­æ–‡ã€ŠSymbolic execution for software testing: three decades laterã€‹[2]ï¼Œä»¥è¾ƒä¸ºé€šä¿—çš„è¯­è¨€å’Œç®€å•çš„ä¾‹å­é˜è¿°äº†ç¬¦å·æ‰§è¡Œçš„åŸºæœ¬åŸç†ï¼Œå¹¶ä»‹ç»äº†ç¬¦å·æ‰§è¡ŒæŠ€æœ¯çš„å‘å±•å†ç¨‹å’Œé¢ä¸´æŒ‘æˆ˜ã€‚\nå…¶å®è¿™ä¸¤ç¯‡æ–‡ç« çš„ä½œè€…éƒ½æ˜¯äºŒè¿›åˆ¶åˆ†æé¢†åŸŸå¤§åé¼é¼çš„äººç‰©ï¼Œå¡å†…åŸºæ¢…éš†çš„David Brumleyæ˜¯AEGçš„æå‡ºè€…ï¼Œå…¶å¸¦é¢†å›¢é˜Ÿæ˜¯DARPA CGCæ¯”èµ›çš„ç¬¬ä¸€åï¼›è‹±å›½å¸å›½ç†å·¥çš„Cristian Cadaråˆ™æ˜¯ç¬¦å·æ‰§è¡Œå¼•æ“KLEE[3]çš„ä½œè€…â€”â€”KLEEåœ¨ç¬¦å·æ‰§è¡Œé¢†åŸŸçš„åœ°ä½ä¸è¨€è€Œå–»ã€‚è¿™ä¸¤ç¯‡æ–‡ç« å„æœ‰åƒç§‹ï¼šå‰è€…æ›´åŠ å­¦æœ¯åŒ–ä¸€äº›ï¼Œç”¨ä¸­é—´è¯­è¨€è¿›è¡Œçš„å½¢å¼åŒ–æè¿°æœ‰äº›æ™¦æ¶©éš¾æ‡‚ï¼Œä½†å¯¹äºè¿›ä¸€æ­¥ç ”ç©¶ç¬¦å·æ‰§è¡Œå¼•æ“çš„æºç å¾ˆæœ‰å¸®åŠ©ï¼›åè€…åˆ™æ›´é€šä¿—ä¸€äº›ï¼Œæœ‰åŠ©äºåˆå­¦è€…çš„ç†è§£ï¼Œä¸”å¯¹äºç¬¦å·æ‰§è¡Œçš„å‘å±•è„‰ç»œæœ‰æ›´å¤šçš„ä»‹ç»ã€‚\nQ&amp;A:\nA:å¦‚ä½•é€šä¿—æ˜“æ‡‚çš„æ€»ç»“ç¬¦å·æ‰§è¡ŒæŠ€æœ¯ï¼Ÿ\nQ:ç¬¦å·æ‰§è¡Œæ˜¯ä¸€ç§ç™½ç›’é™æ€ä»£ç åˆ†ææŠ€æœ¯ï¼Œç”¨ç¬¦å·è¡¨ç¤ºç¨‹åºçš„è¾“å…¥ï¼Œæ ¹æ®åˆ†æç¨‹åºè¯­ä¹‰å¾—åˆ°çš„çº¦æŸæ¡ä»¶ï¼Œå»æ±‚è§£èƒ½å¾—åˆ°ä½ æ‰€å¸Œæœ›çš„ç¨‹åºè¾“å‡ºæ‰€éœ€è¦çš„è¾“å…¥ï¼Œçš„ä¸€ç§æ–¹æ³•ã€‚æ›´å®¹æ˜“ç†è§£çš„è¯´æ³•å¯ä»¥å‚å¼€0x1ç¬¬ä¸€æ®µã€‚\nQ:è·¯å¾„çº¦æŸPCåˆ°åº•é•¿ä»€ä¹ˆæ ·å­ï¼Ÿ\nA:ä¸€é•¿ä¸²çº¦æŸæ¡ä»¶ï¼Œæ¯”å¦‚0x2ä¸­çš„ç¤ºä¾‹ï¼š (âˆ§iâˆˆ[1,n]Ni&gt;0)âˆ§(Nn+1â‰¤10)(\\wedge_{i \\in [1,n]}N_i &gt; 0) \\wedge (N_{n+1} \\leq 10)(âˆ§iâˆˆ[1,n]â€‹Niâ€‹&gt;0)âˆ§(Nn+1â€‹â‰¤10)\nQ:çº¦æŸæ±‚è§£å™¨æ˜¯æ€ä¹ˆè¿ä½œçš„ï¼Ÿ\nA:\nQ:Concolicæ‰§è¡Œçš„å‡ºç°ï¼Œè®©ä¼ ç»Ÿé™æ€ç¬¦å·æ‰§è¡Œé‡åˆ°çš„å¾ˆå¤šé—®é¢˜èƒ½å¤Ÿå¾—åˆ°è§£å†³ï¼ˆè§£å†³äº†å“ªäº›é—®é¢˜ï¼Ÿæ€ä¹ˆè§£å†³çš„ï¼Ÿï¼‰\nA:Concolicæ‰§è¡Œçš„æ–¹æ³•æœ‰æ•ˆè§£å†³äº†é‡åˆ°ä¸æ”¯æŒçº¦æŸæ±‚è§£çš„è¿ç®—ä»¥åŠåº”ç”¨ä¸å¤–ç•Œäº¤äº’çš„é—®é¢˜ï¼›å…·ä½“æ–¹æ³•å°±æ˜¯ï¼Œé‚£äº›ä¼ ç»Ÿé™æ€ç¬¦å·æ‰§è¡Œä¸å¥½å¤„ç†çš„éƒ¨åˆ†ã€æ±‚è§£å™¨æ— æ³•æ±‚è§£çš„éƒ¨åˆ†ï¼Œç”¨å®é™…å€¼æ›¿æ¢å°±å¥½äº†\nQ:Concolicæ‰§è¡Œå’Œä¼ ç»Ÿé™æ€ç¬¦å·æ‰§è¡Œå“ªé‡Œä¸åŒï¼Ÿ\nA:æˆ‘çš„ç†è§£æ˜¯ï¼Œ1.ä¼ ç»Ÿé™æ€ç¬¦å·æ‰§è¡Œä½¿ç”¨ç¬¦å·è¡¨ç¤ºå˜é‡ï¼Œæ¯”å¦‚ç¬¦å·çŠ¶æ€ Ïƒ\\sigmaÏƒ ä¸­å­˜åœ¨å˜é‡xçš„æ˜ å°„xâ†’x0x \\rightarrow x_0xâ†’x0â€‹ï¼Œ2.ä½¿ç”¨çº¦æŸæ±‚è§£å™¨åˆ¤å®šå“ªæ¡åˆ†æ”¯å¯è¡Œï¼Œå¹¶æ ¹æ®é¢„å…ˆè®¾è®¡çš„è·¯å¾„è°ƒåº¦ç­–ç•¥å®ç°å¯¹è¯¥è¿‡ç¨‹æ‰€æœ‰è·¯å¾„çš„éå†åˆ†æï¼Œæœ€åè¾“å‡ºæ¯æ¡å¯æ‰§è¡Œè·¯å¾„çš„åˆ†æç»“æœï¼Œå³æ¯æ¡è·¯å¾„å¯¹åº”çš„è¾“å…¥å’Œè¾“å‡ºï¼›\nè€ŒConcolicæ‰§è¡Œæ¥è¯´ï¼Œ1.å®ƒä½¿ç”¨å…·ä½“æ•°å€¼ä½œä¸ºè¾“å…¥æ¥æ¨¡æ‹Ÿæ‰§è¡Œç¨‹åºä»£ç ï¼Œ2.ä»å½“å‰è·¯å¾„çš„åˆ†æ”¯è¯­å¥çš„è°“è¯ä¸­æœé›†æ‰€æœ‰ç¬¦å·çº¦æŸã€‚ç„¶åä¿®æ”¹è¯¥ç¬¦å·çº¦æŸå†…å®¹æ„é€ å‡ºä¸€æ¡æ–°çš„å¯è¡Œçš„è·¯å¾„çº¦æŸï¼Œå¹¶ç”¨çº¦æŸæ±‚è§£å™¨æ±‚è§£å‡ºä¸€ä¸ªå¯è¡Œçš„æ–°çš„å…·ä½“è¾“å…¥ï¼Œæ¥ç€ç¬¦å·æ‰§è¡Œå¼•æ“å¯¹æ–°è¾“å…¥å€¼è¿›è¡Œä¸€è½®æ–°çš„åˆ†æã€‚é€šè¿‡ä½¿ç”¨è¿™ç§è¾“å…¥è¿­ä»£äº§ç”Ÿå˜ç§è¾“å…¥çš„æ–¹æ³•åˆ†æç¨‹åºã€‚\nå‚è€ƒæ–‡ç« ï¼š\n\nK0rz3nï¼šhttps://www.k0rz3n.com/2019/02/28/ç®€å•ç†è§£ç¬¦å·æ‰§è¡ŒæŠ€æœ¯/\nr1ceï¼šhttps://zhuanlan.zhihu.com/p/26927127\nç¬¦å·æ‰§è¡Œâ€”â€”ä»å…¥é—¨åˆ°ä¸Šé«˜é€Ÿï¼šhttps://www.anquanke.com/post/id/157928\nhttp://pwn4.fun/2017/03/20/ç¬¦å·æ‰§è¡ŒåŸºç¡€/\n[2]* Symbolic execution for software testing: three decades laterï¼šhttps://people.eecs.berkeley.edu/~ksen/papers/cacm13.pdf\n[1] Schwartz E J, Avgerinos T, Brumley D. All You Ever Wanted to Know about Dynamic Taint Analysis and Forward Symbolic Execution (but Might Have Been Afraid to Ask) [C]// Security &amp; Privacy. DBLP, 2010:317-331.\n[2] Cadar C, Sen K. Symbolic execution for software testing: three decades later[M]. ACM, 2013.\n[3] C. Cadar, D. Dunbar, and D. Engler. KLEE: Unassisted and Automatic Generation of High-Coverage Tests for Complex Systems Programs. In Proceedings of the 8th USENIX Symposium on Operating Systems Design and Implementation (OSDIâ€™08), volume 8, pages 209â€“224, 2008.\n[4] R. S. Boyer, B. Elspas, and K. N. Levitt. SELECT â€“ a formal system for testing and debugging programs by symbolic execution. SIGPLAN Not., 10:234â€“245, 1975.\n[5] P. Godefroid, N. Klarlund, and K. Sen. DART: Directed Automated Random Testing. In PLDIâ€™05, June 2005.\n[6] K. Sen, D. Marinov, and G. Agha. CUTE: A concolic unit testing engine for C. In ESEC/FSEâ€™05, Sep 2005.\n[7] C. Cadar, V. Ganesh, P. M. Pawlowski, D. L. Dill, and D. R. Engler. EXE: Automatically Generating Inputs of Death. In Proceedings of the 13th ACM Conference on Computer and Communications Security, pages 322â€“335, 2006.\n[8] J. Burnim and K.Sen,â€œHeuristics for scalable dynamic test generation,â€ in Proc. 23rd IEEE/ACM Int. Conf. Autom. Software Engin., 2008, pp. 443â€“446.\n[9] V. Chipounov, V. Georgescu, C. Zamfir, and G. Candea. Selective Symbolic Execution. In Proceedings of the 5th Workshop on Hot Topics in System Dependability, 2009.\n[10] S. K. Cha, T. Avgerinos, A. Rebert, and D. Brumley. Unleashing Mayhem on Binary Code. In Proceedings of the IEEE Symposium on Security and Privacy, pages 380â€“394, 2012.\n[11] Song D, Brumley D, Yin H, et al. BitBlaze: A New Approach to Computer Security via Binary Analysis[C]// Information Systems Security, International Conference, Iciss 2008, Hyderabad, India, December 16-20, 2008. Proceedings. DBLP, 2008:1-25.\n[12] Yan S, Wang R, Salls C, et al. SOK: (State of) The Art of War: Offensive Techniques in Binary Analysis[C]// Security and Privacy. IEEE, 2016:138-157.\n[13] T. Avgerinos, A. Rebert, S. K. Cha, and D. Brumley. Enhancing Symbolic Execution with Veritesting. pages 1083â€“1094, 2014.\n[14] D. a. Ramos and D. Engler. Under-Constrained Symbolic Execution: Correctness Checking for Real Code. In Proceedings of the 24th USENIX Security Symposium, pages 49â€“64, 2015.\n[15] P. Godefroid, M. Y. Levin, and D. Molnar. SAGE: Whitebox Fuzzing for Security Testing. ACM Queue, 10(1):20, 2012.\n[16] N. Stephens, J. Grosen, C. Salls, A. Dutcher, R. Wang, J. Corbetta, Y. Shoshitaishvili, C. Kruegel, and G. Vigna. Driller: Augmenting Fuzzing Through Selective Symbolic Execution. In Proceedings of the Network and Distributed System Security Symposium, 2016.\n\n","categories":["ç¬”è®°"],"tags":["ç¬¦å·æ‰§è¡Œ","æ€»ç»“","å­¦ä¹ "]},{"title":"Flow-based Generative Model","url":"https://ch3nye.top/Flow-based-Generative-Model/","content":" Flow-based Generative Model\næœ¬èŠ‚è¦è®²ä¸€ä¸ªæ–°çš„ç”Ÿæˆæ¨¡å‹ï¼Œä¸€ä¸ªæ–°çš„Generative æŠ€æœ¯ï¼Œå®ƒå’ŒGANçš„ç›®çš„ç›¸åŒï¼Œä½†æ˜¯ä¸å¦‚GANæœ‰åï¼Œè€Œä¸”å®é™…ä¸Šä¹Ÿæ²¡æœ‰èƒœè¿‡GANï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•æœ‰æ¯”è¾ƒæ–°é¢–çš„æ€æƒ³æ‰€ä»¥è¿˜æ˜¯è®²ä¸€è®²ã€‚è¿™ä¸ªæ–¹æ³•å«åšFlow-based Generative Modelï¼Œè¿™é‡Œçš„Flowå°±æ˜¯æµçš„æ„æ€ï¼Œåé¢ä¼šè§£é‡Šä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯æµã€‚\n\n\nLink: https://youtu.be/YNUek8ioAJk\nLink: https://youtu.be/8zomhgKrsmQ\n\nä¸Šå›¾æ˜¯ä»ä»¥å‰çš„è¯¾ç¨‹ä¸­æˆªå–å‡ºæ¥çš„ï¼Œå¦‚æœä½ æœ‰çœ‹è¿‡ä»¥å‰çš„è¯¾ç¨‹ï¼ˆé“¾æ¥å¦‚ä¸Šï¼‰ä½ å°±èƒ½çŸ¥é“è¿™é‡Œçš„ä¸‰ä¸ªæ–¹æ³•çš„å…·ä½“ç»†èŠ‚ã€‚æˆ‘ä»¬ä¹‹å‰è¯´Generative Model æœ‰ä¸‰ç§ï¼Œç¬¬ä¸€ç§Component-by-component ï¼Œä¸Šè¯¾çš„æ—¶å€™æˆ‘ä»¬ä»¥ç”Ÿæˆå®å¯æ¢¦å›¾ç‰‡ä¸ºä¾‹å­ï¼Œä»¥åƒç´ ä¸ºcomponent ä¸€ä¸ªåƒç´ ä¸€ä¸ªåƒç´ çš„ç”Ÿæˆï¼Œè¿™ç§æ–¹æ³•æ›´å¸¸è§çš„åå­—æ˜¯Autoregressive Modelã€‚æˆ‘ä»¬ä¹Ÿè®²è¿‡Variational Autoencoderï¼ˆVAEï¼‰ï¼Œå’ŒGenerative Adversarial Networkï¼ˆGANï¼‰ï¼Œä¸Šè¿°ä¸‰ç§æ˜¯æˆ‘ä»¬ä¹‹å‰è§è¿‡çš„ç”Ÿæˆæ¨¡å‹ï¼Œä»Šå¤©æˆ‘ä»¬è¦ä»‹ç»ç¬¬å››ç§Flow-based Generative Model ã€‚\n è¿‡å»çš„Generative Models çš„ç¼ºç‚¹\n\næˆ‘ä»¬ä¹‹å‰ä»‹ç»çš„ç”Ÿæˆæ¨¡å‹éƒ½æœ‰å„è‡ªçš„é—®é¢˜ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚\nAuto-regressive Model æ˜¯ä¸€ä¸ªä¸€ä¸ªcomponent åœ°ç”Ÿæˆçš„ï¼Œæ‰€ä»¥component çš„æœ€ä½³ç”Ÿæˆé¡ºåºæ˜¯éš¾ä»¥æ±‚è§£çš„ã€‚æ¯”å¦‚è¯´ç”Ÿæˆå›¾åƒçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°±æ˜¯ä¸€ä¸ªä¸€ä¸ªpixel åœ°ï¼Œä»å·¦ä¸Šè§’å¼€å§‹ä¸€è¡Œä¸€è¡Œåœ°ç”Ÿæˆã€‚å½“ç„¶ï¼Œè¿˜æœ‰ä¸€äº›ä»»åŠ¡çš„ç”Ÿæˆç›®æ ‡å°±æ˜¯æœ‰é¡ºåºçš„ï¼Œæ¯”å¦‚è¯´ç”Ÿæˆè¯­éŸ³ï¼Œåé¢çš„component ä¾èµ–å‰é¢çš„component ï¼Œè¿™æ ·çš„ç›®æ ‡æ¯”è¾ƒé€‚åˆç”¨Auto-regressive Model ï¼Œä½†æ˜¯ç°åœ¨è¿™ä¸ªæ¨¡å‹å¤ªæ…¢äº†ï¼Œå¦‚æœä½ è¦ç”Ÿæˆä¸€ç§’åƒæ˜¯äººç±»è¯´çš„è¯­éŸ³ä½ éœ€è¦åš90åˆ†é’Ÿåˆæˆï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸å®ç”¨çš„ã€‚\nVariational Auto-encoder ä»‹ç»è¿™ä¸ªæ¨¡å‹çš„æ—¶å€™æˆ‘ä»¬è¯æ˜äº†ï¼ŒVAE optimizeçš„å¯¹è±¡æ˜¯likelihood çš„lower boundï¼Œå®ƒä¸æ˜¯å»maximize æˆ‘ä»¬è¦å®ƒmaximize çš„likelihood è€Œæ˜¯å»maximize likelihood çš„lower boundï¼Œæˆ‘ä»¬ä¸çŸ¥é“è¿™ä¸ªlower bound å’ŒçœŸæ­£æƒ³è¦maximize çš„å¯¹è±¡çš„å·®è·åˆ°åº•æœ‰å¤šå¤§ã€‚Flow-base generative model ä¼šè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå¹¶ä¸ä¼šç”¨approximationï¼Œå¹¶ä¸æ˜¯optimize lower bound è€Œæ˜¯optimize probability çš„æœ¬ä½“ï¼Œåé¢æˆ‘ä»¬ä¼šä»‹ç»flow æ˜¯æ€ä¹ˆåšåˆ°è¿™ä»¶äº‹çš„ã€‚\nGenerative Adversarial Network æ˜¯ç°åœ¨åšç”Ÿæˆå¾—åˆ°çš„ç›®æ ‡è´¨é‡æœ€å¥½çš„æ¨¡å‹ã€‚ä½†æ˜¯æˆ‘ä»¬éƒ½çŸ¥é“GANæ˜¯å¾ˆéš¾trainçš„ï¼Œå› ä¸ºä½ çš„Generative å’ŒDiscriminator ç›®æ ‡æ˜¯ä¸ä¸€è‡´çš„ï¼Œå¾ˆå®¹æ˜“trainå´©æ‰ã€‚\n Generator çš„å†…æ¶µ\n\næˆ‘ä»¬æŠ›å¼€å…·ä½“æ¨¡å‹ï¼Œå…ˆæ¥çœ‹çœ‹Generator çš„å®šä¹‰ã€‚Generator æ˜¯ä¸€ä¸ªç½‘ç»œï¼Œè¯¥ç½‘ç»œå®šä¹‰äº†ä¸€ä¸ªå¯èƒ½æ€§åˆ†å¸ƒpGp_GpGâ€‹ ã€‚æ€ä¹ˆç†è§£è¿™å¥è¯å‘¢ï¼Œçœ‹ä¸Šå›¾ï¼Œæœ‰ä¸€ä¸ªGenerator GGG è¾“å…¥ä¸€ä¸ª zzz è¾“å‡ºä¸€ä¸ª xxx ï¼Œå¦‚æœç°åœ¨æ˜¯åœ¨åšäººè„¸ç”Ÿæˆï¼Œ  xxx æ˜¯ä¸€å¼ äººè„¸å›¾ç‰‡ï¼Œå¯ä»¥çœ‹æˆä¸€ä¸ªé«˜ç»´å‘é‡å…¶ä¸­æ¯ä¸€ä¸ªelement å°±æ˜¯å›¾ç‰‡çš„ä¸€ä¸ªpixelï¼Œ zzz æˆ‘ä»¬é€šå¸¸å‡è®¾å®ƒæ˜¯ä»ä¸€ä¸ªç®€å•çš„ç©ºé—´ä¸­sample å‡ºæ¥çš„ï¼Œæ¯”å¦‚è¯´Normal Distributionï¼Œè™½ç„¶ zzz æ˜¯ä»ä¸€ä¸ªç®€å•çš„åˆ†å¸ƒä¸­sample å‡ºæ¥çš„ï¼Œä½†æ˜¯é€šè¿‡ GGG ä»¥å xxx å¯èƒ½ä¼šå½¢æˆä¸€ä¸ªéå¸¸å¤æ‚çš„åˆ†å¸ƒï¼Œè¿™ä¸ªDistribution æˆ‘ä»¬ç”¨ PGP_GPGâ€‹ æ¥è¡¨ç¤ºã€‚å¯¹æˆ‘ä»¬è€Œè¨€æˆ‘ä»¬ä¼šå¸Œæœ›é€šè¿‡ GGG å¾—åˆ°çš„Distribution èƒ½å’Œreal data ä¹Ÿå°±æ˜¯çœŸå®äººè„¸æ•°æ®é›†çš„Distribution PdataP_dataPdâ€‹ata å°½å¯èƒ½ç›¸åŒã€‚\né‚£æ€ä¹ˆèƒ½è®© PGP_GPGâ€‹ å’Œ PdataP_dataPdâ€‹ata å°½å¯èƒ½ç›¸åŒå‘¢ï¼Œå¸¸è§çš„åšæ³•æ˜¯æˆ‘ä»¬è®­ç»ƒGçš„æ—¶å€™è®­ç»ƒç›®æ ‡å®šä¸ºmaximize likelihood ï¼Œè®²çš„å…·ä½“ä¸€ç‚¹å°±æ˜¯ä»äººè„¸å›¾ç‰‡æ•°æ®é›†ä¸­sample å‡ºmç¬”data $\\lbrace x1,x2,â€¦,x^m\\rbrace $ ï¼Œç„¶åä½ å°±æ˜¯å¸Œæœ›è¿™må¼ å›¾ç‰‡æ˜¯ä» PGP_GPGâ€‹ è¿™ä¸ªåˆ†å¸ƒä¸­sample å‡ºæ¥çš„æ¦‚ç‡è¶Šå¤§è¶Šå¥½ã€‚å°±æ˜¯maximize ä¸Šå›¾ä¸­å·¦ä¸‹è§’çš„å…¬å¼ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„maximize likelihoodã€‚å¦‚æœä½ éš¾ä»¥ç†è§£ä¸ºä»€ä¹ˆè¦è®©äº§ç”Ÿè¿™äº›data çš„æ¦‚ç‡è¶Šå¤§è¶Šå¥½çš„è¯ï¼Œè€å¸ˆæä¾›äº†ä¸€ä¸ªæ›´ç›´è§‚çš„è§£é‡Šï¼šmaximize likelihood ç­‰åŒäºminimize  PGP_GPGâ€‹ å’Œ PdataP_dataPdâ€‹ata çš„K-Lå˜æ¢ã€‚Ref: https://youtu.be/DMA4MrNieWo\næ€»è€Œè¨€ä¹‹å°±æ˜¯è®© PGP_GPGâ€‹ å’Œ PdataP_dataPdâ€‹ata è¿™ä¸¤ä¸ªåˆ†å¸ƒå°½å¯èƒ½ç›¸åŒã€‚\nFlow è¿™ä¸ªæ¨¡å‹æœ‰ä»€ä¹ˆå‰å®³çš„åœ°æ–¹å‘¢ï¼ŸGenerator æ˜¯ä¸ªä¸€ä¸ªç½‘ç»œï¼Œæ‰€ä»¥ PGP_GPGâ€‹ æ˜¾ç„¶éå¸¸å¤æ‚ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¸çŸ¥é“æ€ä¹ˆoptimize objective functionï¼Œè€ŒFlow å¯ä»¥ç›´æ¥optimize objective functionï¼Œå¯ä»¥ç›´æ¥maximize likelihoodã€‚\n Flow çš„æ•°å­¦åŸºç¡€\nmath warning\n\nè¿™å¯èƒ½ä¹Ÿæ˜¯Flow-based Generative Model ä¸å¤ªå‡ºåçš„ä¸€ä¸ªåŸå› ï¼Œå…¶ä»–ç”Ÿæˆæ¨¡å‹éƒ½æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œè€Œæ­¤æ¨¡å‹ç”¨åˆ°äº†æ¯”è¾ƒå¤šçš„æ•°å­¦çŸ¥è¯†ã€‚ä½ è¦çŸ¥é“ä¸Šå›¾ä¸­çš„ä¸‰ä¸ªæ¦‚å¿µï¼šJacobianã€Determinantã€Change of Variable Theorem ã€‚\n Jacobian Matrix\n\næŠŠ fff çœ‹ä½œç”Ÿæˆæ¨¡å‹ï¼Œzzz å°±æ˜¯è¾“å…¥ï¼Œxxx å°±æ˜¯ç”Ÿæˆçš„è¾“å‡ºã€‚è¿™é‡Œæˆ‘ä»¬çš„æ —å­ä¸­è¾“å…¥è¾“å‡ºçš„ç»´åº¦æ˜¯ç›¸åŒçš„ï¼Œå®é™…åšçš„æ—¶å€™å¾€å¾€æ˜¯ä¸åŒçš„ã€‚Jacobian Matrix è®°ä¸º JfJ_fJfâ€‹ ï¼Œå°±å®šä¹‰ä¸ºè¾“å‡ºå’Œè¾“å…¥å‘é‡ä¸­element ä¸¤ä¸¤ç»„åˆåšåå¾®åˆ†ç»„æˆçš„çŸ©é˜µï¼Œå¦‚ä¸Šå›¾å·¦ä¸‹è§’æ‰€ç¤ºï¼Œè¾“å‡ºä½œä¸ºåˆ—ï¼Œè¾“å…¥ä½œä¸ºè¡Œï¼Œ JfJ_fJfâ€‹ æ¯ä¸ªelement éƒ½æ˜¯è¾“å‡ºå¯¹è¾“å…¥åšåå¾®åˆ†ã€‚ Jfâˆ’1J_{f^{-1}}Jfâˆ’1â€‹ çš„å®šä¹‰åŒä¸Šåªæ˜¯å˜æˆäº†è¾“å…¥å¯¹è¾“å‡ºçš„åå¾®åˆ†ã€‚\nä¸¾ä¸€ä¸ªæ —å­ï¼Œå¦‚ä¸Šå›¾å³ä¾§ï¼Œè‡ªå·±çœ‹ä¸€ä¸‹å°±å¥½ï¼Œå°±ä¸èµ˜è¿°äº†ã€‚éœ€è¦å¼ºè°ƒä¸€ä¸‹çš„æ˜¯ JfJfâˆ’1J_f J_{f^{-1}}Jfâ€‹Jfâˆ’1â€‹ å¾—åˆ°å•ä½çŸ©é˜µï¼Œfunction ä¹‹é—´æœ‰inverseçš„å…³ç³»ï¼Œå¾—åˆ°çš„Jacobian Matrix ä¹Ÿæœ‰inverseçš„å…³ç³»ã€‚\n Determinant\n\nDeterminant ï¼šæ–¹é˜µçš„è¡Œåˆ—å¼æ˜¯ä¸€ä¸ªæ ‡é‡ï¼Œå®ƒæä¾›æœ‰å…³æ–¹é˜µçš„ä¿¡æ¯ã€‚ä½ åªè¦è®°å¾—ä¸Šå›¾å·¦ä¸‹è§’è¡Œåˆ—å¼çš„æ€§è´¨ï¼ŒçŸ©é˜µçš„detå’ŒçŸ©é˜µé€†çš„detäº’ä¸ºå€’æ•°ã€‚\n\nçŸ©é˜µçš„è¡Œåˆ—å¼çš„ç»å¯¹å€¼å¯ä»¥è¡¨ç¤ºè¡Œåˆ—å¼æ¯ä¸€è¡Œè¡¨ç¤ºçš„å‘é‡å›´æˆçš„ç©ºé—´çš„&quot;é¢ç§¯&quot;ï¼ˆ3ç»´ç©ºé—´ä¸­æ˜¯ä½“ç§¯ï¼Œæ›´é«˜ç»´ç©ºé—´ä¸­ä¹Ÿæ˜¯ç±»ä¼¼çš„æ¦‚å¿µï¼‰ã€‚æˆ–è€…ä½ å¯ä»¥æƒ³è±¡å®ƒæ˜¯çŸ©é˜µæ‰€è¡¨ç¤ºçš„çº¿æ€§å˜æ¢å‰åçš„â€œé¢ç§¯â€æ”¾ç¼©æ¯”ä¾‹ã€‚\nğŸ’–å…³äºè¡Œåˆ—å¼çš„å«ä¹‰ä½ å¯ä»¥å‚è€ƒ3Blue1Brownçš„çº¿æ€§ä»£æ•°çš„æœ¬è´¨05è¡Œåˆ—å¼ ã€‚\n Change of Variable Theorem\nDeterminant å°±æ˜¯ä¸ºäº†è§£é‡ŠChange of Variable Theorem\n\nå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåˆ†å¸ƒ Ï€(z)\\pi(z)Ï€(z) ï¼Œzzz å¸¦å…¥ fff ä¼šå¾—åˆ° xxx ï¼Œ xxx å½¢æˆäº†åˆ†å¸ƒ p(x)p(x)p(x) ï¼Œæˆ‘ä»¬ç°åœ¨æƒ³çŸ¥é“ Ï€(z)\\pi(z)Ï€(z) å’Œ  p(x)p(x)p(x) ä¹‹é—´çš„å…³ç³»ã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥å†™å‡ºä¸¤è€…ä¹‹é—´çš„å…³ç³»ï¼Œå°±å¯ä»¥åˆ†æä¸€ä¸ªGenerator ã€‚\nä¸¤è€…ä¹‹é—´çš„å…³ç³»èƒ½å†™å‡ºæ¥å—ï¼Ÿæ˜¯å¯ä»¥çš„ã€‚æˆ‘ä»¬ç°åœ¨è¦é—®çš„é—®é¢˜æ˜¯ï¼šå‡è®¾è¯´åˆ†å¸ƒ Ï€(z)\\pi(z)Ï€(z) ä¸Šæœ‰ä¸€ä¸ª zâ€²z&#x27;zâ€² å¯¹åº” Ï€(zâ€²)\\pi(z&#x27;)Ï€(zâ€²) ï¼Œ zâ€²z&#x27;zâ€² é€šè¿‡ fff å¾—åˆ° xâ€²x&#x27;xâ€² å¯¹åº” p(xâ€²)p(x&#x27;)p(xâ€²) ï¼Œç°åœ¨æƒ³çŸ¥é“ Ï€(zâ€²)\\pi(z&#x27;)Ï€(zâ€²) å’Œ p(xâ€²)p(x&#x27;)p(xâ€²) ä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ\nä¸¾ä¸€ä¸ªç®€å•çš„æ —å­æ¥è¯´æ˜ä¸Šè¿°é—®é¢˜ï¼š\n\nå‡è®¾è¯´ä¸¤ä¸ªåˆ†å¸ƒå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬çŸ¥é“probability density function çš„ç§¯åˆ†ç­‰äº1ï¼Œæ‰€ä»¥ä¸¤è€…çš„é«˜åº¦åˆ†åˆ«ä¸º1å’Œ12\\frac{1}{2}21â€‹ï¼Œå‡è®¾ xxx å’Œ zzz çš„å…³ç³»æ˜¯ x=2z+1x=2z+1x=2z+1 ï¼Œåº•å°±å˜æˆåŸæ¥çš„ä¸¤å€ï¼Œé«˜åº¦å°±å˜æˆåŸæ¥çš„äºŒåˆ†ä¹‹ä¸€ã€‚ç°åœ¨ä» Ï€(zâ€²)\\pi(z&#x27;)Ï€(zâ€²) åˆ° p(xâ€²)p(x&#x27;)p(xâ€²) ä¸­é—´çš„å…³ç³»å¾ˆç›´è§‰å°±æ˜¯äºŒåˆ†ä¹‹ä¸€çš„å…³ç³»ã€‚\né‚£æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªæ›´general çš„caseï¼š\n\nä¸¤ä¸ªåˆ†å¸ƒå¦‚ä¸Šå›¾æµ…è“è‰²å’Œæµ…ç»¿è‰²çº¿æ‰€ç¤ºï¼Œç°åœ¨æˆ‘ä»¬ä¸çŸ¥é“è¿™ä¸¤è€…çš„Distributionï¼Œå‡è®¾æˆ‘ä»¬çŸ¥é“ xxx å’Œ zzz çš„å…³ç³»å³çŸ¥é“ fff ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥æ±‚å‡º Ï€(zâ€²)\\pi(z&#x27;)Ï€(zâ€²) å’Œ p(xâ€²)p(x&#x27;)p(xâ€²) ä¹‹é—´çš„å…³ç³»ï¼Œè¿™å°±æ˜¯Change of Variable Theorem çš„æ¦‚å¿µã€‚\næˆ‘ä»¬æŠŠ zâ€²z&#x27;zâ€² åŠ ä¸€ä¸ª Î”zÎ”zÎ”z æ˜ å°„åˆ° xâ€²+Î”xx&#x27;+Î”xxâ€²+Î”x ï¼Œæ­¤æ—¶ä¸Šå›¾ä¸­è“è‰²æ–¹å—å’Œç»¿è‰²æ–¹å—éœ€è¦æœ‰åŒæ ·çš„é¢ç§¯ï¼Œæ‰€ä»¥æœ‰ä¸Šå›¾å³ä¾§æ‰€ç¤ºå…¬å¼ã€‚\np(xâ€²)=Ï€(zâ€²)âˆ£dzdxâˆ£p(x&#x27;) = \\pi(z&#x27;)\\left|\\frac{dz}{dx}\\right|\np(xâ€²)=Ï€(zâ€²)âˆ£âˆ£âˆ£âˆ£â€‹dxdzâ€‹âˆ£âˆ£âˆ£âˆ£â€‹\nè¿™ä¸ªç»å¯¹å€¼æ˜¯å› ä¸ºæœ‰æ—¶ä¼šå‡ºç°ä¸Šå›¾å·¦ä¸‹è§’çš„æƒ…å†µï¼Œé€šè¿‡ fff å˜æ¢åï¼Œå½¢æˆäº†äº¤å‰ã€‚\næˆ‘ä»¬åœ¨ä¸¾ä¸€ä¸ª xxx å’Œ zzz éƒ½æ˜¯äºŒç»´çš„æ —å­ï¼š\n\næˆ‘ä»¬åœ¨ zzz çš„åˆ†å¸ƒä¸­å–ä¸€ä¸ªå°å°çš„çŸ©å½¢åŒºåŸŸé«˜æ˜¯ Î”z2Î”z_2Î”z2â€‹ å®½æ˜¯ Î”z1Î”z_1Î”z1â€‹ ï¼Œå®ƒé€šè¿‡ä¸€ä¸ªfunction fff æŠ•å½±åˆ° xxx çš„åˆ†å¸ƒä¸­å˜æˆä¸€ä¸ªè±å½¢ã€‚æˆ‘ä»¬ç”¨å‘é‡ [Î”x11,Î”x21][Î”x_{11}, Î”x_{21}][Î”x11â€‹,Î”x21â€‹] è¡¨ç¤ºè±å½¢çš„å³ä¸‹è¾¹ï¼Œç”¨å‘é‡[Î”x22,Î”x12][Î”x_{22}, Î”x_{12}][Î”x22â€‹,Î”x12â€‹] è¡¨ç¤ºè±å½¢çš„å·¦ä¸Šè¾¹ã€‚æ ¹æ®ä¸Šé¢Determinant ä¸€èŠ‚ä¸­æåˆ°çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸¤ä¸ªå‘é‡ç»„æˆçš„çŸ©é˜µçš„determinant è¡¨ç¤ºè¯¥çŸ©é˜µçš„é¢ç§¯ã€‚Ï€(zâ€²)\\pi(z&#x27;)Ï€(zâ€²) ä½œä¸ºæ­£æ–¹å½¢ä¸ºåº•çš„ä¸‰ç»´å½¢ä½“çš„é«˜ï¼Œ p(xâ€²)p(x&#x27;)p(xâ€²) ä½œä¸ºä»¥ç»¿è‰²è±å½¢ä¸ºåº•çš„ä¸‰ç»´å½¢ä½“çš„é«˜ï¼Œè¿™ä¸¤ä¸ªå½¢ä½“çš„ç§¯åˆ†å€¼ç›¸ç­‰ï¼Œæ‰€ä»¥å¾—åˆ°äº†å¦‚ä¸Šå›¾æ‰€ç¤ºçš„å…¬å¼ã€‚\nå¦å¤–å†è®²ä¸€ä¸‹å››ä¸ªÎ”å€¼çš„æ„æ€ï¼š\nÎ”x11Î”x_{11}Î”x11â€‹æ˜¯z1z_1z1â€‹ï¼ˆç»´åº¦ä¸Šï¼‰æ”¹å˜çš„æ—¶å€™x1x_1x1â€‹ï¼ˆç»´åº¦ä¸Šï¼‰çš„å˜åŒ–é‡\nÎ”x21Î”x_{21}Î”x21â€‹æ˜¯z1z_1z1â€‹æ”¹å˜çš„æ—¶å€™x2x_2x2â€‹çš„å˜åŒ–é‡\nÎ”x12Î”x_{12}Î”x12â€‹æ˜¯z2z_2z2â€‹æ”¹å˜çš„æ—¶å€™x1x_1x1â€‹çš„å˜åŒ–é‡\nÎ”x22Î”x_{22}Î”x22â€‹æ˜¯z2z_2z2â€‹æ”¹å˜çš„æ—¶å€™x2x_2x2â€‹çš„å˜åŒ–é‡\n æ•´ç†å…¬å¼å¾—å‡ºç»“è®º\n\næ¥ä¸‹æ¥å°±æ˜¯åšä¸€æ³¢æ•´ç†ï¼Œç›¸ä¿¡å¤§å®¶éƒ½çœ‹å¾—æ‡‚ï¼ˆçœ‹ä¸æ‡‚å°±é‡å­¦ä¸€ä¸‹çº¿ä»£ğŸ˜œï¼‰ï¼Œå°±ä¸èµ˜è¿°äº†ã€‚\næœ€ç»ˆçš„ç»“è®ºå°±æ˜¯ä¸Šå›¾å·¦ä¸‹è§’çš„å…¬å¼ï¼š\næ€»è€Œè¨€ä¹‹ï¼Œ Ï€(zâ€²)\\pi(z&#x27;)Ï€(zâ€²) ä¹˜ä¸Š âˆ£det(Jfâˆ’1)âˆ£\\left| det(J_{f^{-1}}) \\right|âˆ£âˆ£â€‹det(Jfâˆ’1â€‹)âˆ£âˆ£â€‹ å°±å¾—åˆ° p(xâ€²)p(x&#x27;)p(xâ€²) ï¼Œè¿™å°±æ˜¯ Ï€(zâ€²)\\pi(z&#x27;)Ï€(zâ€²) å’Œ p(xâ€²)p(x&#x27;)p(xâ€²) çš„å…³ç³»ã€‚\nå¦‚æœä½ æ²¡çœ‹å¤ªæ‡‚æ•°å­¦æ¨å¯¼ï¼Œä½ å°±è®°ä½è¿™ä¸ªç»“è®ºå°±å¥½ï¼Œ Ï€(zâ€²)\\pi(z&#x27;)Ï€(zâ€²) å’Œ p(xâ€²)p(x&#x27;)p(xâ€²) ä¹‹é—´å°±æ˜¯å·®ä¸€ä¸ª âˆ£det(Jfâˆ’1)âˆ£\\left| det(J_{f^{-1}}) \\right|âˆ£âˆ£â€‹det(Jfâˆ’1â€‹)âˆ£âˆ£â€‹ ã€‚\nend of math warning\n Flow-based Model\næ¥ä¸‹æ¥æˆ‘ä»¬å°±æ­£å¼è¿›å…¥Flowçš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬å…ˆå›åˆ°Generation ä¸Šã€‚\n\nä¸€ä¸ªGenerator æ˜¯æ€ä¹ˆè®­ç»ƒå‡ºæ¥çš„å‘¢ï¼ŒGenerator è®­ç»ƒçš„ç›®æ ‡å°±æ˜¯è¦maximize PG(xi)P_G(x^i)PGâ€‹(xi) ï¼Œxix^ixi æ˜¯ä»real data ä¸­sample å‡ºæ¥çš„ä¸€ç¬”dataã€‚é‚£ PG(xi)P_G(x^i)PGâ€‹(xi) é•¿ä»€ä¹ˆæ ·å­å‘¢ï¼Œæœ‰äº†å‰é¢çš„Change of Variable Theorem çš„å…¬å¼æˆ‘ä»¬å°±å¯ä»¥æŠŠ PG(xi)P_G(x^i)PGâ€‹(xi) å†™å‡ºæ¥äº†ï¼š\nPG(xi)=Ï€(zi)âˆ£det(JGâˆ’1)âˆ£P_G(x^i) = \\pi(z^i)\\left|det(J_{G^{-1}})\\right|\nPGâ€‹(xi)=Ï€(zi)âˆ£det(JGâˆ’1â€‹)âˆ£\nè€Œ ziz^izi å°±æ˜¯æŠŠxix^ixi å¸¦å…¥GGG inverse ä»¥åçš„ç»“æœã€‚\næˆ‘ä»¬åœ¨ç»™ä¸Šå¼åŠ ä¸€ä¸ªlogï¼ŒæŠŠå…¬å¼å³ä¾§çš„ä¹˜è½¬ä¸ºåŠ ã€‚ç°åœ¨æˆ‘ä»¬çŸ¥é“ log(PG(xi))log(P_G(x^i))log(PGâ€‹(xi)) é•¿ä»€ä¹ˆæ ·å­äº†ï¼Œæˆ‘ä»¬åªè¦èƒ½maximize è¿™ä¸ªå¼å­æˆ‘ä»¬å°±å¯ä»¥train Generator å°±ç»“æŸäº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¦æƒ³maximize è¿™ä¸ªå¼å­éœ€è¦æœ‰ä¸€äº›å‰æï¼š\n\nè¦çŸ¥é“å¦‚ä½•è®¡ç®— det(JG)det(J_G)det(JGâ€‹)\nè¦çŸ¥é“ Gâˆ’1G^{-1}Gâˆ’1\n\nè¦åšGenerator çš„Jacobian å…¶å®è¿˜æ¯”è¾ƒå¥½åšï¼Œä½ åªè¦çŸ¥é“å¦‚ä½•è®¡ç®—âˆ‚x/âˆ‚z\\partial{x}/\\partial{z}âˆ‚x/âˆ‚z ï¼Œä½†æ˜¯é—®é¢˜æ˜¯è¿™ä¸ªJacobian Matrix å¯èƒ½ä¼šå¾ˆå¤§ï¼Œæ¯”å¦‚è¯´ xxx å’Œ zzz éƒ½æœ‰1000ç»´ï¼Œé‚£ä½ çš„Jacobian Matrix å°±æ˜¯ä¸€ä¸ª1000*1000çš„çŸ©é˜µï¼Œä½ è¦ç®—å®ƒçš„detï¼Œè®¡ç®—é‡æ˜¯éå¸¸å¤§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å¥½å¥½è®¾è®¡Generator ï¼Œè®©å®ƒçš„Jacobian Matrix çš„det å¥½ç®—ä¸€äº›ã€‚\nå¦ä¸€ä¸ªå‰ææ˜¯ï¼šæˆ‘ä»¬è¦æŠŠ ziz^izi å˜æˆ xix^ixi ï¼Œå°±è¦çŸ¥é“Gâˆ’1G^{-1}Gâˆ’1 ã€‚æˆ‘ä»¬åŒæ—¶ä¹Ÿè¦è®©det(JGâˆ’1)det(J_{G^{-1}})det(JGâˆ’1â€‹) å˜å¾—å®¹æ˜“ç®—ã€‚ä¸ºäº†ç¡®ä¿Gæ˜¯invertibleï¼Œæˆ‘ä»¬è®¾è®¡çš„Generator çš„æ—¶å€™ zzz å’Œ xxx çš„ç»´åº¦æ˜¯ç›¸åŒçš„ã€‚ zzz å’Œ xxx çš„ç»´åº¦ç›¸åŒä¸èƒ½ä¿è¯Gä¸€å®šæ˜¯invertibleï¼Œä½†æ˜¯å¦‚æœä¸ç›¸åŒGä¸€å®šä¸æ˜¯invertibleã€‚\næ‰€ä»¥ï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬å°±èƒ½çœ‹å‡ºæ¥ï¼ŒFlow-based Model å’ŒGAN ä¸ä¸€æ ·ï¼ŒGANæ˜¯ä½ç»´ç”Ÿæˆé«˜ç»´ï¼Œä½†æ˜¯Flowè¿™ä¸ªæŠ€æœ¯ä¸­è¾“å…¥è¾“å‡ºçš„ç»´åº¦å¿…é¡»ç›¸åŒï¼Œè¿™ä¸€ç‚¹æ˜¯æœ‰ç‚¹å¥‡æ€ªçš„ã€‚å¦å¤–ï¼Œä¸ºäº†ä¿è¯Gæ˜¯å¯é€†çš„ï¼Œæˆ‘ä»¬è¦é™åˆ¶Gçš„æ¶æ„ï¼Œè¿™æ ·çš„åšæ³•å¿…ç„¶ä¼šé™åˆ¶æ•´ä¸ªç”Ÿæˆæ¨¡å‹çš„èƒ½åŠ›ã€‚\n\næ—¢ç„¶ä¸€ä¸ªGä¸å¤Ÿå¼ºï¼Œä½ å°±å¤šåŠ ä¸€äº›ã€‚æœ€ç»ˆmaximizeçš„ç›®æ ‡å°±æ˜¯ä¸Šå›¾æœ€ä¸‹é¢çš„å…¬å¼ã€‚\nGâˆ—=argmaxGâˆ‘imlog(pK(xi))G^* = arg\\mathop{max}\\limits_{G}\\sum_{i}^{m}log(p_K(x^i))\nGâˆ—=argGmaxâ€‹iâˆ‘mâ€‹log(pKâ€‹(xi))\n å®ä½œä¸Šæ€ä¹ˆåšFlow-based Model\n\næˆ‘ä»¬å…ˆè€ƒè™‘ä¸€ä¸ªGï¼Œåœ¨å…¬å¼ä¸­å…¶å®åªæœ‰å‡ºç° Gâˆ’1G^{-1}Gâˆ’1 ï¼Œæ‰€ä»¥å®é™…ä¸Šæˆ‘ä»¬åœ¨è®­ç»ƒçš„æ—¶å€™æˆ‘ä»¬è®­ç»ƒçš„æ˜¯ Gâˆ’1G^{-1}Gâˆ’1 ï¼Œåœ¨ç”Ÿæˆçš„æ—¶å€™æŠŠ Gâˆ’1G^{-1}Gâˆ’1 å€’è¿‡æ¥ç”¨ GGG ç”Ÿæˆç›®æ ‡ã€‚åœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œä»real data ä¸­sample ä¸€äº›æ•°æ®å‡ºæ¥ï¼Œè¾“å…¥ Gâˆ’1G^{-1}Gâˆ’1 ä¸­å¾—åˆ° ziz^izi ã€‚\nçœ‹ä¸€ä¸‹ä¸Šå›¾ä¸­çš„å…¬å¼ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯maximize å®ƒï¼Œè¿™ä¸ªå…¬å¼æœ‰ä¸¤é¡¹ï¼Œå…ˆçœ‹ç¬¬ä¸€é¡¹ã€‚å› ä¸º Ï€\\piÏ€ æ˜¯ä¸€ä¸ªnormal distributionï¼Œè¦è¿™ä¸€é¡¹çš„å€¼æœ€å¤§åªè¦è®© Gâˆ’1(xi)G^{-1}(x^i)Gâˆ’1(xi) æ˜¯é›¶å‘é‡å°±å¥½äº†ï¼Œä½†æ˜¯æ˜¾ç„¶è¿™ä¹ˆåšä¼šå‡ºå¤§é—®é¢˜ï¼Œå¦‚æœ ziz^izi å˜0ï¼ŒJGâˆ’1J_{G^{-1}}JGâˆ’1â€‹ å°†æ˜¯ä¸€ä¸ªé›¶çŸ©é˜µï¼Œåˆ™ det(JGâˆ’1)=0det(J_{G^{-1}}) = 0det(JGâˆ’1â€‹)=0 ã€‚æ­¤æ—¶ç¬¬äºŒé¡¹ï¼Œå°±æ˜¯è´Ÿæ— ç©·ã€‚\nä¸ºäº†maximize log(PG(xi))log(P_G(x^i))log(PGâ€‹(xi)) ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸€æ–¹é¢å‰ä¸€é¡¹è¦è®© Gâˆ’1(xi)G^{-1}(x^i)Gâˆ’1(xi) å‘åŸç‚¹é æ‹¢ï¼Œä¸€æ–¹é¢ç¬¬äºŒé¡¹åˆä¼šå¯¹ Gâˆ’1G^{-1}Gâˆ’1 åšä¸€äº›é™åˆ¶ï¼Œè®©å®ƒä¸ä¼šæŠŠæ‰€æœ‰çš„ zzz mapping åˆ°é›¶å‘é‡ã€‚\nè¿™å°±æ˜¯æˆ‘ä»¬åœ¨å®ä½œFlow-based Model æ—¶æ‰€åšçš„äº‹æƒ…ã€‚\n Coupling Layer\ncoupling layer æ˜¯ä¸€ä¸ªå®ç”¨çš„Gï¼ŒNICE å’ŒReal NVP è¿™ä¸¤ä¸ªFlow-based Model éƒ½ç”¨åˆ°äº†coupling layer ï¼Œæ¥ä¸‹æ¥å°†ä»‹ç»è¿™ä¸ªcoupling layer çš„å…·ä½“åšæ³•ã€‚\n\n\nNICE\nhttps://arxiv.org/abs/1410.8516\nReal NVP\nhttps://arxiv.org/abs/1605.08803\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯Dç»´å‘é‡ï¼Œç„¶åæŠŠè¾“å…¥è¾“å‡ºçš„å‘é‡æ‹†æˆä¸¤éƒ¨åˆ†ï¼Œå‰dç»´ä¸ºä¸€ç»„ï¼ŒåD-dç»´ä¸ºä¸€ç»„ã€‚å¯¹äºä¸Šé¢çš„ç¬¬ä¸€éƒ¨åˆ†ç›´æ¥é€šè¿‡copy zå¾—åˆ°xã€‚å¯¹äºç¬¬äºŒéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†ç¬¬ä¸€éƒ¨åˆ†é€šè¿‡ä¸¤ä¸ªå˜æ¢Få’ŒHï¼ˆè¿™ä¸¤ä¸ªfunction å¯ä»¥ä»»æ„è®¾è®¡ï¼Œå¤šå¤æ‚éƒ½å¯ä»¥ï¼‰å¾—åˆ°å‘é‡Î²å’ŒÎ³ï¼Œå†å°†ç¬¬äºŒéƒ¨åˆ†å’ŒÎ²åšå†…ç§¯å†åŠ ä¸ŠÎ³ï¼Œå°±å¾—åˆ°ç¬¬äºŒéƒ¨åˆ†çš„xã€‚\næ¥ä¸‹æ¥è¦è®²æ€ä¹ˆå–coupling layer çš„inverseã€‚å°±æ˜¯è¯´åœ¨ä¸çŸ¥é“zï¼Œåªæœ‰åé¢çš„xï¼Œè¿™æ ·çš„æƒ…å†µä¸‹æ€ä¹ˆæŠŠzæ‰¾å‡ºæ¥å‘¢ï¼Ÿ\n\nå¯¹äºç¬¬ä¸€éƒ¨åˆ†ç›´æ¥æŠŠx copyè¿‡å»å°±å¯ä»¥äº†ï¼Œå¯¹äºç¬¬äºŒéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°±æŠŠåˆšæ‰å¾—åˆ°çš„zçš„ç¬¬ä¸€éƒ¨åˆ†é€šè¿‡Få’ŒHå¾—åˆ°Î²å’ŒÎ³ï¼Œç„¶åå°†xçš„ç¬¬äºŒéƒ¨åˆ†é€šè¿‡ xiâˆ’Î³iÎ²i\\frac{x_i-Î³_i}{Î²_i}Î²iâ€‹xiâ€‹âˆ’Î³iâ€‹â€‹ å°±å¯ä»¥ç®—å‡ºz ï¼Œç»“æŸã€‚\n\nä¸åªè¦èƒ½ç®—Gçš„inverseï¼Œè¿˜è¦ç®— JGJ_GJGâ€‹ ï¼Œè®¡ç®—æ–¹æ³•å°±å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚\nå·¦ä¸Šè§’æ˜¾ç„¶æ˜¯å•ä½çŸ©é˜µï¼Œå› ä¸ºxå’Œzæ˜¯copyçš„ã€‚\nå³ä¸Šè§’æ˜¯æµ…è“è‰²å¯¹åº”æ·±ç»¿è‰²çš„éƒ¨åˆ†ï¼Œä¸Šå›¾å³ä¸Šè§’å¯ä»¥æ˜æ˜¾çœ‹å‡ºä¸¤è€…æ²¡æœ‰å…³ç³»ï¼Œåå¾®åˆ†ç»“æœä¸º0.\nå·¦ä¸‹è§’æˆ‘ä»¬å¹¶ä¸å…³å¿ƒäº†ï¼Œå› ä¸ºç°åœ¨çŸ©é˜µçš„å·¦ä¸Šè§’æ˜¯å•ä½çŸ©é˜µï¼Œå³ä¸Šè§’æ˜¯é›¶çŸ©é˜µï¼Œæ•´ä¸ªçŸ©é˜µçš„detå°±æ˜¯å³ä¸‹è§’çŸ©é˜µçš„detã€‚\nå³ä¸‹è§’çŸ©é˜µæ˜¯Diagonal ï¼Œå› ä¸ºä½ æƒ³æƒ³çœ‹ zd+1z_{d+1}zd+1â€‹ åªå’Œ xd+1x_{d+1}xd+1â€‹ æœ‰å…³ç³»ï¼Œæ”¹è¡Œå…¶ä»–å€¼éƒ½æ˜¯0ï¼ŒåŒæ ·çš„ zDz_{D}zDâ€‹ åªå’Œ xDx_{D}xDâ€‹ æœ‰å…³ç³»ï¼Œæ‰€ä»¥æ•´ä¸ªå³ä¸‹è§’çŸ©é˜µå°±æ˜¯ä¸€ä¸ªå¯¹è§’çŸ©é˜µã€‚\næ‰€ä»¥è¿™è¿™ä¸ªçŸ©é˜µçš„detï¼š\ndet(JG)=âˆ‚xd+1âˆ‚zd+1âˆ‚xd+2âˆ‚zd+2...âˆ‚xDâˆ‚zD=Î²d+1Î²d+2...Î²Ddet(J_G) =\\frac{\\partial{x_{d+1}}}{\\partial{z_{d+1}}}\\frac{\\partial{x_{d+2}}}{\\partial{z_{d+2}}}...\\frac{\\partial{x_D}}{\\partial{z_D}} \\\\\\\\\n=Î²_{d+1}Î²_{d+2}...Î²_{D}\ndet(JGâ€‹)=âˆ‚zd+1â€‹âˆ‚xd+1â€‹â€‹âˆ‚zd+2â€‹âˆ‚xd+2â€‹â€‹...âˆ‚zDâ€‹âˆ‚xDâ€‹â€‹=Î²d+1â€‹Î²d+2â€‹...Î²Dâ€‹\n stacking\n\nå¦‚æœä½ æ˜¯ç®€å•çš„æŠŠcoupling layer å åœ¨ä¸€èµ·ï¼Œé‚£ä½ ä¼šå‘ç°æœ€åç”Ÿæˆçš„ä¸œè¥¿æœ‰ä¸€éƒ¨åˆ†æ˜¯noiseï¼Œå› ä¸ºä¸Šé¢æ˜¯è¿™éƒ¨åˆ†å‘é‡æ˜¯ç›´æ¥ä¸€è·¯copyåˆ°è¾“å‡ºçš„ã€‚\næ‰€ä»¥æˆ‘ä»¬åšä¸€äº›æ‰‹è„šï¼ŒæŠŠå…¶ä¸­ä¸€äº›coupling layer åšä¸€ä¸‹åè½¬ï¼Œå¦‚ä¸Šå›¾ä¸‹ä¾§æ‰€ç¤ºã€‚\n\næˆ‘ä»¬å†è®²çš„æ›´å…·ä½“ä¸€ç‚¹ï¼Œå¦‚æœè¯´æˆ‘ä»¬åœ¨åšå›¾åƒç”Ÿæˆï¼Œæœ‰ä¸¤ç§æ‹†åˆ†å‘é‡çš„åšæ³•ï¼šä¸€ç§æ˜¯æŠŠæ¨ªè½´çºµè½´åˆ‡åˆ†æˆå¤šæ¡ï¼Œæ¨ªè½´çºµè½´çš„indexä¹‹å’Œæ˜¯å¥‡æ•°å°±copyå¶æ•°å°±ä¸copyåštransform ã€‚æˆ–è€…æ˜¯ï¼Œä¸€å¼ image é€šå¸¸ç”±rgbä¸‰ä¸ªchannelï¼Œä½ å°±å…¶ä¸­æŸå‡ ä¸ªchannel åšcopy æŸå‡ ä¸ªchannel åštransformï¼Œæ¯æ¬¡copy å’Œtransform çš„channel å¯èƒ½æ˜¯ä¸ä¸€æ ·ï¼Œä½ æœ‰å¾ˆå¤šå±‚coupling layer å˜›ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠè¿™ä¸¤ç§åšæ³•æ··åœ¨ä¸€èµ·ç”¨ï¼Œæœ‰æ—¶ç”¨ç¬¬ä¸€ç§æ‹†åˆ†æ–¹æ³•ï¼Œæœ‰æ—¶å€™ç”¨ç¬¬äºŒç§æ‹†åˆ†æ–¹æ³•ã€‚\n 1x1 Convolution\n\n\nGLOW\nhttps://arxiv.org/abs/1807.03039\n\nè®²é“ç†ï¼ŒFlow-based Generative Model å…¶å®å¾ˆæ—©å°±è¢«æå‡ºæ¥äº†ï¼Œä¸Šé¢è¯´çš„coupling layer åšGenerator çš„æ–¹æ³•ä¸­æåˆ°çš„NICE å’ŒReal NVP è¿™ä¸¤ä¸ªFlow-based Model éƒ½æ˜¯14ã€15å¹´å·¦å³è¢«æå‡ºæ¥äº†ï¼Œç®—æ˜¯å¾ˆå¤è€çš„ä¸œè¥¿äº†ï¼Œä¸ºä»€ä¹ˆé‡ææ—§äº‹å‘¢ï¼Œå°±æ˜¯å› ä¸ºGLOWè¿™ä¸ªæŠ€æœ¯æ˜¯å»å¹´ï¼ˆæŒ‡2018å¹´ï¼‰è¢«æå‡ºæ¥äº†ï¼Œè¿™ä¸ªæŠ€æœ¯çš„ç»“æœè¿˜æ˜¯è›®æƒŠäººçš„ã€‚è™½ç„¶ï¼Œè¿™ä¸ªæ–¹æ³•çš„ç»“æœè¿˜æ˜¯æ²¡æœ‰æ‰“è´¥GANï¼Œä½†æ˜¯ä½ ä¼šæƒŠå¹&quot;æˆ‘é ï¼Œä¸ç”¨GANä¹Ÿå¯ä»¥åšåˆ°è¿™ç§ç¨‹åº¦å•Šï¼&quot;\nGLOWé™¤äº†Coupling Layerï¼Œè¿˜æœ‰ä¸ªç¥å¥‡çš„layer å«åš1x1 Convolutionï¼Œä¸¾ä¾‹æ¥è¯´æˆ‘ä»¬ç°åœ¨è¦äº§ç”Ÿå›¾ç‰‡ï¼Œæˆ‘ä»¬å°±ç”¨ä¸€ä¸ª3x3çš„WçŸ©é˜µï¼Œå°†zä¸€ä¸ªåƒç´ ä¸€ä¸ªåƒç´ åœ°è½¬æ¢ä¸ºx ã€‚Wæ˜¯learn å‡ºæ¥çš„ï¼Œå®ƒå¾ˆå¯èƒ½èƒ½å¤Ÿåšåˆ°çš„äº‹æƒ…æ˜¯shuffle channelï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºçš„æ —å­ï¼Œå°±æ˜¯æŠŠzçš„channel åšäº†äº¤æ¢ã€‚\nå¦‚æœWæ˜¯invertible ï¼Œé‚£å°±å¾ˆå®¹æ˜“ç®—å‡º Wâˆ’1W^{-1}Wâˆ’1 ï¼Œä½†æ˜¯Wæ˜¯learn å‡ºæ¥çš„ï¼Œè¿™æ ·çš„è¯å®ƒä¸€å®šæ˜¯invertible çš„å—ï¼Œæ–‡çŒ®ä¸­ä½œè€…åœ¨initial çš„æ—¶å€™å°±ç”¨äº†ä¸€ä¸ªinvertible matrixï¼Œä»–ä¹Ÿè®¸æ˜¯æœŸå¾…initial invertible matrixï¼Œæœ€åçš„ç»“æœä¹Ÿèƒ½æ˜¯invertible matrixã€‚ä½†æ˜¯å®é™…ä¸Šinvertible matrix æ˜¯æ¯”è¾ƒå®¹æ˜“å‡ºç°çš„ï¼Œä½ éšæœºè®¾ç½®ä¸€ä¸ªmatrix å¤§æ¦‚ç‡å°±æ˜¯invertible ï¼Œä½ æƒ³æƒ³çœ‹åªæœ‰detæ˜¯0æ‰æ˜¯éinvertibleï¼Œæ‰€ä»¥å®ä½œä¸Šä¹Ÿæ²¡å¤ªå¤§é—®é¢˜ï¼Œè€å¸ˆè®²å¦‚æœä½ çœ‹åˆ°æœ‰æ–‡çŒ®è§£é‡Šæˆ–è€…è€ƒè™‘è¿™ä»¶äº‹æƒ…äº†è®°å¾—callä»–ï¼Œä¹Ÿè®°å¾—callæˆ‘ï¼Œæ–¹ä¾¿æˆ‘åœ¨è¿™é‡Œåšä¸€äº›è¡¥å……ã€‚\n\næˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªæ —å­ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬æŠŠä¸€ä¸ªåƒç´  [x1,x2,x3][x_1,x_2,x_3][x1â€‹,x2â€‹,x3â€‹] ä¹˜ä¸ŠWï¼Œåšä¸€ä¸ª è½¬æ¢ï¼Œæ±‚è¿™ä¸ªWçš„Jacobian Matrix çš„å…¬å¼å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä½ è‡ªå·±ç»†ç®—ä¸€ä¸‹å°±ä¼šå‘ç°ï¼ŒJfJ_fJfâ€‹ å°±æ˜¯Wã€‚\n\næ‰€ä»¥ç°åœ¨å…¨éƒ¨çš„zå’Œxï¼Œåšå˜æ¢ä½¿ç”¨çš„Generator ï¼ˆä¹Ÿå°±æ˜¯å¾ˆdxdä¸ªWï¼‰çš„Jacobian Matrix å°±æ˜¯ä¸Šå›¾æ‰€ç¤ºçš„å¯¹è§’çŸ©é˜µï¼Œå› ä¸ºåªæœ‰å¯¹è§’çº¿ä¸Šçš„å…ƒç´ å¯¹åº”çš„è“è‰²pixel å’Œç»¿è‰²pixel æ‰æ˜¯æœ‰å…³ç³»çš„ï¼Œå…¶å®ƒåœ°æ–¹çš„åå¾®åˆ†éƒ½æ˜¯0ã€‚\nè¿™ä¸ªçŸ©é˜µçš„detæ˜¯ä»€ä¹ˆå‘¢ï¼Œå¦‚æœä½ çº¿ä»£å¤Ÿå¥½çš„è¯ï¼Œå°±çŸ¥é“è¿™ä¸ªå€¼å°±æ˜¯ (det(W))dÃ—d(det(W))^{d \\times d}(det(W))dÃ—d ï¼Œè€ŒWæ˜¯3x3çš„ï¼Œdetå¾ˆå¥½ç®—ï¼Œæ‰€ä»¥å¤§çŸ©é˜µçš„detä¹Ÿå°±å¾ˆå¥½ç®—å‡ºæ¥äº†ï¼Œç»“æŸã€‚\n Demo of OpenAI (GLOW)\nFlow-based Model æœ‰ä¸€ä¸ªå¾ˆçŸ¥åçš„ç»“æœå°±æ˜¯GLOWè¿™ä¸ªModelï¼ŒOpenAIæœ‰åšä¸€ä¸ªGLOW Model demo çš„ç½‘ç«™ï¼š\n\nhttps://openai.com/blog/glow/\n\nä½ å¯ä»¥åšäººè„¸çš„ç»“åˆï¼š\n\nå¯ä»¥æŠŠè„¸åšç§ç§å˜å½¢ï¼Œæ¯”å¦‚è¯´è®©äººç¬‘èµ·æ¥ï¼š\n\nä½ éœ€è¦å…ˆæ”¶é›†ä¸€å †ç¬‘çš„äººè„¸ã€ä¸€å †ä¸ç¬‘çš„äººè„¸ï¼ŒæŠŠè¿™ä¸¤ä¸ªé›†åˆçš„å›¾ç‰‡çš„zæ±‚å‡ºæ¥åˆ†åˆ«å–å¹³å‡ï¼Œç„¶åç›¸å‡çš„åˆ° zsmilez_{smile}zsmileâ€‹ ï¼Œzsmilez_{smile}zsmileâ€‹ å°±æ˜¯ä»ä¸ç¬‘åˆ°ç¬‘ç§»åŠ¨å¤šå°‘è·ç¦»ã€‚ç„¶åï¼Œä½ åªè¦å¾€ä¸ç¬‘çš„è„¸ä¸ŠåŠ ä¸Šä¸€ä¸ª zsmilez_{smile}zsmileâ€‹ é€šè¿‡Gï¼Œå°±å¯ä»¥å¾—åˆ°ç¬‘çš„è„¸äº†ã€‚\n To Learn More â€¦\n\nGLOW ç°åœ¨åšçš„æœ€å¤šçš„å°±æ˜¯è¯­éŸ³åˆæˆã€‚åœ¨è¯­éŸ³åˆæˆä»»åŠ¡ä¸Šï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆç”¨GANåšçš„ç»“æœéƒ½ä¸æ˜¯å¾ˆå¥½ï¼ŒAuto-regressive Model å°±æ˜¯ä¸€ä¸ªä¸€ä¸ªsample äº§ç”Ÿå‡ºæ¥ï¼Œç»“æœæ˜¯å¾ˆå¥½ï¼Œä½†æ˜¯è®¡ç®—å¤ªæ…¢ä¸å¤ªå®ç”¨ï¼Œæ‰€ä»¥ç°åœ¨éƒ½åœ¨ç”¨GLOW ï¼Œå°±ç•™ç»™å¤§å®¶è‡ªå­¦äº†ã€‚\n","categories":["æå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°"],"tags":["ML","note","Next-Step-of-ML"]},{"title":"GAN(Quick Review)","url":"https://ch3nye.top/GAN(Quick-Review)/","content":" GAN(Quick Review)\næœ¬èŠ‚çš„ç›®çš„å°±æ˜¯å¸®å¤§å®¶å¤ä¹ ä¸€ä¸‹GANï¼Œå¦‚æœä½ å¯¹GANä¸æ˜¯ç‰¹åˆ«æ„Ÿå…´è¶£ï¼Œä½ å°±å¯ä»¥é€šè¿‡è¿™èŠ‚è¯¾äº†è§£æœ¬è¯¾ç¨‹éœ€è¦ç”¨åˆ°çš„GANçš„çŸ¥è¯†ã€‚å¦‚æœå¬å®Œä»¥åå¯¹GANäº§ç”Ÿäº†æµ“åšçš„å…´è¶£ï¼Œä½ å¯ä»¥å»çœ‹2018å¹´çš„GANçš„è¯¾ç¨‹è§†é¢‘ï¼šhttps://youtube.com/playlist?list=PLJV_el3uVTsMq6JEFPW35BCiOQTsoqwNw\n Three Categories of GAN\næˆ‘ä»¬æŠŠGANåˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š\n\n 1.Typical GAN\nç¬¬ä¸€ç§ç»å…¸çš„GANå°±æ˜¯è®­ç»ƒä¸€ä¸ªGeneratorï¼Œè¿™ä¸ªç”Ÿæˆå™¨åƒä¸€ä¸ªå‘é‡ï¼Œç”Ÿæˆä¸€ä¸ªç›®æ ‡å¯¹è±¡ã€‚æ¯”å¦‚è¯´ï¼Œä½ è¦åšäºŒæ¬¡å…ƒäººè„¸å›¾ç‰‡çš„ç”Ÿæˆï¼Œä½ å°±collect ä¸€å¤§å †çš„åŠ¨æ¼«äººè„¸å›¾ç‰‡ï¼Œç„¶åå–‚ç»™Generator å»è®­ç»ƒï¼ŒGenerator å°±ä¼šå­¦ä¼šç”ŸæˆäºŒæ¬¡å…ƒäººè„¸çš„å›¾åƒã€‚\né‚£æ€ä¹ˆè®­ç»ƒè¿™ä¸ªGenerator å‘¢ï¼Œæ¨¡å‹çš„æ¶æ„æ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿ\n\nåœ¨ç»å…¸çš„GANæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä¼šæœ‰ä¸€ä¸ªGenerator å’Œä¸€ä¸ªDiscriminator ï¼Œè¿™ä¸¤è€…æ˜¯äº¤æ›¿çš„è®­ç»ƒå‡ºæ¥çš„ï¼Œæ€ä¹ˆäº¤æ›¿è®­ç»ƒåé¢å™è¿°ã€‚æˆ‘ä»¬ç»§ç»­ä»¥ç”ŸæˆäºŒæ¬¡å…ƒäººè„¸å›¾åƒä¸ºä¾‹ï¼ŒGenerator å°±æ˜¯çš„input æ˜¯ä¸€ä¸ªä½ç»´å‘é‡ï¼Œoutput æ˜¯ä¸€ä¸ªé«˜ç»´å‘é‡ã€‚Discriminator è¾“å…¥å°±æ˜¯Generator ç”Ÿæˆçš„å›¾ç‰‡ï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªåˆ†æ•°ï¼Œè¿™ä¸ªåˆ†æ•°å°±æ˜¯è¯´è¾“å…¥æœ‰å¤šåƒäºŒæ¬¡å…ƒäººè„¸ï¼Œå¦‚æœå¾ˆæƒ³çš„è¯å°±ç»™å‡ºé«˜åˆ†ï¼Œå¦åˆ™å°±ç»™å‡ºä½åˆ†ã€‚è¿™å°±æ˜¯ç»å…¸GANçš„åŸºæœ¬æ¶æ„ã€‚\n Algorithm\nç°åœ¨æ¥è®²ä¸€ä¸‹Generator å’ŒDiscriminator æ˜¯æ€ä¹ˆè¢«è®­ç»ƒå‡ºæ¥çš„ã€‚è¿™é‡Œå…ˆæ˜ç¡®Gå’ŒDéƒ½æ˜¯ç¥ç»ç½‘ç»œï¼Œè¿™ä¸¤è€…çš„å…·ä½“æ¶æ„æ ¹æ®å…·ä½“çš„ä»»åŠ¡è€Œå®šï¼Œæ¯”å¦‚è¯´ä½ è¦åšå›¾åƒç”Ÿæˆé‚£ä½ å¯èƒ½å°±ä¼šç”¨CNNï¼Œå¦‚æœä½ è¦è®©Generator é€šè¿‡ä¸€äº›è¯ç”Ÿæˆæ–‡ç« ï¼Œä½ å¯èƒ½å°±ä¼šç”¨RNNâ€¦æˆ‘ä»¬ä»Šå¤©ä¸åšè¿‡å¤šè®¨è®ºè¿™æ–¹é¢çš„å†…å®¹ï¼Œè€Œæ˜¯å…³æ³¨äºGå’ŒDæ˜¯æ€ä¹ˆäº¤æ›¿è®­ç»ƒçš„ã€‚\n\né¦–å…ˆï¼ŒGå’ŒDæ˜¯è¿­ä»£çš„è®­ç»ƒçš„ï¼Œåœ¨æ¯ä¸ªtraining iteration ä¸­æœ‰ä¸¤ä¸ªæ­¥éª¤ï¼š\nstep1ï¼šå›ºå®šä½Gï¼Œåªæ›´æ–°Dçš„å‚æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´é€šè¿‡å½“å‰iterationåˆ†é…çš„ä¸€ä¸ªmini batch data è¿›è¡ŒDiscriminator çš„è®­ç»ƒã€‚ä½ å¯ä»¥æŠŠè¿™ä¸ªè®­ç»ƒçœ‹ä½œæ˜¯åˆ†ç±»é—®é¢˜ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œå›å½’é—®é¢˜ï¼Œç›¸å½“äºå¦‚æœæ˜¯åŠ¨æ¼«äººç‰©å¤´åƒå°±è¾“å‡º1ï¼Œå¦åˆ™è¾“å‡º0ã€‚è¿™å°±è¾¾åˆ°äº†æˆ‘ä»¬çš„ç›®çš„ï¼Œè®­ç»ƒä¸€ä¸ªDiscriminator å®ƒçœ‹åˆ°å¥½çš„å›¾ç‰‡å°±ç»™ä¸€ä¸ªé«˜åˆ†ï¼Œçœ‹åˆ°å·®çš„å°±ç»™ä½åˆ†ã€‚å¦å¤–æä¸€ä¸‹ï¼ŒDatabase ä¸­éƒ½æ˜¯æˆ‘ä»¬æ”¶é›†çš„æ­£ç±»æ ·æœ¬ï¼Œè€Œæ­¤æ—¶Generator äº§ç”Ÿæ ·æœ¬å°±å¯ä»¥ä½œä¸ºè´Ÿç±»ã€‚\n\nstep2ï¼šå›ºå®šä½Dï¼Œåªæ›´æ–°Gã€‚è¿™ä¸ªæ­¥éª¤ä½ å¯ä»¥æŠŠGå’ŒDä¸¤ä¸ªç½‘ç»œè¿èµ·æ¥çœ‹æˆä¸€ä¸ªå¤§çš„ç½‘ç»œï¼Œè¿™ä¸ªç½‘ç»œè¾“å…¥å°±æ˜¯ä½ç»´vectorï¼Œè¾“å‡ºå°±æ˜¯ä¸€ä¸ªåˆ†æ•°ï¼Œä¸­é—´æŸä¸ªç»´åº¦æ‹¿å‡ºæ¥å°±æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œè¿™æ•´ä¸ªç½‘ç»œä»ç„¶ç”¨backpropagationæ›´æ–°å‚æ•°ï¼Œåªä¸è¿‡æ˜¯å›ºå®šä½åé¢Dçš„å‚æ•°ã€‚è¿™ä¸€æ­¥è®­ç»ƒç›®çš„æ˜¯ä¸ºäº†è®©Generator åŠªåŠ›éª—è¿‡Discriminator ï¼Œè¿™æ ·Gç”Ÿæˆçš„å›¾ç‰‡å°±ä¼šæ›´åƒæ˜¯æˆ‘ä»¬æ”¶é›†çš„æ•°æ®é›†ä¸­çš„æ ·æœ¬ã€‚\nä½ ä¹Ÿå¯ä»¥è¿™æ ·è€ƒè™‘ï¼Œæˆ‘ä»¬åŸæœ¬train ä¸€ä¸ªç½‘ç»œæ˜¯å»optimize äººå®šçš„objective functionï¼Œæˆ–è€…æ˜¯minimize äººå®šçš„loss functionï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬è®­ç»ƒçš„Discriminator å°±ç›¸å½“äºæ˜¯è®©æœºå™¨å­¦äº†ä¸€ä¸ªobjective functionæˆ–è€…è¯´loss functionï¼Œè®©Gæœç€è¿™ä¸ªæ–¹å‘åŠªåŠ›ã€‚\n\nå®é™…åœ¨è®­ç»ƒçš„æ—¶å€™å°±æ˜¯å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œtrain Dã€train Gã€train Dã€train Gâ€¦äº¤æ›¿è¿›è¡Œã€‚åœ¨ç½‘ç»œä¸Šæ¯”è¾ƒå¥½çš„æ —å­ï¼š\n\nYour browser does not support the video tag.\n\nhttps://crypko.ai/#/\n GAN is hard to trainâ€¦\nä¼—æ‰€å‘¨çŸ¥ï¼ŒGANè¿™ä¸ªæŠ€æœ¯æ˜¯æ¯”è¾ƒéš¾trainèµ·æ¥çš„ï¼Œå®é™…ä¸Šæœ‰å¾ˆå¤šäººæå‡ºäº†æ›´å¥½çš„è®­ç»ƒGANçš„æ–¹æ³•ï¼ŒWGANï¼Œimprove WGANâ€¦å¦‚æœä½ æœ‰å…´è¶£å°±å»çœ‹æ–‡ç« å¼€å¤´é“¾æ¥çš„è¯¾ç¨‹å§ã€‚\n 2.Conditional GAN\nä¸Šé¢æˆ‘ä»¬è¯´çš„æ˜¯ç”¨GANçš„æŠ€æœ¯éšæœºç”Ÿæˆç›®æ ‡ï¼Œæ›´å¤šçš„æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯å¸Œæœ›æ§åˆ¶æœºå™¨äº§ç”Ÿçš„ä¸œè¥¿ã€‚æ¯”å¦‚è¯´æˆ‘ä»¬è¾“å…¥ä¸€ç«¯æ–‡å­—ï¼Œè®©æœºå™¨æ ¹æ®è¿™æ®µæ–‡å­—ç”Ÿæˆä¸€å¼ å›¾åƒï¼Œæ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¦‚æœæˆ‘ä»¬è¾“å…¥â€œGirl with red hairâ€æœºå™¨å°±ä¼šç”Ÿæˆä¸€å¼ å¤å¨œçš„å›¾ç‰‡ã€‚\n\nè¿™ç§æ ¹æ®æŸä¸ªç‰¹å®šè¾“å…¥äº§ç”Ÿå¯¹åº”çš„è¾“å‡ºçš„Generator å«åšConditional GAN ã€‚\næˆ‘ä»¬ä»¥æ–‡å­—äº§ç”Ÿå½±åƒä¸ºä¾‹å­ï¼Œå‡å¦‚è¯´ä½ èƒ½æ”¶é›†åˆ°æ–‡å­—å’Œå›¾åƒå¯¹åº”çš„æ•°æ®ï¼š\n\næ¥ä¸‹æ¥ä½ å°±å¯ä»¥å¥—ç”¨ä¼ ç»Ÿçš„ç›‘ç£å­¦ä¹ æ–¹æ³•ï¼Œç›´æ¥è®­ç»ƒä¸€ä¸ªç½‘ç»œè¾“å…¥ä¸€æ®µæ–‡å­—ï¼Œè¾“å‡ºä¸€å¼ å›¾ç‰‡ã€‚ä½†æ˜¯è¿™æ ·è®­ç»ƒæ–¹æ³•å¾€å¾€ä¸ç†æƒ³ï¼Œä¸¾ä¸€ä¸ªç›´è§‚çš„æ —å­ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¦‚æœæ–‡å­—æ˜¯ç«è½¦ï¼Œå¯¹åº”ç«è½¦çš„å›¾ç‰‡æœ‰ç«è½¦çš„å„ä¸ªæ–¹å‘ï¼Œè¿˜æœ‰å„ç§ä¸åŒçš„ç«è½¦ï¼Œè¿™æ ·æœºå™¨åœ¨è€ƒè™‘ç«è½¦çš„ç‰¹å¾çš„æ—¶å€™å°±ä¼šæŠŠæ‰€æœ‰çš„å·²çŸ¥ç‰¹å¾å–å¹³å‡ï¼Œè¿™æ ·çš„è¯ç»“æœå°±ä¼šå®æ‰ã€‚\n\næ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦æ–°çš„æŠ€æœ¯ï¼Œæ¯”å¦‚è¯´Conditional GANï¼Œæˆ‘ä»¬ä¼šç”¨è¿™ä¸ªæŠ€æœ¯åšç»™å‡ºæ–‡å­—ç”Ÿæˆå¯¹åº”å½±åƒçš„ä»»åŠ¡ã€‚Conditional GAN ä¹Ÿæ˜¯éœ€è¦label data çš„ä¹Ÿå°±æ˜¯è¯´åŒæ ·æ˜¯ç›‘ç£å­¦ä¹ ï¼Œä½†æ˜¯å®ƒå’Œä¼ ç»Ÿçš„ç›‘ç£å­¦ä¹ çš„å­¦ä¹ ç›®æ ‡æ˜¯ä¸å¤ªä¸€æ ·çš„ï¼ˆäº‹å®ä¸ŠConditional GAN ä¹Ÿå¯ä»¥åœ¨æ— ç›‘ç£çš„æƒ…å†µä¸‹åšï¼Œè¿™ä¸ªæˆ‘ä»¬ä¼šåœ¨åé¢è®²åˆ°ï¼‰ã€‚æ€ä¹ˆä¸ªä¸ä¸€æ ·å‘¢ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒGenerator çš„è¾“å…¥æ˜¯ä¸€æ®µæè¿°ï¼Œè¾“å‡ºå¯¹åº”å›¾ç‰‡ï¼Œå®ƒä¸å»çœ‹è¾“å…¥è¾“å‡ºæ˜¯å¦å¯¹åº”è€Œæ˜¯çœ‹Discriminator ç»™å‡ºçš„å¾—åˆ†ã€‚å…³äºDiscriminator æˆ‘ä»¬ä¸ä»…è¦è¾“å…¥Generator ç”Ÿæˆçš„å›¾ç‰‡ï¼Œè¿˜è¦è¾“å…¥ã€‚åŸå› æ˜¯è¿™æ ·ï¼Œå¦‚æœDåªåƒä¸€å¼ å›¾ç‰‡çš„è¯ï¼Œé‚£Gåªè¦ç”Ÿæˆå‡ºåƒçœŸå®ä¸–ç•Œçš„å›¾ç‰‡å°±å¯ä»¥éª—è¿‡Däº†ï¼Œè¿™æ ·çš„è¯Gå°±ä¼šå˜å¾—å¾ˆæ‡’æƒ°ï¼Œå°±å­¦ä¸èµ·æ¥ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒGenerator å¿½è§†äº†input conditionã€‚\n\næ‰€ä»¥æˆ‘ä»¬è¦ç»™Discriminator å¤šè¾“å…¥ä¸€æ®µæè¿°ï¼ŒDiscriminator è¾“å‡ºçš„åˆ†æ•°åŒ…å«ä¸¤ä¸ªå«ä¹‰ï¼Œä¸€ä¸ªæ˜¯xåˆ°åº•æœ‰å¤šåƒçœŸå®ä¸–ç•Œçš„å½±åƒï¼Œä¸€ä¸ªæ˜¯cå’Œxæœ‰å¤šmatchã€‚è®­ç»ƒDçš„æ—¶å€™è¦ç”¨åˆ°å¦‚ä¸Šå›¾æ‰€ç¤ºçš„è¾“å…¥ï¼Œtext-image pair éœ€è¦åŒ…å«æ–‡å­—åŒ¹é…çœŸå®å›¾åƒï¼Œæ–‡å­—åŒ¹é…Gç”Ÿæˆå½±åƒï¼Œæ–‡å­—ä¸åŒ¹é…çœŸå®å›¾åƒè¿™äº›æƒ…å†µï¼Œè¿™æ˜¯ç¬¬ä¸€æ¬¡å®ä½œConditional GANå®¹æ˜“å¿½ç•¥çš„ç‚¹ã€‚\n Conditional GAN - Sound-to-image\nå…¶å®ä¸Šè¿°ä½¿ç”¨Conditional GAN æ ¹æ®æ–‡å­—ç”Ÿæˆå½±åƒçš„åº”ç”¨å·²ç»æ»¡å‘æ»¡è°·äº†ï¼Œå…¶å®åªè¦ä½ æœ‰label data ä½ éƒ½å¯ä»¥å°è¯•ä½¿ç”¨Conditional GAN æ¥è¯•è¯•ï¼Œè¿™é‡Œè€å¸ˆå®ä½œäº†ä¸€ä¸ªæ ¹æ®å£°éŸ³ç”Ÿæˆå›¾åƒçš„æ —å­ã€‚\n\nä»videoä¸­æå–éŸ³è½¨å’Œå›¾åƒï¼Œå°±å¾—åˆ°äº†ä¸€æ®µå£°éŸ³å’Œå›¾åƒçš„å¯¹åº”å…³ç³»ï¼Œå°±å¯ä»¥ä½œä¸ºdata set ä½¿ç”¨ä¸Šè¿°çš„Conditional GAN æ–¹æ³•è¿›è¡Œè®­ç»ƒã€‚\n\n\nThe images are generated by Chia-Hung Wan and Shun-Po Chuang.\nhttps://wjohn1483.github.io/audio_to_scene/index.html\n\nä¸Šå›¾è€å¸ˆå®ä½œçš„ç»“æœï¼Œç¬¬ä¸€è¡Œæ˜¯ä¸€æ®µç±»ä¼¼ç”µè§†é›ªèŠ±çš„å£°éŸ³ï¼Œæ˜¯è¯†åˆ«ç»“æœæ˜¯å°æºªï¼Œç„¶åè°ƒå¤§å£°éŸ³ï¼Œè¯†åˆ«ç»“æœæ¸æ¸å˜æˆäº†ç€‘å¸ƒã€‚ç¬¬äºŒè¡Œæ˜¯ç±»ä¼¼èºæ—‹æ¡¨è½°é¸£å£°ï¼Œè¯†åˆ«ç»“æœæ˜¯æµ·ä¸Šçš„å¿«è‰‡ï¼Œéšç€å£°éŸ³å¢å¤§ï¼Œå¿«è‰‡å‘¨å›´çš„æ°´èŠ±é€æ¸å¢å¤§ã€‚è¿™ä¸¤ä¸ªç»“æœå…¶å®æ˜¯æœ‰carry kick çš„ï¼Œç¬¬ä¸‰è¡Œæ˜¯ä¸€äº›éŸ³ä¹ï¼Œè¯†åˆ«ç»“æœå°±çƒ‚æ‰äº†ï¼Œä½†æ€»ä½“æ¥è¯´æˆ‘è§‰å¾—è¿˜ä¸é”™ï¼Œæœ‰å…´è¶£çš„è¯å¯ä»¥å»ä¸Šé¢é‚£ä¸ªé“¾æ¥çœ‹çœ‹ã€‚ğŸ‘€\n Conditional GAN - Image-to-label\næˆ‘ä»¬åå‘æ€è€ƒï¼Œå¯ä»¥åšæ ¹æ®å›¾åƒç”Ÿæˆå¯¹åº”æ ‡ç­¾çš„æ¨¡å‹ï¼ŒæŠŠConditional GAN ç”¨åœ¨multi-label image classification ä»»åŠ¡ä¸Šï¼š\n\næ‰€è°“multi-label å°±æ˜¯è¯´ç›®æ ‡çš„ç±»åˆ«ä¸æ­¢ä¸€ä¸ªï¼Œæ¯”å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç¤ºä¾‹å›¾ç‰‡ä¸­æœ‰personã€sports ballã€baseball batã€baseball gloveï¼Œè¿™å¼ å›¾ç‰‡å±äºä¸Šè¿°æ‰€æœ‰ç±»åˆ«ï¼Œæˆ–è€…è¯´è¿™å¼ å›¾ç‰‡æ‹¥æœ‰è¿™äº›å±æ€§ã€‚æˆ‘ä»¬å¯ä»¥æŠŠä¸€å¼ å›¾ç‰‡æ‹¥æœ‰å¤šä¸ªç±»åˆ«æƒ³è±¡æˆä¸€ä¸ªç”Ÿæˆé—®é¢˜ï¼Œå°±æ˜¯è¯´ç»™å‡ºä¸€å¼ å›¾ç‰‡ç”Ÿæˆå®ƒå¯èƒ½æ‹¥æœ‰çš„ç±»åˆ«æˆ–è€…è¯´å±æ€§ã€‚\nä½ å°±æŠŠè¿™ä¸ªé—®é¢˜å½“ä½œä¸€èˆ¬çš„Conditional GAN åšä¸‹å»å°±å¯ä»¥äº†ï¼Œå›¾ç‰‡ä½œä¸ºcondition è¾“å…¥ï¼Œç±»åˆ«ä½œä¸ºGenerator çš„è¾“å‡ºã€‚\n\nä¸Šå›¾æ˜¯å®éªŒçš„ç»“æœï¼Œç”¨F1F_1F1â€‹åˆ†æ•°æ¥è¯„ä»·ï¼Œåˆ†æ•°è¶Šé«˜è¡¨ç¤ºåˆ†ç±»å‡†ç¡®ç‡è¶Šå¥½ï¼Œä½¿ç”¨äº†ä¸¤ä¸ªcorpusï¼šMS-COCOå’ŒNUS-WIDEï¼Œå‡ ä¸ªä¸åŒæ¶æ„çš„æ¨¡å‹çš„è¡¨ç°éƒ½æ˜¯åŠ ä¸ŠGANå°±ä¼šå˜å¾—æ›´å¥½ã€‚\n Talking Head\nè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªæ•ˆæœæ›´å¥½çš„ï¼Œæ ¹æ®ä¸€å¼ äººè„¸ç…§ç‰‡ï¼Œä¸€ä¸ªäººè„¸line markï¼Œå»äº§ç”Ÿå¦å¤–ä¸€å¼ äººè„¸ã€‚èƒ½åšä½ æ‹¿ä¸€å¼ è’™å¨œä¸½èçš„å›¾ç‰‡ï¼Œå†æ‹¿ä¸€å¼ äººè„¸line markï¼Œå°±å¯ä»¥è®©è’™å¨œä¸½èæ‘†å‡ºäººè„¸line markçš„è¡¨æƒ…ã€‚\n\n\nhttps://arxiv.org/abs/1905.08233\n\nç›´è§‚ä¸€ç‚¹ï¼Œæ•ˆæœå°±æ˜¯ï¼š\n\n\n 3.Unsupervised Conditional GAN\næœ€åï¼Œæˆ‘ä»¬è¦è®²çš„æ˜¯æ— ç›‘ç£çš„GANï¼Œä¸Šé¢è®²çš„Conditional GAN æ˜¯éœ€è¦è¾“å…¥è¾“å‡ºçš„å¯¹åº”å…³ç³»çš„ï¼Œå®é™…ä¸Šæˆ‘ä»¬æ˜¯æœ‰æœºä¼šèƒ½åœ¨ä¸çŸ¥é“è¾“å…¥è¾“å‡ºçš„å¯¹åº”å…³ç³»çš„æƒ…å†µä¸‹ï¼Œæ•™ä¼šæœºå™¨æŠŠè¾“å…¥è½¬æˆè¾“å‡ºã€‚è¿™ç§æŠ€æœ¯æœ€å¸¸è§çš„åº”ç”¨åœºæ™¯æ˜¯image style transformation ï¼š\n\n Cycle GAN\n\n\nhttps://arxiv.org/abs/1703.10593\nhttps://junyanz.github.io/CycleGAN/\nBerkeley AI Research (BAIR) laboratory, UC Berkeley\n\nè¿™é‡Œæˆ‘ä»¬ä»¥Cycle GAN ä¸ºä¾‹ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¿™ä¸ªGANçš„æ¶æ„å’ŒConditional GAN å¥½åƒæ²¡ä»€ä¹ˆä¸åŒã€‚Gå°±æ˜¯å°†è¾“å…¥è½¬æ¢æˆä¸€ä¸ªåŒæ ·å¤§å°çš„è¾“å‡ºä½†æ˜¯é£æ ¼äº§ç”Ÿå˜åŒ–ï¼ŒDå°±æ˜¯å°†Gçš„è¾“å‡ºå’Œæ¢µé«˜çš„ç”»ä½œåšå¯¹æ¯”ï¼Œç›¸ä¼¼æ€§è¾ƒé«˜çš„å°±ç»™å‡ºé«˜åˆ†ï¼Œè¾ƒä½å°±ç»™å‡ºä½åˆ†ã€‚æˆ‘ä»¬å¸Œæœ›ç”¨è¿™æ ·çš„æ–¹æ³•ä½¿å¾—Gäº§ç”Ÿçš„outputæ˜¯å¸¦æœ‰æ¢µé«˜é£æ ¼çš„ç”»ä½œã€‚\n\nä½†æ˜¯è¿™æ ·åšGæœ‰å¯èƒ½å°±å­¦ä¼šåªè¾“å‡ºæ¢µé«˜çš„æŸä¸€å¹…ç”»æˆ–è€…æŸå‡ å¹…ç”»æ¥éª—è¿‡Dï¼Œæ‰€ä»¥è¿™æ ·æ˜¯ä¸è¡Œçš„ã€‚æˆ‘ä»¬è¦åšæ”¹è¿›ï¼š\n\né€šè¿‡åŠ ä¸€ä¸ªGå°†å‰ä¸€ä¸ªGç”Ÿæˆçš„å›¾ç‰‡è¿˜åŸå›åŸå›¾ç‰‡çš„æ–¹å¼ï¼Œé™åˆ¶Gé€šè¿‡äº§ç”Ÿå›ºå®šè¾“å‡ºéª—è¿‡Dçš„æƒ…å†µå‡ºç°ã€‚è¿™ç§æ–¹æ³•å«åšcycle consistency æ‰€ä»¥è¿™ç§GANå«åšcycle GANã€‚\n\ncycle GAN å¯ä»¥æ˜¯åŒå‘çš„ï¼šåˆšæ‰è®²çš„æ˜¯å…ˆXâ†’YX \\rightarrow YXâ†’Y å†Yâ†’XY \\rightarrow XYâ†’Xï¼Œä½ ç°åœ¨å¯ä»¥å…ˆYâ†’XY \\rightarrow XYâ†’Xå†Xâ†’YX \\rightarrow YXâ†’Y ï¼Œä½ åŒæ ·è¦ä¸€ä¸ªX domain çš„discriminator çœ‹çœ‹Yâ†’XY \\rightarrow XYâ†’Xçš„ç»“æœæƒ³ä¸æƒ³æ˜¯çœŸå®çš„X domain çš„å›¾ç‰‡ï¼Œç”¨å¦å¤–ä¸€ä¸ªXâ†’YX \\rightarrow YXâ†’Yçš„Generator æŠŠè¾“å‡ºè½¬å›è¾“å…¥ï¼Œè®©ä¸¤è€…è¶Šæ¥è¿‘è¶Šå¥½ã€‚\nåŒæ ·çš„æŠ€æœ¯ä¹Ÿå¯ä»¥ç”¨åœ¨å…¶ä»–ä»»åŠ¡ä¸Šï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå‡è®¾ç°åœ¨X domain Y domain æ˜¯ä¸¤ä¸ªäººçš„å£°éŸ³ï¼Œé‚£ä½ å°±å¯ä»¥ç”¨Cycle GAN åšéŸ³è‰²è½¬æ¢ã€‚å†æ¯”å¦‚è¯´ï¼ŒX domain Y domain æ˜¯ä¸åŒé£æ ¼çš„æ–‡å­—ï¼Œé‚£ä½ å°±å¯ä»¥ç”¨Cycle GAN åšæ–‡å­—é£æ ¼è½¬æ¢ã€‚å†æ¯”å¦‚è¯´ï¼ŒX domain Y domain æ˜¯æ­£é¢å’Œè´Ÿé¢çš„å¥å­ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨åŒæ ·çš„è®­ç»ƒçš„æƒ³æ³•å°†è´Ÿé¢çš„å¥å­è½¬æˆæ­£é¢çš„å¥å­ã€‚\n\n Discrete Issue\néœ€è¦æé†’ä¸€ä¸‹ï¼Œå¦‚æœç›´æ¥æŠŠå½±åƒçš„æŠ€æœ¯å¥—ç”¨åˆ°æ–‡å­—ä¸Šæ˜¯ä¼šæœ‰ä¸€äº›é—®é¢˜çš„ã€‚\n\nä¸Šå›¾å°±æ˜¯Cycle GAN çš„æ¶æ„ï¼Œå¤§æ¦‚ç‡ä¼šä½¿ç”¨seq2seqçš„æ¨¡å‹æ¥å¤„ç†æ–‡å­—ï¼Œè€Œä¸­é—´ç”Ÿæˆçš„positive çš„å¥å­ä½œä¸ºä¸€ä¸ªhidden layerçš„è¯ï¼Œå°±ä¸å¯ä»¥å¾®åˆ†äº†ï¼Œå› ä¸ºè¿™ä¸ªå¥å­ä»–æ˜¯ä¸€ä¸ªtokenï¼Œæ˜¯ç¦»æ•£çš„å€¼ï¼Œæ‰€ä»¥æ²¡åŠæ³•ç”¨backpropagationæ›´æ–°å‚æ•°ã€‚ä¹‹å‰åšçš„å›¾åƒçš„ä»»åŠ¡Gç”Ÿæˆçš„å›¾åƒæ˜¯è¿ç»­å€¼ï¼Œæ˜¯å¯å¾®åˆ†çš„ã€‚é‚£æ€ä¹ˆåŠå‘¢ï¼Œå…¶å®åœ¨æ–‡çŒ®ä¸Šæ˜¯æœ‰å„ç§è€Œæ ·çš„åŠæ³•çš„ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼š\n\n\n\nGumbel-softmax\n\n[Matt J. Kusner, et al, arXiv, 2016]\n\n\n\nContinuous Input for Discriminator\n\n[Sai Rajeswar, et al., arXiv, 2017][Ofir Press, et al., ICML workshop, 2017][Zhen Xu, et al., EMNLP, 2017][Alex Lamb, et al., NIPS, 2016][Yizhe Zhang, et al., ICML, 2017]\n\n\n\nâ€œReinforcement Learningâ€\n\n[Yu, et al., AAAI, 2017][Li, et al., EMNLP, 2017][Tong Che, et al, arXiv, 2017][Jiaxian Guo, et al., AAAI, 2018][Kevin Lin, et al, NIPS, 2017][William Fedus, et al., ICLR, 2018]\n\n\n\n\n\n\nè¿™æ˜¯ä¸€ä¸ªå®ä½œçš„ç»“æœã€‚\n Speech Recognition\n\nä¸Šè¿°çš„Unsupervised GANçš„æŠ€æœ¯å…¶å®ä¸åªèƒ½ç”¨äºé£æ ¼è¿ç§»ã€æ­£è´Ÿé¢è½¬æ¢è¿™äº›åœºæ™¯ï¼Œè¿˜å¯ä»¥æœ‰å¾ˆå¤šå…¶ä»–çš„åº”ç”¨ï¼Œæ¯”å¦‚è¯´ä¸€ä¸ªå¾ˆæœ‰æ„ä¹‰çš„å°±æ˜¯è¯­éŸ³è¯†åˆ«ã€‚\nåœ¨è¯­éŸ³è¯†åˆ«ä»»åŠ¡ä¸­ï¼Œç›‘ç£å­¦ä¹ éœ€è¦å¤§é‡çš„è¯­éŸ³æ³¨é‡Šã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°è¯­è¨€èµ„æºä¸è¶³ã€‚æˆ‘ä»¬è¿™ä¹ˆè€ƒè™‘ï¼Œä¸€ä¸ªdomainæ˜¯è¯­éŸ³ï¼Œä¸€ä¸ªdomainæ˜¯æ–‡å­—ï¼Œè€Œæ— æ ‡ç­¾çš„è¯­éŸ³å’Œæ–‡å­—çš„æ•°æ®åœ¨ç½‘ç»œä¸Šæ˜¯ç”±å¾ˆå¤šå¾ˆå¤šçš„ï¼Œæ‰€ä»¥æœ‰æ²¡æœ‰å¯èƒ½ç”¨Unsupervised GANçš„æŠ€æœ¯åœ¨æ— æ ‡ç­¾çš„æƒ…å†µä¸‹å°±è®©æœºå™¨å­¦ä¼šè¯­éŸ³è¾¨è¯†ï¼Œç»†èŠ‚å…¶å®æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå°±è·³è¿‡ï¼Œæ„Ÿå…´è¶£å°±å»çœ‹æ–‡ç« å¼€å¤´çš„è¯¾ç¨‹ã€‚\n Experimental Result\n\nè¿™é‡Œè®²ä¸€ä¸‹ç»“æœï¼Œä¸Šå›¾æå®æ¯…è€å¸ˆçš„å®éªŒå®¤åšçš„ç»“æœã€‚TIMIT Benchmark Corpus ä¸Šè¿›è¡Œæµ‹è¯•ï¼Œåœ¨Nonmatched PERä¸Šè¾¾åˆ°äº†33.1% æ˜¯ä¸€ä¸ªå¾ˆä½çš„é”™è¯¯ç‡äº†ã€‚Nonmatchedæ˜¯è¯´è®­ç»ƒæ•°æ®ä¸­éŸ³é¢‘å’Œæ–‡å­—æ˜¯ä¸å¯¹åº”çš„ï¼Œå¹¶ä¸æ˜¯è¯´æ–‡å­—æ˜¯æ ¹æ®éŸ³é¢‘äººå·¥å†™å‡ºæ¥çš„ï¼Œè€Œæ˜¯ä¸å¯¹åº”çš„ã€‚PERï¼ˆphoneme error rateï¼‰ä½ å¯ä»¥ç†è§£ä¸ºéŸ³è¡¨é”™è¯¯ç‡ã€‚\n\nå¯ä»¥çœ‹åˆ°åœ¨å‡†ç¡®ç‡ä¸Šï¼Œè¿™ä¸ªæ— ç›‘ç£çš„GANè®­ç»ƒå‡ºæ¥çš„æ¨¡å‹å¯ä»¥å’Œä¸‰åå¹´å†…çš„æœ‰ç›‘ç£å­¦ä¹ çš„åŒ¹æ•Œã€‚\n","categories":["æå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°"],"tags":["ML","note","Next-Step-of-ML"]},{"title":"æ±¡ç‚¹åˆ†ææŠ€æœ¯ç¬”è®°","url":"https://ch3nye.top/æ±¡ç‚¹åˆ†ææŠ€æœ¯ç¬”è®°/","content":" æ±¡ç‚¹åˆ†ææŠ€æœ¯\nåŒç¬¦å·æ‰§è¡Œä¸€æ ·,æ±¡ç‚¹åˆ†æä¹Ÿæ˜¯æˆ‘ä»¬åˆ†æä»£ç æ¼æ´,æ£€æµ‹æ”»å‡»æ–¹å¼çš„é‡è¦æ‰‹æ®µ,åœ¨æ¼æ´è‡ªåŠ¨åŒ–æ‰«ææˆ–è€…æ£€æµ‹å·¥å…·ä¸­æœ‰ç€ååˆ†å¹¿æ³›çš„åº”ç”¨,æœ¬æ–‡ä¸»è¦å‚è€ƒ(copy)ç‹è•¾ç­‰äºº2016å¹´çš„äºŒè¿›åˆ¶ç¨‹åºåŠ¨æ€æ±¡ç‚¹åˆ†ææŠ€æœ¯ç ”ç©¶ç»¼è¿°[1]å’ŒK0rz3nå¤§ä½¬çš„ç®€å•ç†è§£æ±¡ç‚¹åˆ†ææŠ€æœ¯è¿™ç¯‡æ–‡ç« åšä¸€äº›ä¸ªäººå­¦ä¹ æ€»ç»“,æ–‡æœ«é™„ä¸Šå‚è€ƒçš„è®ºæ–‡å’Œæ–‡ç« é“¾æ¥.\n 0x1 æ±¡ç‚¹åˆ†æåŸºæœ¬åŸç†\n 1.æ±¡ç‚¹åˆ†æå®šä¹‰\næ±¡ç‚¹åˆ†æå¯ä»¥æŠ½è±¡æˆä¸€ä¸ªä¸‰å…ƒç»„&lt;sources,sinks,sanitizers&gt;çš„å½¢å¼,å…¶ä¸­,source å³æ±¡ç‚¹æº,ä»£è¡¨ç›´æ¥å¼•å…¥ä¸å—ä¿¡ä»»çš„æ•°æ®æˆ–è€…æœºå¯†æ•°æ®åˆ°ç³»ç»Ÿä¸­;sink å³æ±¡ç‚¹æ±‡èšç‚¹,ä»£è¡¨ç›´æ¥äº§ç”Ÿå®‰å…¨æ•æ„Ÿæ“ä½œ(è¿åæ•°æ®å®Œæ•´æ€§)æˆ–è€…æ³„éœ²éšç§æ•°æ®åˆ°å¤–ç•Œ(è¿åæ•°æ®ä¿å¯†æ€§);sanitizer å³æ— å®³å¤„ç†,ä»£è¡¨é€šè¿‡æ•°æ®åŠ å¯†æˆ–è€…ç§»é™¤å±å®³æ“ä½œç­‰æ‰‹æ®µä½¿æ•°æ®ä¼ æ’­ä¸å†å¯¹è½¯ä»¶ç³»ç»Ÿçš„ä¿¡æ¯å®‰å…¨äº§ç”Ÿå±å®³.æ±¡ç‚¹åˆ†æå°±æ˜¯åˆ†æç¨‹åºä¸­ç”±æ±¡ç‚¹æºå¼•å…¥çš„æ•°æ®æ˜¯å¦èƒ½å¤Ÿä¸ç»æ— å®³å¤„ç†,è€Œç›´æ¥ä¼ æ’­åˆ°æ±¡ç‚¹æ±‡èšç‚¹.å¦‚æœä¸èƒ½,è¯´æ˜ç³»ç»Ÿæ˜¯ä¿¡æ¯æµå®‰å…¨çš„;å¦åˆ™,è¯´æ˜ç³»ç»Ÿäº§ç”Ÿäº†éšç§æ•°æ®æ³„éœ²æˆ–å±é™©æ•°æ®æ“ä½œç­‰å®‰å…¨é—®é¢˜.\nåœ¨æ¼æ´åˆ†æä¸­,ä½¿ç”¨æ±¡ç‚¹åˆ†ææŠ€æœ¯å°†æ‰€æ„Ÿå…´è¶£çš„æ•°æ®(é€šå¸¸æ¥è‡ªç¨‹åºçš„å¤–éƒ¨è¾“å…¥,å‡å®šæ‰€æœ‰è¾“å…¥éƒ½æ˜¯å±é™©çš„)æ ‡è®°ä¸ºæ±¡ç‚¹æ•°æ®,ç„¶åé€šè¿‡è·Ÿè¸ªå’Œæ±¡ç‚¹æ•°æ®ç›¸å…³çš„ä¿¡æ¯çš„æµå‘,å¯ä»¥çŸ¥é“å®ƒä»¬æ˜¯å¦ä¼šå½±å“æŸäº›å…³é”®çš„ç¨‹åºæ“ä½œ,è¿›è€ŒæŒ–æ˜ç¨‹åºæ¼æ´.å³å°†ç¨‹åºæ˜¯å¦å­˜åœ¨æŸç§æ¼æ´çš„é—®é¢˜è½¬åŒ–ä¸ºæ±¡ç‚¹ä¿¡æ¯æ˜¯å¦ä¼šè¢« Sink ç‚¹ä¸Šçš„æ“ä½œæ‰€ä½¿ç”¨çš„é—®é¢˜.\næ±¡ç‚¹åˆ†æçš„å¤„ç†è¿‡ç¨‹å¯ä»¥åˆ†æˆ 3 ä¸ªé˜¶æ®µ(å¦‚å›¾ 2 æ‰€ç¤º):\n(1) è¯†åˆ«æ±¡ç‚¹æºå’Œæ±‡èšç‚¹;(æ ¹æ®æ‰€åˆ†æçš„ç³»ç»Ÿçš„ä¸åŒä½¿ç”¨å®šåˆ¶çš„è¯†åˆ«ç­–ç•¥)\n(2) æ±¡ç‚¹ä¼ æ’­åˆ†æ;(åˆ©ç”¨ç‰¹å®šçš„è§„åˆ™è·Ÿè¸ªåˆ†ææ±¡ç‚¹ä¿¡æ¯åœ¨ç¨‹åºä¸­çš„ä¼ æ’­è¿‡ç¨‹)\n(3) æ¼æ´æ£€æµ‹ã€æ— å®³å¤„ç†\n\n 2.è¯†åˆ«æ±¡ç‚¹æºå’Œæ±‡èšç‚¹\nè¯†åˆ«æ±¡ç‚¹æºå’Œæ±¡ç‚¹æ±‡èšç‚¹æ˜¯æ±¡ç‚¹åˆ†æçš„å‰æ.ç›®å‰,åœ¨ä¸åŒçš„åº”ç”¨ç¨‹åºä¸­è¯†åˆ«æ±¡ç‚¹æºå’Œæ±‡èšç‚¹çš„æ–¹æ³•å„ä¸ç›¸åŒ.ç¼ºä¹é€šç”¨æ–¹æ³•çš„åŸå› ä¸€æ–¹é¢æ¥è‡ªç³»ç»Ÿæ¨¡å‹ã€ç¼–ç¨‹è¯­è¨€ä¹‹é—´çš„å·®å¼‚.å¦ä¸€æ–¹é¢,æ±¡ç‚¹åˆ†æå…³æ³¨çš„å®‰å…¨æ¼æ´ç±»å‹ä¸åŒ,ä¹Ÿä¼šå¯¼è‡´å¯¹æ±¡ç‚¹æºå’Œæ±¡ç‚¹æ±‡èšç‚¹çš„æ”¶é›†æ–¹æ³•è¿¥å¼‚.è¡¨ 1 æ‰€ç¤ºä¸ºåœ¨ Web åº”ç”¨ç¨‹åºæ¼æ´æ£€æµ‹ä¸­çš„æ±¡ç‚¹æºç¤ºä¾‹[29],å®ƒä»¬æ˜¯ Web æ¡†æ¶ä¸­å…³é”®å¯¹è±¡çš„å±æ€§.\n\nç°æœ‰çš„è¯†åˆ«æ±¡ç‚¹æºå’Œæ±‡èšç‚¹çš„æ–¹æ³•å¯ä»¥å¤§è‡´åˆ†æˆ 3 ç±»:\n(1)ä½¿ç”¨å¯å‘å¼çš„ç­–ç•¥è¿›è¡Œæ ‡è®°,ä¾‹å¦‚æŠŠæ¥è‡ªç¨‹åºå¤–éƒ¨è¾“å…¥çš„æ•°æ®ç»Ÿç§°ä¸ºâ€œæ±¡ç‚¹â€æ•°æ®,ä¿å®ˆåœ°è®¤ä¸ºè¿™äº›æ•°æ®æœ‰å¯èƒ½åŒ…å«æ¶æ„çš„æ”»å‡»æ•°æ®(å¦‚ PHP Aspis);\n(2)æ ¹æ®å…·ä½“åº”ç”¨ç¨‹åºè°ƒç”¨çš„ API æˆ–è€…é‡è¦çš„æ•°æ®ç±»å‹,æ‰‹å·¥æ ‡è®°æºå’Œæ±‡èšç‚¹(å¦‚ DroidSafe[12]);\n(3)ä½¿ç”¨ç»Ÿè®¡æˆ–æœºå™¨å­¦ä¹ æŠ€æœ¯è‡ªåŠ¨åœ°è¯†åˆ«å’Œæ ‡è®°æ±¡ç‚¹æºåŠæ±‡èšç‚¹.[11]\n 3.æ±¡ç‚¹ä¼ æ’­åˆ†æ\næ±¡ç‚¹ä¼ æ’­åˆ†æå°±æ˜¯åˆ†ææ±¡ç‚¹æ ‡è®°æ•°æ®åœ¨ç¨‹åºä¸­çš„ä¼ æ’­é€”å¾„.æŒ‰ç…§åˆ†æè¿‡ç¨‹ä¸­å…³æ³¨çš„ç¨‹åºä¾èµ–å…³ç³»çš„ä¸åŒ, å¯ä»¥å°†æ±¡ç‚¹ä¼ æ’­åˆ†æåˆ†ä¸ºæ˜¾å¼æµåˆ†æå’Œéšå¼æµåˆ†æ.\n (1)æ˜¾ç¤ºæµåˆ†æ\næ±¡ç‚¹ä¼ æ’­åˆ†æä¸­çš„æ˜¾å¼æµåˆ†æå°±æ˜¯åˆ†ææ±¡ç‚¹æ ‡è®°å¦‚ä½•éšç¨‹åºä¸­å˜é‡ä¹‹é—´çš„æ•°æ®ä¾èµ–å…³ç³»ä¼ æ’­.\n\nä»¥å›¾ 3 æ‰€ ç¤ºçš„ç¨‹åºä¸ºä¾‹,å˜é‡ a å’Œ b è¢«é¢„å®šä¹‰çš„æ±¡ç‚¹æºå‡½æ•° source æ ‡è®°ä¸ºæ±¡ç‚¹æº.å‡è®¾ a å’Œ b è¢«èµ‹äºˆçš„æ±¡ç‚¹æ ‡è®°åˆ†åˆ«ä¸ºtaint_a å’Œ taint_b.ç”±äºç¬¬ 5 è¡Œçš„å˜é‡ x ç›´æ¥æ•°æ®ä¾èµ–äºå˜é‡ a,ç¬¬ 6 è¡Œçš„å˜é‡ y ç›´æ¥æ•°æ®ä¾èµ–äºå˜é‡ b,æ˜¾å¼æµåˆ†æä¼šåˆ†åˆ«å°†æ±¡ç‚¹æ ‡è®° taint_a å’Œ taint_b ä¼ æ’­ç»™ç¬¬ 5 è¡Œçš„å˜é‡ x å’Œç¬¬ 6 è¡Œçš„å˜é‡ y.åˆç”±äº x å’Œ y åˆ†åˆ«å¯ä»¥åˆ°è¾¾ç¬¬ 7 è¡Œå’Œç¬¬ 8 è¡Œçš„æ±¡ç‚¹æ±‡èšç‚¹(ç”¨é¢„å®šä¹‰çš„æ±¡ç‚¹æ±‡èšç‚¹å‡½æ•° sink æ ‡è¯†),å›¾ 3 æ‰€ç¤ºçš„ä»£ç å­˜åœ¨ä¿¡æ¯æ³„æ¼çš„é—®é¢˜.æˆ‘ä»¬å°†åœ¨åé¢å…·ä½“ä»‹ç»ç›®å‰æ±¡ç‚¹ä¼ æ’­åˆ†æä¸­æ˜¾å¼æµåˆ†æé¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜å’Œè§£å†³æ–¹æ³•.\n (2)éšå¼æµåˆ†æ\næ±¡ç‚¹ä¼ æ’­åˆ†æä¸­çš„éšå¼æµåˆ†ææ˜¯åˆ†ææ±¡ç‚¹æ ‡è®°å¦‚ä½•éšç¨‹åºä¸­å˜é‡ä¹‹é—´çš„æ§åˆ¶ä¾èµ–å…³ç³»ä¼ æ’­,ä¹Ÿå°±æ˜¯åˆ†ææ±¡ç‚¹æ ‡è®°å¦‚ä½•ä»æ¡ä»¶æŒ‡ä»¤ä¼ æ’­åˆ°å…¶æ‰€æ§åˆ¶çš„è¯­å¥.\n\nåœ¨å›¾ 4 æ‰€ç¤ºçš„ç¨‹åºä¸­,å˜é‡ X æ˜¯è¢«æ±¡ç‚¹æ ‡è®°çš„å­—ç¬¦ä¸²ç±»å‹å˜é‡,å˜é‡ Y å’Œå˜é‡ X ä¹‹é—´å¹¶æ²¡æœ‰ç›´æ¥æˆ–é—´æ¥çš„æ•°æ®ä¾èµ–å…³ç³»(æ˜¾å¼æµå…³ç³»),ä½† X ä¸Šçš„æ±¡ç‚¹æ ‡è®°å¯ä»¥ç»è¿‡æ§åˆ¶ä¾èµ–éšå¼åœ°ä¼ æ’­åˆ° Y.\nå…·ä½“æ¥è¯´,ç”±ç¬¬ 4 è¡Œçš„å¾ªç¯æ¡ä»¶æ§åˆ¶çš„å¤–å±‚å¾ªç¯é¡ºåºåœ°å–å‡º X ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦,è½¬åŒ–æˆæ•´å‹åèµ‹ç»™å˜é‡ x,å†ç”±ç¬¬ 7 è¡Œçš„å¾ªç¯æ¡ä»¶æ§åˆ¶çš„å†…å±‚å¾ªç¯ä»¥ç´¯åŠ çš„æ–¹å¼å°† x çš„å€¼èµ‹ç»™ y,æœ€åç”±å¤–å±‚å¾ªç¯å°† y é€ä¸€ä¼ ç»™ Y.æœ€ç»ˆ,ç¬¬ 12 è¡Œçš„ Y å€¼å’Œ X å€¼ç›¸åŒ,ç¨‹åºå­˜åœ¨ä¿¡æ¯æ³„æ¼é—®é¢˜.ä½†æ˜¯,å¦‚æœä¸è¿›è¡Œéšå¼æµæ±¡ç‚¹ä¼ æ’­åˆ†æ,ç¬¬ 12 è¡Œ çš„å˜é‡ Y å°†ä¸ä¼šè¢«èµ‹äºˆæ±¡ç‚¹æ ‡è®°,ç¨‹åºçš„ä¿¡æ¯æ³„æ¼é—®é¢˜è¢«æ©ç›–.\néšå¼æµæ±¡ç‚¹ä¼ æ’­ä¸€ç›´ä»¥æ¥éƒ½æ˜¯ä¸€ä¸ªé‡è¦çš„é—®é¢˜,å’Œæ˜¾å¼æµä¸€æ ·,å¦‚æœä¸è¢«æ­£ç¡®å¤„ç†,ä¼šä½¿æ±¡ç‚¹åˆ†æçš„ç»“æœä¸ç²¾ç¡®.ç”±äºå¯¹éšå¼æµæ±¡ç‚¹ä¼ æ’­å¤„ç†ä¸å½“å¯¼è‡´æœ¬åº”è¢«æ ‡è®°çš„å˜é‡æ²¡æœ‰è¢«æ ‡è®°çš„é—®é¢˜ç§°ä¸ºæ¬ æ±¡æŸ“(under-taint)é—®é¢˜.ç›¸ååœ°,ç”±äºæ±¡ç‚¹æ ‡è®°çš„æ•°é‡è¿‡å¤šè€Œå¯¼è‡´æ±¡ç‚¹å˜é‡å¤§é‡æ‰©æ•£çš„é—®é¢˜ç§°ä¸ºè¿‡æ±¡æŸ“(over-taint)é—®é¢˜.ç›®å‰,é’ˆå¯¹éšå¼æµé—®é¢˜çš„ç ”ç©¶é‡ç‚¹æ˜¯å°½é‡å‡å°‘æ¬ æ±¡æŸ“å’Œè¿‡æ±¡æŸ“çš„æƒ…å†µ.æˆ‘ä»¬å°†åœ¨åé¢å…·ä½“ä»‹ç»ç°æœ‰æŠ€æœ¯æ˜¯å¦‚ä½•è§£å†³ä¸Šè¿°é—®é¢˜çš„.\n 4.æ— å®³å¤„ç†\næ±¡ç‚¹æ•°æ®åœ¨ä¼ æ’­çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šç»è¿‡æ— å®³å¤„ç†æ¨¡å—,æ— å®³å¤„ç†æ¨¡å—æ˜¯æŒ‡æ±¡ç‚¹æ•°æ®ç»è¿‡è¯¥æ¨¡å—çš„å¤„ç†å,æ•°æ®æœ¬èº«ä¸å†æºå¸¦æ•æ„Ÿä¿¡æ¯æˆ–è€…é’ˆå¯¹è¯¥æ•°æ®çš„æ“ä½œä¸ä¼šå†å¯¹ç³»ç»Ÿäº§ç”Ÿå±å®³.æ¢è¨€ä¹‹,å¸¦æ±¡ç‚¹æ ‡è®°çš„æ•°æ®åœ¨ç»è¿‡æ— å®³å¤„ç†æ¨¡å—å,æ±¡ç‚¹æ ‡è®°å¯ä»¥è¢«ç§»é™¤.æ­£ç¡®åœ°ä½¿ç”¨æ— å®³å¤„ç†å¯ä»¥é™ä½ç³»ç»Ÿä¸­æ±¡ç‚¹æ ‡è®°çš„æ•°é‡,æé«˜æ±¡ç‚¹åˆ†æçš„æ•ˆç‡,å¹¶ä¸”é¿å…ç”±äºæ±¡ç‚¹æ‰©æ•£å¯¼è‡´çš„åˆ†æç»“æœä¸ç²¾ç¡®çš„é—®é¢˜.\nåœ¨åº”ç”¨è¿‡ç¨‹ä¸­,ä¸ºäº†é˜²æ­¢æ•æ„Ÿæ•°æ®è¢«æ³„éœ²(ä¿æŠ¤ä¿å¯†æ€§),é€šå¸¸ä¼šå¯¹æ•æ„Ÿæ•°æ®è¿›è¡ŒåŠ å¯†å¤„ç†.æ­¤æ—¶,åŠ å¯†åº“å‡½æ•°åº”è¯¥è¢«è¯†åˆ«æˆæ— å®³å¤„ç†æ¨¡å—.è¿™ä¸€æ–¹é¢æ˜¯ç”±äºåº“å‡½æ•°ä¸­ä½¿ç”¨äº†å¤§é‡çš„åŠ å¯†ç®—æ³•,å¯¼è‡´æ”»å‡»è€…å¾ˆéš¾æœ‰æ•ˆåœ°è®¡ç®—å‡ºå¯†ç çš„å¯èƒ½èŒƒå›´;å¦ä¸€æ–¹é¢æ˜¯åŠ å¯†åçš„æ•°æ®ä¸å†å…·æœ‰å¨èƒæ€§,ç»§ç»­ä¼ æ’­æ±¡ç‚¹æ ‡è®°æ²¡æœ‰æ„ä¹‰.\næ­¤å¤–,ä¸ºäº†é˜²æ­¢å¤–ç•Œæ•°æ®å› ä¸ºæºå¸¦å±é™©æ“ä½œè€Œå¯¹ç³»ç»Ÿå…³é”®åŒºåŸŸäº§ç”Ÿå±å®³(ä¿æŠ¤å®Œæ•´æ€§),é€šå¸¸ä¼šå¯¹è¾“å…¥çš„æ•°æ®è¿›è¡ŒéªŒè¯.æ­¤æ—¶,è¾“å…¥éªŒè¯(input validation)æ¨¡å—åº”å½“è¢«è¯†åˆ«æˆæ— å®³å¤„ç†æ¨¡å—.ä¾‹å¦‚,ä¸ºäº†é˜²æ­¢ä»£ç æ³¨å…¥æ¼æ´,PHP æä¾›çš„ htmlentities å‡½æ•°å¯ä»¥å°†ç‰¹æ®Šå«ä¹‰çš„ HTML å­—ç¬¦ä¸²è½¬åŒ–æˆHTMLå®ä½“(ä¾‹å¦‚,å°†â€™&lt;â€™è½¬åŒ–æˆâ€™&amp;lt;â€™).è¾“å…¥å­—ç¬¦ä¸²ç»è¿‡ä¸Šè¿°è½¬åŒ–åä¸ä¼šå†æºå¸¦å¯èƒ½äº§ç”Ÿå±å®³çš„ä»£ç ,å¯ä»¥å®‰å…¨åœ° å‘é€ç»™ç”¨æˆ·ä½¿ç”¨.é™¤äº†è¯­è¨€è‡ªå¸¦çš„è¾“å…¥éªŒè¯å‡½æ•°å¤–,ä¸€äº›ç³»ç»Ÿè¿˜æä¾›äº†é¢å¤–çš„è¾“å…¥éªŒè¯å·¥å…·,æ¯”å¦‚ScriptGard[50],CSAS[51],XSS Auditor[]52,Bek[53].è¿™äº›å·¥å…·ä¹Ÿåº”è¢«è¯†åˆ«æˆæ— å®³å¤„ç†æ¨¡å—.\nç»¼ä¸Š,ç›®å‰å¯¹æ±¡ç‚¹æºã€æ±¡ç‚¹æ±‡èšç‚¹ä»¥åŠæ— å®³å¤„ç†æ¨¡å—çš„è¯†åˆ«é€šå¸¸æ ¹æ®ç³»ç»Ÿæˆ–æ¼æ´ç±»å‹ä½¿ç”¨å®šåˆ¶çš„æ–¹æ³•.ç”±äºè¿™äº›æ–¹æ³•éƒ½æ¯”è¾ƒç›´æ¥,æœ¬æ–‡å°†ä¸å†è¿›è¡Œæ›´æ·±å…¥çš„æ¢è®¨.ä¸‹ä¸€èŠ‚å°†é‡ç‚¹ä»‹ç»æ±¡ç‚¹ä¼ æ’­ä¸­çš„å…³é”®æŠ€æœ¯.\næ€»ç»“ä¸€ä¸‹,ä½¿ç”¨æ±¡ç‚¹åˆ†ææ£€æµ‹ç¨‹åºæ¼æ´çš„å·¥ä½œåŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n\nåŸºäºæ•°æ®æµçš„æ±¡ç‚¹åˆ†æ(æ˜¾ç¤ºæµåˆ†æ).åœ¨ä¸è€ƒè™‘éšå¼ä¿¡æ¯æµçš„æƒ…å†µä¸‹,å¯ä»¥å°†æ±¡ç‚¹åˆ†æçœ‹åšé’ˆå¯¹æ±¡ç‚¹æ•°æ®çš„æ•°æ®æµåˆ†æ.æ ¹æ®æ±¡ç‚¹ä¼ æ’­è§„åˆ™è·Ÿè¸ªæ±¡ç‚¹ä¿¡æ¯æˆ–è€…æ ‡è®°è·¯å¾„ä¸Šçš„å˜é‡æ±¡æŸ“æƒ…å†µ,è¿›è€Œæ£€æŸ¥æ±¡ç‚¹ä¿¡æ¯æ˜¯å¦å½±å“æ•æ„Ÿæ“ä½œ.\nåŸºäºä¾èµ–å…³ç³»çš„æ±¡ç‚¹åˆ†æ(éšå¼æµåˆ†æ).è€ƒè™‘éšå¼ä¿¡æ¯æµ,åœ¨åˆ†æè¿‡ç¨‹ä¸­,æ ¹æ®ç¨‹åºä¸­çš„è¯­å¥æˆ–è€…æŒ‡ä»¤ä¹‹é—´çš„ä¾èµ–å…³ç³»,æ£€æŸ¥ Sink ç‚¹å¤„æ•æ„Ÿæ“ä½œæ˜¯å¦ä¾èµ–äº Source ç‚¹å¤„æ¥æ”¶æ±¡ç‚¹ä¿¡æ¯çš„æ“ä½œ.\n\n 0x2 æ±¡ç‚¹ä¼ æ’­åˆ†æçš„å…³é”®æŠ€æœ¯\næ±¡ç‚¹ä¼ æ’­åˆ†ææ˜¯å½“å‰æ±¡ç‚¹åˆ†æé¢†åŸŸçš„ç ”ç©¶é‡ç‚¹.ä¸ç¨‹åºåˆ†ææŠ€æœ¯ç›¸ç»“åˆ,å¯ä»¥è·å¾—æ›´åŠ é«˜æ•ˆã€ç²¾ç¡®çš„æ±¡ç‚¹åˆ†æç»“æœ.æ ¹æ®åˆ†æè¿‡ç¨‹ä¸­æ˜¯å¦éœ€è¦è¿è¡Œç¨‹åº,å¯ä»¥å°†æ±¡ç‚¹ä¼ æ’­åˆ†æåˆ†ä¸ºé™æ€æ±¡ç‚¹åˆ†æå’ŒåŠ¨æ€æ±¡ç‚¹åˆ†æ.æœ¬èŠ‚ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨åŠ¨/é™æ€ç¨‹åºåˆ†ææŠ€æœ¯æ¥è§£å†³æ±¡ç‚¹ä¼ æ’­ä¸­çš„æ˜¾å¼æµåˆ†æå’Œéšå¼æµåˆ†æé—®é¢˜.\nç¬”è€…è®¤ä¸ºæ˜¾å¼æµåˆ†æå’Œéšå¼æµåˆ†ææ˜¯ä»ä¸¤ç§ä¸åŒçš„è§’åº¦(æ•°æ®æµå’Œæ§åˆ¶æµ)æ¥è§‚å¯Ÿæ±¡ç‚¹ä¼ æ’­,æ‰€ä»¥åœ¨å®ä½œçš„æ—¶å€™æ˜¯åº”è¯¥ä¸¤ç§åˆ†ææ–¹å¼åŒæ—¶åº”ç”¨çš„,è¿™æ ·æ‰èƒ½å…¨é¢çš„åˆ†æåˆ°æ±¡ç‚¹çš„ä¼ æ’­æƒ…å†µ,é™æ€å’ŒåŠ¨æ€æ–¹æ³•åˆ™å¯ä»¥å–å…¶ä¸€,ä¹Ÿå¯ä»¥ç»“åˆä½¿ç”¨.\n 1.æ±¡ç‚¹ä¼ æ’­ä¸­çš„æ˜¾å¼æµåˆ†æ\n (1)é™æ€åˆ†ææŠ€æœ¯\né™æ€æ±¡ç‚¹ä¼ æ’­åˆ†æ(ç®€ç§°é™æ€æ±¡ç‚¹åˆ†æ)æ˜¯æŒ‡åœ¨ä¸è¿è¡Œä¸”ä¸ä¿®æ”¹ä»£ç çš„å‰æä¸‹,é€šè¿‡åˆ†æç¨‹åºå˜é‡é—´çš„æ•°æ®ä¾èµ–å…³ç³»æ¥æ£€æµ‹æ•°æ®èƒ½å¦ä»æ±¡ç‚¹æºä¼ æ’­åˆ°æ±¡ç‚¹æ±‡èšç‚¹.\né™æ€æ±¡ç‚¹åˆ†æçš„å¯¹è±¡ä¸€èˆ¬æ˜¯ç¨‹åºçš„æºç æˆ–ä¸­é—´è¡¨ç¤º.å¯ä»¥å°†å¯¹æ±¡ç‚¹ä¼ æ’­ä¸­æ˜¾å¼æµçš„é™æ€åˆ†æé—®é¢˜è½¬åŒ–ä¸ºå¯¹ç¨‹åºä¸­é™æ€æ•°æ®ä¾èµ–çš„åˆ†æ:\n(1)é¦–å…ˆ,æ ¹æ®ç¨‹åºä¸­çš„å‡½æ•°è°ƒç”¨å…³ç³»æ„å»ºè°ƒç”¨å›¾(call graph,ç®€ç§°CG);\n(2)ç„¶å,åœ¨å‡½æ•°å†…æˆ–è€…å‡½æ•°é—´æ ¹æ®ä¸åŒçš„ç¨‹åºç‰¹æ€§è¿›è¡Œå…·ä½“çš„æ•°æ®æµä¼ æ’­åˆ†æ.å¸¸è§çš„æ˜¾å¼æµæ±¡ç‚¹ä¼ æ’­æ–¹å¼åŒ…æ‹¬ç›´æ¥èµ‹å€¼ä¼ æ’­ã€é€šè¿‡å‡½æ•°(è¿‡ç¨‹)è°ƒç”¨ä¼ æ’­ä»¥åŠé€šè¿‡åˆ«å(æŒ‡é’ˆ)ä¼ æ’­.\nä»¥å›¾ 5 æ‰€ç¤ºçš„ Java ç¨‹åºä¸ºä¾‹:\n\nç¬¬ 3 è¡Œçš„å˜é‡ b ä¸ºåˆå§‹çš„æ±¡ç‚¹æ ‡è®°å˜é‡,ç¨‹åºç¬¬ 4 è¡Œå°†ä¸€ä¸ªåŒ…å«å˜é‡ b çš„ç®—æœ¯è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœç›´æ¥èµ‹ç»™å˜é‡ c.ç”±äºå˜é‡ c å’Œå˜é‡ b ä¹‹é—´å…·æœ‰ç›´æ¥çš„èµ‹å€¼å…³ç³»,æ±¡ç‚¹æ ‡è®°å¯ç›´æ¥ä»èµ‹å€¼è¯­å¥å³éƒ¨çš„å˜é‡ä¼ æ’­åˆ°å·¦éƒ¨,ä¹Ÿå°±æ˜¯ä¸Šè¿° 3ç§æ˜¾å¼æµæ±¡ç‚¹ä¼ æ’­æ–¹å¼ä¸­çš„ç›´æ¥èµ‹å€¼ä¼ æ’­.\næ¥ä¸‹æ¥,å˜é‡ c è¢«ä½œä¸ºå®å‚ä¼ é€’ç»™ç¨‹åºç¬¬ 5 è¡Œçš„å‡½æ•° foo,c ä¸Šçš„æ±¡ç‚¹æ ‡è®°ä¹Ÿé€šè¿‡å‡½æ•°è°ƒç”¨ä¼ æ’­åˆ° foo çš„å½¢å‚ z,z çš„æ±¡ç‚¹æ ‡è®°åˆé€šè¿‡ç›´æ¥èµ‹å€¼ä¼ æ’­åˆ°ç¨‹åºç¬¬ 8 è¡Œçš„ x.f.ç”±äº foo çš„å¦å¤–ä¸¤ä¸ªå‚æ•°å¯¹è±¡ x å’Œ y éƒ½æ˜¯å¯¹å¯¹è±¡ a çš„å¼•ç”¨,äºŒè€…ä¹‹é—´å­˜åœ¨åˆ«å,å› æ­¤,x.fçš„æ±¡ç‚¹æ ‡è®°å¯ä»¥é€šè¿‡åˆ«åä¼ æ’­åˆ°ç¬¬ 9 è¡Œçš„æ±¡ç‚¹æ±‡èšç‚¹,ç¨‹åºå­˜åœ¨æ³„æ¼é—®é¢˜.\nç›®å‰,åˆ©ç”¨æ•°æ®æµåˆ†æè§£å†³æ˜¾å¼æ±¡ç‚¹ä¼ æ’­åˆ†æä¸­çš„ç›´æ¥èµ‹å€¼ä¼ æ’­å’Œå‡½æ•°è°ƒç”¨ä¼ æ’­å·²ç»ç›¸å½“æˆç†Ÿ,ç ”ç©¶çš„é‡ç‚¹æ˜¯å¦‚ä½•ä¸ºåˆ«åä¼ æ’­çš„åˆ†ææä¾›æ›´ç²¾ç¡®ã€é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆ.ç”±äºç²¾ç¡®åº¦è¶Šé«˜(ä¸Šä¸‹æ–‡æ•æ„Ÿã€æµæ•æ„Ÿã€åŸŸæ•æ„Ÿã€å¯¹è±¡æ•æ„Ÿç­‰)çš„ç¨‹åºé™æ€åˆ†ææŠ€æœ¯å¾€å¾€ä¼´éšç€è¶Šå¤§çš„æ—¶ç©ºå¼€é”€,è¿½æ±‚å…¨æ•æ„Ÿä¸”é«˜æ•ˆçš„åˆ«ååˆ†æéš¾åº¦è¾ƒå¤§.åˆç”±äºé™æ€æ±¡ç‚¹ä¼ æ’­åˆ†æå…³æ³¨çš„æ˜¯ä»æ±¡ç‚¹æºåˆ°æ±¡ç‚¹æ±‡èšç‚¹ä¹‹é—´çš„æ•°æ®æµå…³ç³»,åˆ†æå¯¹è±¡å¹¶éå®Œæ•´çš„ç¨‹åº,è€Œæ˜¯ç¡®å®šçš„å…¥å£å’Œå‡ºå£ä¹‹é—´çš„ç¨‹åºç‰‡æ®µ.è¿™å°±æ„å‘³ç€å¯ä»¥å°è¯•é‡‡ç”¨æŒ‰éœ€(on-demand)å®šåˆ¶çš„åˆ«ååˆ†ææ–¹æ³•æ¥è§£å†³æ˜¾å¼æµæ€æ±¡ç‚¹åˆ†æä¸­çš„åˆ«åä¼ æ’­é—®é¢˜.æ–‡çŒ®[10]ä½¿ç”¨æŒ‰éœ€çš„ä¸Šä¸‹æ–‡æ•æ„Ÿçš„åˆ«ååˆ†æçš„æ±¡ç‚¹åˆ†ææ–¹æ³•æ¥æ£€æµ‹Javaåº”ç”¨ç¨‹åºæ¼æ´.TAJ[25]å·¥å…·ä½¿ç”¨äº†æ··åˆåˆ‡ç‰‡ç»“åˆå¯¹è±¡æ•æ„Ÿçš„åˆ«ååˆ†ææ¥è¿›è¡Œ Java Web åº”ç”¨ä¸Šçš„æ±¡ç‚¹åˆ†æ.Andromeda[61]å·¥å…·ä½¿ç”¨äº†æŒ‰éœ€çš„å¯¹è±¡æ•æ„Ÿåˆ«ååˆ†ææŠ€æœ¯è§£å†³å¯¹è±¡çš„è®¿é—®è·¯å¾„(access path)é—®é¢˜,FlowDroid[13]å·¥å…·æå‡ºä¸€ç§æŒ‰éœ€çš„åˆ«ååˆ†æ,ä»è€Œæä¾›ä¸Šä¸‹æ–‡æ•æ„Ÿã€æµæ•æ„Ÿã€åŸŸæ•æ„Ÿã€å¯¹è±¡æ•æ„Ÿçš„æ±¡ç‚¹åˆ†æ,ç”¨ä»¥è§£å†³ Androidçš„éšç§æ³„éœ²é—®é¢˜.\n (2)åŠ¨æ€åˆ†ææŠ€æœ¯\nåŠ¨æ€æ±¡ç‚¹ä¼ æ’­åˆ†æ(ç®€ç§°åŠ¨æ€æ±¡ç‚¹åˆ†æ)æ˜¯æŒ‡åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­,é€šè¿‡å®æ—¶ç›‘æ§ç¨‹åºçš„æ±¡ç‚¹æ•°æ®åœ¨ç³»ç»Ÿç¨‹åºä¸­çš„ä¼ æ’­æ¥æ£€æµ‹æ•°æ®èƒ½å¦ä»æ±¡ç‚¹æºä¼ æ’­åˆ°æ±¡ç‚¹æ±‡èšç‚¹.åŠ¨æ€æ±¡ç‚¹ä¼ æ’­åˆ†æé¦–å…ˆéœ€è¦ä¸ºæ±¡ç‚¹æ•°æ®æ‰©å±•ä¸€ä¸ªæ±¡ç‚¹æ ‡è®°(tainted tag)çš„æ ‡ç­¾å¹¶å°†å…¶å­˜å‚¨åœ¨å­˜å‚¨å•å…ƒ(å†…å­˜ã€å¯„å­˜å™¨ã€ç¼“å­˜ç­‰)ä¸­,ç„¶åæ ¹æ®æŒ‡ä»¤ç±»å‹å’ŒæŒ‡ä»¤æ“ä½œæ•°è®¾è®¡ç›¸åº”çš„ä¼ æ’­é€»è¾‘ä¼ æ’­æ±¡ç‚¹æ ‡è®°.\nåŠ¨æ€æ±¡ç‚¹ä¼ æ’­åˆ†ææŒ‰ç…§å®ç°å±‚æ¬¡è¢«åˆ†ä¸ºåŸºäºç¡¬ä»¶ã€åŸºäºè½¯ä»¶ä»¥åŠæ··åˆå‹çš„æ±¡ç‚¹ä¼ æ’­åˆ†æè¿™3ç±».\n 1.ç¡¬ä»¶\nåŸºäºç¡¬ä»¶çš„æ±¡ç‚¹ä¼ æ’­åˆ†æéœ€è¦å®šåˆ¶çš„ç¡¬ä»¶æ”¯æŒ,ä¸€èˆ¬éœ€è¦åœ¨åŸæœ‰ä½“ç³»ç»“æ„ä¸Šä¸ºå¯„å­˜å™¨æˆ–è€…å†…å­˜æ‰©å±•ä¸€ä¸ªæ ‡è®°ä½,ç”¨æ¥å­˜å‚¨æ±¡ç‚¹æ ‡è®°,ä»£è¡¨çš„ç³»ç»Ÿæœ‰ Minos[62],Raksha[63]ç­‰.\n 2.åŸºäºè½¯ä»¶\nåŸºäºè½¯ä»¶çš„æ±¡ç‚¹ä¼ æ’­åˆ†æé€šè¿‡ä¿®æ”¹ç¨‹åºçš„äºŒè¿›åˆ¶ä»£ç æ¥è¿›è¡Œæ±¡ç‚¹æ ‡è®°ä½çš„å­˜å‚¨ä¸ä¼ æ’­,ä»£è¡¨çš„ç³»ç»Ÿæœ‰ TaintEraser[64],TaintDroid[19]ç­‰.\nåŸºäºè½¯ä»¶çš„æ±¡ç‚¹ä¼ æ’­çš„ä¼˜ç‚¹åœ¨äºä¸å¿…æ›´æ”¹å¤„ç†å™¨ç­‰åº•å±‚çš„ç¡¬ä»¶,å¹¶ä¸”å¯ä»¥æ”¯æŒæ›´é«˜çš„è¯­ä¹‰é€»è¾‘çš„å®‰å…¨ç­–ç•¥(åˆ©ç”¨å…¶æ›´è´´è¿‘æºç¨‹åºå±‚æ¬¡çš„ç‰¹ç‚¹),ä½†ç¼ºç‚¹æ˜¯ä½¿ç”¨æ’æ¡©(instrumentation åœ¨ä¿è¯è¢«æµ‹ç¨‹åºåŸæœ‰é€»è¾‘å®Œæ•´æ€§çš„åŸºç¡€ä¸Šåœ¨ç¨‹åºä¸­æ’å…¥ä¸€äº›æ¢é’ˆ)æˆ–ä»£ç é‡å†™(code rewriting)ä¿®æ”¹ç¨‹åºå¾€å¾€ä¼šç»™åˆ†æç³»ç»Ÿå¸¦æ¥å·¨å¤§çš„å¼€é”€.ç›¸ååœ°,åŸºäºç¡¬ä»¶çš„æ±¡ç‚¹ä¼ æ’­åˆ†æè™½ç„¶å¯ä»¥åˆ©ç”¨å®šåˆ¶ç¡¬ä»¶é™ä½å¼€é”€,ä½†é€šå¸¸ä¸èƒ½æ”¯æŒæ›´é«˜çš„è¯­ä¹‰é€»è¾‘çš„å®‰å…¨ç­–ç•¥,å¹¶ä¸”éœ€è¦å¯¹å¤„ç†å™¨ç»“æ„è¿›è¡Œé‡æ–°è®¾è®¡.\n 3.æ··åˆå‹\næ··åˆå‹çš„æ±¡ç‚¹åˆ†ææ˜¯å¯¹ä¸Šè¿°ä¸¤ç±»æ–¹æ³•çš„æŠ˜ä¸­,å³,é€šè¿‡å°½å¯èƒ½å°‘çš„ç¡¬ä»¶ç»“æ„æ”¹åŠ¨ä»¥ä¿è¯æ›´é«˜çš„è¯­ä¹‰é€»è¾‘çš„å®‰å…¨ç­–ç•¥,ä»£è¡¨çš„ç³»ç»Ÿæœ‰ Flexitaint[65],PIFT[19]ç­‰.\nç›®å‰,é’ˆå¯¹åŠ¨æ€æ±¡ç‚¹ä¼ æ’­åˆ†æçš„ç ”ç©¶å·¥ä½œå…³æ³¨çš„é¦–è¦é—®é¢˜æ˜¯å¦‚ä½•è®¾è®¡æœ‰æ•ˆçš„æ±¡ç‚¹ä¼ æ’­é€»è¾‘,ä»¥ç¡®ä¿ç²¾ç¡®çš„æ±¡ç‚¹ä¼ æ’­åˆ†æ.\nTaintCheck[67]åˆ©ç”¨æ’æ¡©å·¥å…·Valgrind[68]å¯¹å…¶ä¸­é—´è¡¨ç¤ºUcodeæ’æ¡©å¹¶æä¾›ç§»åŠ¨æŒ‡ä»¤ã€ç®—æœ¯æŒ‡ä»¤ä»¥åŠé™¤ç§»åŠ¨å’Œç®—æœ¯å¤–å…¶ä»–æŒ‡ä»¤çš„3ç±»ä¼ æ’­é€»è¾‘å®ç°å¯¹x86ç¨‹åºçš„åŠ¨æ€æ±¡ç‚¹åˆ†æ.Privacy Scope[69],Dytan[70]å’ŒLibdft[71]ä»¥æ’æ¡©å·¥å…·PinToolä¸ºåŸºç¡€,å®ç°é’ˆå¯¹x86ç¨‹åºçš„åŠ¨æ€æ±¡ç‚¹åˆ†æ,å¹¶è§£å†³äº†ä¸€ç³»åˆ—x86æŒ‡ä»¤æ±¡ç‚¹ä¼ æ’­é€»è¾‘çš„é—®é¢˜.TaintDroid[19]æä¾›äº†ä¸€å¥—åŸºäºAndroid Dalvikè™šæ‹Ÿæœºçš„DEXæ ¼å¼[73]çš„æ±¡ç‚¹ä¼ æ’­åˆ†ææ–¹æ³•.ç”±äºDEXçš„æŒ‡ä»¤åŒ…å«å¤šæ•°å¸¸ç”¨çš„æŒ‡ä»¤å’Œå…·æœ‰é¢å‘å¯¹è±¡ç‰¹æ€§çš„æŒ‡ä»¤,æ™®é€‚æ€§é«˜,è¿™é‡Œä»¥TaintDroidä¸­æ±¡ç‚¹ä¼ æ’­æ–¹æ³•ä¸ºç¤ºä¾‹,ä»‹ç»åŠ¨æ€æ±¡ç‚¹ä¼ æ’­çš„é€»è¾‘.\nDEXæ”¯æŒçš„å˜é‡ç±»å‹æœ‰5ç§:æœ¬åœ°å˜é‡ã€æ–¹æ³•å‚æ•°ã€ç±»é™æ€åŸŸã€ç±»å®ä¾‹åŸŸå’Œæ•°ç»„.TaintDroidç”¨Ï…X\\upsilon_XÏ…Xâ€‹ä»£è¡¨æœ¬åœ°å˜é‡å’Œæ–¹æ³•å‚æ•°,fXf_XfXâ€‹ä»£è¡¨ç±»çš„é™æ€åŸŸ,Ï…Y(fX)\\upsilon_Y(f_X)Ï…Yâ€‹(fXâ€‹)ä»£è¡¨å®ä¾‹åŸŸ,å…¶ä¸­,Ï…Y\\upsilon_YÏ…Yâ€‹æ˜¯å…·ä½“å®ä¾‹çš„å˜é‡å¼•ç”¨.Ï…X[â‹…]\\upsilon_X[â‹…]Ï…Xâ€‹[â‹…]ä»£è¡¨æ•°ç»„,å…¶ä¸­,Ï…X\\upsilon_XÏ…Xâ€‹è¡¨ç¤ºæ•°ç»„çš„å¯¹è±¡å¼•ç”¨.åŒæ—¶,TaintDroidä½¿ç”¨è™šæ‹Ÿæ±¡ç‚¹æ˜ å°„å‡½æ•°Ï„(â‹…)\\tau(â‹…)Ï„(â‹…)æ¥è¾…åŠ©æ±¡ç‚¹ä¼ æ’­,å¯¹äºå˜é‡Ï…\\upsilonÏ…, Ï„(Ï…)\\tau(\\upsilon)Ï„(Ï…)è¿”å›å˜é‡çš„æ±¡ç‚¹æ ‡è®°ttt. Ï„(Ï…)\\tau(\\upsilon)Ï„(Ï…)å¯ä»¥è¢«èµ‹å€¼ç»™å…¶ä»–çš„å˜é‡.ç¬¦å·â†ä»£è¡¨å°†ä½äºç¬¦å·å³éƒ¨çš„å˜é‡çš„æ±¡ç‚¹æ ‡è®°ä¼ æ’­ç»™å·¦éƒ¨çš„å˜é‡.å…·ä½“çš„æ±¡ç‚¹ä¼ æ’­é€»è¾‘è§„åˆ™è§è¡¨2.\n\nå¦‚æœä½ ä¸Šé¢ä¸€æ®µæ²¡çœ‹æ‡‚,æ²¡å…³ç³»,ä½ åªè¦çŸ¥é“TaintDroidä½¿ç”¨çš„åŠ¨æ€æ±¡ç‚¹ä¼ æ’­åˆ†æçš„ä¼ æ’­é€»è¾‘å°±æ˜¯ä¸Šè¡¨æ‰€ç¤º.\nä¸¾ä¾‹æ¥è¯´,å¯¹äºæŒ‡ä»¤move-op Ï…A\\upsilon_AÏ…Aâ€‹ Ï…B\\upsilon_BÏ…Bâ€‹ æ±¡ç‚¹ä¼ æ’­è§„åˆ™å°±æ˜¯å°†Bçš„æ ‡è®°ä¼ æ’­ç»™A,ä¹Ÿå°±æ˜¯è¯´å¦‚æœBè¢«æ ‡è®°ä¸ºæ±¡ç‚¹åˆ™Aä¹Ÿåº”è¯¥è¢«æ ‡è®°ä¸ºæ±¡ç‚¹.\n 2.æ±¡ç‚¹ä¼ æ’­ä¸­çš„éšå¼æµåˆ†æ\næ±¡ç‚¹ä¼ æ’­åˆ†æä¸­çš„éšå¼æµåˆ†æå°±æ˜¯åˆ†ææ±¡ç‚¹æ•°æ®å¦‚ä½•é€šè¿‡æ§åˆ¶ä¾èµ–è¿›è¡Œä¼ æ’­,å¦‚æœå¿½ç•¥äº†å¯¹éšå¼æµæ±¡ç‚¹ä¼ æ’­çš„åˆ†æ,åˆ™ä¼šå¯¼è‡´æ¬ æ±¡æŸ“çš„æƒ…å†µ;å¦‚æœå¯¹éšå¼æµåˆ†æä¸å½“,é‚£ä¹ˆé™¤äº†æ¬ æ±¡æŸ“ä¹‹å¤–,è¿˜å¯èƒ½å‡ºç°è¿‡æ±¡æŸ“çš„æƒ…å†µ.ä¸æ˜¾å¼æµåˆ†æç±»ä¼¼,éšå¼æµåˆ†ææŠ€æœ¯åŒæ ·ä¹Ÿå¯ä»¥åˆ†ä¸ºé™æ€åˆ†æå’ŒåŠ¨æ€åˆ†æä¸¤ç±».\n (1)é™æ€åˆ†ææŠ€æœ¯\né™æ€éšå¼æµåˆ†æé¢ä¸´çš„æ ¸å¿ƒé—®é¢˜æ˜¯ç²¾åº¦ä¸æ•ˆç‡ä¸å¯å…¼å¾—çš„é—®é¢˜.ç²¾ç¡®çš„éšå¼æµæ±¡ç‚¹ä¼ æ’­åˆ†æéœ€è¦åˆ†ææ¯ä¸€ä¸ªåˆ†æ”¯æ§åˆ¶æ¡ä»¶æ˜¯å¦éœ€è¦ä¼ æ’­æ±¡ç‚¹æ ‡è®°.è·¯å¾„æ•æ„Ÿçš„æ•°æ®æµåˆ†æå¾€å¾€ä¼šäº§ç”Ÿè·¯å¾„çˆ†ç‚¸é—®é¢˜,å¯¼è‡´å¼€é”€éš¾ä»¥æ¥å—.ä¸ºäº†é™ä½å¼€é”€,ä¸€ç§ç®€å•çš„é™æ€ä¼ æ’­(æ ‡è®°)åˆ†æ”¯è¯­å¥çš„æ±¡ç‚¹æ ‡è®°æ–¹æ³•æ˜¯å°†æ§åˆ¶ä¾èµ–äºå®ƒçš„è¯­å¥å…¨éƒ¨è¿›è¡Œæ±¡ç‚¹æ ‡è®°,ä½†è¯¥æ–¹æ³•ä¼šå¯¼è‡´ä¸€äº›å¹¶ä¸æºå¸¦éšç§æ•°æ®çš„å˜é‡è¢«æ ‡è®°,å¯¼è‡´è¿‡æ±¡æŸ“æƒ…å†µçš„å‘ç”Ÿ.è¿‡æ±¡æŸ“ä¼šå¼•èµ·æ±¡ç‚¹çš„å¤§é‡æ‰©æ•£,æœ€ç»ˆå¯¼è‡´ç”¨æˆ·å¾—åˆ°çš„æŠ¥å‘Šä¸­ä¿¡æ¯è¿‡å¤š,éš¾ä»¥ä½¿ç”¨.\n (2)åŠ¨æ€åˆ†ææŠ€æœ¯\nåŠ¨æ€éšå¼æµåˆ†æå…³æ³¨çš„é¦–è¦é—®é¢˜æ˜¯å¦‚ä½•ç¡®å®šæ±¡ç‚¹æ§åˆ¶æ¡ä»¶ä¸‹éœ€è¦æ ‡è®°çš„è¯­å¥çš„èŒƒå›´.ç”±äºåŠ¨æ€æ‰§è¡Œè½¨è¿¹å¹¶ä¸èƒ½åæ˜ å‡ºè¢«æ‰§è¡Œçš„æŒ‡ä»¤ä¹‹é—´çš„æ§åˆ¶ä¾èµ–å…³ç³»,ç›®å‰çš„ç ”ç©¶å¤šé‡‡ç”¨ç¦»çº¿çš„é™æ€åˆ†æè¾…åŠ©åˆ¤æ–­åŠ¨æ€æ±¡ç‚¹ä¼ æ’­ä¸­çš„éšå¼æµæ ‡è®°èŒƒå›´.Clauseç­‰äºº[70]æå‡º,åˆ©ç”¨ç¦»çº¿é™æ€åˆ†æå¾—åˆ°çš„æ§åˆ¶æµå›¾èŠ‚ç‚¹é—´çš„åæ”¯é…(post-dominate)å…³ç³»æ¥è§£å†³åŠ¨æ€æ±¡ç‚¹ä¼ æ’­ä¸­çš„éšå¼æµæ ‡è®°é—®é¢˜.\nä¾‹å¦‚,å¦‚å›¾ 6(a)æ‰€ç¤º,ç¨‹åºç¬¬ 3 è¡Œçš„åˆ†æ”¯è¯­å¥è¢«æ ‡è®°ä¸ºæ±¡ç‚¹æº,å½“document.cookie çš„å€¼ä¸º abc æ—¶,ä¼šå‘ç”Ÿæ±¡ç‚¹æ•°æ®æ³„éœ².æ ¹æ®åŸºäºåæ”¯é…å…³ç³»çš„æ ‡è®°ç®—æ³•,ä¼šå¯¹è¯¥ç¤ºä¾‹ç¬¬ 4 è¡Œè¯­å¥çš„æŒ‡ä»¤ç›®çš„åœ°,å³ x çš„å€¼è¿›è¡Œæ±¡ç‚¹æ ‡è®°.(ps:å› ä¸ºæ ¹æ®è¯¥åˆ†æ”¯æ§åˆ¶ä¸‹çš„è¯­å¥çš„æ‰§è¡Œç»“æœå¯ä»¥åˆ¤å®šæ±¡æŸ“æºdocument.cookieçš„å€¼,é€ æˆæ±¡ç‚¹æ•°æ®æ³„éœ²)\n\nåŠ¨æ€åˆ†æé¢ä¸´çš„ç¬¬ 2 ä¸ªé—®é¢˜æ˜¯ç”±äºéƒ¨åˆ†æ³„æ¼(partially leaked)å¯¼è‡´çš„æ¼æŠ¥.éƒ¨åˆ†æ³„æ¼æ˜¯æŒ‡æ±¡ç‚¹ä¿¡æ¯é€šè¿‡åŠ¨æ€æœªæ‰§è¡Œéƒ¨åˆ†è¿›è¡Œä¼ æ’­å¹¶æ³„æ¼.Vogtç­‰äºº[29]å‘ç°,åªåŠ¨æ€åœ°æ ‡è®°åˆ†æ”¯æ¡ä»¶ä¸‹çš„è¯­å¥ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µ.\nä»ä»¥å›¾ 6(a)ä¸­çš„ç¨‹åºä¸ºä¾‹:å½“ç¬¬ 3 è¡Œçš„æ§åˆ¶æ¡ä»¶è¢«æ‰§è¡Œæ—¶,å¯¹åº”çš„ x ä¼šè¢«æ ‡è®°.æ­¤æ—¶,x çš„å€¼ä¸º true,è€Œ y å€¼æ²¡æœ‰å˜åŒ–,ä»ç„¶ä¸º false.åœ¨åç»­æ‰§è¡Œè¿‡ç¨‹ä¸­,ç”±äºç¬¬ 9è¡Œçš„æ±¡ç‚¹æ±‡èšç‚¹ä¸å¯è¾¾,è€Œç¬¬ 12 è¡Œçš„æ±‡èšç‚¹å¯è¾¾,åŠ¨æ€åˆ†ææ²¡æœ‰æ£€æµ‹åˆ°æ±¡ç‚¹æ•°æ®æ³„æ¼.ä½†æ”»å‡»è€…ç”±ç¬¬ 11 è¡Œ y ç­‰äº false çš„æ¡ä»¶èƒ½å¤Ÿåæ¨å‡ºç¨‹åºæ‰§è¡Œäº†ç¬¬ 3 è¡Œçš„åˆ†æ”¯æ¡ä»¶,ç¨‹åºå®é™…ä¸Šå­˜åœ¨ä¿¡æ¯æ³„æ¼çš„é—®é¢˜.è¿™ä¸ªä¿¡æ¯æ³„éœ²æ˜¯ç”±ç¬¬ 6 è¡Œæœªè¢«æ‰§è¡Œåˆ°çš„ y çš„èµ‹å€¼è¯­å¥æ‰€è§¦å‘çš„.å› æ­¤,y åº”è¯¥è¢«åŠ¨æ€æ±¡ç‚¹ä¼ æ’­åˆ†ææ‰€æ ‡è®°.ä¸ºäº†è§£å†³éƒ¨åˆ†æ³„æ¼é—®é¢˜,Vogtç­‰äººåœ¨ä¼ ç»Ÿçš„åŠ¨æ€æ±¡ç‚¹åˆ†æåŸºç¡€ä¸Šå¢åŠ äº†ç¦»çº¿çš„é™æ€åˆ†æ,ä»¥è·Ÿè¸ªåŠ¨æ€æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æ§åˆ¶ä¾èµ–å…³ç³»,å¯¹æ±¡ç‚¹åˆ†æ”¯æ§åˆ¶èŒƒå›´å†…çš„æ‰€æœ‰èµ‹å€¼è¯­å¥ä¸­çš„å˜é‡éƒ½è¿›è¡Œæ ‡è®°.å…·ä½“åˆ°å›¾ 6(a)æ‰€ç¤ºçš„ä¾‹å­,å°±æ˜¯ç¬¬ 4 è¡Œå’Œç¬¬ 6 è¡Œä¸­çš„å˜é‡å‡ä¼šè¢«æ±¡ç‚¹æ ‡è®°.ä½†æ˜¯,Vogt ç­‰äººçš„æ–¹æ³•ä»ç„¶ä¼šäº§ç”Ÿè¿‡æ±¡æŸ“çš„æƒ…å†µ.\nåŠ¨æ€åˆ†æéœ€è¦è§£å†³çš„ç¬¬ 3 ä¸ªé—®é¢˜æ˜¯å¦‚ä½•é€‰æ‹©åˆé€‚çš„æ±¡ç‚¹æ ‡è®°åˆ†æ”¯è¿›è¡Œæ±¡ç‚¹ä¼ æ’­.é‰´äºå•çº¯åœ°å°†æ‰€æœ‰åŒ…å«æ±¡ç‚¹æ ‡è®°çš„åˆ†æ”¯è¿›è¡Œä¼ æ’­ä¼šå¯¼è‡´è¿‡æ±¡æŸ“çš„æƒ…å†µ,å¯ä»¥æ ¹æ®ä¿¡æ¯æ³„æ¼èŒƒå›´çš„ä¸åŒ,å®šé‡åœ°è®¾è®¡æ±¡ç‚¹æ ‡è®°åˆ†æ”¯çš„é€‰æ‹©ç­–ç•¥.\nä»¥å›¾ 6(b)æ‰€ç¤ºçš„ç¨‹åºä¸ºä¾‹,ç¬¬ 2 è¡Œçš„å˜é‡ a ä¸ºåˆå§‹çš„æ±¡ç‚¹æ ‡è®°å˜é‡.ç¬¬ 5 è¡Œã€ç¬¬ 7 è¡Œã€ç¬¬ 9 è¡Œå‡ä¸ºä»¥ aä½œä¸ºæºæ“ä½œæ•°çš„æ±¡ç‚¹æ ‡è®°çš„åˆ†æ”¯.å¦‚æœä¼ æ’­ç­–ç•¥ä¸ºåªè¦åˆ†æ”¯æŒ‡ä»¤ä¸­åŒ…å«æ±¡ç‚¹æ ‡è®°å°±å¯¹å…¶è¿›è¡Œä¼ æ’­,é‚£ä¹ˆç¬¬ 5 è¡Œã€ç¬¬ 7 è¡Œã€ç¬¬ 9 è¡Œå°†åˆ†åˆ«è¢«ä¼ æ’­ç»™ç¬¬ 6 è¡Œã€ç¬¬ 8 è¡Œã€ç¬¬ 10 è¡Œ,å¹¶æœ€ç»ˆä¼ æ’­åˆ°ç¬¬ 12 è¡Œçš„æ±¡ç‚¹æ±‡èšç‚¹.å¦‚æœå¯¹è¿™æ®µç¨‹åºè¿›è¡Œæ·±å…¥åˆ†æä¼šå‘ç°,3ä¸ªåˆ†æ”¯æ¡ä»¶æ‰€æä¾›çš„ä¿¡æ¯å€¼(æ‰€èƒ½æ³„éœ²çš„ä¿¡æ¯èŒƒå›´)å¹¶ä¸ç›¸åŒ,åˆ†åˆ«æ˜¯ a ç­‰äº 10ã€aå¤§äº 10 ä¸”å°äºæˆ–ç­‰äº 13(å°† w å€¼ä»£å…¥è®¡ç®—)ä»¥åŠ a å°äº 10.å¯¹äº a ç­‰äº 10 çš„æƒ…å†µ,æ”»å‡»è€…å¯ä»¥æ ¹æ®ç¬¬ 12 è¡Œæ³„æ¼çš„ x çš„å€¼ç›´æ¥è¿˜åŸå‡ºæ±¡ç‚¹æºå¤„ a çš„å€¼(è¿™ç±»åˆ†æ”¯ä¹Ÿè¢«ç§°ä¸ºèƒ½å¤Ÿä¿å­˜å®Œæ•´ä¿¡æ¯çš„åˆ†æ”¯);å¯¹äº a å¤§äº 10 ä¸”å°äºæˆ–ç­‰äº 13 çš„æƒ…å†µ,æ”»å‡»è€…ä¹Ÿåªéœ€è¦å°è¯• 3 æ¬¡å°±å¯ä»¥è¿˜åŸä¿¡æ¯;è€Œå¯¹äº a å°äº 10 çš„æƒ…å†µ,æ”»å‡»è€…æ‰€è·å¾—çš„ä¸ç¡®å®šæ€§è¾ƒå¤§,æˆåŠŸè¿˜åŸä¿¡æ¯çš„å‡ ç‡æ˜¾è‘—ä½äºå‰ä¸¤ç§,å¯¹è¯¥åˆ†æ”¯è¿›è¡Œæ±¡ç‚¹ä¼ æ’­çš„å®é™…æ„ä¹‰ä¸å¤§.\nBaoç­‰äºº[76]åªå°†ä¸¥æ ¼æ§åˆ¶ä¾èµ–(strict control dependence)è¯†åˆ«æˆéœ€è¦æ±¡ç‚¹ä¼ æ’­çš„åˆ†æ”¯,å…¶ä¸­,ä¸¥æ ¼æ§åˆ¶ä¾èµ–å³åˆ†æ”¯æ¡ä»¶è¡¨è¾¾å¼çš„ä¸¤ç«¯å…·æœ‰å¸¸æ•°å·®å¼‚çš„åˆ†æ”¯.ä½†æ˜¯,Bao çš„æ–¹æ³•åªé€‚ç”¨äºèƒ½å¤Ÿåœ¨ç¼–è¯‘é˜¶æ®µè®¡ç®—å‡ºå¸¸æ•°å·®å¼‚çš„åˆ†æ”¯.\nKang ç­‰äºº[77]æå‡ºçš„ DTA++ å·¥å…·ä½¿ç”¨åŸºäºç¦»çº¿æ‰§è¡Œè¸ªè¿¹(trace)çš„ç¬¦å·æ‰§è¡Œçš„æ–¹æ³•æ¥å¯»æ‰¾è¿›è¡Œæ±¡ç‚¹ä¼ æ’­çš„åˆ†æ”¯,ä½†è¯¥æ–¹æ³•åªå…³æ³¨ä¿¡æ¯è¢«å®Œæ•´ä¿å­˜çš„åˆ†æ”¯,å³å›¾ 6(b)ä¸­ç¬¬ 5 è¡Œçš„ a==10 ä¼šè¢«é€‰æ‹©æ±¡ç‚¹ä¼ æ’­,ä½†æ˜¯ä¿¡æ¯ä»ç„¶èƒ½å¤Ÿé€šè¿‡å¦ä¸€ä¸ªèŒƒå›´(ç¬¬ 7 è¡Œçš„åˆ†æ”¯)è€Œæ³„éœ².\nCox ç­‰äºº[78]æå‡ºçš„ SpanDex çš„ä¸»è¦æ€æƒ³æ˜¯:åŠ¨æ€åœ°è·å¾—æ§åˆ¶åˆ†æ”¯ä¸­æ±¡ç‚¹æ•°æ®çš„èŒƒå›´,æ ¹æ®æ•°æ®çš„æ›´æ”¹ä»¥åŠæ•°æ®é—´çš„ä¾èµ–å…³ç³»æ„å»ºä¸€ä¸ªåŸºäºæ“ä½œçš„æœ‰å‘æ— ç¯å›¾(OP-DAG),å†ç»“åˆä¸€ä¸ªåœ¨çº¿çš„çº¦æŸæ±‚è§£å™¨(CSP solver)ç¡®å®šéšå¼æµä¸­ä¼ æ’­çš„éšç§æ•°æ®å€¼çš„èŒƒå›´,é€šè¿‡é¢„å…ˆè®¾å®šçš„é˜ˆå€¼,é€‰æ‹©æ˜¯å¦å¯¹æ•°æ®è¿›è¡Œæ±¡ç‚¹ä¼ æ’­.è¯¥æ–¹æ³•å¯¹å›¾ 6(b)æ‰€ç¤ºä¾‹å­ä¸­çš„ç¬¬ 5 è¡Œã€ç¬¬ 7è¡Œçš„åˆ†æ”¯è¿›è¡Œæ±¡ç‚¹ä¼ æ’­.ä½†æ˜¯ç›®å‰,è¯¥æ–¹æ³•åªèƒ½æ±‚è§£å¯†ç å­—ç¬¦çš„èŒƒå›´,æš‚ä¸æ”¯æŒå¯¹å¤æ‚æ“ä½œ(ä½ã€é™¤æ³•ã€æ•°ç»„ç­‰æ“ä½œ)çš„æ±‚è§£.\n 0x3 æ±¡ç‚¹åˆ†ææ–¹æ³•å®ç°\nä¸ºäº†æ›´è¿›ä¸€æ­¥ç†è§£æ±¡ç‚¹åˆ†ææŠ€æœ¯çš„å®ç°,åŠ å…¥è¿™ä¸€èŠ‚,ä¸»è¦æ‘˜å½•è‡ªCTF-All-In-One[2]\n 1.é™æ€æ±¡ç‚¹åˆ†ææŠ€æœ¯\né™æ€æ±¡ç‚¹åˆ†æç³»ç»Ÿé¦–å…ˆå¯¹ç¨‹åºä»£ç è¿›è¡Œè§£æ,è·å¾—ç¨‹åºä»£ç çš„ä¸­é—´è¡¨ç¤º,ç„¶ååœ¨ä¸­é—´è¡¨ç¤ºçš„åŸºç¡€ä¸Šå¯¹ç¨‹åºä»£ç è¿›è¡Œæ§åˆ¶æµåˆ†æç­‰è¾…åŠ©åˆ†æ,ä»¥è·å¾—éœ€è¦çš„æ§åˆ¶æµå›¾ã€è°ƒç”¨å›¾ç­‰.åœ¨è¾…åŠ©åˆ†æçš„è¿‡ç¨‹ä¸­,ç³»ç»Ÿå¯ä»¥åˆ©ç”¨æ±¡ç‚¹åˆ†æè§„åˆ™åœ¨ä¸­é—´è¡¨ç¤ºä¸Šè¯†åˆ«ç¨‹åºä¸­çš„ Source ç‚¹å’Œ Sink ç‚¹.æœ€åæ£€æµ‹ç³»ç»Ÿæ ¹æ®æ±¡ç‚¹åˆ†æè§„åˆ™,åˆ©ç”¨é™æ€æ±¡ç‚¹åˆ†ææ£€æŸ¥ç¨‹åºæ˜¯å¦å­˜åœ¨æ±¡ç‚¹ç±»å‹çš„æ¼æ´.\n (1)åŸºäºæ•°æ®æµçš„æ±¡ç‚¹åˆ†æ\nåœ¨åŸºäºæ•°æ®æµçš„æ±¡ç‚¹åˆ†æä¸­,å¸¸å¸¸éœ€è¦ä¸€äº›è¾…åŠ©åˆ†ææŠ€æœ¯,ä¾‹å¦‚åˆ«ååˆ†æã€å–å€¼åˆ†æç­‰,æ¥æé«˜åˆ†æç²¾åº¦.è¾…åŠ©åˆ†æå’Œæ±¡ç‚¹åˆ†æäº¤æ›¿è¿›è¡Œ,é€šå¸¸æ²¿ç€ç¨‹åºè·¯å¾„çš„æ–¹å‘åˆ†ææ±¡ç‚¹ä¿¡æ¯çš„æµå‘,æ£€æŸ¥ Source ç‚¹å¤„ç¨‹åºæ¥æ”¶çš„æ±¡ç‚¹ä¿¡æ¯æ˜¯å¦ä¼šå½±å“åˆ° Sink ç‚¹å¤„çš„æ•æ„Ÿæ“ä½œ.\nè¿‡ç¨‹å†…çš„åˆ†æä¸­,æŒ‰ç…§ä¸€å®šçš„é¡ºåºåˆ†æè¿‡ç¨‹å†…çš„æ¯ä¸€æ¡è¯­å¥æˆ–è€…æŒ‡ä»¤,è¿›è€Œåˆ†ææ±¡ç‚¹ä¿¡æ¯çš„æµå‘.\n\nè®°å½•æ±¡ç‚¹ä¿¡æ¯.åœ¨é™æ€åˆ†æå±‚é¢,ç¨‹åºå˜é‡çš„æ±¡æŸ“æƒ…å†µä¸ºä¸»è¦å…³æ³¨å¯¹è±¡.ä¸ºè®°å½•æ±¡æŸ“ä¿¡æ¯,é€šå¸¸ä¸ºå˜é‡æ·»åŠ ä¸€ä¸ªæ±¡æŸ“æ ‡ç­¾.æœ€ç®€å•çš„å°±æ˜¯ä¸€ä¸ªå¸ƒå°”å‹å˜é‡,è¡¨ç¤ºå˜é‡æ˜¯å¦è¢«æ±¡æŸ“.æ›´å¤æ‚çš„æ ‡ç­¾è¿˜å¯ä»¥è®°å½•å˜é‡çš„æ±¡æŸ“ä¿¡æ¯æ¥è‡ªå“ªäº› Source ç‚¹,ç”šè‡³ç²¾ç¡®åˆ° Source ç‚¹æ¥æ”¶æ•°æ®çš„å“ªä¸€éƒ¨åˆ†.å½“ç„¶ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨æ±¡æŸ“æ ‡ç­¾,è¿™æ—¶æˆ‘ä»¬é€šè¿‡å¯¹å˜é‡è¿›è¡Œè·Ÿè¸ªçš„æ–¹å¼è¾¾åˆ°åˆ†ææ±¡ç‚¹ä¿¡æ¯æµå‘çš„ç›®çš„.ä¾‹å¦‚ä½¿ç”¨æ ˆæˆ–è€…é˜Ÿåˆ—æ¥è®°å½•è¢«æ±¡æŸ“çš„å˜é‡.\nç¨‹åºè¯­å¥çš„åˆ†æ.åœ¨ç¡®å®šå¦‚ä½•è®°å½•æ±¡æŸ“ä¿¡æ¯å,å°†å¯¹ç¨‹åºè¯­å¥è¿›è¡Œé™æ€åˆ†æ.é€šå¸¸æˆ‘ä»¬ä¸»è¦å…³æ³¨èµ‹å€¼è¯­å¥ã€æ§åˆ¶è½¬ç§»è¯­å¥ä»¥åŠè¿‡ç¨‹è°ƒç”¨è¯­å¥ä¸‰ç±».\n\nèµ‹å€¼è¯­å¥.\n\nå¯¹äºç®€å•çš„èµ‹å€¼è¯­å¥,å½¢å¦‚ a = b è¿™æ ·çš„,è®°å½•è¯­å¥å·¦ç«¯çš„å˜é‡å’Œå³ç«¯çš„å˜é‡å…·æœ‰ç›¸åŒçš„æ±¡æŸ“çŠ¶æ€.ç¨‹åºä¸­çš„å¸¸é‡é€šå¸¸è®¤ä¸ºæ˜¯æœªæ±¡æŸ“çš„,å¦‚æœä¸€ä¸ªå˜é‡è¢«èµ‹å€¼ä¸ºå¸¸é‡,åœ¨ä¸è€ƒè™‘éšå¼ä¿¡æ¯æµçš„æƒ…å†µä¸‹,è®¤ä¸ºå˜é‡çš„çŠ¶æ€åœ¨èµ‹å€¼åæ˜¯æœªæ±¡æŸ“çš„.\nå¯¹äºå½¢å¦‚ a = b + c è¿™æ ·å¸¦æœ‰äºŒå…ƒæ“ä½œçš„èµ‹å€¼è¯­å¥,é€šå¸¸è§„å®šå¦‚æœå³ç«¯çš„æ“ä½œæ•°åªè¦æœ‰ä¸€ä¸ªæ˜¯è¢«æ±¡æŸ“çš„,åˆ™å·¦ç«¯çš„å˜é‡æ˜¯æ±¡æŸ“çš„(é™¤éå³ç«¯è®¡ç®—ç»“æœä¸ºå¸¸é‡).\nå¯¹äºå’Œæ•°ç»„å…ƒç´ ç›¸å…³çš„èµ‹å€¼,å¦‚æœå¯ä»¥é€šè¿‡é™æ€åˆ†æç¡®å®šæ•°ç»„ä¸‹æ ‡çš„å–å€¼æˆ–è€…å–å€¼èŒƒå›´,é‚£ä¹ˆå°±å¯ä»¥ç²¾ç¡®åœ°åˆ¤æ–­æ•°ç»„ä¸­å“ªä¸ªæˆ–å“ªäº›å…ƒç´ æ˜¯æ±¡æŸ“çš„.ä½†é€šå¸¸é™æ€åˆ†æä¸èƒ½ç¡®å®šä¸€ä¸ªå˜é‡æ˜¯æ±¡æŸ“çš„,é‚£ä¹ˆå°±ç®€å•åœ°è®¤ä¸ºæ•´ä¸ªæ•°ç»„éƒ½æ˜¯æ±¡æŸ“çš„.\nå¯¹äºåŒ…å«å­—æ®µæˆ–è€…åŒ…å«æŒ‡é’ˆæ“ä½œçš„èµ‹å€¼è¯­å¥,å¸¸å¸¸éœ€è¦ç”¨åˆ°æŒ‡å‘åˆ†æçš„åˆ†æç»“æœ.\n\n\næ§åˆ¶è½¬ç§»è¯­å¥.\n\nåœ¨åˆ†ææ¡ä»¶æ§åˆ¶è½¬ç§»è¯­å¥æ—¶,é¦–å…ˆè€ƒè™‘è¯­å¥ä¸­çš„è·¯å¾„æ¡ä»¶å¯èƒ½æ˜¯åŒ…å«å¯¹æ±¡ç‚¹æ•°æ®çš„é™åˆ¶,åœ¨å®é™…åˆ†æä¸­å¸¸å¸¸éœ€è¦è¯†åˆ«è¿™ç§é™åˆ¶æ±¡ç‚¹æ•°æ®çš„æ¡ä»¶,ä»¥åˆ¤æ–­è¿™äº›é™åˆ¶æ¡ä»¶æ˜¯å¦è¶³å¤ŸåŒ…å«ç¨‹åºä¸ä¼šå—åˆ°æ”»å‡».å¦‚æœå¾—å‡ºè·¯å¾„æ¡ä»¶çš„é™åˆ¶æ˜¯è¶³å¤Ÿçš„,é‚£ä¹ˆå¯ä»¥å°†ç›¸åº”çš„å˜é‡æ ‡è®°ä¸ºæœªæ±¡æŸ“çš„.\nå¯¹äºå¾ªç¯è¯­å¥,é€šå¸¸è§„å®šå¾ªç¯å˜é‡çš„å–å€¼èŒƒå›´ä¸èƒ½å—åˆ°è¾“å…¥çš„å½±å“.ä¾‹å¦‚åœ¨è¯­å¥ for (i = 1; i &lt; k; i++)&#123;&#125; ä¸­,å¯ä»¥è§„å®šå¾ªç¯çš„ä¸Šç•Œ k ä¸èƒ½æ˜¯æ±¡æŸ“çš„.\n\n\nè¿‡ç¨‹è°ƒç”¨è¯­å¥.\n\nå¯ä»¥ä½¿ç”¨è¿‡ç¨‹é—´çš„åˆ†ææˆ–è€…ç›´æ¥åº”ç”¨è¿‡ç¨‹æ‘˜è¦è¿›è¡Œåˆ†æ.æ±¡ç‚¹åˆ†ææ‰€ä½¿ç”¨çš„è¿‡ç¨‹æ‘˜è¦ä¸»è¦æè¿°æ€æ ·æ”¹å˜ä¸è¯¥è¿‡ç¨‹ç›¸å…³çš„å˜é‡çš„æ±¡æŸ“çŠ¶æ€,ä»¥åŠå¯¹å“ªäº›å˜é‡çš„æ±¡æŸ“çŠ¶æ€è¿›è¡Œæ£€æµ‹.è¿™äº›å˜é‡å¯ä»¥æ˜¯è¿‡ç¨‹ä½¿ç”¨çš„å‚æ•°ã€å‚æ•°çš„å­—æ®µæˆ–è€…è¿‡ç¨‹çš„è¿”å›å€¼ç­‰.ä¾‹å¦‚åœ¨è¯­å¥ flag = obj.method(str); ä¸­,str æ˜¯æ±¡æŸ“çš„,é‚£ä¹ˆé€šè¿‡è¿‡ç¨‹é—´çš„åˆ†æ,å°†å˜é‡ obj çš„å­—æ®µ str æ ‡è®°ä¸ºæ±¡æŸ“çš„,è€Œè®°å½•æ–¹æ³•çš„è¿”å›å€¼çš„å˜é‡ flag æ ‡è®°ä¸ºæœªæ±¡æŸ“çš„.\nåœ¨å®é™…çš„è¿‡ç¨‹é—´åˆ†æä¸­,å¯ä»¥å¯¹å·²ç»åˆ†æè¿‡çš„è¿‡ç¨‹æ„å»ºè¿‡ç¨‹æ‘˜è¦.ä¾‹å¦‚å‰é¢çš„è¯­å¥,å…¶è¿‡ç¨‹æ‘˜è¦æè¿°ä¸ºï¼šæ–¹æ³• method çš„å‚æ•°æ±¡æŸ“çŠ¶æ€å†³å®šå…¶æ¥æ”¶å¯¹è±¡çš„å®ä¾‹åŸŸ str çš„æ±¡æŸ“çŠ¶æ€,å¹¶ä¸”å®ƒçš„è¿”å›å€¼æ˜¯æœªå—æ±¡æŸ“çš„.é‚£ä¹ˆä¸‹ä¸€æ¬¡åˆ†æéœ€è¦æ—¶,å°±å¯ä»¥ç›´æ¥åº”ç”¨æ‘˜è¦è¿›è¡Œåˆ†æ.\n\n\n\n\nä»£ç çš„éå†.ä¸€èˆ¬æƒ…å†µä¸‹,å¸¸å¸¸ä½¿ç”¨æµæ•æ„Ÿçš„æ–¹å¼æˆ–è€…è·¯å¾„æ•æ„Ÿçš„æ–¹å¼è¿›è¡Œéå†,å¹¶åˆ†æè¿‡ç¨‹ä¸­çš„ä»£ç .å¦‚æœä½¿ç”¨æµæ•æ„Ÿçš„æ–¹å¼,å¯ä»¥é€šè¿‡å¯¹ä¸åŒè·¯å¾„ä¸Šçš„åˆ†æç»“æœè¿›è¡Œæ±‡é›†,ä»¥å‘ç°ç¨‹åºä¸­çš„æ•°æ®å‡€åŒ–è§„åˆ™.å¦‚æœä½¿ç”¨è·¯å¾„æ•æ„Ÿçš„åˆ†ææ–¹å¼,åˆ™éœ€è¦å…³æ³¨è·¯å¾„æ¡ä»¶,å¦‚æœè·¯å¾„æ¡ä»¶ä¸­æ¶‰åŠå¯¹æ±¡æŸ“å˜é‡å–å€¼çš„é™åˆ¶,å¯è®¤ä¸ºè·¯å¾„æ¡ä»¶å¯¹æ±¡æŸ“æ•°æ®è¿›è¡Œäº†å‡€åŒ–,è¿˜å¯ä»¥å°†åˆ†æè·¯å¾„æ¡ä»¶å¯¹æ±¡æŸ“æ•°æ®çš„é™åˆ¶è¿›è¡Œè®°å½•,å¦‚æœåœ¨ä¸€æ¡ç¨‹åºè·¯å¾„ä¸Š,è¿™äº›é™åˆ¶è¶³å¤Ÿä¿è¯æ•°æ®ä¸ä¼šè¢«æ”»å‡»è€…åˆ©ç”¨,å°±å¯ä»¥å°†ç›¸åº”çš„å˜é‡æ ‡è®°ä¸ºæœªæ±¡æŸ“çš„.\n\nè¿‡ç¨‹é—´çš„åˆ†æä¸æ•°æ®æµè¿‡ç¨‹é—´åˆ†æç±»ä¼¼,ä½¿ç”¨è‡ªåº•å‘ä¸Šçš„åˆ†ææ–¹æ³•,åˆ†æè°ƒç”¨å›¾ä¸­çš„æ¯ä¸€ä¸ªè¿‡ç¨‹,è¿›è€Œå¯¹ç¨‹åºè¿›è¡Œæ•´ä½“çš„åˆ†æ.\n (2)åŸºäºä¾èµ–å…³ç³»çš„æ±¡ç‚¹åˆ†æ\nåœ¨åŸºäºä¾èµ–å…³ç³»çš„æ±¡ç‚¹åˆ†æä¸­,é¦–å…ˆåˆ©ç”¨ç¨‹åºçš„ä¸­é—´è¡¨ç¤ºã€æ§åˆ¶æµå›¾å’Œè¿‡ç¨‹è°ƒç”¨å›¾æ„é€ ç¨‹åºå®Œæ•´çš„æˆ–è€…å±€éƒ¨çš„ç¨‹åºçš„ä¾èµ–å…³ç³».åœ¨åˆ†æç¨‹åºä¾èµ–å…³ç³»å,æ ¹æ®æ±¡ç‚¹åˆ†æè§„åˆ™,æ£€æµ‹ Sink ç‚¹å¤„æ•æ„Ÿæ“ä½œæ˜¯å¦ä¾èµ–äº Source ç‚¹.\nåˆ†æç¨‹åºä¾èµ–å…³ç³»çš„è¿‡ç¨‹å¯ä»¥çœ‹åšæ˜¯æ„å»ºç¨‹åºä¾èµ–å›¾çš„è¿‡ç¨‹.ç¨‹åºä¾èµ–å›¾æ˜¯ä¸€ä¸ªæœ‰å‘å›¾.å®ƒçš„èŠ‚ç‚¹æ˜¯ç¨‹åºè¯­å¥,å®ƒçš„æœ‰å‘è¾¹è¡¨ç¤ºç¨‹åºè¯­å¥ä¹‹é—´çš„ä¾èµ–å…³ç³».ç¨‹åºä¾èµ–å›¾çš„æœ‰å‘è¾¹å¸¸å¸¸åŒ…æ‹¬æ•°æ®ä¾èµ–è¾¹å’Œæ§åˆ¶ä¾èµ–è¾¹.åœ¨æ„å»ºæœ‰ä¸€å®šè§„æ¨¡çš„ç¨‹åºçš„ä¾èµ–å›¾æ—¶,éœ€è¦æŒ‰éœ€åœ°æ„å»ºç¨‹åºä¾èµ–å…³ç³»,å¹¶ä¸”ä¼˜å…ˆè€ƒè™‘å’Œæ±¡ç‚¹ä¿¡æ¯ç›¸å…³çš„ç¨‹åºä»£ç .\n é™æ€æ±¡ç‚¹åˆ†æå®ä¾‹åˆ†æ\nåœ¨ä½¿ç”¨æ±¡ç‚¹åˆ†ææ–¹æ³•æ£€æµ‹ç¨‹åºæ¼æ´æ—¶,æ±¡ç‚¹æ•°æ®ç›¸å…³çš„ç¨‹åºæ¼æ´æ˜¯ä¸»è¦å…³æ³¨å¯¹è±¡,å¦‚ SQL æ³¨å…¥æ¼æ´ã€å‘½ä»¤æ³¨å…¥æ¼æ´å’Œè·¨ç«™è„šæœ¬æ¼æ´ç­‰.\nä¸‹é¢æ˜¯ä¸€ä¸ªå­˜åœ¨ SQL æ³¨å…¥æ¼æ´ ASP ç¨‹åºçš„ä¾‹å­ï¼š\n&lt;%\n    Set pwd &#x3D; &quot;bar&quot;\n    Set sql1 &#x3D; &quot;SELECT companyname FROM &quot; &amp; Request.Cookies(&quot;hello&quot;)\n    Set sql2 &#x3D; Request.QueryString(&quot;foo&quot;)\n    MySqlStuff pwd, sql1, sql2\n    Sub MySqlStuff(password, cmd1, cmd2)\n    Set conn &#x3D; Server.CreateObject(&quot;ADODB.Connection&quot;)\n    conn.Provider &#x3D; &quot;Microsoft.Jet.OLEDB.4.0&quot;\n    conn.Open &quot;c:&#x2F;webdata&#x2F;foo.mdb&quot;, &quot;foo&quot;, password\n    Set rs &#x3D; conn.Execute(cmd2)\n    Set rs &#x3D; Server.CreateObject(&quot;ADODB.recordset&quot;)\n    rs.Open cmd1, conn\n    End Sub\n%&gt;\né¦–å…ˆå¯¹è¿™æ®µä»£ç è¡¨ç¤ºä¸ºä¸€ç§ä¸‰åœ°å€ç çš„å½¢å¼,ä¾‹å¦‚ç¬¬ 3 è¡Œå¯ä»¥è¡¨ç¤ºä¸ºï¼š\na &#x3D; &quot;SELECT companyname FROM &quot;\nb &#x3D; &quot;hello&quot;\nparam0 Request\nparam1 b\ncallCookies\nreturn c\nsql1 &#x3D; a &amp; c\nè§£æå®Œæ¯•å,éœ€è¦å¯¹ç¨‹åºä»£ç è¿›è¡Œæ§åˆ¶æµåˆ†æ,è¿™é‡ŒåªåŒ…å«äº†ä¸€ä¸ªè°ƒç”¨å…³ç³»(ç¬¬ 5 è¡Œ).\nå…·ä½“çš„åˆ†æè¿‡ç¨‹å¦‚ä¸‹:\n\nè°ƒç”¨ Request.Cookies(â€œhelloâ€) çš„è¿”å›ç»“æœæ˜¯æ±¡æŸ“çš„,æ‰€ä»¥å˜é‡ sql1 ä¹Ÿæ˜¯æ±¡æŸ“çš„.\nè°ƒç”¨ Request.QueryString(â€œfooâ€) çš„è¿”å›ç»“æœ sql2 æ˜¯æ±¡æŸ“çš„.\nå‡½æ•° MySqlStuff è¢«è°ƒç”¨,å®ƒçš„å‚æ•° sql1,sql2 éƒ½æ˜¯æ±¡æŸ“çš„.åˆ†äº†åˆ†æå‡½æ•°çš„å¤„ç†è¿‡ç¨‹,æ ¹æ®ç¬¬ 6 è¡Œå‡½æ•°çš„å£°æ˜,æ ‡è®°å…¶å‚æ•° cmd1,cmd2 æ˜¯æ±¡æŸ“çš„.\nç¬¬ 10 è¡Œæ˜¯ç¨‹åºçš„ Sink ç‚¹,å‡½æ•° conn.Execute æ‰§è¡Œ SQL æ“ä½œ,å…¶å‚æ•° cmd2 æ˜¯æ±¡æŸ“çš„,è¿›è€Œå‘ç°æ±¡æŸ“æ•°æ®ä» Source ç‚¹ä¼ æ’­åˆ° Sink ç‚¹.å› æ­¤,è®¤ä¸ºç¨‹åºå­˜åœ¨ SQL æ³¨å…¥æ¼æ´\n\n 2.åŠ¨æ€æ±¡ç‚¹åˆ†æ\nåŠ¨æ€æ±¡ç‚¹åˆ†ææ˜¯åœ¨ç¨‹åºè¿è¡Œçš„åŸºç¡€ä¸Š,å¯¹æ•°æ®æµæˆ–æ§åˆ¶æµè¿›è¡Œç›‘æ§,ä»è€Œå®ç°å¯¹æ•°æ®åœ¨å†…å­˜ä¸­çš„æ˜¾å¼ä¼ æ’­ã€æ•°æ®è¯¯ç”¨ç­‰è¿›è¡Œè·Ÿè¸ªå’Œæ£€æµ‹.åŠ¨æ€æ±¡ç‚¹åˆ†æä¸é™æ€æ±¡ç‚¹åˆ†æçš„å”¯ä¸€åŒºåˆ«åœ¨äºé™æ€æ±¡ç‚¹åˆ†ææŠ€æœ¯åœ¨æ£€æµ‹æ—¶å¹¶ä¸çœŸæ­£è¿è¡Œç¨‹åº,è€Œæ˜¯é€šè¿‡æ¨¡æ‹Ÿç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹æ¥ä¼ æ’­æ±¡ç‚¹æ ‡è®°,è€ŒåŠ¨æ€æ±¡ç‚¹åˆ†ææŠ€æœ¯éœ€è¦è¿è¡Œç¨‹åº,åŒæ—¶å®æ—¶ä¼ æ’­å¹¶æ£€æµ‹æ±¡ç‚¹æ ‡è®°.\nåŠ¨æ€æ±¡ç‚¹åˆ†ææŠ€æœ¯å¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š\n\næ±¡ç‚¹æ•°æ®æ ‡è®°ï¼šç¨‹åºæ”»å‡»é¢æ˜¯ç¨‹åºæ¥å—è¾“å…¥æ•°æ®çš„æ¥å£é›†,ä¸€èˆ¬ç”±ç¨‹åºå…¥å£ç‚¹å’Œå¤–éƒ¨å‡½æ•°è°ƒç”¨ç»„æˆ.åœ¨æ±¡ç‚¹åˆ†æä¸­,æ¥è‡ªå¤–éƒ¨çš„è¾“å…¥æ•°æ®ä¼šè¢«æ ‡è®°ä¸ºæ±¡ç‚¹æ•°æ®.æ ¹æ®è¾“å…¥æ•°æ®æ¥æºçš„ä¸åŒ,å¯åˆ†ä¸ºä¸‰ç±»ï¼šç½‘ç»œè¾“å…¥ã€æ–‡ä»¶è¾“å…¥å’Œè¾“å…¥è®¾å¤‡è¾“å…¥.\næ±¡ç‚¹åŠ¨æ€è·Ÿè¸ªï¼šåœ¨æ±¡ç‚¹æ•°æ®æ ‡è®°çš„åŸºç¡€ä¸Š,å¯¹è¿›ç¨‹è¿›è¡ŒæŒ‡ä»¤ç²’åº¦çš„åŠ¨æ€è·Ÿè¸ªåˆ†æ,åˆ†ææ¯ä¸€æ¡æŒ‡ä»¤çš„æ•ˆæœ,ç›´è‡³è¦†ç›–æ•´ä¸ªç¨‹åºçš„è¿è¡Œè¿‡ç¨‹,è·Ÿè¸ªæ•°æ®æµçš„ä¼ æ’­.\n\nåŠ¨æ€æ±¡ç‚¹è·Ÿè¸ªé€šå¸¸åŸºäºä»¥ä¸‹ä¸‰ç§æœºåˆ¶\n\nåŠ¨æ€ä»£ç æ’æ¡©ï¼šå¯ä»¥è·Ÿè¸ªå•ä¸ªè¿›ç¨‹çš„æ±¡ç‚¹æ•°æ®æµåŠ¨,é€šè¿‡åœ¨è¢«åˆ†æç¨‹åºä¸­æ’å…¥åˆ†æä»£ç ,è·Ÿè¸ªæ±¡ç‚¹ä¿¡æ¯æµåœ¨è¿›ç¨‹ä¸­çš„æµåŠ¨æ–¹å‘.\nå…¨ç³»ç»Ÿæ¨¡æ‹Ÿï¼šåˆ©ç”¨å…¨ç³»ç»Ÿæ¨¡æ‹ŸæŠ€æœ¯,åˆ†ææ¨¡æ‹Ÿç³»ç»Ÿä¸­æ¯æ¡æŒ‡ä»¤çš„æ±¡ç‚¹ä¿¡æ¯æ‰©æ•£è·¯å¾„,å¯ä»¥è·Ÿè¸ªæ±¡ç‚¹æ•°æ®åœ¨æ“ä½œç³»ç»Ÿå†…çš„æµåŠ¨.\nè™šæ‹Ÿæœºç›‘è§†å™¨ï¼šé€šè¿‡åœ¨è™šæ‹Ÿæœºç›‘è§†å™¨ä¸­å¢åŠ åˆ†ææ±¡ç‚¹ä¿¡æ¯æµçš„åŠŸèƒ½,è·Ÿè¸ªæ±¡ç‚¹æ•°æ®åœ¨æ•´ä¸ªå®¢æˆ·æœºä¸­å„ä¸ªè™šæ‹Ÿæœºä¹‹é—´çš„æµåŠ¨.\n\n\næ±¡ç‚¹åŠ¨æ€è·Ÿè¸ªé€šå¸¸éœ€è¦å½±å­å†…å­˜(shadow memory)æ¥æ˜ å°„å®é™…å†…å­˜çš„æ±¡æŸ“æƒ…å†µ,ä»è€Œè®°å½•å†…å­˜åŒºåŸŸå’Œå¯„å­˜å™¨æ˜¯å¦æ˜¯è¢«æ±¡æŸ“çš„.å¯¹æ¯æ¡è¯­å¥è¿›è¡Œåˆ†æçš„è¿‡ç¨‹ä¸­,æ±¡ç‚¹è·Ÿè¸ªæ”»å‡»æ ¹æ®å½±å­å†…å­˜åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ±¡ç‚¹ä¿¡æ¯çš„ä¼ æ’­,ä»è€Œå¯¹æ±¡ç‚¹ä¿¡æ¯è¿›è¡Œä¼ æ’­å¹¶å°†ä¼ æ’­ç»“æœä¿å­˜äºå½±å­å†…å­˜ä¸­,è¿›è€Œè¿½è¸ªæ±¡ç‚¹æ•°æ®çš„æµå‘.\nä¸€èˆ¬æƒ…å†µä¸‹,æ•°æ®ç§»åŠ¨ç±»å’Œç®—æ•°ç±»æŒ‡ä»¤éƒ½å°†é€ æˆæ˜¾ç¤ºçš„ä¿¡æ¯æµä¼ æ’­.ä¸ºäº†è·Ÿè¸ªæ±¡ç‚¹æ•°æ®çš„æ˜¾ç¤ºä¼ æ’­,éœ€è¦åœ¨æ¯ä¸ªæ•°æ®ç§»åŠ¨æŒ‡ä»¤å’Œç®—æ•°æŒ‡ä»¤æ‰§è¡Œå‰åšç›‘æ§,å½“æŒ‡ä»¤çš„ç»“æœè¢«å…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°æ±¡æŸ“å,æŠŠç»“æœæ•°æ®å¯¹åº”çš„å½±å­å†…å­˜è®¾ç½®ä¸ºä¸€ä¸ªæŒ‡é’ˆ,æŒ‡å‘æºæ±¡æŸ“ç‚¹æ“ä½œæ•°æŒ‡å‘çš„æ•°æ®ç»“æ„.\n\n\næ±¡ç‚¹è¯¯ç”¨æ£€æŸ¥ï¼šåœ¨æ­£ç¡®æ ‡è®°æ±¡ç‚¹æ•°æ®å¹¶å¯¹æ±¡ç‚¹æ•°æ®çš„ä¼ æ’­è¿›è¡Œå®æ—¶è·Ÿè¸ªå,å°±éœ€è¦å¯¹æ”»å‡»åšå‡ºæ­£ç¡®çš„æ£€æµ‹å³æ£€æµ‹æ±¡ç‚¹æ•°æ®æ˜¯å¦æœ‰éæ³•ä½¿ç”¨çš„æƒ…å†µ.\n\nåŠ¨æ€æ±¡ç‚¹åˆ†æçš„ä¼˜ç¼ºç‚¹ï¼š\n\nä¼˜ç‚¹ï¼šè¯¯æŠ¥ç‡è¾ƒä½,æ£€æµ‹ç»“æœçš„å¯ä¿¡åº¦è¾ƒé«˜.\nç¼ºç‚¹ï¼š\n\næ¼æŠ¥ç‡è¾ƒé«˜ï¼šç”±äºç¨‹åºåŠ¨æ€è¿è¡Œæ—¶çš„ä»£ç è¦†ç›–ç‡å†³å®šçš„.\nå¹³å°ç›¸å…³æ€§è¾ƒé«˜ï¼šç‰¹å®šçš„åŠ¨æ€æ±¡ç‚¹åˆ†æå·¥å…·åªèƒ½å¤Ÿè§£å†³åœ¨ç‰¹å®šå¹³å°ä¸Šè¿è¡Œçš„ç¨‹åº.\nèµ„æºæ¶ˆè€—å¤§ï¼šåŒ…æ‹¬ç©ºé—´ä¸Šå’Œæ—¶é—´ä¸Š.\n\n\n\n åŠ¨æ€æ±¡ç‚¹åˆ†æçš„æ–¹æ³•å®ç°\n (1)æ±¡ç‚¹æ•°æ®æ ‡è®°\næ±¡ç‚¹æ•°æ®é€šå¸¸ä¸»è¦æ˜¯æŒ‡è½¯ä»¶ç³»ç»Ÿæ‰€æ¥å—çš„å¤–éƒ¨è¾“å…¥æ•°æ®,åœ¨è®¡ç®—æœºä¸­,è¿™äº›æ•°æ®å¯èƒ½ä»¥å†…å­˜ä¸´æ—¶æ•°æ®çš„å½¢å¼å­˜å‚¨,ä¹Ÿå¯èƒ½ä»¥æ–‡ä»¶çš„å½¢å¼å­˜å‚¨.å½“ç¨‹åºéœ€è¦ä½¿ç”¨è¿™äº›æ•°æ®æ—¶,ä¸€èˆ¬é€šè¿‡å‡½æ•°æˆ–ç³»ç»Ÿè°ƒç”¨æ¥è¿›è¡Œæ•°æ®è®¿é—®å’Œå¤„ç†,å› æ­¤åªéœ€è¦å¯¹è¿™äº›å…³é”®å‡½æ•°è¿›è¡Œç›‘æ§,å³å¯å¾—åˆ°ç¨‹åºè¯»å–æˆ–è¾“å‡ºäº†ä»€ä¹ˆæ±¡ç‚¹ä¿¡æ¯.å¦å¤–å¯¹äºç½‘ç»œè¾“å…¥,ä¹Ÿéœ€è¦å¯¹ç½‘ç»œæ“ä½œå‡½æ•°è¿›è¡Œç›‘æ§.\nè¯†åˆ«å‡ºæ±¡ç‚¹æ•°æ®å,éœ€è¦å¯¹æ±¡ç‚¹è¿›è¡Œæ ‡è®°.æ±¡ç‚¹ç”Ÿå‘½å‘¨æœŸæ˜¯æŒ‡åœ¨è¯¥ç”Ÿå‘½å‘¨æœŸçš„æ—¶é—´èŒƒå›´å†…,æ±¡ç‚¹è¢«å®šä¹‰ä¸ºæœ‰æ•ˆ.æ±¡ç‚¹ç”Ÿå‘½å‘¨æœŸå¼€å§‹äºæ±¡ç‚¹åˆ›å»ºæ—¶åˆ»,ç”Ÿæˆæ±¡ç‚¹æ ‡è®°,ç»“æŸäºæ±¡ç‚¹åˆ é™¤æ—¶åˆ»,æ¸…é™¤æ±¡ç‚¹æ ‡è®°.\n\næ±¡ç‚¹åˆ›å»º\n\nå°†æ¥è‡ªäºéå¯é æ¥æºçš„æ•°æ®åˆ†é…ç»™æŸå¯„å­˜å™¨æˆ–å†…å­˜æ“ä½œæ•°æ—¶\nå°†å·²ç»æ ‡è®°ä¸ºæ±¡ç‚¹çš„æ•°æ®é€šè¿‡è¿ç®—åˆ†é…ç»™æŸå¯„å­˜å™¨æˆ–å†…å­˜æ“ä½œæ•°æ—¶\n\n\næ±¡ç‚¹åˆ é™¤\n\nå°†éæ±¡ç‚¹æ•°æ®æŒ‡æ´¾ç»™å­˜æ”¾æ±¡ç‚¹çš„å¯„å­˜å™¨æˆ–å†…å­˜æ“ä½œæ•°æ—¶\nå°†æ±¡ç‚¹æ•°æ®æŒ‡æ´¾ç»™å­˜æ”¾æ±¡ç‚¹çš„å¯„å­˜å™¨æˆ–å†…å­˜åœ°å€æ—¶,æ­¤æ—¶ä¼šåˆ é™¤åŸæ±¡ç‚¹,å¹¶åˆ›å»ºæ–°æ±¡ç‚¹\nä¸€äº›ä¼šæ¸…é™¤æ±¡ç‚¹ç—•è¿¹çš„ç®—æ•°è¿ç®—æˆ–é€»è¾‘è¿ç®—æ“ä½œæ—¶\n\n\n\n (2)æ±¡ç‚¹åŠ¨æ€è·Ÿè¸ª\nå½“æ±¡ç‚¹æ•°æ®ä»ä¸€ä¸ªä½ç½®ä¼ é€’åˆ°å¦ä¸€ä¸ªä½ç½®æ—¶,åˆ™è®¤ä¸ºäº§ç”Ÿäº†æ±¡ç‚¹ä¼ æ’­.æ±¡ç‚¹ä¼ æ’­è§„åˆ™ï¼š\n\n\n\næŒ‡ä»¤ç±»å‹\nä¼ æ’­è§„åˆ™\nä¸¾ä¾‹è¯´æ˜\n\n\n\n\næ‹·è´æˆ–ç§»åŠ¨æŒ‡ä»¤\nT(a)&lt;-T(b)\nmov a, b\n\n\nç®—æ•°è¿ç®—æŒ‡ä»¤\nT(a)&lt;-T(b)\nadd a, b\n\n\nå †æ ˆæ“ä½œæŒ‡ä»¤\nT(esp)&lt;-T(a)\npush a\n\n\næ‹·è´æˆ–ç§»åŠ¨ç±»å‡½æ•°è°ƒç”¨æŒ‡ä»¤\nT(dst)&lt;-T(src)\ncall memcpy\n\n\næ¸…é›¶æŒ‡ä»¤\nT(a)&lt;-false\nxor a, a\n\n\n\næ³¨ï¼šT(x) çš„å–å€¼åˆ†ä¸º true å’Œ false ä¸¤ç§,å–å€¼ä¸º true æ—¶è¡¨ç¤º x ä¸ºæ±¡ç‚¹,å¦åˆ™ x ä¸æ˜¯æ±¡ç‚¹.\nå¯¹äºæ±¡ç‚¹ä¿¡æ¯æµ,é€šè¿‡æ±¡ç‚¹è·Ÿè¸ªå’Œå‡½æ•°ç›‘æ§,å·²ç»èƒ½å¤Ÿè¿›è¡Œæ±¡ç‚¹ä¿¡æ¯æµæµåŠ¨æ–¹å‘çš„åˆ†æ.ä½†ç”±äºç¼ºå°‘å¯¹è±¡çº§çš„ä¿¡æ¯,ä»…é æŒ‡ä»¤çº§çš„ä¿¡æ¯æµåŠ¨å¹¶ä¸èƒ½å®Œå…¨ç»™å‡ºè¦åˆ†æçš„è½¯ä»¶çš„ç¡®åˆ‡è¡Œä¸º.å› æ­¤,éœ€è¦åœ¨å‡½æ•°ç›‘æ§çš„åŸºç¡€ä¸Šè¿›è¡Œè§†å›¾é‡å»º,å¦‚è·å–æ–‡ä»¶å¯¹è±¡å’Œå¥—æ¥å­—å¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯,ä»¥æ–¹ä¾¿è¿›ä¸€æ­¥çš„åˆ†æå·¥ä½œ.\næ±¡ç‚¹åŠ¨æ€è·Ÿè¸ªçš„å®ç°é€šå¸¸ä½¿ç”¨ï¼š\n\nå½±å­å†…å­˜ï¼šçœŸå®å†…å­˜ä¸­æ±¡ç‚¹æ•°æ®çš„é•œåƒ,ç”¨äºå­˜æ”¾ç¨‹åºæ‰§è¡Œçš„å½“å‰æ—¶åˆ»æ‰€æœ‰çš„æœ‰æ•ˆæ±¡ç‚¹.\næ±¡ç‚¹ä¼ æ’­æ ‘ï¼šç”¨äºè¡¨ç¤ºæ±¡ç‚¹çš„ä¼ æ’­å…³ç³».\næ±¡ç‚¹å¤„ç†æŒ‡ä»¤é“¾ï¼šç”¨äºæŒ‰æ—¶é—´é¡ºåºå­˜å‚¨ä¸æ±¡ç‚¹æ•°æ®å¤„ç†ç›¸å…³çš„æ‰€æœ‰æŒ‡ä»¤.\n\nå½“é‡åˆ°ä¼šå¼•èµ·æ±¡ç‚¹ä¼ æ’­çš„æŒ‡ä»¤æ—¶,é¦–å…ˆå¯¹æŒ‡ä»¤ä¸­çš„æ¯ä¸ªæ“ä½œæ•°éƒ½é€šè¿‡æ±¡ç‚¹å¿«é€Ÿæ˜ å°„æŸ¥æ‰¾å½±å­å†…å­˜ä¸­æ˜¯å¦å­˜åœ¨ä¸ä¹‹å¯¹åº”çš„å½±å­æ±¡ç‚¹ä»è€Œç¡®å®šå…¶æ˜¯å¦ä¸ºæ±¡ç‚¹æ•°æ®,ç„¶åæ ¹æ®æ±¡ç‚¹ä¼ æ’­è§„åˆ™å¾—åˆ°è¯¥æŒ‡ä»¤å¼•èµ·çš„æ±¡ç‚¹ä¼ æ’­ç»“æœ,å¹¶å°†ä¼ æ’­äº§ç”Ÿçš„æ–°æ±¡ç‚¹æ·»åŠ åˆ°å½±å­å†…å­˜å’Œæ±¡ç‚¹ä¼ æ’­æ ‘ä¸­,åŒæ—¶å°†å¤±æ•ˆæ±¡ç‚¹å¯¹åº”çš„å½±å­æ±¡ç‚¹åˆ é™¤.åŒæ—¶ç”±äºä¸€æ¡æŒ‡ä»¤æ˜¯å¦æ¶‰åŠæ±¡ç‚¹æ•°æ®çš„å¤„ç†,éœ€è¦åœ¨æ±¡ç‚¹åˆ†æè¿‡ç¨‹ä¸­åŠ¨æ€ç¡®å®š,å› æ­¤éœ€è¦åœ¨æ±¡ç‚¹å¤„ç†æŒ‡ä»¤é“¾ä¸­è®°å½•æ±¡ç‚¹æ•°æ®çš„æŒ‡ä»¤ä¿¡æ¯.\n (3)æ±¡ç‚¹è¯¯ç”¨æ£€æŸ¥\næ±¡ç‚¹æ•æ„Ÿç‚¹,å³ Sink ç‚¹,æ˜¯æ±¡ç‚¹æ•°æ®æœ‰å¯èƒ½è¢«è¯¯ç”¨çš„æŒ‡ä»¤æˆ–ç³»ç»Ÿè°ƒç”¨ç‚¹,ä¸»è¦åˆ†ä¸ºï¼š\n\nè·³è½¬åœ°å€ï¼šæ£€æŸ¥æ±¡ç‚¹æ•°æ®æ˜¯å¦ç”¨äºè·³è½¬å¯¹è±¡,å¦‚è¿”å›åœ°å€ã€å‡½æ•°æŒ‡é’ˆã€å‡½æ•°æŒ‡é’ˆåç§»ç­‰.å…·ä½“æ“ä½œæ˜¯åœ¨æ¯ä¸ªè·³è½¬ç±»æŒ‡ä»¤(å¦‚callã€retã€jmpç­‰)æ‰§è¡Œå‰è¿›è¡Œç›‘æ§åˆ†æ,ä¿è¯è·³è½¬å¯¹è±¡ä¸æ˜¯æ±¡ç‚¹æ•°æ®æ‰€åœ¨çš„å†…å­˜åœ°å€.\næ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼šæ£€æŸ¥æ±¡ç‚¹æ•°æ®æ˜¯å¦ç”¨ä½œprintfç³»åˆ—å‡½æ•°çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²å‚æ•°.\nç³»ç»Ÿè°ƒç”¨å‚æ•°ï¼šæ£€æŸ¥ç‰¹æ®Šç³»ç»Ÿè°ƒç”¨çš„ç‰¹æ®Šå‚æ•°æ˜¯å¦ä¸ºæ±¡ç‚¹æ•°æ®.\næ ‡å¿—ä½ï¼šè·Ÿè¸ªæ ‡å¿—ä½æ˜¯å¦è¢«æ„ŸæŸ“,åŠè¢«æ„ŸæŸ“çš„æ ‡å¿—ä½æ˜¯å¦ç”¨äºæ”¹å˜ç¨‹åºæ§åˆ¶æµ.\nåœ°å€ï¼šæ£€æŸ¥æ•°æ®ç§»åŠ¨ç±»æŒ‡ä»¤çš„åœ°å€æ˜¯å¦è¢«æ„ŸæŸ“.\n\næ ¹æ®sink å‡ºç°çš„è¯¯ç”¨æƒ…å†µ,ç¡®å®šæ±¡ç‚¹çš„æ¼æ´ç±»å‹.å³åœ¨è¿›è¡Œæ±¡ç‚¹è¯¯ç”¨æ£€æŸ¥æ—¶,é€šå¸¸éœ€è¦æ ¹æ®ä¸€äº›æ¼æ´æ¨¡å¼æ¥è¿›è¡Œæ£€æŸ¥,é¦–å…ˆéœ€è¦æ˜ç¡®å¸¸è§æ¼æ´åœ¨äºŒè¿›åˆ¶ä»£ç ä¸Šçš„è¡¨ç°å½¢å¼,ç„¶åå°†å…¶æç‚¼æˆæ¼æ´æ¨¡å¼,ä»¥æ›´æœ‰æ•ˆåœ°æŒ‡å¯¼è‡ªåŠ¨åŒ–çš„å®‰å…¨åˆ†æ.\n åŠ¨æ€æ±¡ç‚¹åˆ†æçš„å®ä¾‹åˆ†æ\nä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä½¿ç”¨åŠ¨æ€æ±¡ç‚¹åˆ†æçš„æ–¹æ³•æ£€æµ‹ç¼“å†²åŒºæº¢å‡ºæ¼æ´çš„ä¾‹å­.\nvoid fun(char *str)\n&#123;\n    char temp[15];\n    printf(\"in strncpy, source: %s\\n\", str);\n    strncpy(temp, str, strlen(str));        // Sink ç‚¹\n&#125;\nint main(int argc, char *argv[])\n&#123;\n    char source[30];\n    gets(source);                           // Source ç‚¹\n    if (strlen(source) &lt; 30)\n        fun(source);\n    else\n        printf(\"too long string, %s\\n\", source);\n    return 0;\n&#125;\næ¼æ´å¾ˆæ˜æ˜¾, è°ƒç”¨ strncpy å‡½æ•°å­˜åœ¨ç¼“å†²åŒºæº¢å‡º.\nç¨‹åºæ¥å—å¤–éƒ¨è¾“å…¥å­—ç¬¦ä¸²çš„äºŒè¿›åˆ¶ä»£ç å¦‚ä¸‹ï¼š\n0x08048609 &lt;+51&gt;:    lea    eax,[ebp-0x2a]\n0x0804860c &lt;+54&gt;:    push   eax\n0x0804860d &lt;+55&gt;:    call   0x8048400 &lt;gets@plt&gt;\n...\n0x0804862c &lt;+86&gt;:    lea    eax,[ebp-0x2a]\n0x0804862f &lt;+89&gt;:    push   eax\n0x08048630 &lt;+90&gt;:    call   0x8048566 &lt;fun&gt;\nç¨‹åºè°ƒç”¨ strncpy å‡½æ•°çš„äºŒè¿›åˆ¶ä»£ç å¦‚ä¸‹ï¼š\n0x080485a1 &lt;+59&gt;:    push   DWORD PTR [ebp-0x2c]\n0x080485a4 &lt;+62&gt;:    call   0x8048420 &lt;strlen@plt&gt;\n0x080485a9 &lt;+67&gt;:    add    esp,0x10\n0x080485ac &lt;+70&gt;:    sub    esp,0x4\n0x080485af &lt;+73&gt;:    push   eax\n0x080485b0 &lt;+74&gt;:    push   DWORD PTR [ebp-0x2c]\n0x080485b3 &lt;+77&gt;:    lea    eax,[ebp-0x1b]\n0x080485b6 &lt;+80&gt;:    push   eax\n0x080485b7 &lt;+81&gt;:    call   0x8048440 &lt;strncpy@plt&gt;\né¦–å…ˆ,åœ¨æ‰«æè¯¥ç¨‹åºçš„äºŒè¿›åˆ¶ä»£ç æ—¶,èƒ½å¤Ÿæ‰«æåˆ° call &lt;gets@plt&gt;,è¯¥å‡½æ•°ä¼šè¯»å…¥å¤–éƒ¨è¾“å…¥,å³ç¨‹åºçš„æ”»å‡»é¢.ç¡®å®šäº†æ”»å‡»é¢å,æˆ‘ä»¬å°†åˆ†ææ±¡æŸ“æºæ•°æ®å¹¶è¿›è¡Œæ ‡è®°,å³å°† [ebp-0x2a] æ•°ç»„(å³æºç¨‹åºä¸­çš„source)æ ‡è®°ä¸ºæ±¡ç‚¹æ•°æ®.ç¨‹åºç»§ç»­æ‰§è¡Œ,è¯¥æ±¡æŸ“æ ‡è®°ä¼šéšç€è¯¥å€¼çš„ä¼ æ’­è€Œä¸€ç›´ä¼ é€’.åœ¨è¿›å…¥ fun() å‡½æ•°æ—¶,è¯¥æ±¡æŸ“æ ‡è®°é€šè¿‡å½¢å‚å®å‚çš„æ˜ å°„ä¼ é€’åˆ°å‚æ•° str ä¸Š.ç„¶åè¿è¡Œåˆ° Sink ç‚¹å‡½æ•° strncpy().è¯¥å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°å³ str å’Œ ç¬¬ä¸‰ä¸ªå‚æ•° strlen(str) éƒ½æ˜¯æ±¡ç‚¹æ•°æ®.æœ€ååœ¨æ‰§è¡Œ strncpy() å‡½æ•°æ—¶,è‹¥è®¾å®šäº†ç›¸åº”çš„æ¼æ´è§„åˆ™(ç›®æ ‡æ•°ç»„å°äºæºæ•°ç»„),åˆ™æ¼æ´è§„åˆ™å°†è¢«è§¦å‘,æ£€æµ‹å‡ºç¼“å†²åŒºæº¢å‡ºæ¼æ´.\n 0x4 æ±¡ç‚¹åˆ†æåœ¨å®é™…åº”ç”¨ä¸­çš„å…³é”®æŠ€æœ¯\næ±¡ç‚¹åˆ†æè¢«å¹¿æ³›åœ°åº”ç”¨åœ¨ç³»ç»Ÿéšç§æ•°æ®æ³„éœ²ã€å®‰å…¨æ¼æ´ç­‰é—®é¢˜çš„æ£€æµ‹ä¸­.åœ¨å®é™…åº”ç”¨è¿‡ç¨‹ä¸­,ç”±äºç³»ç»Ÿæ¡†æ¶ã€è¯­è¨€ç‰¹æ€§ç­‰æ–¹é¢çš„å·®å¼‚,é€šç”¨çš„æ±¡ç‚¹åˆ†ææŠ€æœ¯å¾€å¾€éš¾ä»¥é€‚ç”¨.æ¯”å¦‚:ç³»ç»Ÿæ¡†æ¶çš„é«˜åº¦æ¨¡å—åŒ–ä»¥åŠå„æ¨¡å—ä¹‹é—´å¤æ‚çš„è°ƒç”¨å…³ç³»å¯¼è‡´æ±¡ç‚¹æºåˆ°æ±‡èšç‚¹çš„ä¼ æ’­è·¯å¾„å˜å¾—å¤æ‚ã€åºå¤§,é‡‡ç”¨é€šç”¨çš„æ±¡ç‚¹åˆ†ææŠ€æœ¯å¯èƒ½é¢ä¸´å¼€é”€éš¾ä»¥æ¥å—çš„é—®é¢˜;é€šç”¨çš„æ±¡ç‚¹åˆ†ææŠ€æœ¯å¯¹æ–°çš„è¯­è¨€ç‰¹æ€§æ”¯æŒæœ‰é™ç­‰.ä¸ºæ­¤,éœ€è¦é’ˆå¯¹ä¸åŒçš„åº”ç”¨åœºæ™¯,å¯¹é€šç”¨çš„æ±¡ç‚¹åˆ†ææŠ€æœ¯è¿›è¡Œæ‰©å±•æˆ–å®šåˆ¶.\næœ¬èŠ‚ä»¥ä¸¤ä¸ªä»£è¡¨æ€§çš„åº”ç”¨åœºæ™¯â€”â€”æ™ºèƒ½æ‰‹æœºçš„éšç§æ³„æ¼æ£€æµ‹å’ŒWebåº”ç”¨å®‰å…¨æ¼æ´æ£€æµ‹ä¸ºåˆ‡å…¥ç‚¹,æ€»ç»“è¿‘10å¹´æ¥æ±¡ç‚¹åˆ†ææŠ€æœ¯åœ¨ä¸Šè¿°é¢†åŸŸçš„åº”ç”¨å®è·µè¿‡ç¨‹ä¸­æ‰€é¢ä¸´çš„é—®é¢˜å’Œå…³é”®è§£å†³æŠ€æœ¯.\n 1.æ£€æµ‹æ™ºèƒ½æ‰‹æœºéšç§æ³„éœ²\né’ˆå¯¹Androidçš„æ±¡ç‚¹ä¼ æ’­åˆ†æä¹Ÿå›´ç»•ç»„ä»¶å±•å¼€,æŒ‰ç…§ä¼ æ’­å¯èƒ½é€šè¿‡çš„æ¨¡å—çš„ä¸åŒ,åˆ†ä¸ºç»„ä»¶å†…æ±¡ç‚¹ä¼ æ’­ã€ç»„ä»¶é—´æ±¡ç‚¹ä¼ æ’­ã€ç»„ä»¶ä¸åº“å‡½æ•°ä¹‹é—´çš„æ±¡ç‚¹ä¼ æ’­è¿™3ç±»(å¦‚å›¾7æ‰€ç¤º).æ¥ä¸‹æ¥å°†åˆ†åˆ«ä»‹ç»é’ˆå¯¹è¿™3ç±»ä¼ æ’­é—®é¢˜çš„é™æ€å’ŒåŠ¨æ€æ±¡ç‚¹ä¼ æ’­åˆ†ææŠ€æœ¯.\n\n 1.é™æ€æ±¡ç‚¹åˆ†æ\n (1)ç»„ä»¶å†…æ±¡ç‚¹ä¼ æ’­åˆ†æ\nç»„ä»¶å†…éƒ¨æ±¡ç‚¹åˆ†æé¢ä¸´çš„ä¸»è¦é—®é¢˜æ˜¯å¦‚ä½•æ„å»ºå®Œæ•´çš„åˆ†ææ¨¡å‹.ä¸åŒäºä¼ ç»Ÿçš„C/C++ç¨‹åº(æœ‰å”¯ä¸€çš„Mainå‡½æ•°å…¥å£),Androidåº”ç”¨ç¨‹åºå­˜åœ¨æœ‰å¤šä¸ªå…¥å£å‡½æ•°çš„æƒ…å†µ.è¿™ä¸ªæƒ…å†µæºäºAndroidåº”ç”¨ç¨‹åºå¤æ‚çš„è¿è¡Œç”Ÿå‘½å‘¨æœŸ(ä¾‹å¦‚onCreate,onStart,onResume,onPauseç­‰)ä»¥åŠç¨‹åºä¸­å¤§é‡å­˜åœ¨çš„å›è°ƒå‡½æ•°å’Œå¼‚æ­¥å‡½æ•°è°ƒç”¨.ç”±äºä»»ä½•çš„ç¨‹åºå…¥å£éƒ½æœ‰å¯èƒ½æ˜¯éšç§æ•°æ®çš„æ¥æº,åœ¨é™æ€çš„æ±¡ç‚¹åˆ†æå¼€å§‹ä¹‹å‰å¿…é¡»æ„å»ºå®Œæ•´çš„åº”ç”¨ç¨‹åºæ¨¡å‹,ä»¥ç¡®ä¿ç¨‹åºä¸­æ¯ä¸€ç§å¯èƒ½çš„æ‰§è¡Œè·¯å¾„éƒ½ä¼šè¢«é™æ€æ±¡ç‚¹ä¼ æ’­åˆ†æè¦†ç›–åˆ°.\nLeakMiner[14]å’ŒCHEX[15]å°è¯•ä½¿ç”¨å¢é‡çš„æ–¹æ³•æ„å»ºç³»ç»Ÿè°ƒç”¨å›¾.\nArztç­‰äººè®¾è®¡çš„FlowDroid[13]æå‡ºäº†ä¸€ç§æ›´ç³»ç»Ÿçš„æ„å»ºAndroidç¨‹åºå®Œæ•´åˆ†ææ¨¡å‹çš„æ–¹æ³•:é¦–å…ˆ,é€šè¿‡XMLé…ç½®æ–‡ä»¶æå–ä¸Androidç”Ÿå‘½å‘¨æœŸç›¸å…³çš„å…¥å£å‡½æ•°,å°†è¿™äº›æ–¹æ³•ä½œä¸ºèŠ‚ç‚¹,å¹¶æ ¹æ®Androidç”Ÿå‘½å‘¨æœŸæ„å»ºè°ƒç”¨å›¾(å¦‚å›¾8æ‰€ç¤º);å…¶æ¬¡,å¯¹äºç”Ÿå‘½å‘¨æœŸå†…çš„å›è°ƒå‡½æ•°,åœ¨è¯¥è°ƒç”¨å›¾çš„åŸºç¡€ä¸Šå¢åŠ ä¸é€æ˜è°“è¯èŠ‚ç‚¹(å³å›¾8ä¸­è±å½¢çš„PèŠ‚ç‚¹);ç„¶å,å¢é‡å¼åœ°å°†å›è°ƒå‡½æ•°åŠ å…¥è¿™ä¸ªå‡½æ•°è°ƒç”¨å›¾;æœ€å,å°†è°ƒç”¨å›¾ä¸Šæ‰€æœ‰çš„æ‰§è¡Œå…¥å£è¿æ¥åˆ°ä¸€ä¸ªè™šå‡çš„Mainå‡½æ•°ä¸Š.FlowDroidä¸­çš„ä¸€æ¬¡åˆæ³•çš„æ‰§è¡Œ,å°±æ˜¯å¯¹è°ƒç”¨å›¾è¿›è¡Œçš„ä¸€æ¬¡éå†.\n\nGordonç­‰äºº[12]æå‡ºçš„DroidSafeä½¿ç”¨Androidè®¾å¤‡å®ç°(Android device implementation)æ¥æ„å»ºAndroidçš„å®Œæ•´åˆ†ææ¨¡å‹.Androidè®¾å¤‡å®ç°æ˜¯å¯¹Androidè¿è¡Œç¯å¢ƒçš„ä¸€ä¸ªç®€å•æ¨¡æ‹Ÿ,å®ƒä½¿ç”¨Javaè¯­è¨€,ç»“åˆAndroid Open Source Porject(AOSP),å®ç°äº†ä¸åŸAndroidæ¥å£è¯­ä¹‰ç­‰ä»·çš„æ¨¡å‹,å¹¶ä½¿ç”¨ç²¾ç¡®åˆ†æå­˜æ ¹(accurate analysis stub)å°†AOSPä»£ç ä¹‹å¤–çš„å‡½æ•°åŠ å…¥åˆ°æ¨¡å‹ä¸­.\n (2)ç»„ä»¶é—´æ±¡ç‚¹ä¼ æ’­åˆ†æ\nå³ä½¿æ­£ç¡®åˆ†æäº†ç»„ä»¶å†…çš„æ•°æ®æµå…³ç³»,æ±¡ç‚¹æ•°æ®ä»ç„¶å¯èƒ½é€šè¿‡ç»„ä»¶é—´çš„æ•°æ®æµæ¥ä¼ é€’,ä»è€Œé€ æˆä¿¡æ¯æ³„éœ².å¦‚ä¸Šå›¾7å·¦ä¾§æ‰€ç¤º,å³ä½¿ä¿è¯äº†å¯¹ç»„ä»¶Aå†…éƒ¨æ±¡ç‚¹ä¼ æ’­çš„ç²¾ç¡®åˆ†æ,ç»„ä»¶Aä»ç„¶å¯èƒ½é€šè¿‡è°ƒç”¨æ–¹æ³•startActivityforResult()å°†ä¿¡æ¯ä¼ é€’ç»™ç»„ä»¶B,å†é€šè¿‡ç»„ä»¶Bäº§ç”Ÿæ³„éœ².å› æ­¤,é’ˆå¯¹Androidåº”ç”¨çš„æ±¡ç‚¹åˆ†æè¿˜éœ€è¦åˆ†æå‡ºç»„ä»¶é—´æ‰€æœ‰å¯èƒ½çš„æ•°æ®æµä¿¡æ¯.ç»„ä»¶é—´é€šä¿¡æ˜¯é€šè¿‡ç»„ä»¶å‘é€Intentæ¶ˆæ¯å¯¹è±¡å®Œæˆçš„.IntentæŒ‰ç…§å‚æ•°å­—æ®µæ˜¯å¦åŒ…å«ç›®æ ‡ç»„ä»¶åç§°åˆ†ä¸ºæ˜¾å¼Intentå’Œéšå¼Intent.å¦‚å›¾9æ‰€ç¤º:æ˜¾å¼Intentå¯¹è±¡ä½¿ç”¨ä¸€ä¸ªåŒ…å«ç›®æ ‡ç»„ä»¶åç§°çš„å‚æ•°æ˜¾å¼åœ°æŒ‡å®šé€šä¿¡çš„ä¸‹ä¸€ä¸ªç»„ä»¶;éšå¼Intentä½¿ç”¨action,categoryç­‰åŸŸéšå¼åœ°è®©Androidç³»ç»Ÿé€šè¿‡Intent Filterè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªç»„ä»¶è°ƒç”¨.ç›®å‰,è§£å†³è¯¥é—®é¢˜çš„ä¸»è¦æ€æƒ³æ˜¯åˆ©ç”¨Intentå‚æ•°ä¿¡æ¯åˆ†æç»„ä»¶é—´çš„æ•°æ®æµ.\n\nè§£å†³ç»„ä»¶é—´æ•°æ®æµçš„å‰ææ˜¯è§£æIntentçš„ç›®çš„åœ°,è§£æIntentç›®çš„åœ°åŒ…æ‹¬è§£ææ˜¾å¼Intentçš„ç›®çš„åœ°å’Œéšå¼Intentçš„ç›®çš„åœ°.ç”±äºæ˜¾å¼Intentçš„ç›®çš„åœ°å¯ä»¥ç›´æ¥é€šè¿‡åˆå§‹åŒ–Intentçš„åœ°å€å­—ç¬¦ä¸²å‚æ•°è·å¾—,ç›®å‰,è§£ææ˜¾å¼Intentç›®çš„åœ°çš„å¸¸ç”¨æ–¹æ³•æ˜¯ä½¿ç”¨å­—ç¬¦ä¸²åˆ†æå·¥å…·(ä¾‹å¦‚JSA[84])æå–Intentä¸­å­—ç¬¦ä¸²å‚æ•°çš„ä¿¡æ¯.\nè§£æéšå¼Intentç›®çš„åœ°çš„ä¸»è¦æ–¹æ³•æ˜¯åˆ†æé…ç½®æ–‡ä»¶ä¿¡æ¯ä¸Intent Filteræ³¨å†Œå™¨ä¹‹é—´çš„æ˜ å°„å…³ç³»,å»ºç«‹å‘é€Intentç»„ä»¶å’Œæ¥å—Intentç»„ä»¶ä¹‹é—´çš„é…å¯¹å…³ç³».åœ¨è§£æå‡ºIntentç›®çš„åœ°ä¹‹å,é—®é¢˜çš„é‡ç‚¹è½¬ç§»åˆ°å¦‚ä½•æé«˜ç»„ä»¶é—´æ•°æ®æµåˆ†æçš„ç²¾åº¦ä¸Š.\nKlieberç­‰äºº[17]å°è¯•åœ¨å·²ç»å»ºç«‹å¥½çš„ç»„ä»¶å†…æ±¡ç‚¹åˆ†æçš„åŸºç¡€ä¸Š,ç»“åˆæ¨å¯¼è§„åˆ™æ¥åˆ†æç»„ä»¶é—´æ•°æ®æµ.åœ¨åˆ†æä¹‹å‰,éœ€è¦æ”¶é›†ç»„ä»¶å†…éƒ¨çš„æ±¡ç‚¹æºå’Œæ±‡èšç‚¹ä»¥åŠç»„ä»¶å†…Intentçš„å‘é€ç›®çš„åœ°æ ‡ç­¾ç­‰ä¿¡æ¯.è¡¨4å’Œè¡¨5ç»™å‡ºäº†æ¨å¯¼è§„åˆ™çš„å‰æå®šä¹‰å’Œå…·ä½“çš„æ¨å¯¼è§„åˆ™,å…¶ä¸­,ä¸€æ¬¡å®Œæ•´çš„åˆ†ææ˜¯æŒ‡æ ¹æ®å·²çŸ¥ç»„ä»¶å†…éƒ¨çš„ä¿¡æ¯srcâ†’sinksrcâ†’sinksrcâ†’sinkä»¥åŠæ¨å¯¼è§„åˆ™è¯†åˆ«æ‰€æœ‰srcâ€²â†’sinkâ€²srcâ€²â†’sinkâ€²srcâ€²â†’sinkâ€²çš„æµé›†åˆ.\nOcteauç­‰äºº[18]å°è¯•ä½¿ç”¨ç°æœ‰çš„ç¨‹åºåˆ†ææ–¹æ³•æé«˜ç»„ä»¶é—´æ•°æ®æµåˆ†æçš„ç²¾åº¦,ä»–ä»¬å°†ç»„ä»¶é—´æ•°æ®æµåˆ†æé—®é¢˜è½¬åŒ–æˆIDE(interprocedural  distributive environment)é—®é¢˜[58]è¿›è¡Œæ±‚è§£.DroidSafeè®¾è®¡äº†ä¸€ç§å¯¹è±¡æ•æ„Ÿçš„åˆ«ååˆ†ææŠ€æœ¯,åœ¨æ­¤åŸºç¡€ä¸Šæä¾›çš„ç²¾åº¦ä¼˜åŒ–æ–¹æ³•åŒ…æ‹¬:æå–Intentçš„ç›®çš„åœ°çš„å­—ç¬¦ä¸²å‚æ•°ã€å°†Intentç›®çš„åœ°çš„åˆå§‹åŒ–å‡½æ•°åµŒå…¥åˆ°ç›®çš„ç»„ä»¶å½“ä¸­ä»¥æé«˜åˆ«ååˆ†æçš„ç²¾åº¦,åŒæ—¶,å¢åŠ å¤„ç†Android Serviceçš„æ”¯æŒ.\n\n\n (3)ç»„ä»¶ä¸åº“å‡½æ•°ä¹‹é—´çš„æ±¡ç‚¹ä¼ æ’­åˆ†æ\nç»„ä»¶ä¸åº“å‡½æ•°ä¹‹é—´çš„æ±¡ç‚¹ä¼ æ’­åˆ†æé¢ä¸´çš„ä¸»è¦é—®é¢˜åŒ…æ‹¬å¯¹Androidåº“å‡½æ•°è‡ªèº«åºå¤§çš„ä»£ç é‡çš„åˆ†æä»¥åŠç»„ä»¶å’ŒæŸäº›åº“å‡½æ•°ä½¿ç”¨çš„å®ç°è¯­è¨€ä¸åŒ(Androidç»„ä»¶é€šå¸¸ç”¨Javaå®ç°,è€Œæœ¬åœ°åº“åˆ™é‡‡ç”¨C/C++ä»£ç ç¼–å†™)è¿™ä¸¤æ–¹é¢.\nç›®å‰çš„ä¸€ç±»æ–¹æ³•æ˜¯ä½¿ç”¨æ‰‹åŠ¨å®šåˆ¶æ¥è§£å†³ä¸Šè¿°é—®é¢˜.æ¯”å¦‚,FlowDroid[13]å°è¯•æ‰‹åŠ¨åœ°åˆ†æåº“å‡½æ•°çš„è¯­ä¹‰,æ ¹æ®å‚æ•°ä¸è¿”å›å€¼ä¹‹é—´çš„å…³ç³»ä¸ºå…¶æä¾›æ˜¾å¼ä¼ æ’­è§„åˆ™.å¯¹äºæ²¡æœ‰åˆ¶å®šè§„åˆ™çš„åº“å‡½æ•°,FlowDroidä½¿ç”¨ä¿å®ˆçš„ç­–ç•¥,å³:åªè¦åº“å‡½æ•°çš„å‚æ•°ä¸­åŒ…å«æ±¡ç‚¹æ•°æ®å‚æ•°,å°±å¯¹å‡½æ•°çš„è¿”å›å€¼è¿›è¡Œæ±¡ç‚¹æ ‡è®°.DroidSafe[12]ä½¿ç”¨ç²¾ç¡®åˆ†æå­˜æ ¹å®ç°äº†3176ä¸ªæœ¬åœ°ä»£ç åº“,è¿™äº›å­˜æ ¹æ˜¯ä½¿ç”¨Javaä»£ç æ‰‹åŠ¨å®ç°çš„,ä¸”ä¸åŸæœ¬åœ°ä»£ç çš„è¯­ä¹‰ç­‰ä»·.å¯¹æœ¬åœ°ä»£ç çš„è°ƒç”¨è¢«ä¼ é€’åˆ°å¯¹åº”çš„å­˜æ ¹ä»£ç ä¸Šè¿›è¡Œåˆ†æ.æ­¤ç±»å·¥ä½œéœ€è¦åœ¨äººå·¥ç†è§£ç¨‹åºè¯­ä¹‰çš„åŸºç¡€ä¸ŠåŠ ä»¥å®ç°.\nä¸ä¹‹ç›¸å¯¹çš„æ˜¯è‡ªåŠ¨æ¨å¯¼çš„æ–¹æ³•.StubDroid[85]é¦–æ¬¡æå‡ºäº†ç”¨è‡ªåŠ¨æ¨å¯¼è§£å†³åº“å‡½æ•°ä¼ æ’­çš„é—®é¢˜,è¯¥æ–¹æ³•å°†äº§ç”Ÿä¾›åˆ†æçš„æ‘˜è¦æ–‡ä»¶(summary file),å°†æ¨å¯¼çš„æ±¡ç‚¹æ•°æ®æµå­˜å‚¨åˆ°æ‘˜è¦æ–‡ä»¶ä¸­,å¹¶æä¾›äº†ç›¸åº”çš„éƒ¨ç½²ç­–ç•¥.StubDroidçš„åˆ†æå•å…ƒæ˜¯ä¸€ä¸ªAPIæ–¹æ³•,å°†è¯¥æ–¹æ³•å†…éƒ¨çš„æ‰€æœ‰è®¿é—®è·¯å¾„(åŒ…æ‹¬æ–¹æ³•å‚æ•°ã€æ–¹æ³•thiså¼•ç”¨å’Œæ‰€æœ‰é™æ€å¯è§åŸŸ)æ ‡è®°æˆæº,å°†æ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºæ±‡èšç‚¹.åŸºäºæ­¤,é—®é¢˜è¢«è½¬åŒ–æˆæ–¹æ³•å†…éƒ¨çš„æ±¡ç‚¹åˆ†æé—®é¢˜. StubDroidåˆ©ç”¨ç°æœ‰çš„é™æ€æ±¡ç‚¹åˆ†æå·¥å…·FlowDroidè‡ªåŠ¨åœ°å¤„ç†åº“å†…éƒ¨çš„æ±¡ç‚¹æ•°æ®æµ,æœ€ç»ˆå¾—åˆ°çš„æ‘˜è¦æ–‡ä»¶åŒ…å«APIæ–¹æ³•ä¸­çš„è®¿é—®è·¯å¾„æºæ˜¯å¦èƒ½å¤Ÿä¼ æ’­åˆ°è¿”å›å€¼çš„ä¿¡æ¯.å¦å¤–,StubDroidè¿˜èƒ½å¤Ÿè§£å†³ç”±äºåˆ«åå’Œè®¿é—®è·¯å¾„å¸¦å¯¼è‡´åº“å‡½æ•°ä¼ æ’­ä¸­çš„ç²¾ç¡®åº¦ä¸‹é™çš„é—®é¢˜,æœ€åçš„æ‘˜è¦æ–‡ä»¶è¿›ä¸€æ­¥è¢«åº”ç”¨åˆ°FlowDroidæ¡†æ¶,å®Œæˆå¯¹æ•´ä¸ªappçš„åˆ†æ.ä¸FlowDroidç±»ä¼¼,StudDroidåŒæ ·æ— æ³•å¯¹æœ¬åœ°åº“å‡½æ•°è¿›è¡Œè‡ªåŠ¨åˆ†æ.\n 2.åŠ¨æ€æ±¡ç‚¹åˆ†æ\nAndroidç³»ç»Ÿä¸­çš„åŠ¨æ€æ±¡ç‚¹åŒæ ·éœ€è¦åˆ†æç»„ä»¶å†…æ±¡ç‚¹ä¼ æ’­ã€ç»„ä»¶é—´æ±¡ç‚¹ä¼ æ’­ä»¥åŠç»„ä»¶ä»£ç ä¸æœ¬åœ°åº“ä¹‹é—´çš„æ±¡ç‚¹ä¼ æ’­.åŠ¨æ€æ±¡ç‚¹åˆ†æé¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜æ˜¯ç³»ç»Ÿä¿¡æ¯é™¤äº†åœ¨ç³»ç»Ÿå†…éƒ¨é€šè¿‡DEXæŒ‡ä»¤ä¼ æ’­ä»¥å¤–,è¿˜ä¼šç»è¿‡å…¶ä»–çš„é€šé“,å¦‚æœ¬åœ°åº“ã€ç½‘ç»œã€æ–‡ä»¶ç­‰.\nTaintDroid[19]é¦–å…ˆæå‡ºäº†é¢å‘Androidå¹³å°ä¸Šçš„åŠ¨æ€æ±¡ç‚¹åˆ†æå·¥å…·,ä¹‹åçš„å·¥å…·å¤§å¤šæ˜¯åŸºäºå®ƒçš„ä¼˜åŒ–æˆ–è€…åº”ç”¨æ‰©å±•(Appsplaygroud[20],VetDroid[21],BayesDroid[22],AppFence[23]).æœ¬èŠ‚é‡ç‚¹ä»‹ç»TaintDoidä¸Šçš„3ç§æ±¡ç‚¹ä¼ æ’­å¤„ç†ï¼š\n1.ç»„ä»¶å†…çš„æ±¡ç‚¹ä¼ æ’­ä¸»è¦æ˜¯åœ¨Dalvikè™šæ‹ŸæœºDEXæŒ‡ä»¤çš„å˜é‡çº§åˆ«ä¼ æ’­,è¯¦è§ç¬¬2.1.2èŠ‚åŠ¨æ€åˆ†ææŠ€æœ¯ä¸­çš„å…³äºTaintDroidçš„ä»‹ç».\n2.ç»„ä»¶é—´çš„æ±¡ç‚¹ä¼ æ’­åˆ©ç”¨äº†Binderæœºåˆ¶.Androidåº•å±‚ä½¿ç”¨Binderæœºåˆ¶å®ŒæˆIPCè°ƒç”¨,æ•°æ®è¢«å­˜å‚¨åœ¨åŒ…(parcels)å¯¹è±¡ç»“æ„ä¸­.TaintDroidçš„æ±¡ç‚¹ä¼ æ’­æ–¹æ³•æ˜¯å¯¹åŒ…å¯¹è±¡çš„ç»“æ„è¿›è¡Œé‡æ–°è®¾è®¡,ä½¿ä¹‹é™„å¸¦ä¸æ±¡ç‚¹ç›¸å…³çš„ä¿¡æ¯.TaintDroidæä¾›äº†ä¸¤ç§åŒ…ç»“æ„æ‰©å±•æ–¹æ³•:\n(a) ä½¿ç”¨ä¸€ä¸ªæ ‡ç­¾å˜é‡å°†æ±¡ç‚¹ä¿¡æ¯å­˜å‚¨åˆ°åŒ…ä¸­,ç„¶åé€šè¿‡ç½‘ç»œè¿›è¡Œä¼ è¾“.å½“æ¥å—è€…æ¥æ”¶åˆ°è¿™ä¸ªç»“æ„æ—¶,å°†å…¶ä¸­åŒ…å«çš„æ ‡ç­¾å˜é‡æå–å‡ºæ¥å¹¶ç»§ç»­ä¼ è¾“;\n(b) åœ¨æ–¹æ³•(a)çš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›,æå‡ºäº†åŸºäºæ±¡ç‚¹æ ‡ç­¾å‘é‡çš„ä¼ æ’­æŠ€æœ¯.\n3.ç»„ä»¶ä¸æœ¬åœ°åº“å‡½æ•°é—´çš„æ±¡ç‚¹ä¼ æ’­åŒ…æ‹¬æ±¡ç‚¹æ•°æ®é€šè¿‡æœ¬åœ°åº“ä»£ç æˆ–æ–‡ä»¶è¿›è¡Œä¼ æ’­.TaintDroidé€šè¿‡è®¾è®¡åç½®æ¡ä»¶å¯¹æœ¬åœ°ä»£ç çš„å‡½æ•°è¿›è¡Œæ±¡ç‚¹ä¼ æ’­.åç½®æ¡ä»¶ä¸º:\n(a) æ‰€æœ‰æœ¬åœ°ä»£ç è®¿é—®çš„å¤–éƒ¨å˜é‡éƒ½ä¼šè¢«æ ‡è®°ä¸Šæ±¡ç‚¹æ ‡ç­¾;\n(b) æ ¹æ®é¢„å®šä¹‰è§„åˆ™å°†è¢«èµ‹å€¼çš„å‡½æ•°è¿”å›å€¼ä¹Ÿæ ‡è®°ä¸Šæ±¡ç‚¹æ ‡ç­¾.\nTaintDroidä½¿ç”¨äº†äººå·¥æ’æ¡©ä¸å¯å‘å¼ç›¸ç»“åˆçš„æ–¹æ³•æ¥æä¾›è¿™äº›åç½®æ¡ä»¶.TaintDroidè§£å†³æ±¡ç‚¹æ•°æ®é€šè¿‡æ–‡ä»¶è¿›è¡Œä¼ æ’­çš„æ–¹æ³•æ˜¯ä»¥æ–‡ä»¶ä¸ºå•ä½æ·»åŠ æ±¡ç‚¹æ ‡ç­¾,å½“æ–‡ä»¶è¢«å†™å…¥æˆ–è€…è¢«è¯»å‡ºåˆ°ç¼“å†²åŒºæ—¶è¿›è¡Œæ±¡ç‚¹ä¼ æ’­.å¦‚æœä¸€ä¸ªè¢«æ ‡è®°çš„æ•°æ®è¢«å†™å…¥ä¸€ä¸ªæ–‡ä»¶,å°±éœ€è¦è¿™ä¸ªæ–‡ä»¶è¿›è¡Œæ ‡è®°.è¯¥æ–‡ä»¶åœ¨åç»­çš„æ“ä½œä¸­å°†ä½œä¸ºæ±¡ç‚¹æº,å¦‚æœæœ‰å¯¹è¯¥æ–‡ä»¶çš„è¯»å–æ“ä½œ,é‚£ä¹ˆè¯»å‡ºçš„æ•°æ®ä¹Ÿéœ€è¦è¢«æ ‡è®°.\n 2.Java Web æ¡†æ¶ä¸Šçš„æ±¡ç‚¹åˆ†ææŠ€æœ¯\nä¸è®°å½•äº†,æœ‰éœ€è¦çš„è¯å¯ä»¥è¯»[1]åŸæ–‡4.2èŠ‚\n 0x5 æ€»ç»“\næ±¡ç‚¹åˆ†æä½œä¸ºä¿¡æ¯æµåˆ†æçš„ä¸€ç§å®è·µæŠ€æœ¯,è¢«å¹¿æ³›åº”ç”¨äºäº’è”ç½‘åŠç§»åŠ¨ç»ˆç«¯å¹³å°ä¸Šåº”ç”¨ç¨‹åºçš„ä¿¡æ¯å®‰å…¨ä¿éšœä¸­.æœ¬æ–‡ä»‹ç»äº†æ±¡ç‚¹åˆ†æçš„åŸºæœ¬åŸç†å’Œé€šç”¨æŠ€æœ¯,å¹¶é’ˆå¯¹è¿‘å¹´æ¥æ±¡ç‚¹åˆ†æåœ¨è§£å†³å®é™…åº”ç”¨ç¨‹åºå®‰å…¨é—®é¢˜æ—¶é‡åˆ°çš„é—®é¢˜å’Œå…³é”®è§£å†³æŠ€æœ¯è¿›è¡Œäº†åˆ†æç»¼è¿°.ä¸åŒäºåŸºäºå®‰å…¨ç±»å‹ç³»ç»Ÿçš„ä¿¡æ¯æµåˆ†ææŠ€æœ¯,æ±¡ç‚¹åˆ†æå¯ä»¥ä¸æ”¹å˜ç¨‹åºç°æœ‰çš„ç¼–ç¨‹æ¨¡å‹æˆ–è¯­è¨€ç‰¹æ€§,å¹¶æä¾›ç²¾ç¡®ä¿¡æ¯æµä¼ æ’­è·Ÿè¸ª.åœ¨å®é™…åº”ç”¨è¿‡ç¨‹ä¸­,æ±¡ç‚¹åˆ†æè¿˜éœ€è¦å€ŸåŠ©ä¼ ç»Ÿçš„ç¨‹åºåˆ†ææŠ€æœ¯çš„æ”¯æŒ,ä¾‹å¦‚é™æ€åˆ†æä¸­çš„æ•°æ®æµåˆ†æã€åŠ¨æ€åˆ†æä¸­çš„ä»£ç é‡å†™ç­‰æŠ€æœ¯.å¦å¤–,ç»“åˆæµ‹è¯•ç”¨ä¾‹ç”ŸæˆæŠ€æœ¯ã€ç¬¦å·æ‰§è¡ŒæŠ€æœ¯ä»¥åŠè™šæ‹ŸæœºæŠ€æœ¯,ä¹Ÿä¼šç»™æ±¡ç‚¹åˆ†æå¸¦æ¥æ›´å¤šè¡Œä¹‹æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆ.\nå¦‚æœæ–‡ä¸­æœ‰ç¬”è¯¯ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚ğŸ˜\n 0x-1 å‚è€ƒ\n\n[1] ç‹è•¾,æä¸°,æç‚¼,å†¯æ™“å…µ.æ±¡ç‚¹åˆ†ææŠ€æœ¯çš„åŸç†å’Œå®è·µåº”ç”¨.è½¯ä»¶å­¦æŠ¥,2017,28(4):860âˆ’882.http://www.jos.org.cn/1000-9825/5190.htm\n[2] https://github.com/firmianay/CTF-All-In-One/blob/master/doc/5.5_taint_analysis.md\n[3] å®‹é“®ï¼Œç‹æ°¸å‰‘ï¼Œé‡‘æ³¢ï¼Œç­‰.äºŒè¿›åˆ¶ç¨‹åºåŠ¨æ€æ±¡ç‚¹åˆ†ææŠ€æœ¯ç ”ç©¶ç»¼è¿°[J].ä¿¡æ¯ç½‘ç»œå®‰å…¨ï¼Œ2016ï¼ˆ3ï¼‰ï¼š77-83.\n[10] Livshits  VB,  Lam  MS.  Finding  security  vulnerabilities  in  Java  applications  with  static  analysis.  In:  Proc.  of  the  Conf.  on  Usenix Security Symp. USENIX Association, 2005. 262âˆ’266. https://www.usenix.org/legacy/event/sec05/tech/full_papers/livshits/livshits_html/\n[11] Rasthofer S, Arzt S, Bodden E. A machine-learning approach for classifying and categorizing android sources and sinks. In: Proc. of the Network and Distributed System Security Symp. (NDSS). 2014. [doi: 10.14722/ndss.2014.23039]\n[12] Gordon MI, Kim D, Perkins JH, Gilham L, Nguyen N, Rinard MC. Information flow analysis of Android applications in DroidSafe. In: Proc. of the NDSS 2015. 2015. [doi: 10.14722/ndss.2015.23089]\n[13] Arzt S, Rasthofer S, Fritz C, Bodden E, Bartel A, Klein J, Le Traon Y, Octeau D, McDaniel P. Flowdroid: Precise context, flow, field,  object-sensitive  and  lifecycle-aware  taint  analysis  for  Android  apps.  ACM  SIGPLAN  Notices,  2014,49(6):259âˆ’269.  [doi:  10.1145/2594291.2594299]\n[14] Yang  Z,  Yang  M.  Leakminer:  Detect  information  leakage  on  Android  with  static  taint  analysis.  In:  Proc.  of  the  Software  Engineering. IEEE, 2012. 101âˆ’104. [doi: 10.1109/WCSE.2012.26]\n[15] Lu L, Li Z, Wu Z, Lee W, Jiang G. Chex: Statically vetting Android apps for component hijacking vulnerabilities. In: Proc. of the 2012 ACM Conf. on Computer and Communications Security. ACM Press, 2012. 229âˆ’240. [doi: 10.1145/2382196.2382223]\n[19] Enck  W,  Gilbert  P,  Han  S,  Tendulkar  V,  Chun  BG,  Cox  LP,  Jung  J,  McDaniel  P,  Sheth  AN.  TaintDroid:  An  information-flow  tracking  system  for  realtime  privacy  monitoring  on  smartphones.  ACM  Trans.  on  Computer  Systems,  2014,32(2):393âˆ’407.  [doi:  10.1145/2619091]\n[25] Tripp O, Pistoia M, Fink SJ, Sridharan M, Weisman O. TAJ: Effective taint analysis of Web applications. ACM SIGPLAN Notices, 2009,44(6):87âˆ’97. [doi: 10.1145/1542476.1542486]\n[26] Papagiannis I, Migliavacca M, Pietzuch P. PHP ASPIS: Using partial taint tracking to protect against injection attacks. In: Proc. of the Usenix Conf. on Web Application Development. USENIX Association, 2011. 2. https://www.usenix.org/conference/webapps11/php-aspis-using-partial-taint-tracking-protect-against-injection-attacks\n[29] Vogt  P,  Nentwich  F,  Jovanovic  N,  Kirda  E,  Kruegel  C,  Vigna  G.  Cross  site  scripting  prevention  with  dynamic  data  tainting  and  static analysis. In: Proc. of the NDSS 2007. 2007. 12. http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.72.4505\n[50] Saxena P, Molnar D, Livshits B. SCRIPTGARD: Automatic context-sensitive sanitization for large-scale legacy Web applications. In: Proc. of the 18th ACM Conf. on Computer and Communications Security. ACM Press, 2011. 601âˆ’614. [doi: 10.1145/2046707. 2046776]\n[51] Samuel M, Saxena P, Song D. Context-Sensitive auto-sanitization in Web templating languages using type qualifiers. In: Proc. ofthe 18th ACM Conf. on Computer and Communications Security. ACM Press, 2011. 587âˆ’600. [doi: 10.1145/2046707.2046775]\n[52] Bates D, Barth A, Jackson C. Regular expressions considered harmful in client-side XSS filters. In: Proc. of the 19th Intâ€™l Conf. on World Wide Web. ACM Press, 2010. 91âˆ’100. [doi: 10.1145/1772690.1772701]\n[53] Hooimeijer  P,  Livshits  B,  Molnar  D,  Saxena  P,  Veanes  M.  Fast  and  precise  sanitizer  analysis  with  BEK.  In:  Proc.  of  the  20th  USENIX Conf. on Security. USENIX Association, 2011. 1âˆ’1. http://dl.acm.org/citation.cfm?id=2028068\n[61] Tripp O, Pistoia M, Cousot P, Cousot R, Guarnieri S. Andromeda: Accurate and scalable security analysis of Web applications. In: Proc. of the Intâ€™l Conf. on Fundamental Approaches to Software Engineering. Berlin, Heidelberg: Springer-Verlag, 2013. 210âˆ’225. [doi: 10.1007/978-3-642-37057-1_15]\n[62] Crandall JR, Chong FT. Minos: Control data attack prevention orthogonal to memory model. In: Proc. of the 37th Intâ€™l Symp. on Microarchitecture (MICRO-37). IEEE, 2004. 221âˆ’232. [doi: 10.1109/MICRO.2004.26]\n[63] Dalton  M,  Kannan  H,  Kozyrakis  C.  Raksha:  A  flexible  information  flow  architecture  for  software  security.  ACM  SIGARCH  Computer Architecture News, 2007,35(2):482âˆ’493. [doi: 10.1145/1273440.1250722]\n[64] Zhu DY, Jung J, Song D, Kohno T, Wetherall D. Tainteraser: Protecting sensitive data leaks using applicationlevel taint tracking. ACM SIGOPS Operating Systems Review, 2011,45(1):142âˆ’154. [doi: 10.1145/1945023.1945039]\n[65] Venkataramani G, Doudalis I, Solihin Y, Prvulovic M. Flexitaint: A programmable accelerator for dynamic taint propagation. In: Proc. of the 2008 IEEE 14th Intâ€™l Symp. on High Performance Computer Architecture. IEEE, 2008. 173âˆ’184. [doi: 10.1109/HPCA. 2008.4658637]\n[67] Newsome J, Song D. Dynamic taint analysis for automatic detection, analysis, and signature generation of exploits on commodity software. In: Proc. of the Network and Distributed System Security Symp. 2005. 720âˆ’724.\n[68] Nethercote  N,  Seward  J.  Valgrind:  A  program  supervision  framework.  Electronic  Notes  in  Theoretical  Computer  Science,  2003,  89(2):44âˆ’66. [doi: 10.1016/S1571-0661(04)81042-9]\n[69] Zhu Y, Jung J, Song D, Kohno T, Wetherall D. Privacy scope: A precise information flow tracking system for finding application leaks. Technical Report, EECS-2009-145, Berkeley: University of California, 2009.\n[70] Clause  J,  Li  W,  Orso  A.  DYTAN:  A  generic  dynamic  taint  analysis  framework.  In:  Proc.  of  the  2007  Intâ€™l  Symp.  on  Software  Testing and Analysis. ACM Press, 2007. 196âˆ’206. [doi: 10.1145/1273463.1273490]\n[71] Kemerlis  VP,  Portokalidis  G,  Jee  K,  Keromytis  AD.  libdft:  Practical  dynamic  data  flow  tracking  for  commodity  systems.  ACM  SIGPLAN Notices, 2012,47(7):121âˆ’132. [doi: 10.1145/2365864.2151042]\n[76] Bao T, Zheng Y, Lin Z, Zhang X, Xu D. Strict control dependence and its effect on dynamic information flow analyses. In: Proc. of the 19th Intâ€™l Symp. on Software Testing and Analysis. ACM Press, 2010. 13âˆ’24. [doi: 10.1145/1831708.1831711]\n[77] Kang MG, McCamant S, Poosankam P, Song D. DTA++: Dynamic taint analysis with targeted control-flow propagation. In: Proc. of the Network and Distributed System Security Symp. (NDSS 2011). San Diego, 2011.\n[78] Cox LP, Gilbert P, Lawler G, Pistol V, Razeen A, Wu B, Cheemalapati S. Spandex: Secure password tracking for Android. In: Proc.of the 23rd USENIX Security Symp. (USENIX Security 2014). 2014. 481âˆ’494. https://www.usenix.org/node/184402\n[84] Christensen  AS,  MÃ¸ller  A,  Schwartzbach  MI.  Precise  analysis  of  string  expressions.  In:  Proc.  of  the  Intâ€™l  Static  Analysis  Symp.Berlin, Heidelberg: Springer-Verlag, 2003. 1âˆ’18. [doi: 10.1007/3-540-44898-5_1]\n[85] Arzt S, Bodden E. StubDroid: Automatic inference of precise data-flow summaries for the Android framework. In: Proc. of the 38th Intâ€™l Conf. on Software Engineering. ACM Press, 2016. 725âˆ’735. [doi: 10.1145/2884781.2884816]\n\n","categories":["ç¬”è®°"],"tags":["æ€»ç»“","å­¦ä¹ ","æ±¡ç‚¹åˆ†æ"]},{"title":"Network Compression","url":"https://ch3nye.top/Network-Compression/","content":" Network Compression\nåšç½‘ç»œå‹ç¼©çš„åŸå› æ˜¯è¿™æ ·ï¼šæˆ‘ä»¬æœªæ¥å¸Œæœ›æŠŠnetwork æ”¾åˆ°å¾ˆå¤šçš„è®¾å¤‡ä¸Šä½¿ç”¨ï¼Œè¿™äº›è®¾å¤‡ä¸Šå­˜å‚¨ç©ºé—´æœ‰é™ï¼Œè®¡ç®—èƒ½åŠ›æœ‰é™ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›èƒ½æŠŠç½‘ç»œåšå‹ç¼©ï¼Œè€Œå°½å¯èƒ½å°çš„æŸå¤±å…¶å‡†ç¡®åº¦ï¼Œä»¥é€‚åº”è¿™äº›è®¾å¤‡ã€‚\n\n Outline\nå…ˆåˆ—ä¸€ä¸‹æœ¬èŠ‚çš„å¤§çº²ï¼š\n\n\nNetwork Pruning\n\n\nKnowledge Distillation\n\n\nParameter Quantization\n\n\nArchitecture Design\n\n\nDynamic Computation\n\n\nå¦å¤–ï¼Œæˆ‘ä»¬ä¸ä¼šè®¨è®ºç¡¬ä»¶åŠ é€Ÿå’Œä¼˜åŒ–ç›¸å…³çš„å†…å®¹ã€‚\n Network Pruning\nNetwork Pruningï¼ˆç½‘ç»œä¿®å‰ªï¼‰å°±æ˜¯æŠŠä¸€ä¸ªå¤§çš„network æŠŠä¸€äº›neuron å»æ‰ï¼Œä»¥è¾¾åˆ°network compression çš„ç›®çš„ã€‚æˆ‘ä»¬ä¹‹æ‰€ä»¥èƒ½åšåˆ°è¿™ä»¶äº‹ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ç›¸ä¿¡æˆ‘ä»¬é€šå¸¸è®­ç»ƒå‡ºæ¥çš„ç¥ç»ç½‘ç»œæ˜¯over-parameterizedï¼Œä¹Ÿå°±æ˜¯è¯´ç½‘ç»œä¸­çš„å¾ˆå¤šå‚æ•°æ˜¯æ²¡æœ‰ç”¨çš„ã€‚å°±æ˜¯æˆ‘ä»¬ä¸éœ€è¦é‚£ä¹ˆå¤šå‚æ•°å°±èƒ½è§£å‡ºå½“å‰çš„é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬ç»™äº†ç½‘ç»œè¿‡å¤šçš„å‚æ•°ã€‚å¦‚æœä½ å»åˆ†æè®­å‡ºæ¥çš„network ä¸­çš„å‚æ•°ï¼Œä½ ä¼šå‘ç°å¾ˆå¤šçš„neuron çš„output æ€»æ˜¯0ï¼Œæœ‰äº›weight æ˜¯éå¸¸æ¥è¿‘0çš„ï¼Œè¿™äº›å‚æ•°æ˜¯æ²¡æœ‰ä½œç”¨çš„ã€‚æˆ‘ä»¬å°±æŠŠè¿™äº›æ²¡ç”¨çš„ä¸œè¥¿å‰ªæ‰ã€‚\nè¿™ä¸ªæ¦‚å¿µæ˜¯éå¸¸å¤è€çš„ï¼Œåœ¨90så°±å·²ç»æœ‰äº†è¿™æ ·çš„æƒ³æ³•ï¼š\n\n\nOptimal Brain Damage æ„æ€æ˜¯æœ€ä¼˜è„‘æŸä¼¤ï¼Œä½ å¯ä»¥åœ¨ç›´è§‰ä¸Šçš„è¿™æ ·è€ƒè™‘ï¼Œæœºå™¨åšNetwork Pruning å°±å¥½åƒäººç±»çš„å¤§è„‘å‘è‚²ä¸­çš„ä¸€ä¸ªç°è±¡ï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºäººç±»åœ¨å‡ºç”Ÿæ—¶å€™è„‘ä¸­ç¥ç»è¿æ¥æ˜¯æ¯”è¾ƒå°‘çš„åœ¨å‘è‚²çš„è¿‡ç¨‹ä¸­ç»å†äº†å¢åŠ åˆå‡å°‘çš„è¿‡ç¨‹ã€‚\n weight/neuron pruning\n\nåšweight pruning çš„è¿‡ç¨‹å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å…ˆè¦æœ‰ä¸€ä¸ªè®­ç»ƒå¥½çš„network ï¼Œç„¶åè¯„ä¼°æ¯ä¸ªå‚æ•°ï¼ˆneuronæˆ–weightï¼‰çš„é‡è¦æ€§ã€‚é‚£æ€ä¹ˆè¯„ä¼°å‚æ•°é‡è¦æ€§å‘¢ï¼Œå·²ç»æœ‰å¾ˆå¤šçš„è¯„ä¼°æ–¹æ³•è¢«æå‡ºæ¥äº†ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºweight çš„é‡è¦æ€§æˆ‘ä»¬å¯ä»¥ä¹‹é—´çœ‹ä»–çš„æ•°å€¼å¤§å°ï¼Œå¦‚æœä»–çš„å€¼å¾ˆæ¥è¿‘é›¶å°±å¯èƒ½æ˜¯ä¸é‡è¦çš„weightï¼Œå¦‚æœå®ƒçš„ç»å¯¹å€¼å¾ˆå¤§å°±å¯èƒ½æ˜¯é‡è¦çš„å‚æ•°ï¼Œæ‰€ä»¥ä½ å¯ä»¥é€šè¿‡è®¡ç®—weightçš„L1ï¼ŒL2çš„æ•°å€¼æ¥çœ‹å®ƒæ˜¯ä¸æ˜¯é‡è¦çš„ï¼›å¯¹äºneuron çš„é‡è¦æ€§ï¼Œä½ ç»™network ä¸€æ‰¹æ•°æ®ï¼Œå¦‚æœè¿™ä¸ªneuron çš„è¾“å‡ºå‡ ä¹éƒ½æ˜¯é›¶çš„è¯ï¼Œè¿™ä¸ªneuron å°±å¯èƒ½æ˜¯ä¸é‡è¦çš„ã€‚\næ¥ä¸‹æ¥ï¼Œä½ å°±æ ¹æ®é‡è¦æ–°æ’åºweight æˆ–è€…neuron ç„¶åå»é™¤ä¸é‡è¦çš„ï¼Œä½ å°±åšå¥½çš„è£å‰ªçš„åŠ¨ä½œã€‚ç„¶åï¼Œä½ è¦åšä¸€æ¬¡fine-tuneï¼Œå»ä¿®è¡¥ä½ åšè£å‰ªçš„æ—¶å€™æŸå¤±çš„å‡†ç¡®åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´è¦ä¿®è¡¥ä½ åšè£å‰ªå¯¹æ¨¡å‹é€ æˆçš„æŸä¼¤ã€‚æ¥ç€ï¼Œä½ å°±çœ‹çœ‹å½“å‰è¿™ä¸ªæ¨¡å‹çš„å¤§å°å’Œå‡†ç¡®åº¦ä½ æ˜¯ä¸æ˜¯æ»¡æ„ï¼Œå¦‚æœæ»¡æ„çš„è¯ç½‘ç»œå‹ç¼©å°±ç»“æŸï¼Œå¦åˆ™ä½ å°±å›å»æ­¥éª¤äºŒé‡æ–°è¯„ä¼°é‡è¦æ€§ï¼Œä»¥æ­¤ç±»æ¨ã€‚\nè¿™é‡Œæœ‰ä¸ªä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œé€šå¸¸æ¥è¯´ä½ åœ¨æ¯æ¬¡prune çš„æ—¶å€™éƒ½æ˜¯è£å‰ªæ‰ä¸€ç‚¹ç‚¹ï¼Œè¿™æ ·è¿­ä»£å¤šæ¬¡ï¼Œè€Œä¸è¦ä¸€æ¬¡prune å¤ªå¤šä»¥è‡³äºé€ æˆæ²¡åŠæ³•ä¿®è¡¥çš„æŸä¼¤ã€‚\nå…³äºnetwork pruning çš„åšæ³•å°±ä»‹ç»åˆ°è¿™é‡Œï¼Œæ¥ä¸‹æ¥æˆ‘è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼š\n Why Pruning?\næˆ‘ä»¬ä¸ºä»€ä¹ˆè¦åšnetwork pruning ï¼Œæˆ‘æ˜¯è¯´æˆ‘ä»¬ä¸ºä»€ä¹ˆä¸ç›´æ¥train ä¸€ä¸ªæ›´å°çš„ç½‘ç»œï¼Ÿ\n\n\nå°çš„ç¥ç»ç½‘ç»œæ¯”è¾ƒéš¾è®­\n\n\nå¤§çš„ç¥ç»ç½‘ç»œæ›´å®¹æ˜“ä¼˜åŒ–ï¼Ÿ https://www.youtube.com/watch?v=_VuWvQUMQVk\n\n\nLottery Ticket Hypothesisï¼ˆå¤§ä¹é€å‡è®¾ï¼‰\n\nhttps://arxiv.org/abs/1803.03635\n\n\n\nç¬¬ä¸€ç‚¹æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œä¼—æ‰€å‘¨çŸ¥å°çš„ç¥ç»ç½‘ç»œæ¯”è¾ƒéš¾è®­ã€‚\nå¤§çš„ç¥ç»ç½‘ç»œæ›´å®¹æ˜“ä¼˜åŒ–ï¼ŒåŸå› å°±æ˜¯å¤§çš„ç¥ç»ç½‘ç»œæ¯”è¾ƒä¸å®¹æ˜“å¡åœ¨local minimaã€saddle point è¿™äº›ç‚¹ä¸Šã€‚è¿™ä¹Ÿè®¸å°±æ˜¯ä¸ºä»€ä¹ˆå°çš„network æ¯”è¾ƒéš¾train çš„åŸå› ã€‚æ‰€ä»¥è¯´ï¼Œæˆ‘ä»¬é€šå¸¸é€‰æ‹©train å¥½ä¸€ä¸ªå¤§çš„network å†åšpruning ã€‚\nå…³äºå¤§ä¹é€å‡è®¾ï¼Œæˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ï¼š\n Lottery Ticket Hypothesis\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†train å¥½çš„ä¸€ä¸ªå¤§network è¿›è¡Œpruning å¾—åˆ°ä¸€ä¸ªå°çš„network å¦‚å³ä¸Šè§’æ‰€ç¤ºï¼Œæˆ‘ä»¬éšæœºåˆå§‹åŒ–è¿™ä¸ªå°ç½‘ç»œçš„å‚æ•°ï¼Œé‡æ–°è®­ç»ƒè¿™ä¸ªå°çš„ç½‘ç»œï¼Œå‘ç°train ä¸èµ·æ¥ã€‚æˆ‘ä»¬å†æŠŠä¸Šè¿°ç´«è‰²çš„pruned çš„network è®¾ä¸ºæœ€åˆå§‹çš„å‚æ•°ï¼Œé‡æ–°è®­ç»ƒå°ç½‘ç»œï¼Œå‘ç°train èµ·æ¥äº†ã€‚\næ ¹æ®è¿™ä¸ªç°è±¡ï¼Œä½œè€…æå‡ºäº†å¤§ä¹é€å‡è¯´ï¼Œå°±æ˜¯è¯´train network å°±åƒä¹°ä¹é€ä¸€æ ·ï¼Œä¸åŒçš„random initialized parameters å¾—åˆ°ä¸åŒçš„åˆå§‹ç¥ç»ç½‘ç»œï¼Œæœ‰çš„train å¾—èµ·æ¥æœ‰çš„åˆ™ä¸è¡Œã€‚ä¸€ä¸ªå·¨å¤§çš„network æ˜¯ç”±å¾ˆå¤šå°çš„network ç»„æˆï¼Œè¿™äº›å°çš„network å°±æœ‰çš„èƒ½train èµ·æ¥æœ‰çš„ä¸è¡Œï¼Œè€Œå¤§çš„network ä¸­åªè¦æœ‰ä¸€ä¸ªå°çš„network èƒ½train èµ·æ¥ï¼Œæ•´ä¸ªå¤§çš„network å°±train èµ·æ¥ã€‚æ‰€ä»¥ä½ å¯ä»¥ç›´è§‰ä¸Šè¿™æ ·æƒ³ï¼Œå¤§çš„network å°±ç›¸å½“äºä½ ä¸€æ¬¡ä¹°äº†å¾ˆå¤šä¹é€ï¼Œå¢åŠ ä¸­å¥–å‡ ç‡ã€‚ç„¶åä½ å†æŠŠå¤§çš„network åšpruning æ‰¾å‡ºé‚£ä¸ªèƒ½train èµ·æ¥çš„å°çš„network ï¼Œè¿™ä¸ªå°çš„network æœ€å¼€å§‹åˆå§‹çš„å‚æ•°æ˜¯èƒ½ä½¿å®ƒè¢«train èµ·æ¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹åˆ°äº†ä¸Šå›¾æ‰€è¿°çš„ç°è±¡ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªä¸ä¸Šè¿°å¯¹ç«‹çš„çœ‹æ³•ã€‚\n Rethinking the Value of Network Pruning\n\nhttps://arxiv.org/abs/1810.05270\n\nè¿™ç¯‡æ–‡ç« ä¸»è¦å°±æ˜¯è®²å°çš„network ä¹Ÿæ˜¯train çš„èµ·æ¥çš„ã€‚\n\nè¿™ä¸ªæ–‡ç« çš„å®éªŒä¸­çš„éšæœºåˆå§‹åŒ–å‚æ•°å°±æ˜¯çœŸçš„éšæœºåˆå§‹åŒ–å‚æ•°ï¼Œè€Œä¸æ˜¯ä»åŸå§‹æ¨¡å‹çš„åˆå§‹åŒ–å‚æ•°copy è¿‡æ¥ã€‚\nä¸Šå›¾æ˜¯å®éªŒç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯”Unpruned å’ŒFine-tuned ä¸¤åˆ—ï¼Œä¼¼ä¹å°±æ˜¯pruned network ä¹Ÿæ˜¯train çš„èµ·æ¥çš„ã€‚\næ‰€ä»¥è¯´ï¼Œä¸Šè¿°è¿™ä¸¤ç¯‡paper çš„ç»“è®ºå°±æ˜¯çŸ›ç›¾å¯¹ç«‹çš„ï¼Œä¸¤ç¯‡æ–‡ç« éƒ½æ˜¯å‘è¡¨åœ¨ICLR ï¼Œä¸”æ˜¯open review çš„ï¼Œç½‘ç»œä¸Šæœ‰reviewer é—®åˆ°ä¸¤ç¯‡paper çš„å¯¹ç«‹è§‚ç‚¹ï¼Œä»–ä»¬çš„ä½œè€…ä¹Ÿéƒ½å¯¹æ­¤åšäº†ä¸€äº›è§£é‡Šï¼Œæœ‰å…´è¶£å¯ä»¥è‡ªè¡Œæœç´¢ã€‚\n Network Pruning-Practical Issue\nNetwork Pruning æœ‰ä¸€äº›å®ä½œä¸Šçš„é—®é¢˜æ˜¯æˆ‘ä»¬éœ€è¦æ³¨æ„çš„ï¼Œæˆ‘ä»¬ä¸Šé¢è¯´ä½ å¯ä»¥è¡¡é‡weight æˆ–è€…neuron çš„é‡è¦æ€§ï¼Œç„¶åprune æ‰ä¸é‡è¦çš„ï¼Œé‚£weight å’Œneuron ä¸¤è€…pruneå“ªä¸ªæ¯”è¾ƒå¥½å‘¢ã€‚\nå¦‚æœæˆ‘ä»¬prune weightï¼š\n\nä½ prune æ‰ä¸é‡è¦çš„weight åï¼Œä½ å¾—åˆ°çš„ç½‘ç»œæ¶æ„æ˜¯ä¸è§„åˆ™çš„ï¼Œæ‰€è°“ä¸è§„åˆ™æ˜¯è¯´ï¼Œåœ¨åŒä¸€å±‚ä¸­æœ‰çš„neuron åƒä¸¤ä¸ªinput æœ‰çš„åƒå››ä¸ªinputï¼Œè¿™æ ·çš„ç½‘ç»œçš„ç®—æ³•ç¨‹åºä½ æ¯”è¾ƒéš¾å®ç°ï¼Œå°±ç®—ä½ çœŸçš„å®ç°äº†è¿™ç§ç®—æ³•ï¼Œä½ ä¹Ÿä¸å¥½ç”¨GPU åŠ é€ŸçŸ©é˜µè¿ç®—ã€‚\næ‰€ä»¥å®ä½œä¸Šä½ åšweight pruning çš„è¯ä½ å°±ä¼šæŠŠweight è®¾é›¶ï¼Œè€Œä¸æ˜¯æ‹¿æ‰weightï¼Œä½†æ˜¯è¿™ä¹ˆåšä½ å¹¶æ²¡æœ‰å®é™…ä¸Šä¸¢æ‰weightï¼Œæ¨¡å‹çš„å¤§å°æ˜¯æ²¡æœ‰å˜çš„ï¼Œæ‰€ä»¥è¿™ä¸èƒ½è¾¾åˆ°æˆ‘ä»¬çš„network compression çš„ç›®çš„ã€‚\n\n\nhttps://arxiv.org/pdf/1608.03665.pdf\n\nç´«è‰²çº¿æ˜¯æˆ‘ä»¬prune çš„é‡ï¼Œå‡ ä¹éƒ½åœ¨95%ä»¥ä¸Šã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°prune ä»¥åï¼Œé›†ä¸­æ¨¡å‹çš„é€Ÿåº¦å¤§éƒ¨åˆ†éƒ½æ˜¯æœ‰æ‰€ä¸‹é™çš„ã€‚æ‰€ä»¥å¾—ä¸å¿å¤±ï¼Œä½ ä»¥ä¸ºprune ä»¥åä¼šæ›´å¿«ï¼Œä½†å®é™…ä¸Šå˜å¾—æ›´æ…¢äº†ã€‚\næ‰€ä»¥è¯´prune neuron æ˜¯æ¯”è¾ƒå¥½å®ä½œä¹Ÿæ¯”è¾ƒå¥½åŠ é€Ÿçš„ï¼š\n\n Knowledge Distillation\n\n\nKnowledge Distillation\nhttps://arxiv.org/pdf/1503.02531.pdf\nDo Deep Nets Really Need to be Deep?\nhttps://arxiv.org/pdf/1312.6184.pdf\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒKnowledge Distillation å°±æ˜¯ç”¨ä¸€ä¸ªå°çš„network å»å­¦ä¹ å¤§çš„network çš„è¡Œä¸ºã€‚æˆ‘ä»¬ä¸æ˜¯è¾ƒStudent Net æ­£ç¡®çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Œè€Œæ˜¯å‘Šè¯‰ä»–å½“å‰è¾“å…¥å¯èƒ½æ˜¯ä»€ä¹ˆï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå½“è¾“å…¥æ˜¯å›¾ç‰‡1çš„æ—¶å€™ï¼ŒStudent Net å»å­¦ä¹ Teacher Net çš„è¾“å‡ºï¼Œå®ƒä¼šå­¦åˆ°å½“å‰å›¾ç‰‡æœ‰0.7çš„å¯èƒ½æ€§æ˜¯1ï¼Œæœ‰0.2çš„å¯èƒ½æ€§æ˜¯7ï¼Œæœ‰0.1çš„å¯èƒ½æ€§æ˜¯9ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒStudent Net ä¸ä»…ä¼šå­¦ä¹ åˆ°å½“å‰è¾“å…¥çš„å›¾ç‰‡å¯èƒ½æ˜¯ä»€ä¹ˆï¼Œå®ƒè¿˜ä¼šå­¦ä¹ åˆ°1å’Œ7å’Œ9æ˜¯ç›¸ä¼¼çš„ï¼Œæ‰€ä»¥è¿™æ ·çš„å­¦ä¹ æ–¹å¼æ˜¯å¯ä»¥å­¦ä¹ åˆ°æ›´ä¸°å¯Œçš„ä¿¡æ¯çš„ã€‚æ‰€ä»¥ï¼Œæœ‰å¯èƒ½å³ä½¿Student Net æ²¡è§è¿‡å›¾ç‰‡7ï¼Œå®ƒåªè§è¿‡å›¾ç‰‡1å’Œ9ï¼Œä½†æ˜¯è¿™ä¹ˆå­¦å®Œä»¥åå®ƒæ˜¯å¯ä»¥è§¦ç±»æ—é€šçš„è®¤å‡º7çš„ã€‚\n\nKnowledge Distillation çš„ä¸€ä¸ªç”¨å¤„æ˜¯ç”¨ä¸€ä¸ªå°çš„Student Net æ¨¡æ‹Ÿä¸€ä¸ªå·¨å¤§çš„ensemble çš„Teacher Net ã€‚é€šå¸¸æ¥è¯´ensemble çš„æ–¹æ³•å¯ä»¥è®©ä½ çš„æ¨¡å‹çš„å‡†ç¡®åº¦æ›´ä¸Šä¸€å±‚æ¥¼ï¼Œä½†æ˜¯è¿™ä¹ˆåšæ˜¯ç‰ºç‰²äº†ç®—åŠ›å’Œç©ºé—´çš„ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥ç”¨Knowledge Distillation çš„æ–¹æ³•ï¼Œç”¨ä¸€ä¸ªå°çš„network æ¨¡æ‹Ÿå¤§çš„ensemble network è¾¾åˆ°ç›¸è¿‘çš„å‡†ç¡®åº¦ã€‚\n Temperature\nåœ¨Knowledge Distillation çš„å®ä½œä¸Šæœ‰ä¸€ä¸ªæŠ€å·§å«åšTemperatureï¼š\n\nTemperature å°±æ˜¯å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨åšclassification çš„network çš„æœ€åä¼šæœ‰ä¸€ä¸ªsoftmax layer ï¼Œsoftmax layer å°±æ˜¯ä¼šæŠŠnetwork outputçš„å€¼å–Exponential ç„¶ååšä¸€ä¸ªnormalizeã€‚æˆ‘ä»¬é€šå¸¸ä¼šåœ¨åšsoftmax ä¹‹å‰å¯¹network çš„output åšé™¤ä¸Štemperature çš„åŠ¨ä½œï¼Œtemperature é€šå¸¸æ˜¯ä¸€ä¸ªå¤§äº1çš„å€¼ã€‚\nä¸ºä»€ä¹ˆè¿™æ ·åšå‘¢ï¼Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬çŸ¥é“Knowledge Distillation ä¹‹æ‰€ä»¥ä¼šæœ‰ç”¨æ˜¯å› ä¸ºå¤§çš„network çš„è¾“å‡ºæ˜¯å¯èƒ½æ€§ï¼Œè€Œä¸æ˜¯one-hot çš„å‘é‡ï¼Œå¦‚æœæ˜¯åè€…é‚£å°±å¤±å»äº†ä¸åŒclass ä¹‹é—´çš„ç›¸ä¼¼æ€§ä¿¡æ¯ï¼Œæ‰€ä»¥ä¸ºäº†è®©ä¸åŒçš„label ä¹‹é—´çš„åˆ†æ•°æ‹‰è¿‘ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°±é™¤ä¸Štemperatureã€‚æœ¬æ¥çš„xé€šè¿‡softmax layer å¾—åˆ°çš„yçš„åä¸¤ä¸ªç»´åº¦éƒ½æ¥è¿‘0ï¼Œè€Œxé™¤ä¸Štemperature åé€šè¿‡softmax layer å¾—åˆ°çš„yçš„å„ä¸ªç»´åº¦ä¹‹é—´çš„åˆ†æ•°å°±è¢«æ‹‰è¿‘äº†ã€‚\nä½†æ˜¯ï¼Œåœ¨å®é™…ä¸ŠKnowledge Distillation æ²¡æœ‰ç‰¹åˆ«æœ‰ç”¨ã€‚ğŸ¤£\n Parameter Quantization\nå‚æ•°é‡åŒ–ï¼Œè¿™ä¸€èŠ‚å°†åœ¨å‚æ•°ä¸Šåšä¸€ç‚¹æ–‡ç« ã€‚\n\nUsing less bits to represent a value\n\nè¿™æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå°±æ˜¯å»æ‰ä¸€äº›å‚æ•°çš„ç²¾åº¦ï¼Œæ¥æ¢å–å­˜å‚¨ç©ºé—´çš„ä¸‹é™ã€‚\n\nWeight clustering\n\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒWeight clustering å°±æ˜¯å°†ç›¸è¿‘çš„å‚æ•°èšç°‡ï¼Œç„¶åç”¨ä¸€ä¸ªæ˜ å°„è¡¨æ¥å­˜å‚¨ï¼Œä»¥é™ä½å‚æ•°å ç”¨çš„å†…å­˜ç©ºé—´ã€‚ä¸€ä¸ªcluster ä¸­çš„å‚æ•°å¯ä»¥å–å‡å€¼ä½œä¸ºè¿™ä¸ªcluster çš„å€¼ã€‚è¿™æ ·åšä½ ä¹Ÿæ˜¯ä¼šæŸå¤±ä¸€äº›è¿›åº¦ï¼Œä½†æ˜¯æ¢æ¥äº†å¾ˆå¥½çš„æ¨¡å‹å‹ç¼©ç‡ã€‚\n\nRepresent frequent clusters by less bits, represent rare clusters by more bits\n\næ›´è¿›ä¸€æ­¥ï¼Œä½ å°±å¯ä»¥æŠŠå¸¸è§çš„clusters ç”¨æ¯”è¾ƒçŸ­çš„coding è¡¨ç¤ºï¼Œæ¯”è¾ƒç½•è§çš„clusters ç”¨æ¯”è¾ƒé•¿çš„coding è¡¨ç¤ºï¼Œä»¥è¿›ä¸€æ­¥æé«˜æ¨¡å‹å‹ç¼©ç‡ã€‚æ¯”å¦‚ä½¿ç”¨å“ˆå¤«æ›¼ç¼–ç ã€‚\n Binary Weights\nParameter Quantization è¿™ç§æ€æƒ³å’Œæ–¹æ³•çš„æè‡´å°±æ˜¯ä½ å¯ä¸å¯ä»¥åªç”¨Â±1æ¥è¡¨ç¤ºä¸€ä¸ªweightã€‚å…¶å®æ–‡çŒ®ä¸Šæœ‰ä¸€äº›å°è¯•æ˜¯å¯ä»¥ç›´æ¥train binary  weight çš„networkï¼Œæœ€æ—©çš„ä¸€ç¯‡paper å°±æ˜¯ä¸‹é¢è¿™ä¸ªBinary Connect ã€‚\n\n\nBinary Connect: https://arxiv.org/abs/1511.00363\nBinary Network:\nhttps://arxiv.org/abs/1602.02830\nXNOR-net:\nhttps://arxiv.org/abs/1603.05279\n\nBinary Weights çš„ç²¾ç¥å°±æ˜¯ä½ çš„å‚æ•°æ˜¯äºŒå…ƒåŒ–çš„ç”¨Â±1æ¥è¡¨ç¤ºã€‚ä¸Šå›¾ç°è‰²çš„ç‚¹ä»£è¡¨å‚æ•°ç©ºé—´ï¼Œæ¯ä¸€ä¸ªç‚¹éƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªbinary weight çš„networkï¼Œè¿™ä¸ªnetwork ä¸­æ‰€æœ‰å‚æ•°éƒ½æ˜¯äºŒå…ƒåŒ–çš„éƒ½æ˜¯+1æˆ–è€…-1ã€‚\nç„¶åä½ å°±åˆå§‹ä¸€ç»„å‚æ•°ï¼Œè¿™ç»„å‚æ•°å¯ä»¥æ˜¯real value çš„ï¼Œä½ å°±ç°æ ¹æ®å½“å‰network çš„å‚æ•°æ‰¾ä¸€ä¸ªæœ€æ¥è¿‘çš„binary weight çš„network å»è®¡ç®—gradient ï¼Œæ ¹æ®è¿™ä¸ªgradient æ›´æ–°å½“å‰network çš„å‚æ•°ï¼Œç„¶åå†å»æ ¹æ®æ›´æ–°åçš„network æ‰¾ä¸€ä¸ªæœ€æ¥è¿‘çš„binary weight çš„network å»è®¡ç®—gradient ï¼Œæ ¹æ®è¿™ä¸ªgradient æ›´æ–°å½“å‰network çš„å‚æ•°ï¼Œä»¥æ­¤ç±»æ¨ã€‚\nè¿™ä¸ªBinary Connect æ ¹æ®æ–‡çŒ®ä¸Šçš„ç»“æœçœ‹èµ·æ¥è¿˜ä¸é”™ï¼š\n\n\nhttps://arxiv.org/abs/1511.00363\n\nä»ä¸Šé¢æ¥çœ‹ï¼ŒBinary Connect å±…ç„¶è¿˜æ¯”åŸæ¥çš„network çš„ç»“æœè¿˜è¦å¥½ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿä½ å¯ä»¥è¿™æ ·æƒ³ï¼ŒBinary Connect å¯ä»¥çœ‹ä½œåœ¨åšregularization ï¼Œå®ƒé™åˆ¶å‚æ•°çš„å€¼åªèƒ½æ˜¯Â±1ã€‚åªæ˜¯è¿™ä¸ªæ–¹æ³•è¿˜æ˜¯æ²¡æœ‰åšDropout æ›´å¥½å°±æ˜¯äº†ã€‚\n Architecture Design\nè°ƒæ•´network çš„æ¶æ„è®¾è®¡è®©å®ƒå˜å¾—åªéœ€è¦è¾ƒå°‘çš„å‚æ•°ï¼Œä»¥å®ç°network compression ã€‚è¿™ä¹Ÿè®¸æ˜¯ç°åœ¨å®ä½œä¸Šæœ€æœ‰æ•ˆçš„åšæ³•ã€‚\nå…ˆæ¥çœ‹çœ‹fully connected network ï¼š\n Fully Connected Network\n Low rank approximation\n\nå¦‚ä¸Šå›¾å·¦ä¸Šè§’ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªnetwork ï¼Œå…¶ä¸­Mã€Nä¸¤å±‚ä¸­é—´æœ‰å‚æ•°Wï¼Œè¿™ä¸¤å±‚åˆ†åˆ«å„æœ‰Mã€Nä¸ªneuronï¼Œç„¶åæˆ‘ä»¬åœ¨è¿™ä¸¤å±‚ä¸­é—´åŠ ä¸€ä¸ªneuronæ¯”è¾ƒå°‘çš„linear hidden layer Kï¼Œä½ ä»”ç»†æƒ³æƒ³çœ‹ï¼Œè¿™æ ·åšå‚æ•°å…¶å®æ˜¯å˜å°‘äº†ã€‚\nåŸå…ˆæœ‰MÃ—NM\\times NMÃ—Né‚£ä¹ˆå¤šå‚æ•°ï¼Œç„¶åå˜æˆMÃ—K+KÃ—NM\\times K+K\\times NMÃ—K+KÃ—N ä¸ªå‚æ•°ã€‚å¦‚æœæˆ‘ä»¬è°ƒæ§å¥½Kçš„å€¼ï¼Œå°±å¯ä»¥åšåˆ°å‡å°‘å‚æ•°çš„æ•ˆæœã€‚\nä½†æ˜¯è¿™ä¸ªtrick ä¼šå¯¹network æœ‰ä¸€å®šçš„é™åˆ¶ï¼Œè¿™ä¹Ÿæ˜¯ä¸å¯é¿å…çš„ã€‚\n CNN-network compression\n Review: Standard CNN\n\nå¦‚æœæˆ‘ä»¬çš„input æœ‰ä¸¤ä¸ªchannel ï¼Œæˆ‘ä»¬çš„filter å°±è¦å¯¹åº”æœ‰ä¸¤ä¸ªï¼Œå¦‚ä¸Šå›¾ä¸­é—´æ‰€ç¤ºï¼Œæˆ‘ä»¬é€šå¸¸æœ‰å¤šä¸ªfilter æ¯”å¦‚4ä¸ªçš„è¯ï¼Œè¿™æ ·æˆ‘ä»¬å¾—åˆ°çš„output å°±æ˜¯å››ä¸ªï¼Œå¦‚å›¾å³è¾¹æ‰€ç¤ºã€‚æ‰€ä»¥è¿™ä¸ªCNN çš„filter çš„å‚æ•°ä¸ªæ•°æ˜¯72ä¸ªï¼Œåé¢æˆ‘ä»¬è¦åšnetwork compression çœ‹çœ‹èƒ½ä»72å‡å°‘åˆ°å¤šå°‘ã€‚\n Depthwise Separable Convolution\n\nDepthwise Separable Convolution æ˜¯æŠŠconvolutionæ‹†æˆä¸¤ä¸ªæ­¥éª¤ï¼š\n\nstep1 Depthwise Convolution\n\n\nfilter æ•°é‡=è¾“å‡ºçš„channel\næ¯ä¸ªfilter éƒ½åªå¤„ç†ä¸€ä¸ªchannel\nfilter æ˜¯k*k çš„çŸ©é˜µ\nä¸åŒçš„channel ä¹‹é—´äº’ç›¸æ²¡æœ‰å½±å“çš„\n\nè¿™æ ·æ¯ä¸ªfilter å°±ä¸å†è€ƒè™‘å…¶ä»–channel ï¼Œå·ç§¯å¾—åˆ°è¾“å‡ºæ˜¯ä¸¤å±‚\n\n\nstep2 Pointwise Convolution\n\n\nç¬¬äºŒæ­¥éª¤ï¼Œæ˜¯è¯´æ¯ä¸ªfilter éƒ½åªç”¨ä¸€ä¸ªvalue ï¼Œç”¨è¿™æ ·çš„filter å»å¤„ç†ç¬¬ä¸€æ­¥å¾—åˆ°çš„ä¸¤å±‚è¾“å‡ºï¼Œè¿™ä¸€æ­¥çš„è¾“å‡ºå°±å’Œç»å…¸çš„CNN çš„å·ç§¯è¾“å‡ºç›¸åŒäº†ã€‚\nç»¼åˆè¿™ä¸¤æ­¥ï¼Œfilter çš„å‚æ•°æ€»é‡æ˜¯24ã€‚\nä¸‹é¢æ¥è§£é‡Šä¸€ä¸‹ï¼Œè¿™ä¸ªæ‹†è§£çš„æ­¥éª¤å’ŒåŸæ¥çš„CNN æœ‰ä»€ä¹ˆæ ·çš„å…³ç³»ã€‚\n\nä¸Šå›¾ä¸Šä¾§æ˜¯ä¸€èˆ¬çš„CNN çš„å·ç§¯è¿‡ç¨‹ã€‚\nä¸‹ä¾§æ˜¯Depthwise Separable Convolution ï¼Œè§‚å¯Ÿå·ç§¯è¿‡ç¨‹ï¼Œç¬¬ä¸€æ­¥å°†å¾—åˆ°ä¸­é—´äº§ç‰©ä¸¤å±‚çš„è¾“å‡ºï¼Œç„¶åç»è¿‡ç¬¬äºŒæ­¥çš„æ¯ä¸ªfilter å¾—åˆ°æœ€ç»ˆè¾“å‡ºçš„æ¯ä¸€å±‚ã€‚è¿™ä¸ªè¿‡ç¨‹ä½ å¯ä»¥è¿™æ ·è€ƒè™‘ï¼Œç¬¬ä¸€æ­¥ä½¿ç”¨çš„filter å¤„ç†äº†9ä¸ªinput ï¼Œç„¶åæŠŠè¾“å‡ºç»“æœä¸¢ç»™ç¬¬äºŒæ­¥çš„filter å¤„ç†è¿™ä¸¤ä¸ªoutputï¼Œäº§ç”Ÿä¸€ä¸ªoutputã€‚è¿™ä¸ªè¿‡ç¨‹å’Œç»å…¸CNN ä¸­çš„å·ç§¯åšçš„äº‹æƒ…ç±»ä¼¼ï¼Œç»å…¸CNN ä¸­ä½¿ç”¨ä¸€ä¸ªèŠ‚ç‚¹å¤„ç†18ä¸ªinput äº§ç”Ÿä¸€ä¸ªè¾“å‡ºï¼Œè€Œæˆ‘ä»¬ç°åœ¨é€šè¿‡å åŠ ä¸¤å±‚å¤„ç†è¿‡ç¨‹ï¼Œç”¨æ›´å°‘çš„å‚æ•°åšåˆ°äº†ç»å…¸CNN ä¸€å±‚å¤„ç†è¿‡ç¨‹åšåˆ°çš„äº‹ã€‚\næ¥ä¸‹æ¥ç®—ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ç†è®ºä¸Šçš„æ¨¡å‹å‹ç¼©ç¨‹åº¦ï¼š\n\nè®¡ç®—è¿‡ç¨‹å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæœ€åç»“æœå°±æ˜¯ä»(kÃ—kÃ—I)Ã—O(k\\times k\\times I)\\times O(kÃ—kÃ—I)Ã—O ==&gt;kÃ—kÃ—I+IÃ—Ok\\times k\\times I + I\\times OkÃ—kÃ—I+IÃ—O\n To learn more â€¦â€¦\n\n\n\nSqueezeNet\n\nhttps://arxiv.org/abs/1602.07360\n\n\n\nMobileNet\n\nhttps://arxiv.org/abs/1704.04861\n\n\n\nShuffleNet\n\nhttps://arxiv.org/abs/1707.01083\n\n\n\nXception\n\nhttps://arxiv.org/abs/1610.02357\n\n\n\n\n Dynamic Computation\n\næˆ‘ä»¬å¸Œæœ›æ¨¡å‹èƒ½è°ƒæ•´å®ƒæ‰€çš„è®¡ç®—èƒ½åŠ›ï¼Œå†èµ„æºå……è¶³çš„æ—¶å€™åŠªåŠ›åšåˆ°æœ€å¥½ï¼Œåœ¨èµ„æºç´§å¼ çš„æ—¶å€™é™ä½è®¡ç®—ç²¾åº¦ä»¥æé«˜æŒç»­æœåŠ¡çš„æ—¶é—´ã€‚æ¯”å¦‚åœ¨æ‰‹æœºå¿«æ²¡ç”µçš„æ—¶å€™è¯­éŸ³åŠ©æ‰‹çš„è¿è¡ŒåŠŸè€—çš„è°ƒæ•´ã€‚\nè¿™è¾¹æ¥ä»‹ç»ä¸€äº›å¯èƒ½çš„è§£å†³æ–¹æ³•ï¼š\n\n\nè®­ç»ƒå¤šä¸ªæ¨¡å‹ï¼Œæ ¹æ®è®¾å¤‡çš„æƒ…å†µé€‰æ‹©é€‚å½“çš„ç½‘ç»œ\n\nä½†æ˜¯è¿™æ ·çš„æ–¹æ³•æ¯”è¾ƒåƒå­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥ä¸å¤ªå¥½ã€‚\n\nè®­ç»ƒä¸­é—´å±‚ä¹Ÿå¯ä»¥åšåˆ†ç±»å™¨çš„ç½‘ç»œ\n\nè¿™ä¸ªåšæ³•æ˜¯è¯´ï¼Œæ­£å¸¸æƒ…å†µä¸‹é€šè¿‡æ•´ä¸ªæ¨¡å‹çš„è®¡ç®—è¾“å‡ºç»“æœï¼Œä½†æ˜¯åœ¨èµ„æºç´§å¼ çš„æƒ…å†µä¸‹æŠŠæ¨¡å‹çš„ä¸­é—´æŸäº›å±‚çš„ç»“æœç›´æ¥æ‹¿å‡ºæ¥é€šè¿‡ä¸€ä¸ªç®€å•çš„è®¡ç®—å°±å¯ä»¥å¾—åˆ°ç»“æœï¼Œä»¥æ­¤è‡ªç”±è°ƒæ•´networkçš„è¿ç®—é‡ã€‚\nå¦‚æœä½ ç›´æ¥è¿™ä¹ˆåšç»“æœå¾€å¾€æ˜¯ä¸å¤ªå¥½çš„ï¼Œå› ä¸ºä½ åœ¨train æ•´ä¸ªnetwork çš„æ—¶å€™å‰é¢çš„layer å¾€å¾€æ˜¯å­¦ä¹ è¯†åˆ«å¾ˆç®€å•çš„ä¿¡æ¯ï¼Œåé¢çš„layer æ‰èƒ½ç»¼åˆè¿™äº›ä¿¡æ¯åšåˆ¤æ–­ã€‚\nä¸Šå›¾å·¦ä¸‹è§’æ˜¯ä¸­æœ‰ä¸€ä¸ªå®éªŒç»“æœï¼Œçºµè½´å°±æ˜¯å‡†ç¡®ç‡ï¼Œæ¨ªè½´ä»å·¦åˆ°å³å°±æ˜¯ä»æ¨¡å‹çš„å‰åˆ°åæŠ½å‡ºä¸­é—´ç»“æœã€‚æ˜¾è€Œæ˜“è§ï¼Œè¶Šæ·±çš„åœ°æ–¹æŠ½å‡ºçš„ä¸­é—´ç»“æœæ‰è¶Šèƒ½å‡†ç¡®çš„åšå¥½ä»»åŠ¡ã€‚\nè¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœä½ åœ¨ä¸­é—´åŠ ä¸€äº›classifier ï¼Œè¿™äº›åˆ†ç±»å™¨æ˜¯å’Œæ•´ä¸ªnetwork ä¸€èµ·train çš„ï¼Œè¿™äº›classifier çš„è®­ç»ƒä¼šä¼¤å®³åˆ°æ•´ä¸ªnetwork çš„åŠŸèƒ½å¸ƒå±€ã€‚åŸæ¥network çš„å‰å‡ å±‚è¦æŠ½å‡ºä¸€äº›åŸºç¡€ä¿¡æ¯ï¼Œä½†æ˜¯ä½ ç°åœ¨å¼ºåŠ çš„classifier è¦æ±‚å‰å‡ å±‚åŒæ—¶èƒ½å¤Ÿç»¼åˆè¿™äº›ä¿¡æ¯ï¼Œå°±å¯¼è‡´å‰å‡ å±‚ä¸èƒ½æŠŠæ‰€æœ‰çš„æ³¨æ„åŠ›éƒ½ç”¨åœ¨æŠ½åŸºç¡€ä¿¡æ¯ä¸Šã€‚å®éªŒç»“æœå¦‚ä¸Šå›¾å³ä¸‹è§’ï¼Œä½ åœ¨æ¯”è¾ƒæµ…çš„åœ°æ–¹åŠ classifier æ•´ä¸ªnetwork çš„è¡¨ç°å°±ä¼šæš´è·Œï¼Œåœ¨é åçš„ä½ç½®åŠ classifier å¯¹network çš„å½±å“å°±ä¼šå°ä¸€äº›ã€‚\n\nhttps://arxiv.org/abs/1703.09844\n\næœ‰æ²¡æœ‰æ–¹æ³•èƒ½è§£å†³è¿™äº›é—®é¢˜å‘¢ï¼Ÿæœ‰çš„ï¼š\n\n\nhttps://arxiv.org/abs/1703.09844\n\nä½ å¯ä»¥è‡ªè¡ŒæŸ¥é˜…è¿™ç¯‡paper ã€‚\n","categories":["æå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°"],"tags":["ML","note","Next-Step-of-ML"]},{"title":"More about Auto-Encoder","url":"https://ch3nye.top/More-about-Auto-Encoder/","content":" More about Auto-Encoder\nè¿™èŠ‚è¯¾è¦è®²çš„æ˜¯åœ¨ä»¥å‰çš„è¯¾ç¨‹ä¸Šæ²¡æœ‰è®²çš„ï¼Œ è¿‘å¹´æ¥çš„çƒ­é—¨çš„Auto-Encoder æŠ€æœ¯ã€‚\n Review\n\nAuto-Encoder å°±æ˜¯æœ‰ä¸€ä¸ªEncoder çš„network ï¼Œæœ‰ä¸ªDecoder çš„network ï¼Œä¸­é—´ä¼šäº§å‡ºä¸€ä¸ªvector ï¼Œä½ å¯ä»¥å«å®ƒEmbeddingï¼ŒLatent Representationï¼ŒLatent Codeç­‰ã€‚Decoder ä¼šæ ¹æ®vector äº§å‡ºä¸€ä¸ªè¾“å‡ºï¼Œæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªè¾“å‡ºå’ŒåŸå§‹çš„è¾“å…¥è¶Šæ¥è¿‘è¶Šå¥½ï¼Œä»¥æ­¤ä½œä¸ºloss æ›´æ–°æ¨¡å‹å‚æ•°ã€‚\nä»Šå¤©è¦è®²çš„å†…å®¹åˆ†ä¸¤ä¸ªéƒ¨åˆ†ï¼š\n\nä¸ºä»€ä¹ˆä¸€å®šè¦Minimize reconstruction error ï¼Œæœ‰æ²¡æœ‰å…¶ä»–çš„åšæ³•å‘¢\næ€ä¹ˆè®©Encoder è¾“å‡ºçš„vector æ›´å®¹æ˜“è¢«è§£è¯»\n\næ¥ä¸‹æ¥æˆ‘ä»¬è¦å…ˆè®²ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œè¿™é‡Œæ˜¯é€šè¿‡å¼•å…¥Discriminator ï¼Œæ¥æ›¿ä»£minimize Reconstruction Error ã€‚è¯¦æƒ…ä¸”çœ‹ä¸‹é¢çš„æè¿°ã€‚\n What is good embedding?\næˆ‘ä»¬å›æƒ³ä¸€ä¸‹ä¸ºä»€ä¹ˆè¦åšembedding å‘¢ï¼Œæˆ‘ä»¬æ˜¯å¸Œæœ›é€šè¿‡è¿™ä¸ªembedding æ¥ä»£è¡¨åŸæ¥çš„è¾“å…¥ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬çœ‹åˆ°è€³æœºå°±èƒ½æƒ³åˆ°ä¸‰ç–ï¼Œè€Œä¸ä¼šæƒ³åˆ°ä¸€èŠ±ã€‚ğŸ¤£\n\n Beyond Reconstruction\nEncoder åƒè¿›ä¸€ä¸ªè¾“å…¥ï¼Œå°±äº§ç”Ÿä¸€ä¸ªå¯¹åº”çš„ä»£è¡¨è¯¥è¾“å…¥çš„embeddingï¼š\n\né‚£æˆ‘ä»¬æ€ä¹ˆçŸ¥é“è¿™ä¸ªäº§ç”Ÿçš„embedding çš„ä»£è¡¨æ€§å¥½ä¸å¥½å‘¢ï¼Œæˆ‘ä»¬è®­ä¸€ä¸ªDiscriminator ï¼Œinput æ˜¯ä¸€ä¸ªå¼ å›¾ç‰‡å’Œembedding ï¼Œoutput å°±æ˜¯è¿™ä¸€å¯¹è¾“å…¥æ˜¯ä¸æ˜¯å¯¹åº”çš„ï¼Œä½ å¯ä»¥æƒ³è±¡è¿™æ˜¯ä¸€ä¸ªäºŒåˆ†ç±»å™¨ã€‚å¦‚ä¸Šå›¾å·¦ä¸Šæ–¹æ‰€ç¤ºã€‚\nè¿™ä¸ªDiscriminator çš„è®­ç»ƒèµ„æ–™å°±æ˜¯å¾ˆå¤šï¼ˆå›¾ç‰‡+embeddingï¼‰çš„äºŒå…ƒç»„ï¼Œè¿™äº›äºŒå…ƒç»„æœ‰çš„æ˜¯å¯¹åº”çš„æœ‰çš„æ˜¯æ•…æ„ç”¨ä¸å¯¹åº”çš„ç»„åˆï¼Œå¹¶ä¸”æ‰“ä¸Šæ ‡ç­¾ã€‚å¦‚ä¸Šå›¾å³ä¸‹è§’æ‰€ç¤ºã€‚\nç„¶åå°±è¦å®šä¸€ä¸ªloss function LDL_DLDâ€‹ï¼Œå¯¹äºè¿™ä¸ªDiscriminator æœ€ç®€å•çš„å°±æ˜¯ç”¨Binary cross entropy ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚\næ¥ä¸‹æ¥å°±æ˜¯è®­ç»ƒè¿™ä¸ªDiscriminator å»minimize loss function ï¼Œå»æ‰¾ä¸€ç»„æœ€å¥½çš„Discriminator çš„å‚æ•° Ï•\\phiÏ• ã€‚æ‰¾åˆ°çš„æœ€å¥½çš„ Ï•\\phiÏ• è¾¾åˆ°çš„æœ€ä½çš„loss æˆ‘ä»¬æŠŠæ­¤æ—¶çš„æŸå¤±å‡½æ•°å€¼å«åš LDâˆ—{L_D}^*LDâ€‹âˆ— ã€‚\nå¦‚æœè¯´è¿™ä¸ª LDâˆ—{L_D}^*LDâ€‹âˆ— å¾ˆå°ï¼Œé‚£æ„å‘³ç€ç°åœ¨è¿™ä¸ªEncoder æ˜¯å¾ˆå¥½çš„ï¼ŒDiscriminator å¾ˆå®¹æ˜“å°±èƒ½çŸ¥é“embedding ä¹‹é—´æ˜¯ä¸åŒçš„ï¼Œå¯ä»¥è½»æ˜“çš„åˆ†è¾¨å‡ºå„ä¸ªembedding åº”è¯¥å¯¹åº”çš„åŸå§‹è¾“å…¥ï¼›å¦‚æœè¯´è¿™ä¸ª LDâˆ—{L_D}^*LDâ€‹âˆ— å¾ˆå¤§ï¼Œé‚£å°±æ„å‘³ç€ç°åœ¨è¿™ä¸ªEncoder å°±æ˜¯æ¯”è¾ƒå·®çš„ï¼Œè¿™ä¸ªEncoder å¾—åˆ°çš„embedding éƒ½æ¯”è¾ƒç›¸ä¼¼ï¼ŒDiscriminator éš¾ä»¥åˆ†è¾¨è¿™äº›embedding ä¹‹é—´çš„åŒºåˆ«ã€‚\nå¦‚æœå½¢è±¡ç‚¹ç”¨é¢œè‰²æ¥è¯´ï¼Œå¥½çš„Encoder å¾—åˆ°çš„embedding åº”è¯¥ä¼šæ˜¯å¦‚ä¸Šå›¾é¢œè‰²å„å¼‚çš„ï¼Œè€Œå·®çš„Encoder å¾—åˆ°çš„embedding å¯èƒ½å°±æ˜¯ä¸‹é¢è¿™æ ·é¢œè‰²ç›¸è¿‘çš„ï¼š\n\næ¥ä¸‹æ¥æˆ‘ä»¬è¦åšçš„äº‹ï¼Œå°±æ˜¯æ ¹æ® LDâˆ—{L_D}^*LDâ€‹âˆ— è°ƒæ•´Encoder çš„å‚æ•° Î¸\\thetaÎ¸ ï¼Œä½¿å¾—Encoder å¾—åˆ°çš„embedding åœ¨é€šè¿‡Discriminator æ—¶å€™èƒ½è¢«å¾ˆå¥½çš„åˆ†è¾¨ï¼Œå¾—åˆ°è¾ƒä½çš„ LDâˆ—{L_D}^*LDâ€‹âˆ— ã€‚\n\nä¸Šè¿°çš„è¿™ä¸ªæ–¹æ³•ï¼Œè¢«ç”¨åœ¨Deep InfoMax(DIM) è¿™ç¯‡paper ä¸­ã€‚è¿™ä¸ªDiscriminator å¯ä»¥åšä¸åŒçš„è®¾è®¡ï¼Œæ¯”å¦‚ç”¨ä¸åŒçš„loss è®¡ç®—æ–¹æ³•ç­‰ï¼Œç»“æœä¼šä¸å¤ªä¸€æ ·ã€‚\nåœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èµ·train Encoder å’ŒDiscriminator ï¼Œè¿™ä»¶äº‹å°±å¥½åƒæˆ‘ä»¬åœ¨train ä¸€èˆ¬çš„Auto-Encoder æ—¶ï¼Œä¸€èµ·train Encoder å’ŒDecoder å»minimize Reconstruction Error ä¸€æ ·ã€‚\nè¿™å°±æ˜¯å¼•å…¥Discriminator ï¼Œæ¥æ›¿ä»£minimize Reconstruction Error çš„åšæ³•ã€‚\n Typical auto-encoder is a special case\nç»å…¸çš„auto-encoder å¯ä»¥çœ‹ä½œä¸Šè¿°çš„æ–¹æ³•çš„ä¸€ä¸ªç‰¹ä¾‹ã€‚æ€ä¹ˆè¯´å‘¢\n\nä½ å¯ä»¥æŠŠDiscriminator çœ‹ä½œå®ƒæ ¹æ®vector åšäº†ä¸€ä¸ªDecoder åšçš„äº‹æƒ…ï¼Œç„¶åæŠŠè¾“å‡ºå’ŒåŸå§‹è¾“å…¥ç®—ä¸€ä¸ªReconstruction Error åˆ†æ•°ã€‚\n Sequential Data\nå¦‚æœä½ çš„æ•°æ®æ˜¯åºåˆ—æ€§çš„ï¼Œæ¯”å¦‚è¯´æ–‡ç« ï¼Œè¿™æ—¶ä½ å°±å¯ä»¥åšæ›´å¤šçš„å˜åŒ–ã€‚\n\n Skip thought\n\nhttps://papers.nips.cc/paper/5950-skip-thought-vectors.pdf\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒSkip thought å°±æ˜¯æ ¹æ®å½“å‰è¾“å…¥çš„çš„å¥å­é¢„æµ‹ä¸Šä¸‹æ–‡ã€‚è¿™ä»¶äº‹å’Œè®­ WordEmbedding æ˜¯å¾ˆåƒçš„ï¼ŒWordEmbedding æ˜¯è¯´æŠŠæ–‡ç« ä¸­å‡ºç°åœ¨åŒæ ·æˆ–è€…ç›¸ä¼¼ä¸Šä¸‹æ–‡çš„å•è¯è¯­ä¹‰åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ç”¨ç›¸åŒæˆ–è€…ç›¸ä¼¼çš„Embedding æ¥è¡¨ç¤ºã€‚Skip thought çš„æ€æƒ³ä¹Ÿæ˜¯è¿™æ ·ï¼Œåªæ˜¯æ‰©å±•åˆ°å¥å­ï¼Œå¦‚æœä¸¤ä¸ªå¥å­çš„ä¸Šä¸‹æ–‡æ˜¯ç›¸åŒæˆ–è€…ç›¸ä¼¼çš„ï¼Œé‚£è¿™ä¸¤ä¸ªå¥å­åº”è¯¥æ˜¯è¯­ä¹‰ç›¸è¿‘çš„ã€‚æ¯”å¦‚è¯´ï¼ŒAæé—®è¿™ä¸ªä¸œè¥¿æœ‰å¤šè´µï¼ŒBå›ç­”10å—ï¼ŒAæé—®è¿™ä¸ªä¸œè¥¿è¦å¤šå°‘é’±ï¼ŒBå›ç­”10å—ã€‚Skip thought å°±ä¼šçŸ¥é“æœ‰å¤šè´µå’Œè¦å¤šå°‘é’±çš„è¯­ä¹‰æ˜¯ç›¸ä¼¼çš„ã€‚\nSkip thought ä¸ä»…è¦è®­ç»ƒEncoderï¼ˆåšembeddingï¼‰ è¿˜è¦è®­ç»ƒDecoder ï¼ˆåšé¢„æµ‹ä¸Šä¸‹æ–‡ï¼‰ï¼Œè®©æœºå™¨äº§ç”Ÿé¢„æµ‹ç»“æœï¼Œè¿™æ˜¯æ¯”è¾ƒè€—æ—¶çš„ã€‚\n Quick thought\n\nhttps://arxiv.org/pdf/1803.02893.pdf\n\nè¿™æ˜¯Skip thought çš„å‡çº§ç‰ˆï¼Œé€Ÿåº¦æ¯”è¾ƒå¿«ã€‚æˆ‘å°±åªlearn encoder ä¸å»learn decode äº†ã€‚\næˆ‘ä»¬ç°åœ¨æŠŠæ¯ä¸ªå¥å­éƒ½åŒè¿‡encoder å¾—åˆ°å„è‡ªçš„embedding ï¼Œæ¯ä¸ªå¥å­è¦è·Ÿå®ƒçš„ä¸‹ä¸ªå¥å­çš„embedding è¶Šè¿‘è¶Šå¥½ã€‚å¦‚æœæ˜¯å…¶ä»–çš„å¥å­ï¼Œé‚£å®ƒä»¬çš„embedding å°±è¦å’Œå½“å‰å¥å­çš„embedding è¶Šè¿œè¶Šå¥½ã€‚\nçœŸæ­£å®ä½œçš„æ—¶å€™å°±æ˜¯ï¼Œæœ‰ä¸ªclassifier å®ƒåƒå½“å‰å¥å­embedding ã€ä¸‹ä¸ªå¥å­embedding å’Œä¸€äº›éšæœºsample çš„å¥å­çš„embedding ï¼Œç„¶åç»™å‡ºå“ªä¸ªå¥å­æ˜¯å½“å‰å¥å­çš„ä¸‹ä¸€å¥ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚\nclassifer å’Œencoder æ˜¯å…±åŒè®­ç»ƒçš„ã€‚æ–‡ç« ä¸­çš„classifier æ˜¯å¾ˆç®€å•çš„ï¼Œå®ƒå°±æ˜¯ç®—å½“å‰å¥å­embedding å’Œå…¶ä»–å¥å­embedding ä¹‹é—´çš„å†…ç§¯ï¼Œå†…ç§¯è¶Šå¤§å°±è¶Šç›¸ä¿¡è¿™ä¸ªå¥å­æ˜¯å½“å‰å¥å­çš„ä¸‹ä¸€ä¸ªã€‚\n Contrastive Predictive Coding (CPC)\n\n\nhttps://arxiv.org/pdf/1807.03748.pdf\n\nçœ‹å›¾å°±å¤§æ¦‚èƒ½æ˜ç™½å®ƒåœ¨åšä»€ä¹ˆï¼Œè¾“å…¥æ˜¯ä¸€æ®µå£°éŸ³ï¼Œè¿™æ®µå£°éŸ³åˆ†æˆå°æ®µï¼Œé€šè¿‡encoder å¾—åˆ°å¯¹åº”çš„embedding ï¼Œå¸Œæœ›å¾—åˆ°çš„embedding èƒ½å»é¢„æµ‹æ¥ä¸‹æ¥çš„åŒä¸€ä¸ªencoder ä¼šoutput çš„embedding ã€‚å°±å’Œä¸Šé¢Quick thought çš„æ¦‚å¿µæœ‰ç‚¹åƒã€‚\n More interpretable embedding\næ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥ä¸‹ä¸€ä¸ªä¸»é¢˜ï¼Œæ€ä¹ˆè®©embedding æ›´å…·è§£é‡Šæ€§ã€‚\n\n Feature Disentangle\nDisentangle è¿™ä¸ªè¯çš„ä¸­æ–‡æ„æ€æ˜¯&quot;è§£å¼€&quot;ï¼Œå¤§æ¦‚å°±æ˜¯ä¸‹å›¾ä¸­ä¸€å›¢ä¸œè¥¿ç¼ åœ¨ä¸€èµ·æƒ³è¦è§£å¼€çš„é‚£ä¸ªè§£å¼€çš„æ„æ€ã€‚\n\næˆ‘ä»¬encoding çš„å¯¹è±¡åŒ…å«å„å¼å„æ ·çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´ä¸€æ®µå£°éŸ³ä¿¡å·ï¼ŒåŒ…å«è¯­è€…çš„è¯­ä¹‰ã€è¯­è€…çš„è¯­è°ƒã€ç¯å¢ƒå™ªéŸ³ç­‰ç­‰çš„ä¿¡æ¯ï¼Œæ–‡å­—ä¹Ÿæ˜¯ä¸€æ ·ï¼Œæœ‰è¯­ä¹‰çš„ä¿¡æ¯ã€æ–‡æ³•çš„ä¿¡æ¯ç­‰ï¼Œå›¾ç‰‡ä¹Ÿæ˜¯ï¼Œå†…å®¹çš„ä¿¡æ¯ã€å›¾ç‰‡é£æ ¼çš„ä¿¡æ¯ç­‰ã€‚\nä»¥è¯­éŸ³ä¿¡æ¯ä¸ºä¾‹ï¼Œencoder å¾—åˆ°çš„embedding å¯èƒ½åŒ…æ‹¬è¯­è€…çš„è¯­ä¹‰ä¿¡æ¯ã€è¯­è°ƒä¿¡æ¯ã€ç¯å¢ƒå™ªå£°ç­‰å¾ˆå¤šä¿¡æ¯ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“è¿™ä¸ªå‘é‡ä¸­é‚£äº›ç»´åº¦å¯¹åº”é‚£äº›ä¿¡æ¯ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¸Œæœ›decoder å¯ä»¥å‘Šè¯‰æˆ‘ä»¬é‚£äº›ç»´åº¦æ˜¯è¯­ä¹‰ä¿¡æ¯ã€å“ªäº›ç»´åº¦æ˜¯è¯­è€…çš„ä¿¡æ¯ç­‰ç­‰ã€‚\n\nè¿™ä¸ªæƒ³æ³•ï¼Œå¯ä»¥é€šè¿‡ä¸¤ä¸ªæ€è·¯æ¥åšã€‚ç¬¬ä¸€ç§ï¼Œå¦‚ä¸Šå›¾ä¸ŠåŠéƒ¨åˆ†æ‰€ç¤ºï¼Œæˆ‘ä»¬å¸Œæœ›encoder è¾“å‡ºçš„embedding æœ‰ä¸€éƒ¨åˆ†ä»£è¡¨è¯­éŸ³ä¿¡æ¯ï¼Œä¸€éƒ¨åˆ†ä»£è¡¨è¯­è€…ä¿¡æ¯ã€‚ç¬¬äºŒç§ï¼Œåšä¸ªå˜å½¢å¦‚ä¸Šå›¾ä¸‹åŠéƒ¨åˆ†æ‰€ç¤ºï¼Œæˆ‘ä»¬æä¸¤ä¸ªencoder ä¸€ä¸ªæå–å‡ºè¯­ä¹‰ä¿¡æ¯çš„embedding ä¸€ä¸ªæå–å‡ºè¯­è€…ä¿¡æ¯çš„embedding ï¼ŒæŠŠä¸¤ä¸ªembedding æ‹¼åœ¨ä¸€èµ·æ”¾å…¥Decoder æ‰èƒ½è¿˜åŸè¾“å…¥ã€‚\nè¿™é‡Œæ˜¯åšäº†ç®€åŒ–ï¼Œå‡è®¾åªæœ‰ä¸¤ä¸ªä¿¡æ¯ï¼Œå®é™…ä¸Šæœ‰æ›´å¤šçš„ã€‚\né‚£è¿™æ ·çš„è¯èƒ½åšåˆ°çš„ä»€ä¹ˆå‘¢ï¼Ÿ\n Feature Disentangle-Voice Conversion\nä¸€çœ‹å°±çŸ¥é“æè€å¸ˆä¹Ÿæ˜¯è€å˜å£°å™¨äº†ã€‚ğŸ¤£\n\nä¸Šå›¾å¾ˆå¥½ç†è§£äº†ï¼Œæˆ‘ä»¬å¦‚ä¸Šå›¾æ‰€ç¤ºåšè®­ç»ƒï¼Œæˆ‘ä»¬ç”¨è¯­éŸ³ä¿¡æ¯è®­ç»ƒè¿™ä¸ªauto-encoder æ¨¡å‹ï¼Œè®©encoder output çš„embedding å¯ä»¥æŠŠè¯­è€…å’Œè¯­ä¹‰ä¿¡æ¯åˆ†å¼€æ¥ã€‚ç„¶åï¼š\n\næˆ‘ä»¬åšå¦‚ä¸Šå›¾æ‰€ç¤ºçš„embedding æ‹¼æ¥ï¼Œä¸¢ç»™decoder å®ƒå°±èƒ½è¾“å‡ºç”·ç”Ÿè¯´&quot;How are you?&quot;çš„éŸ³é¢‘ã€‚ğŸ˜®\nä½ å¯èƒ½ä¼šè¯´è¿™æœ‰ä»€ä¹ˆç”¨ï¼Ÿè¿™å½“ç„¶æœ‰ç”¨ï¼Œæ¯”å¦‚ç”¨æ–°å£ç»“è¡£çš„å£°éŸ³åŠä½ è¯»åšå£«ï¼Œä½ å¯èƒ½å°±ä¼šæ»¡å£ç­”åº”ä¸‹æ¥ã€‚ğŸ¤£\n\né‚£è¦æ€ä¹ˆåšæ‰èƒ½è®©encoder æŠŠä¸åŒçš„ä¿¡æ¯åˆ†å¼€åˆ°ä¸åŒçš„ç»´åº¦ä¸Šå‘¢ï¼Ÿä¸‹é¢ä»‹ç»å‡ ç§åšæ³•ã€‚\n Feature Disentangle-Adversarial Training\nç”¨GANçš„æ€æƒ³\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåšæ³•æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬è®­ç»ƒä¸€ä¸ªè¯­è€…è¾¨è¯†çš„classifier ï¼ŒEncoder æƒ³åŠæ³•å»éª—è¿‡speaker classifier ã€‚æ¯”å¦‚è¯´æŠŠembedding çš„å‰100ç»´ç»™speaker classifier åšè¾¨è¯†ï¼Œå½“Encoder å°è¯•éª—è¿‡speaker classifier çš„æ—¶å€™ï¼ŒEncoder å°±å¯èƒ½ä¼šæŠŠæœ‰å…³è¯­è€…çš„ä¿¡æ¯è—åœ¨embedding åé¢çš„ç»´åº¦ä¸­ã€‚ä»¥æ­¤ï¼Œæ¥åšåˆ°æŠŠè¯­è€…å’Œè¯­ä¹‰ä¿¡æ¯åˆ†å¼€åˆ°ä¸åŒçš„ç»´åº¦ä¸Šã€‚\næ‰€ä»¥ï¼Œä»GANçš„è§’åº¦æ¥è¯´ï¼Œspeaker classifier å°±æ˜¯Discriminator ï¼ŒEncoder å°±æ˜¯Generatorï¼Œspeaker classifier å’ŒEncoder æ˜¯è¿­ä»£trainçš„ï¼Œå°±æ˜¯ä½ å…ˆtrain speaker classifier å†train Encoder ï¼Œå¦‚æ­¤äº¤æ›¿å¾€å¤ã€‚\n Feature Disentangle-Designed Network Architecture\n\næˆ‘ä»¬è¿˜å¯ä»¥ç›´æ¥ä¿®æ”¹Encoder çš„æ¶æ„ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç›´æ¥è®©ä¸åŒçš„Encoder è¾“å‡ºå¯¹åº”çš„ä¿¡æ¯ï¼Œæ»¤æ‰ä¸éœ€è¦çš„ä¿¡æ¯ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæœ‰ä¸€ç§ç¥ç»ç½‘ç»œçš„layer å«instance normalization ï¼Œè¿™ç§layer æˆ‘ä»¬å°±ä¸å±•å¼€è®²äº†ï¼Œå®ƒèƒ½åšåˆ°çš„å°±æ˜¯ç§»é™¤global information ï¼Œglobal information å°±æ˜¯æ‰€æœ‰æ ·æœ¬éƒ½å…·æœ‰çš„ä¿¡æ¯ã€‚é‚£å½“æˆ‘ä»¬æŠŠåŒä¸€ä¸ªäººè¯´çš„è¯éƒ½è¾“å…¥ç½‘ç»œï¼Œç½‘ç»œç§instance normalization layer å°±å¯èƒ½ä¼šæ»¤æ‰è¯­è€…ä¿¡æ¯ã€‚\nä½†æ˜¯è¿™æ ·æ˜¯ä¸å¤Ÿçš„ï¼Œè¿™æ ·å°±ç®—æˆ‘ä»¬ä¿è¯äº†Encoder1 åªåŒ…å«äº†è¯­ä¹‰ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½ä¿è¯Encoder2 åªåŒ…å«è¯­è€…ä¿¡æ¯ã€‚æ‰€ä»¥æˆ‘ä»¬è¦åœ¨Decoder ä¸ŠåŠ ä¸€ä¸ªadaptive instance normalization layer ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nEncoder1 çš„embedding ç›´æ¥input ç»™Deocder ï¼ŒEncoder2 çš„embedding input åˆ°AdaIN è¿™ä¸ªlayer ï¼ŒAdaIN ä¼šè°ƒæ•´è¾“å‡ºçš„global çš„information ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœEncoder2 åœ¨å…¶è¾“å‡ºçš„embedding ä¸­æ”¾äº†è¯­ä¹‰ä¿¡æ¯ï¼Œè¿™ä¸ªembedding å°±ä¼šå¾ˆå¤§ç¨‹åº¦ä¸Šæ”¹å˜Deocder çš„è¾“å‡ºã€‚ç”¨è¿™ç§æ–¹æ³•ï¼Œä½¿Encoder2 è¾“å‡ºçš„embedding å°½é‡ä¸åŒ…å«è¯­ä¹‰ä¿¡æ¯ã€‚\nç”¨è¿™ç§æ”¹å˜Encoder æ¶æ„çš„æ–¹æ³•æ¥å®ç°ï¼Œå°†ä¸åŒä¿¡æ¯åˆ†ç¦»åˆ°ä¸åŒç»´åº¦ä¸Šã€‚\nè¿™é‡Œè€å¸ˆæ¼”ç¤ºäº†ä»–çš„å­¦ç”ŸJu-chieh Chou ç”¨Adversarial Training å¾—åˆ°çš„ç»“æœï¼Œå¯ä»¥å‚è€ƒï¼š\n\nhttps://jjery2243542.github.io/voice_conversion_demo/\n\n Discrete Representation\næ¥ä¸‹æ¥æˆ‘ä»¬è¦è®²çš„æ˜¯ï¼Œè¿‡å»æˆ‘ä»¬åœ¨è®­Auto-Encoder çš„æ—¶å€™å¾—åˆ°çš„å‘é‡éƒ½æ˜¯è¿ç»­å€¼ï¼Œè¿™ä¸ªå‘é‡å…·ä½“è¡¨ç¤ºä»€ä¹ˆï¼Œä½ å¯èƒ½è‡ªå·±ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ¥šã€‚ç°åœ¨æˆ‘ä»¬è€ƒè™‘Encoder èƒ½ä¸èƒ½è¾“å‡ºç¦»æ•£çš„embedding ï¼Œè¿™æ ·æˆ‘ä»¬å°±æ›´å®¹æ˜“è§£è¯»è¿™ä¸ªembedding çš„å«ä¹‰ï¼Œä¹Ÿæ›´å®¹æ˜“åšåˆ†ç¾¤ï¼Œæ¯”å¦‚è¯´Encoder è¾“å‡ºæ˜¯1çš„å›¾ç‰‡æ˜¯ä¸€ç±»ï¼Œè¾“å‡ºæ˜¯2çš„å›¾ç‰‡æ˜¯ä¸€ç±»ã€‚æ‰€ä»¥ï¼ŒEncoder å¦‚æœèƒ½è¾“å‡ºDiscrete çš„embedding ï¼Œé‚£è§£è¯»èµ·æ¥ä¼šæ›´å®¹æ˜“ã€‚\n\n\nhttps://arxiv.org/pdf/1611.01144.pdf\n\nä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬å°±è®©embedding æ˜¯One-hot embeddingï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å°±åœ¨Encoder è¾“å‡ºembedding åé¢åŠ ç‚¹ä¸œè¥¿ï¼Œå®ƒåšåˆ°çš„äº‹æƒ…å°±æ˜¯æŠŠæ•´ä¸ªembedding ä¸­æœ€å¤§çš„ä¸€ç»´è®¾ä¸º1ï¼Œå…¶ä»–éƒ½æ˜¯è®¾0å°±å¥½äº†ã€‚\nå¦‚æœä½ ä¸æƒ³è¦one-hot vector ï¼Œé‚£ä¹Ÿå¯ä»¥è®©embedding è½¬ä¸ºbinary vector ï¼Œå¦‚ä¸Šå›¾ä¸‹åŠéƒ¨åˆ†æ‰€ç¤ºï¼ŒæŸä¸ªç»´åº¦çš„å€¼å¤§äº0.5å°±è®¾1ï¼Œå¦åˆ™å°±è®¾0ã€‚\nä½ å¯èƒ½ä¼šè¯´é‚£è¿™ä¸ªä¸œè¥¿æ²¡æ³•å¾®åˆ†å•Šï¼Œä½†æ˜¯å®é™…ä¸Šè¿˜æ˜¯æœ‰ä¸€äº›æŠ€å·§å¯ä»¥åšçš„ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œå¯ä»¥è‡ªè¡ŒæŸ¥é˜…è®ºæ–‡ã€‚\n Vector Quantized Variational Auto-encoder (VQVAE)\nä¸Šè¿°çš„åšæ³•åœ¨æ–‡çŒ®ä¸Šæœ‰ä¸ªéå¸¸çŸ¥åçš„åšæ³•å«åšVQVAE\n\n\nhttps://arxiv.org/abs/1711.00937\nhttps://arxiv.org/pdf/1901.08810.pdf\n\nVQVAE çš„åšæ³•æ˜¯è¿™æ ·çš„ï¼Œæœ‰ä¸€ä¸ªCodebook å…¶ä¸­åŒ…å«å¤šä¸ªvectorï¼Œè¿™é‡Œå‡è®¾åªæœ‰5ä¸ªå¥½äº†ï¼Œè¿™äº›vector æ˜¯ä»æ•°æ®ä¸­å­¦å‡ºæ¥çš„ã€‚è¾“å…¥ä¸€å¼ å›¾ç‰‡ç»™Encoder è¾“å‡ºä¸€ä¸ªæ•°å€¼ä¸Šæ˜¯è¿ç»­çš„embedding ï¼Œé‚£è¿™ä¸ªembedding å’ŒCodebook ä¸­çš„vector ç®—ç›¸ä¼¼åº¦ï¼Œå–ç›¸ä¼¼åº¦æœ€é«˜çš„ä½œä¸ºEncoder çš„è¾“å…¥ï¼Œç„¶åå–minimize reconstruction errorï¼Œç»“æŸã€‚\nä½ ä¼šè¯´ï¼Œä½ ç®—å®Œç›¸ä¼¼åº¦ç„¶åå–æœ€ç›¸ä¼¼çš„vector è¿™ä¸ªæ­¥éª¤ç›¸å½“äºæ˜¯åœ¨åšDiscreteï¼Œä½†æ˜¯è¿™ä¸æ˜¯æ²¡æ³•å¾®åˆ†å—ï¼Œå®é™…ä¸Šæ˜¯å¯ä»¥åšçš„ï¼Œæœ‰ä¸€äº›æŠ€å·§ï¼Œä¸å±•å¼€äº†ï¼Œè‡ªè¡Œè¯»æ–‡çŒ®å§ã€‚\nè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„äº‹æƒ…æ˜¯ï¼Œå¦‚æœä½ ç”¨VQVAE æˆ–è€…å…¶ä»–çš„Discrete embeddingçš„æ–¹æ³•ï¼Œé‚£ä½ å°±èƒ½åšåˆ°è®©Deocder å¾—åˆ°çš„Discrete embedding åªåŒ…å«è¯­ä¹‰ä¿¡æ¯è€Œä¸åŒ…å«è¯­è€…ä¿¡æ¯å’Œç¯å¢ƒå™ªå£°ç­‰ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰æœ‰å…³æ–‡å­—çš„ä¿¡æ¯æ‰ä¼šè¢«å­˜ä¸‹æ¥ã€‚åŸå› æ˜¯è¿™æ ·çš„ï¼Œä½ æƒ³æƒ³çœ‹è¿™äº›Discrete embedding å°±æ˜¯å®¹æ˜“å­˜Discrete çš„ä¿¡æ¯ï¼Œè€Œå£°éŸ³ä¿¡æ¯ã€ç¯å¢ƒå™ªå£°éƒ½æ˜¯è¿ç»­çš„ï¼Œä½†æ–‡å­—ä¿¡æ¯æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„tokenï¼Œæ˜¯ç¦»æ•£çš„ï¼Œæ‰€ä»¥è¯´æ–‡å­—ä¿¡æ¯è¢«ä¿ç•™ä¸‹æ¥ï¼Œå…¶ä»–ä¿¡æ¯è¢«æ»¤æ‰äº†ã€‚\n Sequence as Embedding\næˆ‘ä»¬ä¸Šé¢è¯´è®©embedding å˜æˆç¦»æ•£çš„ä¼šæ›´å®¹è§£è¯»ï¼Œé‚£æˆ‘ä»¬ç”šè‡³å¯ä»¥è®©ä¸­é—´è¡¨ç¤ºä¸å†æ˜¯ä¸€ä¸ªå‘é‡ï¼Œè®©å®ƒç”¨word sequence è¡¨ç¤ºï¼š\n\n\nhttps://arxiv.org/abs/1810.02851\n\nå‡å¦‚è¯´æˆ‘ä»¬çš„Encoder çš„è¾“å…¥å¯¹è±¡æ˜¯documentï¼Œæˆ‘ä»¬å¯ä»¥learn ä¸€ä¸ªseq2seq2seq çš„model ï¼ŒEncoder åšæ–‡ç« å‹ç¼©ï¼Œå¾—åˆ°ä¸­é—´çš„word sequence ï¼ŒDecoder æ ¹æ®ä¸­é—´è¯åºåˆ—åšæ–‡ç« è¿˜åŸã€‚è¿™æ ·çš„è¯æˆ‘ä»¬ç›´è§‰ä¸Šä¼šè§‰å¾—ï¼Œä¸­é—´çš„word sequence å°±æ˜¯å¯¹æ–‡ç« çš„summary ã€‚ä½†æ˜¯äº‹å®ä¸Šå¦‚æœæˆ‘ä»¬ç›´æ¥è¿™ä¹ˆtrain ä¸‹å»ä¸­é—´çš„ç»“æœæ˜¯ä¸å¯è¯»çš„ã€‚å› ä¸ºï¼ŒEncoder å’ŒDecoder éƒ½æ˜¯æœºå™¨ï¼Œä»–ä»¬ä¼šè‡ªå·±çš„æš—è¯­ï¼Œè¯´ä¸€äº›åªæœ‰ä»–ä»¬æ‰èƒ½æ‡‚çš„word sequence ã€‚æ¯”å¦‚è¯´ï¼Œå°æ¹¾å¤§å­¦ï¼Œä¸­ç»“æœå¯èƒ½ä¸æ˜¯&quot;å°å¤§&quot;ï¼Œè€Œæ˜¯æ˜¯&quot;æ¹¾å­¦&quot;ï¼Œåæ­£åªè¦Deocder èƒ½æ­£ç¡®è§£å›å°æ¹¾å¤§å­¦å°±å¯ä»¥äº†ã€‚\né‚£æ€ä¹ˆè®©Encoder è¾“å‡ºçš„sequence è®©äººèƒ½çœ‹æ‡‚å‘¢ï¼Œæˆ‘ä»¬å°±ç”¨GAN çš„æŠ€æœ¯ã€‚\n\næˆ‘ä»¬å†é‚£ä¸€ä¸ªDiscriminator æ¥ï¼Œå®ƒæ¥åˆ¤æ–­ä¸€ä¸ªå¥å­æ˜¯ä¸æ˜¯äººå†™çš„ï¼Œè®©Encoder åŠªåŠ›å­¦ä¹ éª—è¿‡Discriminator ã€‚è¿™æ ·å°±èƒ½è®©ä¸­é—´çš„word sequence å˜å¾—äººç±»å¯è¯»ã€‚\nä½ å¯èƒ½åˆè¯´ï¼Œè¿™é‡Œåˆä¸èƒ½å¾®åˆ†å•Šï¼Œä¸­é—´çš„latent representation æ˜¯ä¸€ä¸ªword sequence ï¼Œä¹Ÿæ˜¯Discrete çš„ï¼ŒEncoder Decoder æ•´ä¸ªnetwork åˆèµ·æ¥ä¸èƒ½å¾®åˆ†å•Šã€‚ç¡®å®ä¸èƒ½å¾®åˆ†ï¼Œæ‰€ä»¥å®ä½œçš„æ—¶å€™æ˜¯ç”¨reinforcement learning ç¡¬train Encoder å’ŒDeocder çš„ã€‚\nä¸‹é¢æ˜¯ä¸€äº›å®éªŒç»“æœï¼š\n\n\n Tree as Embedding\n\n\nhttps://arxiv.org/abs/1806.07832\nhttps://arxiv.org/abs/1904.03746\n\nå¦å¤–è¿˜æœ‰ä¸€äº›æ¯”è¾ƒæ–°çš„ç ”ç©¶æˆæœï¼Œä¾›å¤§å®¶å‚è€ƒã€‚\n Conclusion\n\næ€»ç»“ä¸€ä¸‹å°±æ˜¯è®²äº†ï¼š\n\né™¤äº†reconstruction error ä»¥å¤–æœ‰æ²¡æœ‰åˆ«çš„åšæ³•\n\nUsing Discriminator\nSequential Data\n\n\næœ‰æ²¡æœ‰æ¯”è¾ƒå¥½çš„è§£é‡Šembedding çš„æ–¹æ³•\n\nFeature Disentangle\nDiscrete and Structured\n\n\n\n","categories":["æå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°"],"tags":["ML","note","Next-Step-of-ML"]},{"title":"Meta Learning-Metric-based","url":"https://ch3nye.top/Meta-Learning-Metric-based/","content":" Meta Learning-Metric-based Approach\nåŠ ä¸‹æ¥æˆ‘ä»¬å°±è¦å®è·µæˆ‘ä»¬ä¹‹å‰æåˆ°çš„ç–¯ç‹‚çš„æƒ³æ³•ï¼šç›´æ¥å­¦ä¸€ä¸ªfunctionï¼Œè¾“å…¥è®­ç»ƒæ•°æ®å’Œå¯¹åº”çš„æ ‡ç­¾ï¼Œä»¥åŠæµ‹è¯•æ•°æ®ï¼Œç›´æ¥è¾“å‡ºæµ‹è¯•æ•°æ®çš„é¢„æµ‹ç»“æœã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ¨¡å‹æŠŠè®­ç»ƒå’Œé¢„æµ‹ä¸€èµ·åšäº†ã€‚\n\nè™½ç„¶è¿™ä¸ªæƒ³æ³•å¬èµ·å¾ˆä¸é”™ï¼Œå¥½åƒæŒºéš¾çš„ï¼Œä½†æ˜¯å®é™…ä¸Šç°å®ç”Ÿæ´»ä¸­æœ‰åœ¨ä½¿ç”¨è¿™æ ·çš„æŠ€æœ¯ï¼Œä¸¾ä¾‹æ¥è¯´ï¼šæ‰‹æœºçš„äººè„¸éªŒè¯\n\næˆ‘ä»¬åœ¨ä½¿ç”¨æ‰‹æœºäººè„¸è§£é”çš„æ—¶å€™éœ€è¦å½•åˆ¶äººè„¸ä¿¡æ¯ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬è½¬åŠ¨å¤´éƒ¨ï¼Œå°±æ˜¯æ‰‹æœºåœ¨æ”¶é›†èµ„æ–™ï¼Œæ”¶é›†åˆ°çš„èµ„æ–™å°±æ˜¯ä½œä¸ºfew-shot learning çš„è®­ç»ƒèµ„æ–™ã€‚å¦å¤–ï¼Œè¯­éŸ³è§£é”Speaker Verification ä¹Ÿæ˜¯ä¸€æ ·çš„æŠ€æœ¯ï¼Œåªè¦æ¢ä¸€ä¸‹è¾“å…¥èµ„æ–™å’Œnetwork çš„æ¶æ„ã€‚\nè¿™é‡Œéœ€è¦æ³¨æ„Face Verification å’ŒFace Recognition æ˜¯ä¸ä¸€æ ·çš„ï¼Œå‰è€…æ˜¯è¯´ç»™ä½ ä¸€å¼ äººè„¸ï¼Œåˆ¤å®šæ˜¯å¦æ˜¯æŒ‡å®šçš„äººè„¸ï¼Œæ¯”å¦‚äººè„¸éªŒè¯æ¥è§£é”è®¾å¤‡ï¼›åè€…æ˜¯è¾¨åˆ«ä¸€ä¸ªäººè„¸æ˜¯äººè„¸é›†åˆé‡Œé¢è°ï¼Œæ¯”å¦‚å…¬å¸äººè„¸ç­¾åˆ°æ‰“å¡ã€‚\nä¸‹é¢æˆ‘ä»¬å°±ä»¥Face Verification ä¸ºä¾‹ï¼Œè®²ä¸€ä¸‹Metric-based Meta Learning\n Training Tasks &amp; Testing Tasks\n\nè®­ç»ƒä»»åŠ¡é›†ä¸­çš„ä»»åŠ¡éƒ½æ˜¯äººè„¸è¾¨è¯†æ•°æ®ï¼Œæ¯ä¸ªä»»åŠ¡çš„æµ‹è¯•é›†å°±æ˜¯æŸä¸ªäººçš„é¢éƒ¨æ•°æ®ï¼Œæµ‹è¯•é›†å°±æ˜¯æŒ‰æ ‡å‡†ï¼ˆå¦‚æ‰‹æœºå½•åˆ¶äººè„¸ï¼‰æ”¶é›†çš„äººè„¸æ•°æ®ï¼Œå¦‚æœè¿™ä¸ªäººå’Œè®­ç»ƒé›†ç›¸åŒå°±æ‰“ä¸€ä¸ªYes æ ‡ç­¾ï¼Œå¦åˆ™å°±æ‰“ä¸€ä¸ªNo æ ‡ç­¾ã€‚æµ‹è¯•ä»»åŠ¡å’Œè®­ç»ƒä»»åŠ¡ç±»ä¼¼ã€‚æ€»çš„æ¥è¯´ï¼Œnetwork å°±æ˜¯åƒè®­ç»ƒçš„äººè„¸å’Œæµ‹è¯•çš„äººè„¸ï¼Œå®ƒä¼šå‘Šè¯‰ä½ Yes or No ã€‚\n Siamese Network\nå®é™…ä¸Šæ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Œä½¿ç”¨çš„æŠ€æœ¯æ˜¯Siamese Networkï¼ˆå­ªç”Ÿç½‘ç»œï¼‰ã€‚\n\nSiamese Network çš„ç»“æ„å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸¤ä¸ªç½‘ç»œå¾€å¾€æ˜¯å…±äº«å‚æ•°çš„ï¼Œæ ¹æ®éœ€è¦æœ‰æ—¶å€™ä¹Ÿå¯ä»¥ä¸å…±äº«ï¼Œå‡å¦‚è¯´ä½ ç°åœ¨è§‰å¾—Training data å’ŒTesting data åœ¨å½¢æ€ä¸Šæœ‰æ¯”è¾ƒå¤§çš„åŒºåˆ«ï¼Œé‚£ä½ å°±å¯ä»¥ä¸å…±äº«ä¸¤ä¸ªç½‘è·¯çš„å‚æ•°ã€‚\nä»ä¸¤ä¸ªCNN ä¸­æŠ½å‡ºä¸¤ä¸ªembedding ï¼Œç„¶åè®¡ç®—è¿™ä¸¤ä¸ªembedding çš„ç›¸ä¼¼åº¦ï¼Œæ¯”å¦‚è¯´è®¡ç®—conference similarity æˆ–è€…Euclidean Distance ï¼Œä½ å¾—åˆ°ä¸€ä¸ªæ•°å€¼score ï¼Œè¿™ä¸ªæ•°å€¼å¤§å°±ä»£è¡¨Network çš„è¾“å‡ºæ˜¯Yes ï¼Œå¦‚æœæ•°å€¼å°å°±ä»£è¡¨è¾“å‡ºæ˜¯No ã€‚\n Siamese Network - Intuitive Explanation\næ¥ä¸‹æ¥ä»ç›´è§‰ä¸Šæ¥è§£é‡Šä¸€ä¸‹å­ªç”Ÿç½‘ç»œã€‚\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä½ å¯ä»¥æŠŠSiamese Network çœ‹æˆä¸€ä¸ªäºŒåˆ†ç±»å™¨ï¼Œä»–å°±æ˜¯åƒè¿›å»ä¸¤å¼ äººè„¸æ¯”è¾ƒä¸€ä¸‹ç›¸ä¼¼åº¦ï¼Œç„¶åå‘Šè¯‰æˆ‘ä»¬Yes or No ã€‚è¿™æ ·è§£é‡Šä¼šæ¯”ä»Meta Learning çš„è§’åº¦æ¥è§£é‡Šæ›´å®¹æ˜“ç†è§£ã€‚\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒSiamese Network åšçš„äº‹æƒ…å°±æ˜¯æŠŠäººè„¸æŠ•å½±åˆ°ä¸€ä¸ªç©ºé—´ä¸Šï¼Œåœ¨è¿™ä¸ªç©ºé—´ä¸Šåªè¦æ˜¯åŒä¸€ä¸ªäººçš„è„¸ï¼Œä¸ç®¡ä»–æ˜¯å¾€å“ªè¾¹çœ‹ï¼Œä¸ç®¡æœºå™¨çœ‹åˆ°çš„æ˜¯ä»–çš„å“ªä¸€ä¾§è„¸ï¼Œéƒ½èƒ½è¢«æŠ•å½±åˆ°è¿™ä¸ªç©ºé—´çš„åŒä¸€ä¸ªä½ç½®ä¸Šã€‚\né‚£ä½ å°±ä¼šæƒ³äº†ï¼Œè¿™ç§å›¾ç‰‡é™ç»´çš„æ–¹æ³•ï¼Œè¿™å’ŒAuto-Encoder æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Œä»–æ¯”Auto-Encoder å¥½åœ¨å“ªï¼Ÿ\nä½ æƒ³ä½ åœ¨åšAuto-Encoder çš„æ—¶å€™network ä¸çŸ¥é“ä½ è¦è§£çš„ä»»åŠ¡æ˜¯ä»€ä¹ˆï¼Œå®ƒä¼šå°½å¯èƒ½è®°ä½å›¾ç‰‡ä¸­æ‰€æœ‰çš„ä¿¡æ¯ï¼Œä½†æ˜¯å®ƒä¸çŸ¥é“ä»€ä¹ˆæ ·çš„ä¿¡æ¯æ˜¯é‡è¦çš„ä»€ä¹ˆæ ·çš„ä¿¡æ¯æ˜¯ä¸é‡è¦çš„ã€‚ä¸Šå›¾å³ä¾§ï¼Œå¦‚æœç”¨Auto-Encoder å®ƒå¯èƒ½ä¼šè®¤ä¸ºä¸€èŠ±ï¼ˆå·¦ä¸‹ï¼‰å’Œä¸‰ç–ï¼ˆå³ä¸Šï¼‰æ˜¯æ¯”è¾ƒæ¥è¿‘çš„ï¼Œå› ä¸ºä»–ä»¬çš„èƒŒæ™¯ç›¸ä¼¼ï¼Œè¿™å¥½å—ï¼Œè¿™ä¸å¥½ã€‚åœ¨Siamese Network ä¸­ï¼Œå› ä¸ºä½ è¦æ±‚network æŠŠä¸€èŠ±ï¼ˆå·¦ä¸‹ï¼‰å’Œä¸‰ç–ï¼ˆå³ä¸Šï¼‰æ‹‰è¿œï¼ŒæŠŠä¸‰ç–ï¼ˆå³ä¸Šï¼‰å’Œä¸‰ç–ï¼ˆå³ä¸‹ï¼‰æ‹‰è¿‘ï¼Œå®ƒå¯èƒ½ä¼šå­¦ä¼šæ›´åŠ æ³¨æ„å¤´å‘é¢œè‰²çš„ä¿¡æ¯è¦å¿½ç•¥èƒŒæ™¯çš„ä¿¡æ¯ã€‚\n To learn moreâ€¦\n\nWhat kind of distance should we use?\n\nSphereFace: Deep Hypersphere Embedding for Face Recognition\nAdditive Margin Softmax for Face Verification\nArcFace: Additive Angular Margin Loss for Deep Face Recognition\n\n\nTriplet lossï¼ˆä¸‰å…ƒæ˜¯æŒ‡ï¼šData å¯ä»¥åŒ…æ‹¬è®­ç»ƒäººè„¸ï¼Œæ­£ç¡®çš„æµ‹è¯•äººè„¸ï¼Œé”™è¯¯çš„æµ‹è¯•äººè„¸ï¼‰\n\nDeep Metric Learning using Triplet Network\nFaceNet: A Unified Embedding for Face Recognition and Clustering\n\n\n\n N-way Few/One-shot Learning\nåˆšæ‰çš„æ —å­ä¸­ï¼Œè®­ç»ƒèµ„æ–™éƒ½åªæœ‰ä¸€å¼ ï¼Œæœºå™¨åªè¦å›ç­”Yes or No ã€‚é‚£ç°åœ¨å¦‚æœæ˜¯ä¸€ä¸ªåˆ†ç±»çš„é—®é¢˜å‘¢ï¼Ÿç°åœ¨æˆ‘ä»¬æ‰“ç®—æŠŠåŒæ ·çš„æ¦‚å¿µç”¨åœ¨5-way 1-shot çš„ä»»åŠ¡ä¸Šè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ\n\n5-way 1-shot å°±æ˜¯è¯´5ä¸ªç±»åˆ«ï¼Œæ¯ä¸ªç±»åˆ«ä¸­åªæœ‰1ä¸ªæ ·æœ¬ã€‚å°±æ¯”å¦‚è¯´ä¸Šå›¾ï¼Œã€Šäº”ç­‰åˆ†èŠ±å«ã€‹ä¸­çš„äº”å§å¦¹ï¼Œè¦è®­ä¸€ä¸ªæ¨¡å‹åˆ†è¾¨ä¸€ä¸ªäººè„¸æ˜¯å…¶ä¸­çš„è°ï¼Œè€Œè®­ç»ƒèµ„æ–™æ˜¯æ¯ä¸ªäººåªæœ‰ä¸€ä¸ªæ ·æœ¬ã€‚æˆ‘ä»¬æœŸå¾…åšåˆ°çš„äº‹æƒ…æ˜¯ï¼ŒNetwork å°±æŠŠè¿™äº”å¼ å¸¦æ ‡ç­¾çš„è®­ç»ƒå›¾ç‰‡å¤–åŠ ä¸€å¼ æµ‹è¯•å›¾ç‰‡éƒ½åƒè¿›å»ï¼Œç„¶åæ¨¡å‹å°±ä¼šå‘Šè¯‰æˆ‘ä»¬æµ‹è¯•å›¾ç‰‡çš„åˆ†è¾¨ç»“æœã€‚\né‚£æ¨¡å‹çš„æ¶æ„è¦æ€ä¹ˆè®¾è®¡å‘¢ï¼Œæ¯”å¦‚è¯´ä¸€ä¸ªç»å…¸çš„è®¾è®¡ï¼š\n Prototypical Network\nè¿™æ˜¯ä¸€ä¸ªç»å…¸çš„åšæ³•ï¼š\n\n\nhttps://arxiv.org/abs/1703.05175\n\nè¿™ä¸ªæ–¹æ³•å’ŒSiamese Network éå¸¸ç›¸ä¼¼ï¼Œåªä¸è¿‡ä»input ä¸€å¼ training data æ‰©å±•åˆ°input å¤šå¼ training data ã€‚\næ¥è§£é‡Šä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒæŠŠæ¯å¼ å›¾ç‰‡ä¸¢åˆ°åŒä¸€ä¸ªCNN ä¸­ç®—å‡ºä¸€ä¸ªembedding ç”¨æ©™è‰²æ¡è¡¨ç¤ºï¼Œç„¶åæŠŠæµ‹è¯•å›¾ç‰‡çš„embedding å’Œæ‰€æœ‰è®­ç»ƒå›¾ç‰‡çš„embedding åˆ†åˆ«ç®—å‡ºä¸€ä¸ªç›¸ä¼¼åº¦ sis_isiâ€‹ ã€‚é»„è‰²çš„æ–¹å—è¡¨ç¤ºè®¡ç®—ç›¸ä¼¼åº¦ã€‚æ¥ä¸‹æ¥ï¼Œå–ä¸€ä¸ªsoftmax ï¼Œè¿™æ ·å°±å¯ä»¥å’Œæ­£ç¡®çš„æ ‡ç­¾åšcross entropy ï¼Œå»minimize cross entropyï¼Œè¿™å°±å’Œä¸€èˆ¬çš„åˆ†ç±»é—®é¢˜çš„loss function ç›¸åŒçš„ï¼Œå°±å¯ä»¥æ ¹æ®è¿™ä¸ªloss åšä¸€æ¬¡gradient descent ï¼Œå› ä¸ºæ˜¯1-shot æ‰€ä»¥åªèƒ½åšä¸€æ¬¡å‚æ•°æ›´æ–°ã€‚\nï¼Ÿï¼Ÿï¼Ÿï¼Ÿè¿™é‡Œæœ‰é—®é¢˜å‘€ï¼Œå¦‚æœtesting data æ˜¯å·²çŸ¥æ ‡ç­¾çš„æ•°æ®ï¼Œç”¨æ¥åšäº†1-shotï¼Œé‚£çœŸæ­£çš„è¦é¢„æµ‹çš„æ•°æ®å‘¢ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ\nå¦‚æœä½ çœ‹æ˜ç™½äº†ï¼Œè¯·åŠ¡å¿…æ•™æ•™æˆ‘ğŸ™ğŸ™ğŸ™å‘é‚®ä»¶@sud0su@163.comæˆ–è€…åŠ æˆ‘Q@2948335218\né‚£å¦‚æœæ˜¯Few-shot å‘¢ï¼Œæ€ä¹ˆç”¨Prototypical Network è§£å†³å‘¢ã€‚å¦‚å³ä¸Šè§’ï¼Œæˆ‘ä»¬æŠŠæ¯ä¸ªç±»åˆ«çš„å‡ ä¸ªå›¾ç‰‡ç”¨CNN æŠ½å‡ºçš„embedding åšaverage æ¥ä»£è¡¨è¿™ä¸ªç±»åˆ«å°±å¥½äº†ã€‚è¿›æ¥ä¸€ä¸ªTesting Data æˆ‘ä»¬å°±çœ‹å®ƒå’Œå“ªä¸ªclass çš„average å€¼æ›´æ¥è¿‘ï¼Œå°±ç®—ä½œå“ªä¸€ä¸ªclass ã€‚\n Matching Network\nMatching Network å’ŒPrototypical Network æœ€ä¸åŒçš„åœ°æ–¹æ˜¯ï¼ŒMatching Network è®¤ä¸ºä¹Ÿè®¸Training data ä¸­çš„å›¾ç‰‡äº’ç›¸ä¹‹é—´ä¹Ÿæ˜¯æœ‰å…³ç³»çš„ï¼Œæ‰€ä»¥ç”¨Bidirectional LSTM å¤„ç†Training dataï¼ŒæŠŠTraining data é€šè¿‡ä¸€ä¸ªBidirectional LSTM ä¹Ÿä¼šå¾—åˆ°å¯¹åº”çš„embedding ï¼Œç„¶åçš„åšæ³•å°±å’ŒPrototypical Network æ˜¯ä¸€æ ·çš„ã€‚\n\n\nhttps://arxiv.org/abs/1606.04080\n\näº‹å®ä¸Šæ˜¯Matching Network å…ˆè¢«æå‡ºæ¥çš„ï¼Œç„¶åäººä»¬è§‰å¾—è¿™ä¸ªæ–¹æ³•æœ‰ç‚¹é—®é¢˜ï¼Œé—®é¢˜å‡ºåœ¨Bidirectional LSTM ä¸Šï¼Œå°±æ˜¯è¯´å¦‚æœè¾“å…¥Training data çš„é¡ºåºå‘ç”Ÿå˜åŒ–ï¼Œé‚£å¾—åˆ°çš„embedding å°±å˜äº†ï¼Œæ•´ä¸ªnetwork çš„è¾¨è¯†ç»“æœå°±å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œè¿™æ˜¯ä¸åˆç†çš„ã€‚\n Relation Network\n\n\nhttps://arxiv.org/abs/1711.06025\n\nè¿™ä¸ªæ–¹æ³•å’Œä¸Šé¢è®²è¿‡çš„å¾ˆç›¸ä¼¼ï¼Œåªæ˜¯è¯´æˆ‘ä»¬ä¹‹å‰é€šè¿‡äººå®šçš„ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•è®¡ç®—æ¯ä¸€ç±»å›¾ç‰‡å’Œæµ‹è¯•å›¾ç‰‡çš„ç›¸ä¼¼åº¦ï¼Œè€ŒRelation Network æ˜¯å¸Œæœ›ç”¨å¦å¤–çš„æ¨¡å‹ gÏ•g_\\phigÏ•â€‹ æ¥è®¡ç®—ç›¸ä¼¼åº¦ã€‚\nå…·ä½“åšæ³•å°±æ˜¯å…ˆé€šè¿‡ä¸€ä¸ª fÏ•f_\\phifÏ•â€‹ è®¡ç®—æ¯ä¸ªç±»åˆ«çš„ä»¥åŠæµ‹è¯•æ•°æ®çš„embedding ï¼Œç„¶åæŠŠæµ‹è¯•æ•°æ®çš„embedding æ¥åœ¨æ‰€æœ‰ç±»åˆ«embedding åé¢ä¸¢å…¥ gÏ•g_\\phigÏ•â€‹ è®¡ç®—ç›¸ä¼¼åº¦åˆ†æ•°ã€‚\n Few-shot learning for Imaginary Data\næˆ‘ä»¬åœ¨åšFew-Shot Learning çš„æ—¶å€™çš„éš¾ç‚¹å°±æ˜¯è®­ç»ƒæ•°æ®é‡å¤ªå°‘äº†ï¼Œé‚£èƒ½ä¸èƒ½è®©æœºå™¨è‡ªå·±ç”Ÿæˆä¸€äº›æ•°æ®æä¾›ç»™è®­ç»ƒä½¿ç”¨å‘¢ã€‚è¿™å°±æ˜¯Few-shot learning for Imaginary Data çš„æ€æƒ³ã€‚\n\n\nhttps://arxiv.org/abs/1801.05401\n\nLearn ä¸€ä¸ªGenerator GGG ï¼Œæ€ä¹ˆLearn å‡ºè¿™ä¸ªGenerator æˆ‘ä»¬å…ˆä¸ç®¡ï¼Œä½ ç»™Generator ä¸€ä¸ªå›¾ç‰‡ï¼Œä»–å°±ä¼šç”Ÿæˆæ›´å¤šå›¾ç‰‡ï¼Œæ¯”å¦‚è¯´ä½ ç»™ä»–ä¸‰ç–é¢æ— è¡¨æƒ…çš„æ ·å­ï¼Œä»–å°±ä¼šYYå‡ºä¸‰ç–å–èŒçš„æ ·å­ã€å®³ç¾çš„æ ·å­ã€ç”Ÿæ°”çš„æ ·å­ç­‰ç­‰ã€‚ç„¶åæŠŠç”Ÿæˆçš„å›¾ç‰‡ä¸¢åˆ°Network ä¸­åšè®­ç»ƒï¼Œç»“æŸã€‚\nå®é™…ä¸Šï¼ŒçœŸæ­£åšè®­ç»ƒçš„æ—¶å€™Generator å’ŒNetwork æ˜¯ä¸€èµ·è®­çš„ï¼Œè¿™å°±æ˜¯Few-shot learning for Imaginary Data çš„æ„æ€ã€‚å…·ä½“çš„åšæ³•ï¼Œè¿™é‡Œä¸å±•å¼€äº†ã€‚\n Meta Learning-Train+Test as RNN\næˆ‘ä»¬åœ¨è®²Siamese Network çš„æ—¶å€™è¯´ï¼Œä½ å¯ä»¥æŠŠSiamese Network æˆ–å…¶ä»–Metric-based çš„æ–¹æ³•æƒ³æˆæ˜¯Meta Learning ï¼Œä½†å…¶å®ä½ æ˜¯å¯ä»¥ä»å…¶ä»–æ›´å®¹æ˜“ç†è§£çš„è§’åº¦æ¥è€ƒè™‘è¿™äº›æ–¹æ³•ã€‚æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬å°±æ˜¯è¦æ‰¾ä¸€ä¸ªfunctionï¼Œè¿™ä¸ªfunction å¯ä»¥åšçš„åˆ°å°±æ˜¯åƒè®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®ï¼Œç„¶åå°±å¯ä»¥åå‡ºæµ‹è¯•æ•°æ®çš„é¢„æµ‹ç»“æœã€‚æˆ‘ä»¬å®é™…ä¸Šç”¨çš„Siamese Network æˆ–è€…Prototypical Network ã€Matching Network ç­‰ç­‰çš„æ–¹æ³•å¤šå¯ä»¥çœ‹ä½œæˆ‘ä»¬ä¸ºäº†å®ç°è¿™ä¸ªç›®çš„åšæ¨¡å‹æ¶æ„çš„å˜å½¢ã€‚\nç°åœ¨æˆ‘ä»¬æƒ³é—®é—®ï¼Œæœ‰æ²¡æœ‰å¯èƒ½ç›´æ¥ç”¨å¸¸è§„çš„network åšå‡ºè¿™ä»¶äº‹ï¼Ÿæœ‰çš„ã€‚\n\nç”¨LSTM æŠŠè®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®åƒè¿›å»ï¼Œåœ¨æœ€åè¾“å‡ºæµ‹è¯•æ•°æ®çš„åˆ¤åˆ«ç»“æœã€‚è®­ç»ƒå›¾ç‰‡é€šè¿‡ä¸€ä¸ªCNN å¾—åˆ°ä¸€ä¸ªembedding ï¼Œè¿™ä¸ªembedding å’Œè¿™ä¸ªå›¾ç‰‡çš„labelï¼ˆone-hot vectorï¼‰åšconcatenateï¼ˆæ‹¼æ¥ï¼‰ä¸¢å…¥LSTM ä¸­ï¼ŒTesting data æˆ‘ä»¬ä¸çŸ¥é“label æ€ä¹ˆåŠï¼Œæˆ‘ä»¬å°±ç”¨0 vector æ¥è¡¨ç¤ºï¼Œç„¶ååŒæ ·ä¸¢å…¥LSTM ï¼Œå¾—åˆ°output ç»“æŸã€‚è¿™ä¸ªæ–¹æ³•ç”¨å¸¸è§„çš„LSTM æ˜¯train ä¸èµ·æ¥çš„ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹LSTM çš„æ¶æ„ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š\n\nå…·ä½“æ–¹æ³•æˆ‘ä»¬å°±ä¸å±•å¼€è®²äº†ï¼Œæ”¾å‡ºå‚è€ƒé“¾æ¥ï¼š\n\n\nOne-shot Learning with Memory-Augmented Neural Networks\nhttps://arxiv.org/abs/1605.06065\nA Simple Neural Attentive Meta-Learner\nhttps://arxiv.org/abs/1707.03141\n\nSNAIL ä½ çœ‹çœ‹ä»–çš„æ¶æ„å›¾å°±èƒ½äº†è§£ä»–åœ¨åšä»€ä¹ˆï¼Œå¦‚ä¸Šå›¾å³ä¾§æ‰€ç¤ºï¼Œå’Œæˆ‘ä»¬ä¸Šé¢åˆšè¯´è¿‡æƒ³æ³•çš„æ˜¯ä¸€æ ·çš„ï¼Œè¾“å…¥ä¸€å †è®­ç»ƒæ•°æ®ç»™RNN ç„¶åç»™ä»–ä¸€ä¸ªæµ‹è¯•æ•°æ®å®ƒè¾“å‡ºé¢„æµ‹ç»“æœï¼Œå”¯ä¸€ä¸åŒçš„ä¸œè¥¿å°±æ˜¯ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªå•çº¯çš„RNN ï¼Œå®ƒé‡Œé¢æœ‰åœ¨åšå›é¡¾è¿™ä»¶äº‹ï¼Œå®ƒåœ¨input ç¬¬äºŒç¬”æ•°æ®çš„æ—¶å€™ä¼šå›å»çœ‹ç¬¬ä¸€ç¬”æ•°æ®ï¼Œåœ¨input ç¬¬ä¸‰ç¬”æ•°æ®çš„æ—¶å€™ä¼šå›å»çœ‹ç¬¬ä¸€ç¬¬äºŒç¬”æ•°æ®â€¦åœ¨input æµ‹è¯•æ•°æ®é¢æ—¶å€™ä¼šå›å»çœ‹æ‰€æœ‰è¾“å…¥çš„è®­ç»ƒæ•°æ®ã€‚\næ‰€ä»¥ä½ ä¼šå‘ç°è¿™ä»¶äº‹æ˜¯ä¸æ˜¯å’Œprototypical network å’Œmatching network å¾ˆç›¸ä¼¼å‘¢ï¼Œmatching network å°±æ˜¯è®¡ç®—input çš„å›¾ç‰‡å’Œè¿‡å»çœ‹è¿‡çš„å›¾ç‰‡çš„ç›¸ä¼¼åº¦ï¼Œçœ‹è°æœ€åƒï¼Œå°±æ‹¿é‚£å¼ æœ€åƒçš„å›¾ç‰‡çš„label å½“ä½œnetwork çš„è¾“å‡ºã€‚SNAIL çš„å›é¡¾è¿‡å»çœ‹è¿‡çš„æ•°æ®çš„åšæ³•å°±å’Œmatching network çš„è®¡ç®—ç›¸ä¼¼åº¦çš„åšæ³•å¾ˆåƒã€‚\næ‰€ä»¥è¯´ï¼Œä½ è™½ç„¶æƒ³ç”¨æ›´é€šç”¨çš„æ–¹æ³•åšåˆ°ä¸€ä¸ªæ¨¡å‹ç›´æ¥ç»™å‡ºæµ‹è¯•æ•°æ®é¢„æµ‹ç»“æœè¿™ä»¶äº‹ï¼Œç„¶åä½ å‘ç°ä½ è¦æ”¹network çš„æ¶æ„ï¼Œæ”¹å®Œèµ·äº†ä¸ªåå­—å«SNAIL ä½†æ˜¯ä»–çš„æ€æƒ³å˜å¾—å’ŒåŸæœ¬ä¸“é—¨ä¸ºè¿™åšåˆ°è¿™ä»¶äº‹è®¾è®¡çš„ç‰¹æ®Šçš„æ–¹æ³•å¦‚matching network å‡ ä¹ä¸€æ ·äº†ï¼Œæœ‰ç‚¹æ®Šé€”åŒå½’çš„æ„æ€ã€‚\n Experiment\n\næ€»ä¹‹SNAIL å’Œå…¶ä»–æ–¹æ³•ç›¸æ¯”éƒ½æ˜¯æœ€å¥½çš„ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„äº†ã€‚\n","categories":["æå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°"],"tags":["ML","note","Next-Step-of-ML"]},{"title":"Meta Learning-Gradient Descent as LSTM","url":"https://ch3nye.top/Meta-Learning-Gradient-Descent-as-LSTM/","content":" Meta Learning - Gradient Descent as LSTM\nä¸ŠèŠ‚è¯¾è®²äº†MAML å’ŒReptile ï¼Œæˆ‘ä»¬è¯´Meta Learning å°±æ˜¯è¦è®©æœºå™¨è‡ªå·±learn å‡ºä¸€ä¸ªlearning çš„algorithmã€‚ä»Šå¤©æˆ‘ä»¬è¦è®²æ€ä¹ˆæŠŠæˆ‘ä»¬ç†Ÿæ‚‰çš„learning algorithm ï¼šGradient Descent ï¼Œå½“ä½œä¸€ä¸ªLSTM æ¥çœ‹å¾…ï¼Œä½ ç›´æ¥æŠŠè¿™ä¸ªLSTM trainä¸‹å»ï¼Œä½ å°±train å‡ºäº†Gradient Descent è¿™æ ·çš„Algorithm ã€‚ï¼ˆä¹Ÿå°±æ˜¯è¯´æˆ‘ç°åœ¨è¦æŠŠå­¦ä¹ ç®—æ³•ï¼Œå³å‚æ•°çš„æ›´æ–°ç®—æ³•å½“ä½œæœªçŸ¥æ•°ï¼Œç”¨Meta Learning è®­ç»ƒå‡ºæ¥ï¼‰\n\nä¸Šå‘¨æˆ‘ä»¬è®²çš„MAML å’ŒReptile éƒ½æ˜¯åœ¨Initial Parameters ä¸Šåšæ–‡ç« ï¼Œç”¨Meta Learning è®­ç»ƒå‡ºä¸€ç»„å¥½çš„åˆå§‹åŒ–å‚æ•°ï¼Œç°åœ¨æˆ‘ä»¬å¸Œæœ›èƒ½æ›´è¿›ä¸€æ­¥ï¼Œé€šè¿‡Meta Learning è®­ç»ƒå‡ºä¸€ä¸ªå¥½çš„å‚æ•°update ç®—æ³•ï¼Œä¸Šå›¾é»„è‰²æ–¹å—ã€‚\næˆ‘ä»¬å¯ä»¥æŠŠæ•´ä¸ªMeta Learning çš„ç®—æ³•çœ‹ä½œRNNï¼Œå®ƒå’ŒRNN æœ‰ç‚¹åƒçš„ï¼ŒåŒæ ·éƒ½æ˜¯æ¯æ¬¡åƒä¸€ä¸ªbatch çš„data ï¼ŒRNN ä¸­çš„memory å¯ä»¥ç±»æ¯”åˆ°Meta Learning ä¸­çš„å‚æ•° Î¸\\thetaÎ¸ ã€‚\næŠŠè¿™ä¸ªMeta Learning çš„ç®—æ³•çœ‹ä½œRNN çš„æ€æƒ³ä¸»è¦å‡ºè‡ªä¸¤ç¯‡paper ï¼š\n\nOptimization as a Model for Few-Shot Learning | OpenReview\nSachin Ravi, Hugo Larochelle\n[1606.04474] Learning to learn by gradient descent by gradient descent (arxiv.org)\nMarcin Andrychowicz, Misha Denil, Sergio Gomez, Matthew W. Hoffman, David Pfau, Tom Schaul, Brendan Shillingford, Nando de Freitas\n\nç¬¬äºŒç¯‡æ–‡ç« çš„é¢˜ç›®éå¸¸æœ‰è¶£ï¼Œä¹Ÿè¯´æ˜äº†æ­¤ç¯‡æ–‡ç« çš„ä¸­å¿ƒï¼šè®©æœºå™¨å­¦ä¹ ç”¨æ¢¯åº¦ä¸‹é™å­¦ä¹ è¿™ä»¶äº‹ï¼Œä½¿ç”¨çš„æ–¹æ³•å°±æ˜¯æ¢¯åº¦ä¸‹é™ã€‚\n Review: RNN\nä»ä¸ä¹‹å‰ç•¥å¾®ä¸åŒçš„è§’åº¦å¿«é€Ÿå›é¡¾ä¸€ä¸‹RNNã€‚\n\nRNNå°±æ˜¯ä¸€ä¸ªfunction fï¼Œè¿™ä¸ªå‡½æ•°åƒh,x åå‡º hâ€™,y  ï¼Œæ¯ä¸ªstep ä¼šæœ‰ä¸€ä¸ªxï¼ˆè®­ç»ƒæ ·æœ¬æ•°æ®ï¼‰ä½œä¸ºinputï¼Œè¿˜æœ‰ä¸€ä¸ªåˆå§‹çš„memory çš„å€¼ h0h_0h0â€‹ ä½œä¸ºinputï¼Œè¿™ä¸ªåˆå§‹å‚æ•°æœ‰æ—¶å€™æ˜¯äººæ‰‹åŠ¨è®¾ç½®çš„ï¼Œæœ‰æ—¶å€™æ˜¯å¯ä»¥è®©æ¨¡å‹learn å‡ºæ¥çš„ï¼Œç„¶åè¾“å‡ºä¸€ä¸ªyå’Œä¸€ä¸ª h1h^1h1 ã€‚åˆ°ä¸‹ä¸€ä¸ªstepï¼Œå®ƒåƒä¸Šä¸€ä¸ªstep å¾—åˆ°çš„ h1h^1h1 å’Œæ–°çš„xï¼Œä¹Ÿæ˜¯åŒæ ·çš„è¾“å‡ºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œhçš„ç»´åº¦éƒ½æ˜¯ä¸€è‡´çš„ï¼Œè¿™æ ·åŒä¸€ä¸ªf æ‰èƒ½åƒå‰ä¸€ä¸ªstep å¾—åˆ°h ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸æ–­é‡å¤ï¼Œå°±æ˜¯RNNã€‚\næ‰€ä»¥ï¼Œæ— è®ºå¤šé•¿çš„input/output sequence æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå‡½æ•°f å°±å¯ä»¥è¿ç®—ï¼Œæ— è®ºä½ çš„è¾“å…¥å†æ€ä¹ˆå¤šï¼Œæ¨¡å‹çš„å‚æ•°é‡ä¸ä¼šå˜åŒ–ï¼Œè¿™å°±æ˜¯RNN å‰å®³çš„åœ°æ–¹ï¼Œæ‰€ä»¥å®ƒç‰¹åˆ«æ“…é•¿å¤„ç†input æ˜¯ä¸€ä¸ªsequence çš„çŠ¶æ€ã€‚ï¼ˆæ¯”å¦‚è¯´è‡ªç„¶è¯­è¨€å¤„ç†ä¸­input æ˜¯ä¸€ä¸ªé•¿å¥å­ï¼Œç”¨word vector ç»„æˆçš„å¾ˆé•¿çš„sequenceï¼‰\næˆ‘ä»¬å¦‚ä»Šç”¨çš„ä¸€èˆ¬éƒ½æ˜¯RNN çš„å˜å½¢LSTMï¼Œè€Œä¸”æˆ‘ä»¬ç°åœ¨è¯´ä½¿ç”¨RNN åŸºæœ¬ä¸Šå°±æ˜¯åœ¨æŒ‡ä½¿ç”¨LSTM çš„æŠ€æœ¯ã€‚é‚£LSTM ç›¸æ¯”äºRNN æœ‰ä»€ä¹ˆç‰¹åˆ«çš„åœ°æ–¹å‘¢ã€‚\n\nå¦‚ä¸Šå›¾ï¼ŒLSTMï¼ˆå³ï¼‰ç›¸æ¯”äºRNN ï¼ŒæŠŠinput çš„h æ‹†è§£æˆä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ä»ç„¶å«åš hhh ï¼Œä¸€éƒ¨åˆ†æˆ‘ä»¬å«åš ccc ã€‚ä¸ºä»€ä¹ˆè¦è¿™æ ·åˆ†å‘¢ï¼Œä½ å¯ä»¥æƒ³è±¡æ˜¯å› ä¸º ccc å’Œ hhh æ‰®æ¼”äº†ä¸åŒçš„è§’è‰²ã€‚\n\nccc å˜åŒ–è¾ƒæ…¢ï¼Œé€šå¸¸å°±æ˜¯æŠŠæŸä¸ªå‘é‡åŠ åˆ°ä¸Šä¸€ä¸ª ctâˆ’1c^{t-1}ctâˆ’1 ä¸Šå°±å¾—åˆ°äº†æ–°çš„ ctc^tct ï¼Œè¿™ä¸ª ctc^tct å°±æ˜¯LSTM ä¸­memory cell å­˜å‚¨çš„å€¼ï¼Œç”±äºè¿™ä¸ªå€¼å˜åŒ–å¾ˆæ…¢ï¼Œæ‰€ä»¥LSTM å¯ä»¥è®°ä½æ—¶é—´æ¯”è¾ƒä¹…çš„æ•°æ®\nhhh å˜åŒ–è¾ƒå¿«ï¼Œ htâˆ’1h^{t-1}htâˆ’1 å’Œ hth^tht çš„å˜åŒ–æ˜¯å¾ˆå¤§çš„\n\n Review: LSTM\næˆ‘ä»¬æ¥ä¸‹æ¥çœ‹çœ‹LSTM çš„åšæ³•å’Œç»“æ„ï¼š\n\nctâˆ’1c^{t-1}ctâˆ’1 æ˜¯memory è®°å¿†å•å…ƒï¼ŒæŠŠxå’Œhæ‹¼åœ¨ä¸€èµ·ä¹˜ä¸Šä¸€ä¸ªæƒé‡çŸ©é˜µWï¼Œå†é€šè¿‡ä¸€ä¸ªtanh å‡½æ•°å¾—åˆ°input zï¼Œzæ˜¯ä¸€ä¸ªå‘é‡ã€‚åŒæ ·çš„xå’Œhæ‹¼æ¥åä¹˜ä¸Šå¯¹åº”çš„æƒé‡çŸ©é˜µå¾—åˆ°å¯¹åº”å‘é‡input gate ziz^izi ï¼Œforget gate zfz^fzf ï¼Œoutput  gate zoz^ozo ï¼Œæ¥ä¸‹æ¥ï¼š\n\nzfâ‹…ctâˆ’1z^f \\cdot c^{t-1}zfâ‹…ctâˆ’1 å†³å®šæ˜¯å¦ä¿ç•™ä¸Šä¸ªmemoryï¼Œ ziâ‹…zz^i \\cdot zziâ‹…z å†³å®šæ˜¯å¦æŠŠç°åœ¨çš„input å­˜åˆ°memoryï¼›\né€šè¿‡ zoâ‹…tanh(ct)z^o \\cdot tanh(c^t)zoâ‹…tanh(ct) å¾—åˆ°æ–°çš„ hth^tht ï¼›\nWâ€²W&#x27;Wâ€² ä¹˜ä¸Šæ–°çš„ hth^tht ï¼Œå†é€šè¿‡ä¸€ä¸ªsigmoid function å¾—åˆ°å½“å‰step çš„output yty^tyt ï¼›\né‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œå°±æ˜¯LSTM çš„è¿ä½œæ–¹å¼ï¼š\n\nå¥½ï¼Œè®²äº†è¿™ä¹ˆå¤šï¼Œå®ƒå’ŒGradient Descent åˆ°åº•æœ‰ä»€ä¹ˆæ ·çš„å…³ç³»å‘¢ï¼Ÿ\n LSTM similar to gradient descent based algorithm\næˆ‘ä»¬æŠŠæ¢¯åº¦ä¸‹é™å‚æ•°Î¸æ›´æ–°å…¬å¼å’ŒLSTM çš„memory cæ›´æ–°å…¬å¼éƒ½åˆ—å‡ºæ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\næˆ‘ä»¬çŸ¥é“åœ¨gradient descent ä¸­æˆ‘ä»¬åœ¨æ¯ä¸ªstep ä¸­ï¼ŒæŠŠæ—§çš„å‚æ•°å‡å»ï¼Œlearning rate ä¹˜æ¢¯åº¦ï¼Œä½œä¸ºæ›´æ–°åçš„æ–°å‚æ•°ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ­¤å¼ï¼Œå’ŒLSTM ä¸­memory å•å…ƒ ccc æœ‰äº›ç›¸ä¼¼ï¼Œæˆ‘ä»¬å°±æŠŠ ccc æ›¿æ¢æˆ Î¸\\thetaÎ¸ çœ‹çœ‹ï¼š\n\næ¥ä¸‹æ¥æˆ‘ä»¬å†åšä¸€äº›å˜æ¢ã€‚è¾“å…¥htâˆ’1h^{t-1}htâˆ’1 æ¥è‡ªä¸Šä¸€ä¸ªstepï¼Œxtx^txt æ¥è‡ªå¤–ç•Œè¾“å…¥ï¼Œæˆ‘ä»¬å°±æŠŠhtâˆ’1h^{t-1}htâˆ’1 xtx^txt æ¢æˆ$-\\nabla_\\theta l $ ã€‚ç„¶åæˆ‘ä»¬å‡è®¾ä»input åˆ°z çš„å…¬å¼ä¸­ä¹˜çš„matrix æ˜¯å•ä½çŸ©é˜µï¼Œæ‰€ä»¥z å°±ç­‰äº$-\\nabla_\\theta l $ ã€‚å†ç„¶åï¼Œæˆ‘ä»¬æŠŠzfz^fzf å®šä½å…¨1çš„åˆ—å‘é‡ï¼Œziz^izi å®šä½å…¨ä¸ºlearning rate çš„åˆ—å‘é‡ï¼Œæ­¤æ—¶LSTM çš„memory ccc çš„æ›´æ–°å…¬å¼å˜å¾—å’ŒGradient Descent ä¸€æ‘¸ä¸€æ ·ï¼š\n\næ‰€ä»¥ä½ å¯ä»¥è¯´Gradient Descent å°±æ˜¯LSTM çš„ç®€åŒ–ç‰ˆï¼ŒLSTMä¸­input gate å’Œforget gateæ˜¯é€šè¿‡æœºå™¨å­¦å‡ºæ¥çš„ï¼Œè€Œåœ¨æ¢¯åº¦ä¸‹é™ä¸­input gate å’Œforget gate éƒ½æ˜¯äººè®¾çš„ï¼Œinput gate æ°¸è¿œéƒ½æ˜¯å­¦ä¹ ç‡ï¼Œforget gate æ°¸è¿œéƒ½æ˜¯ä¸å¯ä»¥å¿˜è®°ã€‚ğŸ˜®\nç°åœ¨ï¼Œæˆ‘ä»¬è€ƒè™‘èƒ½ä¸èƒ½è®©æœºå™¨è‡ªå·±å­¦ä¹ gradient descent ä¸­çš„input gate å’Œforget gate å‘¢ï¼Ÿ\nå¦å¤–ï¼Œinputçš„éƒ¨åˆ†åˆšæ‰å‡è®¾åªæœ‰gradient çš„å€¼ï¼Œå®ä½œä¸Šå¯ä»¥æ‹¿æ›´å¤šå…¶ä»–çš„æ•°æ®ä½œä¸ºinputï¼Œæ¯”å¦‚å¸¸è§çš„åšæ³•ï¼Œå¯ä»¥æŠŠ ctâˆ’1c^{t-1}ctâˆ’1 åœ¨ç°åœ¨è¿™ä¸ªstepç®—å‡ºæ¥çš„loss ä½œä¸ºè¾“å…¥æ¥control è¿™ä¸ªLSTMçš„input gate å’Œforget gate çš„å€¼ã€‚\n\nå¦‚æœä»¬å¯ä»¥è®©æœºå™¨è‡ªåŠ¨çš„å­¦input gate å’Œforget gate çš„å€¼æ„å‘³ç€ä»€ä¹ˆï¼Œæ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ‹¥æœ‰åŠ¨æ€çš„learning rateï¼Œæ¯ä¸€ä¸ªstep ä¸­learning rate éƒ½æ˜¯ä¸ä¸€æ ·çš„è€Œä¸æ˜¯ä¸€ä¸ªä¸å˜çš„å€¼ã€‚è€Œ zfz^fzf å°±åƒä¸€ä¸ªæ­£åˆ™é¡¹ï¼Œå®ƒåšçš„äº‹æƒ…æ˜¯æŠŠå‰ä¸€ä¸ªstep ç®—å‡ºæ¥çš„å‚æ•°ç¼©å°ã€‚æˆ‘ä»¬ä»¥å‰åšçš„L2 regularization åˆå«åšWeight Decade ï¼Œä¸ºä»€ä¹ˆå«Weight Decadeï¼Œå› ä¸ºå¦‚æœä½ æŠŠå®ƒå¾®åˆ†çš„å¼å­æ‹¿å‡ºæ¥çœ‹ï¼Œæ¯ä¸ªstep éƒ½ä¼šæŠŠåŸæ¥çš„å‚æ•°ç¨å¾®å˜å°ï¼Œç°åœ¨è¿™ä¸ªzfz^fzf å°±æ‰®æ¼”äº†åƒæ˜¯Weight Decade çš„è§’è‰²ã€‚ä½†æ˜¯æˆ‘ä»¬ç°åœ¨ä¸æ˜¯ç›´æ¥å‘Šè¯‰æœºå™¨è¦åšå¤šå°‘Weight Decade è€Œæ˜¯è¦è®©æœºå™¨å­¦å‡ºæ¥ï¼Œå®ƒåº”è¯¥åšå¤šå°‘Weight Decade ã€‚\n LSTM for Gradient Descent\næˆ‘ä»¬æ¥çœ‹çœ‹ä¸€èˆ¬çš„LSTMå’Œfor Gradient Descent çš„LSTMï¼š\n\nTypical LSTM å°±æ˜¯input x ï¼Œoutput c å’Œ hï¼Œæ¯ä¸ªstep ä¼šoutput ä¸€ä¸ªy ï¼Œå¸Œæœ›y å’Œlabel è¶Šæ¥è¿‘è¶Šå¥½ã€‚\nGradient Descent çš„LSTMæ˜¯è¿™æ ·ï¼šæˆ‘ä»¬å…ˆsample ä¸€ä¸ªåˆå§‹å‚æ•°Î¸ ï¼Œç„¶åsample ä¸€ä¸ªbatch çš„data ï¼Œæ ¹æ®è¿™ä¸€ç»„data ç®—å‡ºä¸€ä¸ªgradient âˆ‡Î¸l\\nabla_\\theta lâˆ‡Î¸â€‹l ï¼ŒæŠŠè´Ÿçš„gradient input åˆ°LSTM ä¸­è¿›è¡Œè®­ç»ƒï¼Œè¿™ä¸ªLSTM çš„å‚æ•°è¿‡å»æ˜¯äººè®¾æ­»çš„ï¼Œæˆ‘ä»¬ç°åœ¨è®©å‚æ•°åœ¨Meta Learning çš„æ¶æ„ä¸‹è¢«ç¡¬learn å‡ºæ¥ã€‚ä¸Šè¿°çš„è¿™ä¸ªupdate å‚æ•°çš„å…¬å¼å°±æ˜¯ï¼š\nÎ¸t=zfâ‹…Î¸tâˆ’1+ziâ‹…âˆ’âˆ‡Î¸l\\theta^t = z^f \\cdot \\theta^{t-1} + z^i \\cdot -\\nabla_\\theta l\nÎ¸t=zfâ‹…Î¸tâˆ’1+ziâ‹…âˆ’âˆ‡Î¸â€‹l\nzfz^fzf ziz^izi ä»¥å‰æ˜¯äººè®¾æ­»çš„ï¼Œç°åœ¨LSTM å¯ä»¥è‡ªåŠ¨æŠŠå®ƒå­¦å‡ºæ¥ã€‚\nç°åœ¨å°±å¯ä»¥output æ–°çš„å‚æ•°Î¸1\\theta^1Î¸1 ï¼Œæ¥ç€å°±æ˜¯åšä¸€æ ·çš„äº‹æƒ…ï¼šå†sample ä¸€ç»„æ•°æ®ï¼Œç®—å‡ºæ¢¯åº¦ä½œä¸ºæ–°çš„inputï¼Œæ”¾åˆ°LSTM ä¸­å°±å¾—åˆ°output Î¸2\\theta^2Î¸2 ï¼Œä»¥æ­¤ç±»æ¨ï¼Œä¸æ–­é‡å¤è¿™ä¸ªæ­¥éª¤ã€‚æœ€åå¾—åˆ°ä¸€ç»„å‚æ•°Î¸3Î¸^3Î¸3ï¼ˆè¿™é‡Œå‡è®¾åªupdate 3æ¬¡ï¼Œå®é™…ä¸Šè¦update æ›´å¤šæ¬¡ï¼‰ï¼Œæ‹¿è¿™ç»„å‚æ•°å»åº”ç”¨åˆ°Testing data ä¸Šç®—ä¸€ä¸‹loss ï¼š l(Î¸3)l(Î¸^3)l(Î¸3) ï¼Œè¿™ä¸ªloss å°±æ˜¯æˆ‘ä»¬è¦minimize çš„ç›®æ ‡ï¼Œç„¶åä½ å°±è¦ç”¨gradient descent è°ƒLSTM çš„å‚æ•°ï¼Œå»minimize æœ€åçš„loss ã€‚\n\nåˆ°è¿™é‡Œå¯èƒ½æ¯”è¾ƒæ‡µäº†ï¼Œæˆ‘åœ¨è¿™é‡Œå†™ä¸€ä¸‹æˆ‘çš„ç†è§£ä¸ä¸€å®šå¯¹ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚çœ‹å®Œä¸‹é¢çš„[Experimental Results](#Experimental Results) ä¸€èŠ‚å¯ä»¥å›æ¥å†çœ‹ä¸€éè¿™ä¸ªè§£é‡Šï¼š\nä¸€èˆ¬æ¥è¯´æˆ‘ä»¬ä½¿ç”¨network ä½œä¸ºæ¨¡å‹ï¼Œå…¶ä¸­ä¼šæœ‰å¾ˆå¤šå‚æ•°Î¸ï¼Œè¿™äº›å‚æ•°æ¯ä¸€ä¸ªéƒ½ä¼šæ‹¿åˆ°è¿™ä¸ªLSTM ä¸­åšå¦‚ä¸Šè¿°è®­ç»ƒï¼Œä¸€æ–¹é¢åœ¨train LSTM ä¸­çš„å‚æ•°ï¼Œä¸€æ–¹é¢åœ¨train æ¯ä¸€ä¸ªå‚æ•°Î¸ã€‚å½“networkä¸­æ‰€æœ‰Î¸éƒ½ç»è¿‡ä¸€è½®ä¸Šè¿°çš„LSTM çš„è®­ç»ƒä»¥åï¼Œå¾—åˆ°çš„ä¸€ç»„å‚æ•°æ”¾å›network ä¸­ï¼Œç”¨testing data è®¡ç®—loss of Î¸ï¼Œæ®æ­¤ç”¨æ¢¯åº¦ä¸‹é™å›è°ƒLSTM å‚æ•°ã€‚å¦‚æ­¤å¾€å¤ï¼Œå»minimize lossï¼Œæœ€åå°±å¾—åˆ°äº†ä¸€ç»„æ¯”è¾ƒå¥½çš„å‚æ•°ï¼Œä½¿å¾—network èƒ½åœ¨testing data ä¸Šå–å¾—æ¯”è¾ƒå¥½çš„æˆç»©ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­LSTM æ‹…ä»»äº†ä»¥å‰ä½¿ç”¨çš„æ¢¯åº¦ä¸‹é™æ¥update å‚æ•°çš„è§’è‰²ï¼Œè€Œä¸”LSTM ä¸­çš„zfz^fzf ziz^izi è¿˜æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œå¯èƒ½è¦æ¯”ç»å…¸æ¢¯åº¦ä¸‹é™æ•ˆæœå¥½ã€‚\n\nè¿™é‡Œæœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚åœ¨ä¸€èˆ¬çš„LSTM ä¸­c å’Œx æ˜¯ç‹¬ç«‹çš„ï¼ŒLSTM çš„memory å­˜å‚¨çš„å€¼ä¸ä¼šå½±å“åˆ°ä¸‹ä¸€æ¬¡çš„è¾“å…¥ï¼Œä½†æ˜¯Gradient Descent LSTM ä¸­å‚æ•°Î¸ä¼šå½±å“åˆ°ä¸‹ä¸€ä¸ªstep ä¸­ç®—å‡ºçš„gradient çš„å€¼ï¼Œå¦‚ä¸Šå›¾è™šçº¿æ‰€ç¤ºã€‚æ‰€ä»¥è¯´åœ¨Gradient Descent LSTM ä¸­ç°åœ¨çš„å‚æ•°ä¼šå½±å“åˆ°æœªæ¥çœ‹åˆ°çš„æ¢¯åº¦ã€‚æ‰€ä»¥å½“ä½ åšback propagation çš„æ—¶å€™ï¼Œç†è®ºä¸Šä½ çš„error signal é™¤äº†èµ°å®çº¿çš„ä¸€æ¡è·¯ï¼Œå®ƒè¿˜å¯ä»¥èµ°Î¸åˆ°âˆ’âˆ‡Î¸l-\\nabla_\\theta lâˆ’âˆ‡Î¸â€‹l è™šçº¿è¿™ä¸€æ¡è·¯ï¼Œå¯ä»¥é€šè¿‡gradient è¿™æ¡è·¯æ›´æ–°å‚æ•°ã€‚ä½†æ˜¯è¿™æ ·åšä¼šå¾ˆéº»çƒ¦ï¼Œå’Œä¸€èˆ¬çš„LSTM ä¸å¤ªä¸€æ ·äº†ï¼Œä¸€èˆ¬çš„LSTM c å’Œx æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œç°åœ¨è¿™é‡Œç¡®å®æœ‰å…³ç³»ï¼Œä¸ºäº†è®©å®ƒå’Œä¸€èˆ¬çš„LSTM æ›´åƒï¼Œä¸ºäº†å°‘æ”¹ä¸€äº›code ï¼Œæˆ‘ä»¬å°±å‡è®¾æ²¡æœ‰è™šçº¿é‚£æ¡è·¯ï¼Œç»“æŸã€‚ç°åœ¨çš„æ–‡çŒ®ä¸Šå…¶å®ä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ã€‚\nå¦å¤–ï¼Œåœ¨LSTM input çš„åœ°æ–¹memory ä¸­çš„åˆå§‹å€¼å¯ä»¥é€šè¿‡è®­ç»ƒç›´æ¥è¢«learn å‡ºæ¥ï¼Œæ‰€ä»¥åœ¨LSTMä¸­ä¹Ÿå¯ä»¥åšåˆ°å’ŒMAMLç›¸åŒçš„äº‹ï¼Œå¯ä»¥æŠŠåˆå§‹çš„å‚æ•°è·Ÿç€LSTMä¸€èµ·å­¦å‡ºæ¥ã€‚\n Real Implementation\nLSTM çš„memory å°±æ˜¯è¦è®­ç»ƒçš„network çš„å‚æ•°ï¼Œè¿™äº›å‚æ•°åŠ¨è¾„å°±æ˜¯åä¸‡ç™¾ä¸‡çº§åˆ«çš„ï¼Œéš¾é“è¦å¼€åä¸‡ç™¾ä¸‡ä¸ªcell å—ï¼Ÿå¹³å¸¸æˆ‘ä»¬å¼€ä¸Šåƒä¸ªcell å°±ä¼štrain å¾ˆä¹…ï¼Œæ‰€ä»¥è¿™æ ·æ˜¯trainä¸èµ·æ¥çš„ã€‚åœ¨å®é™…çš„å®ç°ä¸Šï¼Œæˆ‘ä»¬åšäº†ä¸€ä¸ªéå¸¸å¤§çš„ç®€åŒ–ï¼šæˆ‘ä»¬æ‰€learn çš„LSTM åªæœ‰ä¸€ä¸ªcell è€Œå·²ï¼Œå®ƒåªå¤„ç†ä¸€ä¸ªå‚æ•°ï¼Œæ‰€æœ‰çš„å‚æ•°éƒ½å…¬ç”¨ä¸€ä¸ªLSTMã€‚æ‰€ä»¥å°±ç®—ä½ æœ‰ç™¾ä¸‡ä¸ªå‚æ•°ï¼Œéƒ½æ˜¯ä½¿ç”¨è¿™åŒä¸€ä¸ªLSTM æ¥å¤„ç†ã€‚\n\nä¹Ÿå°±æ˜¯è¯´å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç°åœ¨ä½ learn å¥½ä¸€ä¸ªLSTMä»¥åï¼Œå®ƒæ˜¯ç›´æ¥è¢«ç”¨åœ¨æ‰€æœ‰çš„å‚æ•°ä¸Šï¼Œè™½ç„¶è¿™ä¸ªLSTM ä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªå‚æ•°ï¼Œä½†æ˜¯åŒæ ·çš„LSTM è¢«ç”¨åœ¨æ‰€æœ‰çš„å‚æ•°ä¸Šã€‚Î¸1Î¸^1Î¸1 ä½¿ç”¨çš„LSTM å’ŒÎ¸2Î¸^2Î¸2 ä½¿ç”¨çš„LSTM æ˜¯åŒä¸€ä¸ªå¤„ç†æ–¹å¼ä¹Ÿç›¸åŒã€‚é‚£ä½ å¯èƒ½ä¼šè¯´ï¼ŒÎ¸1Î¸^1Î¸1 å’Œ Î¸2Î¸^2Î¸2 ç”¨çš„å¤„ç†æ–¹å¼ä¸€æ ·ï¼Œä¼šä¸ä¼šç®—å‡ºåŒæ ·çš„å€¼å‘¢ï¼Ÿä¼šä¸ï¼Œå› ä¸ºä»–ä»¬çš„åˆå§‹å‚æ•°æ˜¯ä¸åŒçš„ï¼Œè€Œä¸”ä»–ä»¬çš„gradient ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚åœ¨åˆå§‹å‚æ•°å’Œç®—å‡ºæ¥çš„gradient ä¸åŒçš„æƒ…å†µä¸‹ï¼Œå°±ç®—ä½ ç”¨çš„LSTMçš„å‚æ•°æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯è¯´ä½ update å‚æ•°çš„è§„åˆ™æ˜¯ä¸€æ ·çš„ï¼Œ æœ€ç»ˆç®—å‡ºæ¥çš„ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ Î¸3Î¸^3Î¸3 ã€‚\nè¿™å°±æ˜¯å®ä½œä¸ŠçœŸæ­£implement LSTM Gradient Descent çš„æ–¹æ³•ã€‚\nè¿™ä¹ˆåšæœ‰ä»€ä¹ˆå¥½å¤„ï¼š\n\nåœ¨æ¨¡å‹è§„æ¨¡ä¸Šé—®é¢˜ä¸Šæ¯”è¾ƒå®¹æ˜“å®ç°\nåœ¨ç»å…¸çš„gradient descent ä¸­ï¼Œæ‰€æœ‰çš„å‚æ•°ä¹Ÿéƒ½æ˜¯ä½¿ç”¨ç›¸åŒçš„è§„åˆ™ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨ç›¸åŒçš„LSTM ï¼Œå°±æ˜¯ä½¿ç”¨ç›¸åŒçš„æ›´æ–°è§„åˆ™æ˜¯åˆç†çš„\nè®­ç»ƒå’Œæµ‹è¯•çš„æ¨¡å‹æ¶æ„å¯ä»¥æ˜¯ä¸ä¸€æ ·çš„ï¼Œè€Œä¹‹å‰è®²çš„MAML éœ€è¦ä¿è¯è®­ç»ƒä»»åŠ¡å’Œæµ‹è¯•ä»»åŠ¡ä½¿ç”¨çš„model architecture ç›¸åŒ\n\n Experimental Results\n\n\nhttps://openreview.net/forum?id=rJY0-Kcll&amp;noteId=ryq49XyLg\n\næˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ–‡çŒ®ä¸Šçš„å®éªŒç»“æœï¼Œè¿™æ˜¯åšåœ¨few-shot learning çš„taskä¸Šã€‚æ¨ªè½´æ˜¯update çš„æ¬¡æ•°ï¼Œæ¯æ¬¡train ä¼šupdate 10æ¬¡ï¼Œå·¦ä¾§æ˜¯forget gate zfz^fzf çš„å˜åŒ–ï¼Œä¸åŒçš„çº¢è‰²çº¿å°±æ˜¯ä¸åŒçš„task ä¸­forget gate çš„å˜åŒ–ï¼Œå¯ä»¥çœ‹å‡ºzfz^fzf çš„å€¼å¤šæ•°æ—¶å€™éƒ½ä¿æŒåœ¨1é™„è¿‘ï¼Œä¹Ÿå°±æ˜¯è¯´LSTM æœ‰learn åˆ°Î¸tâˆ’1Î¸^{t-1}Î¸tâˆ’1 æ˜¯å¾ˆé‡è¦çš„ä¸œè¥¿ï¼Œæ²¡äº‹å°±ä¸è¦ç»™ä»–å¿˜æ‰ï¼Œåªåšä¸€ä¸ªå°å°çš„weight decadeï¼Œè¿™å’Œæˆ‘ä»¬åšregularization æ—¶å€™çš„æ€æƒ³ç›¸åŒï¼Œåªåšä¸€ä¸ªå°å°çš„weight decade é˜²æ­¢overfitting ã€‚\nå³ä¾§æ˜¯input gate ziz^izi çš„å˜åŒ–ï¼Œçº¢çº¿æ˜¯ä¸åŒçš„taskï¼Œå¯ä»¥çœ‹å‡ºå®ƒçš„å˜åŒ–æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯è‡³å°‘æˆ‘ä»¬çŸ¥é“ï¼Œå®ƒä¸æ˜¯ä¸€æˆä¸å˜çš„å›ºå®šå€¼ï¼Œå®ƒæ˜¯æœ‰å­¦åˆ°ä¸€äº›ä¸œè¥¿çš„ï¼Œæ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œæ”¾åˆ°ç»å…¸æ¢¯åº¦ä¸‹é™ä¸­æ¥è¯´å°±æ˜¯learning rate æ˜¯åŠ¨æ€å˜åŒ–çš„ã€‚\n LSTM for Gradient Descent (v2)\nåªæœ‰åˆšæ‰çš„æ¶æ„è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ›´è¿›ä¸€æ­¥ã€‚æƒ³æƒ³çœ‹ï¼Œè¿‡å»æˆ‘ä»¬åœ¨ç”¨ç»å…¸æ¢¯åº¦ä¸‹é™æ›´æ–°å‚æ•°çš„æ—¶å€™æˆ‘ä»¬ä¸ä»…ä¼šè€ƒè™‘å½“å‰step çš„æ¢¯åº¦ï¼Œæˆ‘ä»¬è¿˜ä¼šè€ƒè™‘è¿‡å»çš„æ¢¯åº¦ï¼Œæ¯”å¦‚RMSPropã€Momentum ç­‰ã€‚\n\n\nåœ¨åˆšæ‰çš„æ¶æ„ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰è®©æœºå™¨å»è®°ä½è¿‡å»çš„gradient ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åšæ›´è¿›ä¸€æ­¥çš„å»¶ä¼¸ã€‚æˆ‘ä»¬åœ¨è¿‡å»çš„æ¶æ„ä¸Šå†åŠ ä¸€å±‚LSTMï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nè“è‰²çš„ä¸€å±‚LSTM æ˜¯åŸå…ˆçš„ç®—learning rateã€åšweight decade çš„LSTMï¼Œæˆ‘ä»¬å†åŠ å…¥ä¸€å±‚LSTM ï¼Œè®©ç®—å‡ºæ¥çš„gradient âˆ’âˆ‡Î¸l-\\nabla_\\theta lâˆ’âˆ‡Î¸â€‹l å…ˆé€šè¿‡è¿™ä¸ªLSTM ï¼ŒæŠŠè¿™ä¸ªLSTM åå‡ºæ¥çš„ä¸œè¥¿input åˆ°åŸå…ˆçš„LSTM ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›ç»¿è‰²çš„è¿™ä¸€å±‚èƒ½åšåˆ°è®°ä½ä»¥å‰ç®—è¿‡çš„gradient è¿™ä»¶äº‹ã€‚è¿™æ ·ï¼Œå¯èƒ½å°±å¯ä»¥åšåˆ°Momentum å¯ä»¥åšçš„çš„äº‹æƒ…ã€‚\nä¸Šè¿°çš„è¿™ä¸ªæ–¹æ³•ï¼Œæ˜¯è€å¸ˆè‡ªå·±æƒ³è±¡çš„ï¼Œåœ¨learning to learn by gradient descent by gradient descent è¿™ç¯‡paper ä¸­ä¸Šå›¾ä¸­è“è‰²çš„LSTM ä½¿ç”¨çš„æ˜¯ä¸€èˆ¬çš„æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œè€Œåœ¨å¦ä¸€ç¯‡paper ä¸­åªæœ‰ä¸Šé¢æ²¡æœ‰ä¸‹é¢ï¼Œè€Œè€å¸ˆè§‰å¾—è¿™æ ·ç»“åˆèµ·æ¥æ‰æ˜¯å®ç°ï¼Œèƒ½è€ƒè™‘è¿‡å»çš„gradient çš„gradient descent ç®—æ³•çš„å®Œå…¨ä½“ã€‚\n Experimental Result 2\nlearning to learn by gradient descent by gradient descent è¿™ç¯‡paper çš„å®éªŒç»“æœã€‚\n\n\nhttps://arxiv.org/abs/1606.04474\n\nç¬¬ä¸€ä¸ªå®éªŒå›¾ï¼Œæ˜¯åšåœ¨toy example ä¸Šï¼Œå®ƒå¯ä»¥åˆ¶é€ ä¸€å¤§å †è®­ç»ƒä»»åŠ¡ï¼Œç„¶åæµ‹è¯•åœ¨æµ‹è¯•ä»»åŠ¡ä¸Šï¼Œç„¶åå‘ç°ï¼ŒLSTM æ¥å½“ä½œgradient descent çš„æ–¹æ³•è¦å¥½è¿‡äººè®¾è®¡çš„æ¢¯åº¦ä¸‹é™æ–¹æ³•ã€‚\nç¬¬äºŒå¼ å›¾æŠŠè¿™ä¸ªæŠ€æœ¯åº”ç”¨å¸¦MNIST ä¸Šï¼Œè¿™ä¸ªå®éªŒæ˜¯è®­ç»ƒä»»åŠ¡æµ‹è¯•ä»»åŠ¡éƒ½æ˜¯MNISTã€‚\nç¬¬ä¸‰å¼ å›¾æ˜¯è¯´è™½ç„¶è®­ç»ƒå’Œæµ‹è¯•ä»»åŠ¡éƒ½æ˜¯ç›¸åŒçš„datasetä¹Ÿæ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯train å’Œtest çš„æ—¶å€™network çš„æ¶æ„æ˜¯ä¸ä¸€æ ·çš„ã€‚ åœ¨train çš„æ—¶å€™network æ˜¯åªæœ‰ä¸€å±‚ï¼Œè¯¥å±‚åªæœ‰20ä¸ªneuronã€‚è¿™å¼ å›¾æ˜¯training çš„ç»“æœã€‚\nç¬¬å››å¼ å›¾æ˜¯ä¸Šè¿°æ”¹å˜network æ¶æ„ååœ¨testing çš„ç»“æœï¼Œtesting çš„æ—¶å€™network åªæœ‰ä¸€å±‚è¯¥å±‚40ä¸ªneuronã€‚ä»å›¾ä¸Šçœ‹è¿˜æ˜¯åšçš„èµ·æ¥ï¼Œè€Œä¸”æ¯”ä¸€èˆ¬çš„gradient descent æ–¹æ³•è¦å¥½å¾ˆå¤šã€‚\nç¬¬äº”å¼ å›¾æ˜¯ä¸Šè¿°æ”¹å˜network æ¶æ„ååœ¨testing çš„ç»“æœï¼Œtesting çš„æ—¶å€™network æœ‰ä¸¤å±‚ã€‚ä»å›¾ä¸Šçœ‹è¿˜æ˜¯åšçš„èµ·æ¥ï¼Œè€Œä¸”æ¯”ä¸€èˆ¬çš„gradient descent æ–¹æ³•è¦å¥½å¾ˆå¤šã€‚\nç¬¬å…­å¼ å›¾æ˜¯ä¸Šè¿°æ”¹å˜network æ¿€æ´»å‡½æ•°ååœ¨testing çš„ç»“æœï¼Œtraining çš„æ—¶å€™æ¿€æ´»å‡½æ•°æ˜¯sigmoid è€Œtesting çš„æ—¶å€™æ”¹æˆReLUã€‚ä»å›¾ä¸Šçœ‹åšä¸èµ·æ¥ï¼Œå´©æ‰äº†ï¼Œtraining å’Œtesting çš„network çš„æ¿€æ´»å‡½æ•°ä¸ä¸€æ ·çš„æ—¶å€™ï¼ŒLSTM æ²¡åŠæ³•è·¨model åº”ç”¨ã€‚\n","categories":["æå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°"],"tags":["ML","note","Next-Step-of-ML"]},{"title":"Meta Learning-MAML","url":"https://ch3nye.top/Meta-Learning-MAML/","content":" Meta Learning-MAML\nMeta learning æ€»ä½“æ¥è¯´å°±æ˜¯è®©æœºå™¨å­¦ä¹ å¦‚ä½•å­¦ä¹ ã€‚\n\nå¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬å¸Œæœ›æœºå™¨åœ¨å­¦è¿‡ä¸€äº›ä»»åŠ¡ä»¥åï¼Œå®ƒå­¦ä¼šå¦‚ä½•å»å­¦ä¹ æ›´æœ‰æ•ˆç‡ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¼šæˆä¸ºä¸€ä¸ªæ›´ä¼˜ç§€çš„å­¦ä¹ è€…ï¼Œå› ä¸ºå®ƒå­¦ä¼šäº†å­¦ä¹ çš„æŠ€å·§ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬æ•™æœºå™¨å­¦ä¼šäº†è¯­éŸ³è¾¨è¯†ã€å›¾åƒè¯†åˆ«ç­‰æ¨¡å‹ä»¥åï¼Œå®ƒå°±å¯ä»¥åœ¨æ–‡æœ¬åˆ†ç±»ä»»åŠ¡ä¸Šåšçš„æ›´å¿«æ›´å¥½ï¼Œè™½ç„¶è¯´è¯­éŸ³è¾¨è¯†ã€å›¾åƒè¯†åˆ«å’Œæ–‡æœ¬åˆ†ç±»æ²¡ä»€ä¹ˆç›´æ¥çš„å…³ç³»ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›æœºå™¨ä»å…ˆå‰çš„ä»»åŠ¡å­¦ä¹ ä¸­å­¦ä¼šäº†å­¦ä¹ çš„æŠ€å·§ã€‚\nè®²åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šè§‰å¾—Meta Learning å’Œ Life-Long Learning æœ‰ç‚¹åƒï¼Œç¡®å®å¾ˆåƒï¼Œä½†æ˜¯LLL çš„ç€çœ¼ç‚¹æ˜¯ç”¨åŒä¸€ä¸ªæ¨¡å‹apply åˆ°ä¸åŒçš„ä»»åŠ¡ä¸Šï¼Œè®©ä¸€ä¸ªæ¨¡å‹å¯ä»¥ä¸æ–­åœ°å­¦ä¼šæ–°çš„ä»»åŠ¡ï¼Œè€ŒMeta Learning ä¸­ä¸åŒçš„ä»»åŠ¡æœ‰ä¸åŒçš„æ¨¡å‹ï¼Œæˆ‘ä»¬çš„ç€çœ¼ç‚¹æ˜¯æœºå™¨å¯ä»¥ä»è¿‡å»çš„å­¦ä¹ ä¸­å­¦åˆ°å­¦ä¹ çš„æ–¹æ³•ï¼Œè®©å®ƒåœ¨ä»¥åçš„å­¦ä¹ ä¸­æ›´å¿«æ›´å¥½ã€‚\næˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä¼ ç»Ÿçš„ML çš„åšæ³•ï¼š\n\næˆ‘ä»¬è¿‡å»å­¦è¿‡çš„ML ï¼Œé€šå¸¸æ¥è¯´å°±æ˜¯å®šä¹‰ä¸€ä¸ªå­¦ä¹ ç®—æ³•ï¼Œç„¶åç”¨è®­ç»ƒæ•°æ®train ï¼Œåå‡ºä¸€ç»„å‚æ•°ï¼ˆæˆ–è€…è¯´ä¸€ä¸ªå‚æ•°å·²å®šçš„å‡½æ•°å¼ï¼‰ï¼Œä¹Ÿå°±æ˜¯å¾—åˆ°äº†æ¨¡å‹ï¼Œè¿™ä¸ªæ¨¡å‹å¯ä»¥å‘Šè¯‰æˆ‘ä»¬æµ‹è¯•æ•°æ®åº”è¯¥å¯¹åº”çš„ç»“æœã€‚æ¯”å¦‚æˆ‘ä»¬åšçŒ«ç‹—åˆ†ç±»ï¼Œtrain å®Œä»¥åï¼Œç»™æ¨¡å‹ä¸€ä¸ªçŒ«çš„ç…§ç‰‡ï¼Œå®ƒå°±ä¼šå‘Šè¯‰æˆ‘ä»¬è¿™æ˜¯ä¸€åªçŒ«ã€‚\næˆ‘ä»¬æŠŠå­¦ä¹ ç®—æ³•è®°ä¸º FFF ï¼Œè¿™ä¸ªå­¦ä¹ ç®—æ³•åƒtraining data ç„¶ååå‡ºç›®æ ‡æ¨¡å‹ fâˆ—f^*fâˆ— ï¼Œå½¢å¼åŒ–è®°ä½œï¼š\nfâˆ—=F(Dtrain)f^* = F(D_{train})\nfâˆ—=F(Dtrainâ€‹)\nMeta Learning å°±æ˜¯è¦è®©æœºå™¨è‡ªåŠ¨çš„æ‰¾ä¸€ä¸ªå¯ä»¥åƒtraining data åå‡ºå‡½æ•° fâˆ—f^*fâˆ— çš„å‡½æ•° FFF ã€‚\næ€»ç»“ä¸€ä¸‹ï¼š\n\nMachine Learning å’ŒMeta Learning éƒ½æ˜¯è®©æœºå™¨æ‰¾ä¸€ä¸ªfunction ï¼Œåªä¸è¿‡è¦æ‰¾çš„function æ˜¯ä¸ä¸€æ ·çš„ã€‚\næˆ‘ä»¬çŸ¥é“Machine Learning ä¸€å…±åˆ†ä¸‰æ­¥ï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼ŒMeta Learning ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä½ åªè¦æŠŠFunction fff æ¢æˆ**å­¦ä¹ çš„ç®—æ³• FFF **è¿™å°±æ˜¯Meta Learning çš„æ­¥éª¤ï¼š\n\n\næˆ‘ä»¬å…ˆå®šä¹‰ä¸€ç»„Learning çš„Algorithm æˆ‘ä»¬ä¸çŸ¥é“å“ªä¸€ä¸ªç®—æ³•æ˜¯æ¯”è¾ƒå¥½çš„ï¼Œ\n\n\nç„¶åå®šä¹‰ä¸€ä¸ªLearning Algorithm çš„Loss ï¼Œå®ƒä¼šå‘Šè¯‰ä½ æŸä¸ªç®—æ³•çš„å¥½åï¼Œ\n\n\næœ€åï¼Œå»train ä¸€å‘æ‰¾å‡ºå“ªä¸ªLearning Algorithmæ¯”è¾ƒå¥½ã€‚\n\n\næ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å°†åˆ†ä¸‰éƒ¨åˆ†æ¥è®²Meta Learning çš„å…·ä½“è¿‡ç¨‹ã€‚\n\n Three Step of Meta-Learning\n Define a set of learning algorithm\nä»€ä¹ˆæ˜¯ä¸€ç»„learning algorithm å‘¢ï¼Ÿ\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç°è‰²æ¡†ä¸­çš„ï¼ŒåŒ…æ‹¬ç½‘ç»œï¼ˆæ¨¡å‹ï¼‰æ¶æ„ï¼Œåˆå§‹åŒ–å‚æ•°çš„æ–¹æ³•ï¼Œæ›´æ–°å‚æ•°çš„æ–¹æ³•ï¼Œå­¦ä¹ ç‡ç­‰è¦ç´ æ„æˆçš„æ•´ä¸ªprocess ï¼Œå¯ä»¥è¢«ç§°ä¸ºä¸€ä¸ªlearning algorithm ã€‚åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­æœ‰å¾ˆå¤šè¦ç´ éƒ½æ˜¯äººè®¾è®¡çš„ï¼Œå½“æˆ‘ä»¬é€‰æ‹©ä¸åŒçš„è®¾è®¡çš„æ—¶å€™å°±ç›¸å½“äºå¾—åˆ°äº†ä¸åŒçš„learning algorithm ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬è€ƒè™‘èƒ½ä¸èƒ½è®©æœºå™¨è‡ªå·±å­¦å‡ºæŸä¸€ç¯èŠ‚ï¼Œæˆ–è€…å…¨éƒ¨process çš„è®¾è®¡ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬ç”¨ä¸åŒçš„åˆå§‹åŒ–æ–¹æ³•å¾—åˆ°ä¸åŒçš„åˆå§‹åŒ–å‚æ•°ä»¥åï¼Œä¿æŒè®­ç»ƒæ–¹æ³•å…¶ä»–éƒ¨åˆ†çš„ç›¸åŒï¼Œä¸”ç”¨ç›¸åŒçš„æ•°æ®æ¥è®­ç»ƒæ¨¡å‹ï¼Œæœ€åéƒ½ä¼šå¾—åˆ°ä¸åŒçš„æ¨¡å‹ï¼Œé‚£æˆ‘ä»¬å°±è€ƒè™‘èƒ½ä¸èƒ½è®©æœºå™¨è‡ªå·±å­¦ä¼šåˆå§‹åŒ–å‚æ•°ï¼Œç›´æ¥å¾—åˆ°æœ€å¥½çš„ä¸€ç»„åˆå§‹åŒ–å‚æ•°ï¼Œç”¨äºè®­ç»ƒã€‚\næˆ‘ä»¬å°±å¸Œæœ›é€šè¿‡Meta Learning å­¦ä¹ åˆ°åˆå§‹åŒ–å‚æ•°è¿™ä»¶äº‹ï¼Œå¥½ï¼Œç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ç»„learning algorithm ï¼Œå…¶ä¸­å„ä¸ªç®—æ³•åªæœ‰åˆå§‹åŒ–å‚æ•°çš„æ–¹æ³•æœªçŸ¥ï¼Œæ˜¯å¸Œæœ›æœºå™¨é€šè¿‡å­¦ä¹ å¾—å‡ºæ¥çš„ã€‚\né‚£ç°åœ¨æˆ‘ä»¬æ€ä¹ˆè¡¡é‡ä¸€ä¸ªlearning algorithm çš„å¥½åå‘¢ï¼Ÿ\n Define the goodness of a function F\n\næˆ‘ä»¬éœ€è¦å¾ˆå¤šä¸ªtaskï¼Œæ¯ä¸ªtaskéƒ½æœ‰training set å’Œtesting setï¼Œç„¶åå°±æŠŠlearning algorithm åº”ç”¨åˆ°æ¯ä¸ªtaskä¸Šï¼Œç”¨training set è®­ç»ƒï¼Œç”¨testing set æµ‹è¯•ï¼Œå¾—åˆ°æ¯ä¸€ä¸ªtask çš„loss lil^iliï¼Œå¯¹äºä¸€ä¸ªlearning algorithm FFF çš„æ•´ä½“loss å°±å¯ä»¥ç”¨æ¯ä¸ªtask çš„loss è¿›è¡Œæ±‚å’Œã€‚\nL(F)=âˆ‘n=1NlnL(F) = \\sum\\limits_{n=1}^{N}l^n\nL(F)=n=1âˆ‘Nâ€‹ln\nä»è¿™é‡Œæˆ‘ä»¬å°±èƒ½çœ‹å‡ºï¼Œmeta learning å’Œä¼ ç»Ÿçš„machine learning åœ¨è®­ç»ƒèµ„æ–™ä¸Šæ˜¯æœ‰äº›ä¸åŒçš„ï¼š\n\nåšmeta learning çš„è¯ä½ å¯èƒ½éœ€è¦å‡†å¤‡æˆç™¾ä¸Šåƒä¸ªtaskï¼Œæ¯ä¸ªtask éƒ½æœ‰è‡ªå·±çš„training set å’Œtesting set ã€‚è¿™é‡Œä¸ºäº†åŒºåˆ†ï¼Œæˆ‘ä»¬æŠŠmeta learningçš„è®­ç»ƒé›†å«åšTraining Tasksï¼Œæµ‹è¯•é›†å«åšTesting Tasksï¼Œå…¶ä¸­ä¸­æ¯ä¸ªtask çš„è®­ç»ƒé›†å«åšSupport set ï¼Œæµ‹è¯•é›†å«åš Query set ã€‚\nPSï¼šè¿™é‡Œæœ‰å­¦ç”Ÿæé—®ï¼Œæ ¹æ®è€å¸ˆçš„å›ç­”ï¼Œå¤§æ„å°±æ˜¯ï¼Œtraining tasks å’Œtesting taskså¯ä»¥æ˜¯ä¸åŒç±»å‹çš„ä»»åŠ¡ï¼Œæ¯”å¦‚å…¨éƒ¨ç”¨å½±åƒè¾¨è¯†ä»»åŠ¡è®­ç»ƒç„¶åç”¨è¯­éŸ³è¾¨è¯†ä»»åŠ¡æµ‹è¯•ä¹Ÿæ˜¯å¯ä»¥åšå¾—èµ·æ¥çš„ã€‚è¿™å–å†³äºä½ çš„meta learning çš„algorithm æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œæœ‰çš„è®­ç»ƒå’Œæµ‹è¯•ä»»åŠ¡çš„ç±»å‹å¯ä»¥æ˜¯ä¸ä¸€æ ·çš„æœ‰äº›æ˜¯éœ€è¦ä¸€æ ·çš„ã€‚\nè®²åˆ°è¿™é‡Œä½ å¯èƒ½è§‰å¾—æ¯”è¾ƒæŠ½è±¡ï¼Œåé¢ä¼šè®²åˆ°å®é™…çš„æ —å­ï¼Œä½ å¯èƒ½å°±ç†è§£äº†meta learning çš„å®é™…è¿ä½œæ–¹æ³•ã€‚Meta learning æœ‰å¾ˆå¤šæ–¹æ³•ï¼ŒåŠ ä¸‹æ¥ä¼šè®²å‡ ä¸ªæ¯”è¾ƒå¸¸è§çš„ç®—æ³•ï¼Œæœ¬èŠ‚è¯¾ä¼šè®²åˆ°ä¸€ä¸ªæœ€æœ‰åçš„å«åšMAML ï¼Œä»¥åŠMAML çš„å˜å½¢å«åšReptile ã€‚\n Find the best function Fâˆ—F^*Fâˆ—\nå®šå¥½äº†loss function ä»¥åæˆ‘ä»¬å°±è¦æ‰¾ä¸€ä¸ªæœ€å¥½çš„F* ï¼Œè¿™ä¸ªFâˆ—F^*Fâˆ—å¯ä»¥ä½¿æ‰€æœ‰çš„training tasks çš„loss ä¹‹å’Œæœ€å°ï¼Œå½¢å¼åŒ–çš„å†™ä½œä¸‹å›¾ä¸‹é¢çš„å…¬å¼ï¼ˆå…·ä½“è®¡ç®—æ–¹æ³•åé¢å†è®²ï¼‰ï¼š\n\nç°åœ¨æˆ‘ä»¬å°±æœ‰äº†meta learning çš„algorithm ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨testing tasks æµ‹è¯•è¿™ä¸ªFâˆ—F^*Fâˆ—ï¼ŒæŠŠæµ‹è¯•ä»»åŠ¡çš„è®­ç»ƒé›†æ”¾ä¸¢å…¥Fâˆ—F^*Fâˆ—ï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªfâˆ—f^*fâˆ— ï¼Œå†ç”¨æµ‹è¯•ä»»åŠ¡çš„æµ‹è¯•é›†å»è®¡ç®—è¿™ä¸ªfâˆ—f^*fâˆ— çš„loss ï¼Œè¿™ä¸ªloss å°±æ˜¯æ•´ä¸ªmeta learning algorithm çš„loss ï¼Œæ¥è¡¡é‡è¿™ä¸ªæ–¹æ³•çš„å¥½åã€‚\n Omniglot Corpus\n Introduction\n\nhttps://github.com/brendenlake/omniglot\n\n\nè¿™æ˜¯ä¸€ä¸ªcorpusï¼Œè¿™é‡Œé¢æœ‰ä¸€å¤§å †å¥‡æ€ªçš„ç¬¦å·ï¼Œæ€»å…±æœ‰1623ä¸ªä¸åŒçš„ç¬¦å·ï¼Œæ¯ä¸ªç¬¦å·æœ‰20ä¸ªä¸åŒçš„èŒƒä¾‹ã€‚ä¸Šå›¾ä¸‹ä¾§å°±æ˜¯é‚£äº›ç¬¦å·ï¼Œå³ä¸Šè§’æ˜¯ä¸€ä¸ªç¬¦å·çš„20ä¸ªèŒƒä¾‹ã€‚\n Few-shot Classification\n\nN-ways K-shot classification çš„æ„æ€æ˜¯ï¼Œåˆ†Nä¸ªç±»åˆ«ï¼Œæ¯ä¸ªç±»åˆ«æœ‰Kä¸ªæ ·ä¾‹ã€‚\næ‰€ä»¥ï¼Œ20 ways 1shot å°±æ˜¯è¯´åˆ†20ç±»ï¼Œæ¯ç±»åªæœ‰ä¸€ä¸ªæ ·ä¾‹ã€‚è¿™ä¸ªä»»åŠ¡çš„æ•°æ®é›†å°±ä¾‹å¦‚ä¸Šå›¾ä¸­é—´çš„20å¼ support set å’Œ1å¼ query set ã€‚\n\næŠŠç¬¦å·é›†åˆ†ä¸ºè®­ç»ƒç¬¦å·é›†å’Œæµ‹è¯•ç¬¦å·é›†\n\nä»è®­ç»ƒç¬¦å·é›†ä¸­éšæœºæŠ½Nä¸ªç¬¦å·ï¼Œä»è¿™Nä¸ªç¬¦å·çš„èŒƒä¾‹ä¸­å„éšæœºæŠ½Kä¸ªæ ·æœ¬ï¼Œè¿™å°±ç»„æˆäº†ä¸€ä¸ªè®­ç»ƒä»»åŠ¡training task ã€‚\nä»æµ‹è¯•ç¬¦å·é›†ä¸­éšæœºæŠ½Nä¸ªç¬¦å·ï¼Œä»è¿™Nä¸ªç¬¦å·çš„èŒƒä¾‹ä¸­å„éšæœºæŠ½Kä¸ªæ ·æœ¬ï¼Œè¿™å°±ç»„æˆäº†ä¸€ä¸ªæµ‹è¯•ä»»åŠ¡testing task ã€‚\n\n\n\n Techniques Today\n\nè¿™ä¸¤ä¸ªå¤§æ¦‚æ˜¯æœ€è¿‘ï¼ˆ2019å¹´ï¼‰æ¯”è¾ƒç«çš„å§ï¼ŒReptile å¯ä»¥å‚è€ƒä¸€ä¸‹openaiçš„è¿™ç¯‡æ–‡ç« ã€‚\n\nReptile: A Scalable Meta-Learning Algorithm (openai.com)\n\næ¥ä¸‹æ¥å…ˆå°†MAMLï¼ˆè¯¦ç»†ï¼‰ ï¼Œå†è®²Reptileï¼ˆç®€ç•¥ï¼‰ã€‚\n MAML\n\nMAMLè¦åšçš„å°±æ˜¯å­¦ä¸€ä¸ªåˆå§‹åŒ–çš„å‚æ•°ã€‚è¿‡å»ä½ åœ¨åšåˆå§‹åŒ–å‚æ•°çš„æ—¶å€™ä½ å¯èƒ½è¦ä»ä¸€ä¸ªdistribution ä¸­sample å‡ºæ¥ï¼Œç°åœ¨æˆ‘ä»¬å¸Œæœ›é€šè¿‡å­¦ä¹ ï¼Œæœºå™¨å¯ä»¥è‡ªå·±ç»™å‡ºä¸€ç»„æœ€å¥½çš„åˆå§‹åŒ–å‚æ•°ã€‚\nåšæ³•å°±å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å…ˆæ‹¿ä¸€ç»„åˆå§‹åŒ–å‚æ•° Ï•\\phiÏ• å»å„ä¸ªtraining task åšè®­ç»ƒï¼Œåœ¨ç¬¬nä¸ªtask ä¸Šå¾—åˆ°çš„æœ€ç»ˆå‚æ•°è®°ä½œ Î¸^n\\hat{Î¸}^nÎ¸^n ï¼Œè€Œln(Î¸^n)l^n(\\hat{Î¸}^n)ln(Î¸^n) ä»£è¡¨ç¬¬nä¸ªtask åœ¨å…¶testing set ä¸Šçš„lossï¼Œæ­¤æ—¶æ•´ä¸ªMAML ç®—æ³•çš„Loss è®°ä½œï¼š\nL(Ï•)=âˆ‘n=1Nln(Î¸^n)L(\\phi) = \\sum\\limits_{n=1}^{N}l^n(\\hat{Î¸}^n)\nL(Ï•)=n=1âˆ‘Nâ€‹ln(Î¸^n)\nè¿™é‡Œæç¤ºä¸€ä¸‹ï¼ŒMAMLå°±æ˜¯å±äºéœ€è¦æ‰€æœ‰ä»»åŠ¡çš„ç½‘ç»œæ¶æ„ç›¸åŒçš„meta learning algorithmï¼Œå› ä¸ºå…¶ä¸­æ‰€æœ‰çš„function è¦å…±ç”¨ç›¸åŒçš„åˆå§‹åŒ–å‚æ•° Ï•\\phiÏ• ã€‚\né‚£æ€ä¹ˆminimize L(Ï•)L(\\phi)L(Ï•) å‘¢ï¼Ÿ\nç­”æ¡ˆå°±æ˜¯Gradient Descentï¼Œä½ åªè¦èƒ½å¾—åˆ° L(Ï•)L(\\phi)L(Ï•) å¯¹ Ï•\\phiÏ• çš„æ¢¯åº¦ï¼Œé‚£å°±å¯ä»¥æ›´æ–° Ï•\\phiÏ• äº†ï¼Œç»“æŸã€‚ğŸ˜®\nÏ•=Ï•âˆ’Î·âˆ‡Ï•L(Ï•)\\phi = \\phi - \\eta \\nabla_{\\phi}L(\\phi)\nÏ•=Ï•âˆ’Î·âˆ‡Ï•â€‹L(Ï•)\nè¿™é‡Œæˆ‘ä»¬å…ˆå‡è£…å·²ç»ä¼šç®—è¿™ä¸ªæ¢¯åº¦äº†ï¼Œå…ˆæŠŠè¿™ä¸ªæ¢¯åº¦æ›´æ–°å‚æ•°çš„æ€è·¯ç†è§£å°±å¥½ï¼Œå…·ä½“çš„æ›´æ–°ç®—æ³•åœ¨[Warning of Math](#Warning of Math)ä¸­ä¼šå°†åˆ°ï¼Œæˆ‘ä»¬å…ˆæ¥åº·ä¸€ä¸‹MAML å’Œ Model Pre-training åœ¨Loss Function ä¸Šçš„åŒºåˆ«ã€‚\n MAML v.s. Model Pre-training\n\né€šè¿‡ä¸Šå›¾æˆ‘ä»¬ä»”ç»†å¯¹æ¯”ä¸¤ä¸ªæŸå¤±å‡½æ•°ï¼Œå¯ä»¥çœ‹å‡ºï¼ŒMAMLæ˜¯æ ¹æ®è®­ç»ƒå®Œçš„å‚æ•° Î¸^n\\hat{Î¸}^nÎ¸^n è®¡ç®—æŸå¤±ï¼Œè®¡ç®—çš„æ˜¯è®­ç»ƒå¥½çš„å‚æ•°åœ¨å„ä¸ªtask çš„è®­ç»ƒé›†ä¸Šçš„æŸå¤±ï¼›è€Œé¢„è®­ç»ƒæ¨¡å‹çš„æŸå¤±å‡½æ•°åˆ™æ˜¯æ ¹æ®å½“å‰åˆå§‹åŒ–çš„å‚æ•°è®¡ç®—æŸå¤±ï¼Œè®¡ç®—çš„æ˜¯å½“å‰å‚æ•°åœ¨è¦åº”ç”¨pre-training çš„task ä¸Šçš„æŸå¤±ã€‚\nå†ä¸¾ä¸€ä¸ªå½¢è±¡ä¸€ç‚¹çš„æ —å­ï¼š\n\nï¼ˆæ¨ªè½´æ˜¯æ¨¡å‹å‚æ•°ï¼Œç®€åŒ–ä¸ºä¸€ä¸ªå‚æ•°ï¼Œçºµè½´æ˜¯lossï¼‰\nå¦‚ä¸Šå›¾è¯´çš„ï¼Œæˆ‘ä»¬åœ¨æ„çš„æ˜¯è¿™ä¸ªåˆå§‹åŒ–å‚æ•°ç»è¿‡å„ä¸ªtask è®­ç»ƒä»¥åçš„å‚æ•°åœ¨å¯¹åº”ä»»åŠ¡ä¸Šçš„è¡¨ç°ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœåˆå§‹å‚æ•° Ï•\\phiÏ• åœ¨ä¸­é—´ä½ç½®ï¼ˆå¦‚ä¸Šå›¾ï¼‰ï¼Œå¯èƒ½è¿™ä¸ªä½ç½®æ ¹æ®å½“å‰å‚æ•°è®¡ç®—çš„æ€»ä½“loss ä¸æ˜¯æœ€å¥½çš„ï¼Œä½†æ˜¯åœ¨å„ä¸ªä»»åŠ¡ä¸Šç»è¿‡è®­ç»ƒä»¥å Î¸^\\hatÎ¸Î¸^ éƒ½èƒ½å¾—åˆ°è¾ƒä½çš„lossï¼ˆå¦‚ Î¸^1\\hat{Î¸}^1Î¸^1ã€Î¸^2\\hat{Î¸}^2Î¸^2ï¼‰ï¼Œé‚£è¿™ä¸ªåˆå§‹å‚æ•° Ï•\\phiÏ• å°±æ˜¯å¥½çš„ï¼Œå…¶loss å°±æ˜¯å°çš„ã€‚\nåä¹‹ï¼Œåœ¨Model pre-training ä¸Šï¼š\n\næˆ‘ä»¬å¸Œæœ›ç›´æ¥é€šè¿‡è¿™ä¸ª Ï•\\phiÏ• è®¡ç®—å‡ºæ¥çš„å„ä¸ªtask çš„loss æ˜¯æœ€å°çš„ï¼Œæ‰€ä»¥å®ƒçš„å–å€¼ç‚¹å°±å¯èƒ½ä¼šæ˜¯ä¸Šå›¾çš„æ ·å­ã€‚æ­¤æ—¶åœ¨task 2ä¸Šåˆå§‹å‚æ•°å¯èƒ½ä¸èƒ½å¤Ÿè¢«æ›´æ–°åˆ°global minimaï¼Œä¼šå¡åœ¨local minima çš„ç‚¹ Î¸^2\\hat{Î¸}^2Î¸^2ã€‚\nç»¼ä¸Šæ‰€è¿°ï¼š\n\nMAML æ˜¯è¦æ‰¾ä¸€ä¸ª Ï•\\phiÏ• åœ¨è®­ç»ƒä»¥åå…·æœ‰å¥½çš„è¡¨ç°ï¼Œæ³¨é‡å‚æ•°çš„æ½œåŠ›ï¼ŒModel Pre-training æ˜¯è¦æ‰¾ä¸€ä¸ª Ï•\\phiÏ• åœ¨è®­ç»ƒä»»åŠ¡ä¸Šå¾—åˆ°å¥½çš„ç»“æœï¼Œæ³¨é‡ç°åœ¨çš„è¡¨ç°ã€‚\n MAML Only Update One Time\n\nåœ¨MAML ä¸­æˆ‘ä»¬åªupdate å‚æ•°ä¸€æ¬¡ã€‚æ‰€ä»¥åœ¨è®­ç»ƒé˜¶æ®µï¼Œä½ åªåšone-step training ï¼Œå‚æ•°æ›´æ–°å…¬å¼å°±å˜æˆä¸Šå›¾å³ä¸‹è§’çš„å¼å­ã€‚\nåªæ›´æ–°ä¸€æ¬¡æ˜¯æœ‰äº›ç†ç”±çš„ï¼š\n\nä¸ºäº†é€Ÿåº¦ï¼Œå¤šæ¬¡è®¡ç®—æ¢¯åº¦æ›´æ–°å‚æ•°æ˜¯æ¯”è¾ƒè€—æ—¶çš„ï¼Œè€Œä¸”MAML è¦train å¾ˆå¤šä¸ªtask\næŠŠåªæ›´æ–°ä¸€æ¬¡ä½œä¸ºç›®æ ‡\nå®é™…ä¸Šä½ å¯ä»¥åœ¨training çš„æ—¶å€™update ä¸€æ¬¡ï¼Œåœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œè§£testing task çš„æ—¶å€™å¤šupdate å‡ æ¬¡ç»“æœå¯èƒ½å°±ä¼šæ›´å¥½\nå¦‚æœæ˜¯few-shot learning çš„taskï¼Œç”±äºdata å¾ˆå°‘ï¼Œupdate å¾ˆå¤šæ¬¡å¾ˆå®¹æ˜“overfitting\n\n Toy Example\n\n\nSource of images Paper repro: Deep Metalearning using â€œMAMLâ€ and â€œReptileâ€\n\n\nè¦æ‹Ÿåˆçš„ç›®æ ‡å‡½æ•°æ˜¯ y=asin(x+b)y=asin(x+b)y=asin(x+b)\nå¯¹æ¯ä¸ªå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªtaskï¼Œsample kä¸ªç‚¹\né€šè¿‡è¿™äº›ç‚¹åšæ‹Ÿåˆ\n\næˆ‘ä»¬åªè¦sample ä¸åŒçš„a, bå°±å¯ä»¥å¾—åˆ°ä¸åŒçš„ç›®æ ‡å‡½æ•°ã€‚\næ¥çœ‹çœ‹å¯¹æ¯”ç»“æœï¼š\n\nå¯ä»¥çœ‹åˆ°ï¼Œé¢„è®­ç»ƒæ¨¡å‹æƒ³è¦è®©å‚æ•°åœ¨æ‰€æœ‰çš„task ä¸Šéƒ½åšå¥½ï¼Œå¤šä¸ªtaskå åŠ èµ·æ¥ï¼Œå¯¼è‡´é¢„è®­ç»ƒæ¨¡å‹æœ€åæ‹Ÿåˆå¾—åˆ°çš„æ˜¯ä¸€æ¡ç›´çº¿ã€‚\nMAML åœ¨æµ‹è¯•task ä¸Štraining step å¢åŠ çš„è¿‡ç¨‹ä¸­æœ‰æ˜æ˜¾çš„æ‹Ÿåˆæ•ˆæœæå‡ã€‚\n Omniglot &amp; Mini-ImageNet\nåœ¨MAML çš„åŸå§‹è®ºæ–‡ä¸­ä¹ŸæŠŠè¿™ä¸ªæŠ€æœ¯ç”¨äºOmniglot &amp; Mini-ImageNet\n\n\nhttps://arxiv.org/abs/1703.03400\n\næˆ‘ä»¬çœ‹ä¸Šå›¾ä¸‹ä¾§ï¼ŒMAML, first order approx å’Œ MAML çš„ç»“æœå¾ˆç›¸ä¼¼ï¼Œé‚£approx æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿè§£é‡Šè¿™ä¸ªä¸œè¥¿éœ€è¦ä¸€ç‚¹ç‚¹æ•°å­¦ï¼š\n Warning of Math\nè¿™ä¸€æ®µä¸æƒ³å¬çš„åŒå­¦å¯ä»¥ç¡ä¸€ä¼šã€‚ğŸ˜\n\nMAML çš„å‚æ•°æ›´æ–°æ–¹æ³•å¦‚ä¸Šå›¾å·¦ä¸Šè§’ç°è‰²æ–¹æ¡†æ‰€ç¤ºï¼Œæˆ‘ä»¬æ¥å…·ä½“çœ‹çœ‹è¿™ä¸ª âˆ‡Ï•L(Ï•)\\nabla_\\phi L(\\phi)âˆ‡Ï•â€‹L(Ï•) æ€ä¹ˆç®—ï¼ŒæŠŠç°æ¡†ç¬¬äºŒæ¡å…¬å¼å¸¦å…¥ï¼Œå¦‚é»„è‰²æ¡†æ‰€ç¤ºã€‚å…¶ä¸­ âˆ‡Ï•ln(Î¸^n)\\nabla_\\phi l^n(\\hat{Î¸}^n)âˆ‡Ï•â€‹ln(Î¸^n) å°±æ˜¯å·¦ä¸‹è§’æ‰€ç¤ºï¼Œå®ƒå°±æ˜¯loss å¯¹åˆå§‹å‚æ•°é›† Ï•\\phiÏ• çš„æ¯ä¸ªåˆ†é‡çš„åå¾®åˆ†ã€‚ä¹Ÿå°±æ˜¯è¯´ Ï•i\\phi_iÏ•iâ€‹ çš„å˜åŒ–ä¼šé€šè¿‡ Î¸^\\hat{Î¸}Î¸^ ä¸­çš„æ¯ä¸ªå‚æ•° Î¸^i\\hat{Î¸}_iÎ¸^iâ€‹ ï¼Œå½±å“åˆ°æœ€ç»ˆè®­ç»ƒå‡ºæ¥çš„ Î¸^\\hat{Î¸}Î¸^ ï¼Œæ‰€ä»¥æ ¹æ®chain rule ä½ å°±å¯ä»¥æŠŠå·¦ä¸‹è§’çš„æ¯ä¸ªåå¾®åˆ†å†™æˆä¸Šå›¾ä¸­é—´çš„å…¬å¼ã€‚\nâˆ‚l(Î¸^)âˆ‚Ï•i=âˆ‘jâˆ‚l(Î¸^)âˆ‚Î¸^jâˆ‚Î¸^jâˆ‚Ï•i\\frac{\\partial{l(\\hat{Î¸})}}{\\partial{\\phi_i}} = \\sum\\limits_{j}\\frac{\\partial{l(\\hat{Î¸})}}{\\partial\\hat{Î¸}_j}\\frac{\\partial\\hat{Î¸}_j}{\\partial{\\phi}_i}\nâˆ‚Ï•iâ€‹âˆ‚l(Î¸^)â€‹=jâˆ‘â€‹âˆ‚Î¸^jâ€‹âˆ‚l(Î¸^)â€‹âˆ‚Ï•iâ€‹âˆ‚Î¸^jâ€‹â€‹\nä¸Šå¼ä¸­å‰é¢çš„é¡¹ âˆ‚l(Î¸^)âˆ‚Î¸^j\\frac{\\partial{l(\\hat{Î¸})}}{\\partial\\hat{Î¸}_j}âˆ‚Î¸^jâ€‹âˆ‚l(Î¸^)â€‹ æ˜¯å®¹æ˜“å¾—åˆ°çš„ï¼Œå…·ä½“çš„è®¡ç®—å…¬å¼å–å†³äºä½ çš„model çš„loss function ï¼Œæ¯”å¦‚cross entropy æˆ–è€…regressionï¼Œç»“æœçš„æ•°å€¼å´å†³äºä½ çš„è®­ç»ƒæ•°æ®çš„æµ‹è¯•é›†ã€‚\nåé¢çš„é¡¹ âˆ‚Î¸^jâˆ‚Ï•i\\frac{\\partial\\hat{Î¸}_j}{\\partial{\\phi}_i}âˆ‚Ï•iâ€‹âˆ‚Î¸^jâ€‹â€‹ æ˜¯éœ€è¦æˆ‘ä»¬ç®—ä¸€ä¸‹ã€‚å¯ä»¥åˆ†æˆä¸¤ä¸ªæƒ…å†µæ¥è€ƒè™‘ï¼š\n\næ ¹æ®ç°è‰²æ¡†ä¸­ç¬¬ä¸‰ä¸ªå¼å­ï¼Œæˆ‘ä»¬çŸ¥é“ Î¸^j\\hat{Î¸}_jÎ¸^jâ€‹ å¯ä»¥ç”¨ä¸‹å¼ä»£æ›¿ï¼š\nÎ¸^j=Ï•jâˆ’Ïµâˆ‚l(Ï•)âˆ‚Ï•j\\hat{Î¸}_j = \\phi_j - \\epsilon\\frac{\\partial{l(\\phi)}}{\\partial{\\phi_j}}\nÎ¸^jâ€‹=Ï•jâ€‹âˆ’Ïµâˆ‚Ï•jâ€‹âˆ‚l(Ï•)â€‹\næ­¤æ—¶ï¼Œå¯¹äº âˆ‚Î¸^jâˆ‚Ï•i\\frac{\\partial\\hat{Î¸}_j}{\\partial{\\phi}_i}âˆ‚Ï•iâ€‹âˆ‚Î¸^jâ€‹â€‹ è¿™ä¸€é¡¹ï¼Œåˆ†ä¸ºi=j å’Œ i!=j ä¸¤ç§æƒ…å†µè€ƒè™‘ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚åœ¨MAML çš„è®ºæ–‡ä¸­ï¼Œä½œè€…æå‡ºä¸€ä¸ªæƒ³æ³•ï¼Œä¸è®¡ç®—äºŒæ¬¡å¾®åˆ†è¿™ä¸€é¡¹ã€‚å¦‚æœä¸è®¡ç®—äºŒæ¬¡å¾®åˆ†ï¼Œå¼å­å°±å˜å¾—éå¸¸ç®€ç­”ï¼Œæˆ‘ä»¬åªéœ€è¦è€ƒè™‘i=j çš„æƒ…å†µï¼Œi!=j æ—¶åå¾®åˆ†çš„ç­”æ¡ˆæ€»æ˜¯0ã€‚\næ­¤æ—¶ï¼Œ âˆ‚l(Î¸^)âˆ‚Ï•i\\frac{\\partial{l(\\hat{Î¸})}}{\\partial\\phi_i}âˆ‚Ï•iâ€‹âˆ‚l(Î¸^)â€‹ å°±ç­‰äº âˆ‚l(Î¸^)âˆ‚Î¸i\\frac{\\partial{l(\\hat{Î¸})}}{\\partial{Î¸}_i}âˆ‚Î¸iâ€‹âˆ‚l(Î¸^)â€‹ ã€‚è¿™æ ·åä¸€é¡¹ä¹Ÿè§£å†³äº†ï¼Œé‚£å°±å¯ä»¥ç®—å‡ºä¸Šå›¾å·¦ä¸‹è§’ âˆ‡Ï•l(Î¸^)\\nabla_\\phi l(\\hat{Î¸})âˆ‡Ï•â€‹l(Î¸^) ï¼Œå°±å¯ä»¥ç®—å‡ºä¸Šå›¾é»„è‰²æ¡†  âˆ‡Ï•L(Ï•)\\nabla_\\phi L(\\phi)âˆ‡Ï•â€‹L(Ï•) ï¼Œå°±å¯ä»¥æ ¹æ®ç°è‰²æ¡†ç¬¬ä¸€æ¡å…¬å¼æ›´æ–° Ï•\\phiÏ• ï¼Œç»“æŸã€‚ğŸ˜®\n\nåœ¨åŸå§‹paper ä¸­ä½œè€…æŠŠï¼Œå»æ‰äºŒæ¬¡å¾®åˆ†è¿™ä»¶äº‹ï¼Œç§°ä½œusing a first-order approximation ã€‚\nå½“æˆ‘ä»¬æŠŠäºŒæ¬¡å¾®åˆ†å»æ‰ä»¥åï¼Œä¸Šå›¾å·¦ä¸‹è§’çš„ âˆ‡Ï•l(Î¸^)\\nabla_\\phi l(\\hat{Î¸})âˆ‡Ï•â€‹l(Î¸^) å°±å˜æˆ \\nabla_\\hat{Î¸} l(\\hat{Î¸}) ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±æ˜¯å†ç”¨ Î¸^\\hat{Î¸}Î¸^ ç›´æ¥å¯¹ Î¸^\\hat{Î¸}Î¸^ åšåå¾®åˆ†ï¼Œå°±å˜å¾—ç®€å•å¾ˆå¤šã€‚\n MAML-Real Implementation\næ¥çœ‹çœ‹MAML å®é™…ä¸Šæ˜¯æ€ä¹ˆè¿è¡Œçš„ï¼Œæ®è¯´å¾ˆç®€å•ã€‚\n\nå®é™…ä¸Šï¼Œæˆ‘ä»¬åœ¨MAML ä¸­æ¯æ¬¡è®­ç»ƒçš„æ—¶å€™ä¼šæ‹¿ä¸€ä¸ªtask batch å»åšï¼Œè¿™é‡Œæˆ‘ä»¬å°±å…ˆå‡å®šæ¯ä¸ªbatch å°±åªæœ‰ä¸€ä¸ªtaskå¥½äº†ã€‚å¦‚ä¸Šå›¾ï¼Œå½“æˆ‘ä»¬åˆå§‹åŒ–å¥½å‚æ•° Ï•0\\phi_0Ï•0â€‹ æˆ‘ä»¬å°±å¼€å§‹è¿›è¡Œè®­ç»ƒï¼Œå®Œæˆtask mè®­ç»ƒä»¥åï¼Œæ ¹æ®ä¸€æ¬¡update å¾—åˆ° Î¸^m\\hat{Î¸}^mÎ¸^m ï¼Œæˆ‘ä»¬å†è®¡ç®—ä¸€ä¸‹ Î¸^m\\hat{Î¸}^mÎ¸^m å¯¹å®ƒçš„loss function çš„åå¾®åˆ†ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è™½ç„¶åªéœ€è¦update ä¸€æ¬¡å‚æ•°å°±å¯ä»¥å¾—åˆ°æœ€å¥½çš„å‚æ•°ï¼Œä½†ç°åœ¨æˆ‘ä»¬update ä¸¤æ¬¡å‚æ•°ï¼Œç¬¬äºŒæ¬¡æ›´æ–°çš„å‚æ•°çš„ç”¨å¤„å°±æ˜¯ï¼Œ $\\phi $ çš„æ›´æ–°æ–¹å‘å°±å’Œç¬¬äºŒæ¬¡æ›´æ–°å‚æ•°çš„æ–¹å‘ç›¸åŒï¼Œå¯èƒ½å¤§å°ä¸ä¸€æ ·ï¼Œæ¯•ç«Ÿå®ƒä»¬çš„learning rate ä¸ä¸€æ ·ã€‚\nåˆšæ‰æˆ‘ä»¬è®²äº†åœ¨ç²¾ç¥ä¸ŠMAML å’ŒModel Pre-training çš„ä¸åŒï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸¤è€…åœ¨å®é™…è¿ä½œä¸Šçš„ä¸åŒã€‚å¦‚ä¸Šå›¾ï¼Œé¢„è®­ç»ƒçš„å‚æ•°æ›´æ–°å®Œå…¨å’Œæ¯ä¸ªtask çš„gradient çš„æ–¹å‘ç›¸åŒã€‚\n MAML å®é™…åº”ç”¨\nè¿™é‡Œæœ‰ä¸€ä¸ªæŠŠMAML åº”ç”¨åˆ°æœºå™¨ç¿»è¯‘çš„æ —å­ï¼š\n\n\nhttps://arxiv.org/abs/1808.08437\n\n18ä¸ªä¸åŒçš„taskï¼š18ç§ä¸åŒè¯­è¨€ç¿»è¯‘æˆè‹±æ–‡\n2ä¸ªéªŒè¯taskï¼š2ç§ä¸åŒè¯­è¨€ç¿»è¯‘æˆè‹±æ–‡\nRo æ˜¯validation tasks ä¸­çš„ä»»åŠ¡ï¼ŒFi å³æ²¡æœ‰å‡ºç°åœ¨training tasks ä¹Ÿæ²¡å‡ºç°åœ¨validation tasks\næ¨ªè½´æ˜¯æ¯ä¸ªtask ä¸­çš„è®­ç»ƒèµ„æ–™é‡ã€‚MetaNMT æ˜¯MAML çš„ç»“æœï¼ŒMultiNMT æ˜¯ Model Pre-training çš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨æ‰€æœ‰æƒ…å†µä¸‹å‰è€…éƒ½å¥½è¿‡åè€…ï¼Œå°¤å…¶æ˜¯åœ¨è®­ç»ƒèµ„æ–™é‡å°‘çš„æƒ…å†µä¸‹ï¼ŒMAML æ›´èƒ½å‘æŒ¥ä¼˜åŠ¿ã€‚\n Reptile\néå¸¸ç®€å•ã€‚\n\nåšæ³•å°±æ˜¯åˆå§‹åŒ–å‚æ•° Ï•0\\phi_0Ï•0â€‹ ä»¥åï¼Œé€šè¿‡åœ¨task mä¸Šè®­ç»ƒè·Ÿæ–°å‚æ•°ï¼Œå¯ä»¥å¤šæ›´æ–°å‡ æ¬¡ï¼Œç„¶åæ ¹æ®æœ€åçš„ Î¸^m\\hat{Î¸}^mÎ¸^m æ›´æ–° Ï•0\\phi_0Ï•0â€‹ ï¼ŒåŒæ ·çš„ç»§ç»­ï¼Œè®­ç»ƒåœ¨task nä»¥åï¼Œå¤šæ›´æ–°å‡ æ¬¡å‚æ•°ï¼Œå¾—åˆ° Î¸^n\\hat{Î¸}^nÎ¸^n ï¼Œæ®æ­¤æ›´æ–° Ï•1\\phi_1Ï•1â€‹ ï¼Œå¦‚æ­¤å¾€å¤ã€‚\nä½ å¯èƒ½ä¼šè¯´ï¼Œè¿™ä¸æ˜¯å’Œé¢„è®­ç»ƒå¾ˆåƒå—ï¼Œéƒ½æ˜¯æ ¹æ®å‚æ•°çš„æ›´æ–°æ¥æ›´æ–°åˆå§‹å‚æ•°ï¼Œå¸Œæœ›æœ€åçš„å‚æ•°åœ¨æ‰€æœ‰çš„ä»»åŠ¡ä¸Šéƒ½èƒ½å¾—åˆ°å¾ˆå¥½çš„è¡¨ç°ã€‚ä½œè€…è‡ªå·±ä¹Ÿè¯´ï¼Œå¦‚ä¸Šå›¾ä¸‹ä¾§çš„æ‘˜å½•ã€‚\n Reptile &amp; MAML &amp; Pre-training\n\né€šè¿‡ä¸Šå›¾æ¥å¯¹æ¯”ä¸‰è€…åœ¨æ›´æ–°å‚æ•° Ï•\\phiÏ• çš„ä¸åŒï¼Œä¼¼ä¹Reptile åœ¨ç»¼åˆä¸¤è€…ã€‚ä½†æ˜¯Reptile å¹¶æ²¡æœ‰é™åˆ¶ä½ åªèƒ½èµ°ä¸¤æ­¥ï¼Œæ‰€ä»¥å¦‚æœä½ å¤šæ›´æ–°å‡ æ¬¡å‚æ•°å¤šèµ°å‡ æ­¥ï¼Œæˆ–è®¸Reptile å¯ä»¥è€ƒè™‘åˆ°å¦å¤–ä¸¤è€…æ²¡æœ‰è€ƒè™‘åˆ°çš„ä¸œè¥¿ã€‚\n\nä¸Šå›¾ä¸­ï¼Œè“è‰²çš„ç‰¹åˆ«æƒ¨çš„çº¿æ˜¯pre-training ï¼Œæ‰€ä»¥è¯´å’Œé¢„è®­ç»ƒæ¯”èµ·æ¥meta learning çš„æ•ˆæœè¦å¥½å¾ˆå¤šã€‚\n Moreâ€¦\nä¸Šé¢æ‰€æœ‰çš„è®¨è®ºéƒ½æ˜¯åœ¨åˆå§‹åŒ–å‚æ•°è¿™ä»¶äº‹ä¸Šï¼Œè®©æœºå™¨è‡ªå·±å­¦ä¹ ï¼Œé‚£æœ‰æ²¡æœ‰å…¶ä»–éƒ¨åˆ†å¯ä»¥è®©æœºå™¨å­¦ä¹ å‘¢ï¼Œå½“ç„¶æœ‰å¾ˆå¤šã€‚\n\næ¯”å¦‚è¯´ï¼Œå­¦ä¹ ç½‘ç»œç»“æ„å’Œæ¿€æ´»å‡½æ•°ã€å­¦ä¹ å¦‚ä½•æ›´æ–°å‚æ•°â€¦\n\nhttps://www.youtube.com/watch?v=c10nxBcSH14\n\n Think about itâ€¦\næˆ‘ä»¬ä½¿ç”¨MAML æˆ–Reptile æ¥å¯»æ‰¾æœ€å¥½çš„åˆå§‹åŒ–å‚æ•°ï¼Œä½†æ˜¯è¿™ä¸ªç®—æ³•æœ¬èº«ä¹Ÿéœ€è¦åˆå§‹åŒ–å‚æ•°ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯ä¹Ÿè¦è®­ç»ƒä¸€ä¸ªæ¨¡å‹æ‰¾åˆ°è¿™ä¸ªæ¨¡å‹çš„åˆå§‹åŒ–å‚æ•°â€¦\nå°±å¥½åƒè¯´ç¥è¯ä¸­è¯´ä¸–ç•Œåœ¨ä¹Œé¾ŸèƒŒä¸Šï¼Œé‚£è¿™åªä¹Œé¾Ÿåº”è¯¥åœ¨å¦ä¸€åªä¹Œé¾ŸèƒŒä¸Šâ€¦è¿™å°±æ˜¯å¥—å¨ƒå•ŠğŸ¤£\n\n Crazy Idea?\n\nä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ çš„ç®—æ³•åŸºæœ¬ä¸Šéƒ½è¿˜æ˜¯gradient descent ï¼Œä½ èƒ½ä¸èƒ½åšä¸€ä¸ªæ›´å‰å®³çš„ç®—æ³•ï¼Œåªè¦æˆ‘ä»¬ç»™ä»–æ‰€æœ‰çš„training data å®ƒå°±å¯ä»¥è¿”å›ç»™æˆ‘ä»¬éœ€è¦modelï¼Œå®ƒæ˜¯ä¸æ˜¯æ¢¯åº¦ä¸‹é™train å‡ºæ¥çš„ä¸é‡è¦ï¼Œå®ƒåªè¦èƒ½ç»™æˆ‘ä¸€ä¸ªèƒ½å®Œæˆè¿™ä¸ªä»»åŠ¡çš„model å°±å¥½ã€‚\næˆ–è€…ï¼Œåä¹‹æˆ‘ä»¬æœ€å¥½éƒ½è¦åº”ç”¨åˆ°æµ‹è¯•é›†ä¸Šï¼Œé‚£æˆ‘ä»¬å¹²è„†å°±æä¸€ä¸ªå¤§é»‘ç®±ï¼ŒæŠŠtraining set å’Œtesting set å…¨éƒ¨ä¸¢ç»™ä»–ï¼Œå®ƒç›´æ¥è¿”å›testing data çš„ç»“æœï¼Œè¿æµ‹è¯•éƒ½å¸®ä½ åšå¥½ã€‚è¿™äº›æƒ³æ³•èƒ½ä¸èƒ½åšåˆ°ï¼Œç•™åˆ°ä¸‹ä¸€èŠ‚è®²ã€‚\n","categories":["æå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°"],"tags":["ML","note","Next-Step-of-ML"]},{"title":"Life Long Learning","url":"https://ch3nye.top/Life-Long-Learning/","content":" Life Long Learning (LLL)\n\nå¼€å§‹ä¹‹å‰çš„è¯´æ˜ï¼Œå¦‚æœè¯»è€…æ˜¯å­¦è¿‡transfer learning çš„è¯ï¼Œå­¦è¿™ä¸€èŠ‚å¯èƒ½ä¼šè½»æ¾å¾ˆå¤šï¼ŒLLLçš„æ€æƒ³åœ¨æˆ‘çœ‹æ¥æ˜¯å’Œtransfer learningæ˜¯å¾ˆç›¸ä¼¼çš„ã€‚\n\nå¯ä»¥ç›´è§‚çš„ç¿»è¯‘æˆç»ˆèº«å­¦ä¹ ï¼Œæˆ‘ä»¬äººç±»åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­æ˜¯ä¸€ç›´åœ¨ç”¨åŒä¸€ä¸ªå¤§è„‘åœ¨å­¦ä¹ ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹‹å‰è®²çš„æ‰€æœ‰æœºå™¨å­¦ä¹ çš„æ–¹æ³•éƒ½æ˜¯ä¸ºäº†è§£å†³ä¸€ä¸ªä¸“é—¨çš„é—®é¢˜è®¾è®¡ä¸€ä¸ªæ¨¡å‹æ¶æ„ç„¶åå»å­¦ä¹ çš„ã€‚æ‰€ä»¥ï¼Œä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ çš„æƒ…æ™¯å’Œäººç±»çš„å­¦ä¹ æ˜¯å¾ˆä¸ä¸€æ ·çš„ï¼Œç°åœ¨æˆ‘ä»¬å°±è¦è€ƒè™‘ä¸ºä»€ä¹ˆä¸èƒ½ç”¨åŒä¸€ä¸ªæ¨¡å‹å­¦ä¼šæ‰€æœ‰çš„ä»»åŠ¡ã€‚\n\nä¹Ÿæœ‰äººæŠŠLife Long Learning ç§°ä¸ºContinuous Learningï¼ŒNever Ending Learningï¼ŒIncremental Learningï¼Œåœ¨ä¸åŒçš„æ–‡çŒ®ä¸­å¯èƒ½æœ‰ä¸åŒçš„å«æ³•ï¼Œæˆ‘ä»¬åªè¦çŸ¥é“è¿™äº›æ–¹æ³•éƒ½æ˜¯å†æŒ‡ç»ˆç”Ÿå­¦ä¹ å°±å¯ã€‚\n\nç°åœ¨æˆ‘ä»¬å›å½’åˆå¿ƒï¼Œæˆ‘æƒ³å¤§å¤šæ•°äººåœ¨å­¦ä¹ æœºå™¨å­¦ä¹ ä¹‹å‰çš„æ˜¯è¿™æ ·è®¤ä¸ºçš„ï¼Œæœºå™¨å­¦ä¹ å°±æ˜¯å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬æ•™æœºå™¨å­¦å­¦ä¼šä»»åŠ¡1ï¼Œå†æ•™ä¼šå®ƒä»»åŠ¡2ï¼Œæˆ‘ä»¬å°±ä¸æ–­åœ°è¾ƒå®ƒå„ç§ä»»åŠ¡ï¼Œå­¦åˆ°æœ€åå®ƒå°±æˆäº†å¤©ç½‘ğŸ¤£ã€‚ä½†æ˜¯å®é™…ä¸Šæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œç°åœ¨çš„æœºå™¨å­¦ä¹ æ˜¯åˆ†å¼€ä»»åŠ¡æ¥å­¦çš„ï¼Œå°±ç®—æ˜¯è¿™æ ·å¾ˆå¤šä»»åŠ¡è¿˜æ˜¯å¾—ä¸åˆ°å¾ˆå¥½çš„ç»“æœã€‚æ‰€ä»¥æœºå™¨å­¦ä¹ ç°åœ¨è¿˜æ˜¯å¾ˆåˆçº§çš„é˜¶æ®µï¼Œåœ¨å¾ˆå¤šä»»åŠ¡ä¸Šéƒ½æ— æ³•èƒœä»»ã€‚\næˆ‘ä»¬ä»Šå¤©åˆ†ä¸‰ä¸ªéƒ¨åˆ†æ¥å™è¿°Life-Long Learningï¼š\n\nKnowledge Retention çŸ¥è¯†ä¿ç•™\n\nbut NOT Intransigence ä½†ä¸é¡½å›º\n\n\nKnowledge Transfer çŸ¥è¯†æ½œç§»\nModel Expansion æ¨¡å‹æ‰©å±•\n\nbut Parameter Efficiency ä½†å‚æ•°é«˜æ•ˆ\n\n\n\nä¸Šè¿°çš„å‡ ä¸ªéƒ¨åˆ†çš„å…·ä½“å«ä¹‰ä¼šåœ¨ä¸‹é¢è¯¦ç»†è§£é‡Šã€‚\n Knowledge Retention\nbut NOT Intransigence\nçŸ¥è¯†ä¿ç•™ï¼Œä½†ä¸é¡½å›º\n\nçŸ¥è¯†ä¿ç•™ä½†ä¸é¡½å›ºçš„ç²¾ç¥æ˜¯ï¼šæˆ‘ä»¬å¸Œæœ›æ¨¡å‹åœ¨åšå®Œä¸€ä¸ªä»»åŠ¡çš„å­¦ä¹ ä¹‹åï¼Œåœ¨å­¦æ–°çš„çŸ¥è¯†çš„æ—¶å€™ï¼Œèƒ½å¤Ÿä¿ç•™å¯¹åŸæ¥ä»»åŠ¡èƒ½åŠ›ï¼Œä½†æ˜¯è¿™ç§èƒ½åŠ›çš„ä¿ç•™åˆä¸èƒ½å¤ªè¿‡é¡½å›ºä»¥è‡³äºä¸èƒ½å­¦ä¼šæ–°çš„ä»»åŠ¡ã€‚\n Example - Image\næˆ‘ä»¬ä¸¾ä¸€ä¸ªæ —å­çœ‹çœ‹æœºå™¨çš„è„‘æ´æœ‰å¤šå¤§ã€‚è¿™é‡Œæ˜¯å½±åƒè¾¨è¯†çš„æ —å­ï¼Œæ¥çœ‹çœ‹åœ¨å½±åƒè¾¨è¯†ä»»åŠ¡ä¸­æ˜¯å¦éœ€è¦ç»ˆèº«å­¦ä¹ ã€‚\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªä»»åŠ¡ï¼Œéƒ½æ˜¯åœ¨åšæ‰‹å†™æ•°å­—è¾¨è¯†ï¼Œä½†æ˜¯ä¸¤ä¸ªçš„corpus æ˜¯ä¸åŒçš„ï¼ˆcorpus1 å›¾ç‰‡ä¸Šå­˜åœ¨ä¸€äº›å™ªå£°ï¼‰ã€‚network çš„æ¶æ„æ˜¯ä¸‰å±‚ï¼Œæ¯å±‚éƒ½æ˜¯50ä¸ªneuronï¼Œç„¶åè®©æœºå™¨å…ˆå­¦ä»»åŠ¡1ï¼Œå­¦å®Œç¬¬ä¸€ä¸ªä»»åŠ¡ä»¥ååœ¨ä¸¤ä¸ªcorpus ä¸Šè¿›è¡Œæµ‹è¯•ï¼Œå¾—åˆ°çš„ç»“æœå¦‚å·¦è¾¹çš„æŸ±çŠ¶å›¾ï¼ˆtask2çš„ç»“æœæ›´å¥½ä¸€ç‚¹å…¶å®æ˜¯å¾ˆç›´è§‰çš„ï¼Œå› ä¸ºcorpus2ä¸Šæ²¡æœ‰noiseï¼Œè¿™å¯ä»¥ç†è§£ä¸ºtransfer learningï¼‰ã€‚ç„¶åæˆ‘ä»¬åœ¨æŠŠè¿™ä¸ªæ¨¡å‹ç”¨corpus2 è¿›è¡Œä¸€æ³¢è®­ç»ƒï¼Œå†åœ¨ä¸¤ä¸ªcorpusä¸Šè¿›è¡Œæµ‹è¯•å¾—åˆ°çš„ç»“æœå¦‚å³ä¾§æŸ±çŠ¶å›¾ï¼Œå‘ç°ç¬¬ä¸€ä¸ªä»»åŠ¡æœ‰è¢«é—å¿˜çš„ç°è±¡å‘ç”Ÿã€‚\nè¿™æ—¶å€™ä½ å¯èƒ½ä¼šè¯´ï¼Œè¿™ä¸ªæ¨¡å‹çš„æ¶æ„å¤ªå°äº†ï¼Œä»–åªæœ‰ä¸‰å±‚æ¯å±‚åªæœ‰50ä¸ªneuronï¼Œä¼šå‘ç”Ÿé—å¿˜çš„ç°è±¡æä¸å¥½æ˜¯å› ä¸ºå®ƒè„‘å®¹é‡æœ‰é™ã€‚ä½†æ˜¯æˆ‘ä»¬å®è·µè¿‡å‘ç°å¹¶ä¸æ˜¯æ¨¡å‹æ¶æ„å¤ªå°ã€‚æˆ‘ä»¬æŠŠä¸¤ä¸ªcorpus æ··åˆ°ä¸€èµ·ç”¨åŒæ ·çš„æ¨¡å‹æ¶æ„train ä¸€å‘ï¼Œå¾—åˆ°çš„ç»“æœå¦‚ä¸‹å›¾å³ä¸‹è§’ï¼š\n\næ‰€ä»¥è¯´ï¼Œæ˜æ˜è¿™ä¸ªæ¨¡å‹çš„æ¶æ„å¯ä»¥æŠŠä¸¤ä¸ªä»»åŠ¡éƒ½å­¦çš„å¾ˆå¥½ï¼Œä¸ºä»€ä¹ˆå…ˆå­¦ä¸€ä¸ªåœ¨å­¦å¦ä¸€ä¸ªçš„è¯ä¼šå¿˜æ‰ç¬¬ä¸€ä¸ªä»»åŠ¡å­¦åˆ°çš„ä¸œè¥¿å‘¢ã€‚\n Example - Question Answering\nå¦ä¸€ä¸ªæ —å­ï¼šé—®ç­”ç³»ç»Ÿï¼Œé—®ç­”ç³»ç»Ÿï¼ˆå¦‚ä¸‹å›¾ï¼‰è¦åšçš„äº‹æƒ…æ˜¯è®­ç»ƒä¸€ä¸ªDeep Network ï¼Œç»™è¿™ä¸ªæ¨¡å‹çœ‹å¾ˆå¤šçš„æ–‡ç« å’Œé—®é¢˜ï¼Œç„¶åä½ é—®å®ƒä¸€ä¸ªé—®é¢˜ï¼Œä»–å°±ä¼šå‘Šè¯‰ä½ ç­”æ¡ˆã€‚å…·ä½“æ€ä¹ˆè¾“å…¥æ–‡ç« å’Œé—®é¢˜ï¼Œæ€ä¹ˆç»™ä½ ç­”æ¡ˆï¼Œæ€ä¹ˆè®¾è®¡ç½‘ç»œï¼Œä¸æ˜¯é‡ç‚¹å°±ä¸å±•å¼€ã€‚\n\n\nModel From https://arxiv.org/pdf/1502.05698.pdf\n\nå¯¹äºQAç³»ç»Ÿå·²ç»è¢«ç©çƒ‚çš„corpus æ˜¯bAbi è¿™ä¸ªæ•°æ®é›†ï¼Œè¿™é‡Œé¢æœ‰20ç§ä¸åŒçš„é¢˜å‹ï¼Œæ¯”å¦‚é—®whereã€what ç­‰ã€‚æˆ‘ä»¬ä¸€æ¬¡è®©æ¨¡å‹å­¦ä¹ è¿™20ç§é¢˜å‹ï¼Œæ¯æ¬¡å­¦ä¹ å®Œæˆä»¥åæˆ‘ä»¬éƒ½ç”¨é¢˜å‹äº”åšä¸€æ¬¡æµ‹è¯•ï¼Œä¹Ÿå°±æ˜¯ä»¥é¢˜å‹äº”ä½œä¸ºbaselineï¼Œç»“æœå¦‚ä¸‹ï¼š\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°åªæœ‰åœ¨å­¦å®Œé¢˜å‹äº”çš„æ—¶å€™ï¼Œå†é—®æœºå™¨é¢˜å‹äº”çš„é—®é¢˜ï¼Œå®ƒå¯ä»¥ç»™å‡ºå¾ˆå¥½çš„ç­”æ¡ˆï¼Œä½†æ˜¯åœ¨å­¦å®Œé¢˜å‹å…­ä»¥åå®ƒé©¬ä¸ŠæŠŠé¢˜å‹äº”å¿˜çš„ä¸€å¹²äºŒå‡€äº†ã€‚\nè¿™ä¸ªç°è±¡åœ¨ä»¥å…¶ä»–çš„é¢˜å‹ä½œä¸ºbaseline çš„æ—¶å€™åŒæ ·å‡ºç°äº†ï¼š\n\npsï¼šæœ‰è¶£çš„æ˜¯ï¼Œåœ¨é¢˜å‹åä½œä¸ºbaseline çš„æ—¶å€™å¯èƒ½æ˜¯ç”±äºé¢˜å‹6ã€9ã€17ã€18å’Œé¢˜å‹10æ¯”è¾ƒç›¸ä¼¼ï¼Œæ‰€ä»¥åœ¨åšå®Œè¿™äº›é¢˜å‹çš„QAä»»åŠ¡çš„æ—¶å€™åœ¨é¢˜å‹10ä¸Šä¹Ÿèƒ½å¾—åˆ°æ¯”è¾ƒå¥½çš„ç»“æœã€‚\né‚£ä½ åˆä¼šé—®äº†ï¼Œæ˜¯ä¸æ˜¯å› ä¸ºç½‘ç»œçš„æ¶æ„ä¸å¤Ÿå¤§ï¼Œæœºå™¨çš„è„‘å®¹é‡å¤ªå°ä»¥è‡³äºå­¦ä¸èµ·æ¥ã€‚å…¶å®ä¸æ˜¯ï¼Œå½“æˆ‘ä»¬åŒæ—¶trainè¿™20ç§é¢˜å‹å¾—åˆ°çš„ç»“æœæ˜¯è¿˜ä¸é”™çš„ï¼š\n\næ‰€ä»¥æœºå™¨çš„é—å¿˜æ˜¯å’Œäººç±»å¾ˆä¸ä¸€æ ·çš„ï¼Œä»–ä¸æ˜¯å› ä¸ºè„‘å®¹é‡ä¸å¤Ÿè€Œå¿˜è®°çš„ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆå®ƒåœ¨å­¦è¿‡ä¸€äº›æ–°çš„ä»»åŠ¡ä»¥åå°±ä¼šè¾ƒå¤§ç¨‹åº¦çš„é—å¿˜ä»¥å‰å­¦åˆ°çš„ä¸œè¥¿ï¼Œè¿™ä¸ªçŠ¶å†µæˆ‘ä»¬å«åšCatastrophic Forgettingï¼ˆç¾éš¾æ€§é—å¿˜ï¼‰ã€‚ä¹‹æ‰€ä»¥åŠ ä¸ªå½¢å®¹è¯æ˜¯å› ä¸ºè¿™ç§é—å¿˜æ˜¯ä¸å¯æ¥æ”¶ï¼Œå°±åƒä¸‹é¢è¿™å¼ å›¾å­¦äº†å°±å¿˜äº†ï¼Œæ·¦ï¼š\n\n Wait a minuteâ€¦\nä½ å¯èƒ½ä¼šè¯´è¿™ä¸ªç¾éš¾æ€§é—å¿˜çš„é—®é¢˜ä½ ä¸Šé¢ä¸æ˜¯å·²ç»æœ‰äº†ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ³•äº†å—ï¼Œä½ åªè¦æŠŠå¤šä¸ªä»»åŠ¡çš„corpus æ”¾åœ¨ä¸€èµ·train å°±å¥½äº†å•Šã€‚ä½†æ˜¯ï¼Œé•¿è¿œæ¥è¯´è¿™ä¸€æ‹›æ˜¯è¡Œä¸é€šçš„ï¼Œå› ä¸ºæˆ‘ä»¬å¾ˆéš¾ä¸€ç›´ç»´æŠ¤æ‰€æœ‰ä½¿ç”¨è¿‡çš„è®­ç»ƒæ•°æ®ï¼Œè€Œä¸”å°±ç®—æˆ‘ä»¬å¾ˆå¥½çš„ä¿ç•™äº†æ‰€æœ‰æ•°æ®ï¼Œåœ¨è®¡ç®—ä¸Šä¹Ÿæœ‰é—®é¢˜ï¼Œæˆ‘ä»¬æ¯æ¬¡å­¦æ–°ä»»åŠ¡çš„æ—¶å€™å°±è¦é‡æ–°è®­ç»ƒæ‰€æœ‰çš„ä»»åŠ¡ï¼Œè¿™æ ·çš„ä»£ä»·æ˜¯ä¸å¯æ¥å—çš„ã€‚\nå¦å¤–ï¼Œå¤šä»»åŠ¡åŒæ—¶train è¿™ä¸ªæ–¹æ³•å…¶å®å¯ä»¥ä½œä¸ºLLLçš„ä¸Šç•Œã€‚\næ€»ä¹‹ï¼ŒLLLä¸»è¦æ¢è®¨çš„é—®é¢˜æ˜¯ï¼Œè®©æœºå™¨åœ¨å­¦ä¹ æ–°çš„çŸ¥è¯†çš„æ—¶å€™èƒ½ä¸è¦å¿˜è®°è¿‡å»å­¦è¿‡çš„ä¸œè¥¿ã€‚\né‚£è¿™ä¸ªé—®é¢˜æœ‰ä»€ä¹ˆæ ·çš„è§£æ³•å‘¢ï¼Œæ¥ä¸‹æ¥å°±æ¥ä»‹ç»ä¸€ä¸ªç»å…¸è§£æ³•ã€‚\n Elastic Weight Consolidation (EWC)\næ€ä¹ˆç¿»è¯‘å•Šï¼Œå¼¹æ€§å‚æ•°å·©å›º?\nåŸºæœ¬ç²¾ç¥ï¼šç½‘ç»œä¸­çš„éƒ¨åˆ†å‚æ•°å¯¹å…ˆå‰ä»»åŠ¡æ˜¯æ¯”è¾ƒæœ‰ç”¨çš„ï¼Œæˆ‘ä»¬åœ¨å­¦æ–°çš„ä»»åŠ¡çš„æ—¶å€™åªæ”¹å˜ä¸é‡è¦çš„å‚æ•°ã€‚\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ Î¸b\\theta^bÎ¸b æ˜¯æ¨¡å‹ä»å…ˆå‰çš„ä»»åŠ¡ä¸­å­¦å‡ºæ¥çš„å‚æ•°ã€‚\næ¯ä¸ªå‚æ•° Î¸ib\\theta^{b}_{i}Î¸ibâ€‹ éƒ½æœ‰ä¸€ä¸ªå®ˆå« bib_ibiâ€‹ ï¼Œè¿™ä¸ªé¦–ä½å°±ä¼šå‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªå‚æ•°æœ‰å¤šé‡è¦ï¼Œæˆ‘ä»¬æœ‰å¤šä¹ˆä¸èƒ½æ›´æ”¹è¿™ä¸ªå‚æ•°ã€‚\næˆ‘ä»¬åœ¨åšEWC çš„æ—¶å€™ï¼ˆtrain æ–°çš„ä»»åŠ¡çš„æ—¶å€™ï¼‰éœ€è¦å†åŸå…ˆçš„æŸå¤±å‡½æ•°ä¸ŠåŠ ä¸Šä¸€ä¸ªregularization ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬é€šè¿‡å¹³æ–¹å·®çš„æ–¹å¼è¡¡é‡æ–°çš„å‚æ•° Î¸i\\theta_iÎ¸iâ€‹ å’Œæ—§çš„å‚æ•° Î¸ib\\theta^{b}_{i}Î¸ibâ€‹ çš„å·®è·ï¼Œè®©åç”¨ä¸€ä¸ªå®ˆå«å€¼æ¥å‘Šè¯‰æ¨¡å‹è¿™ä¸ªå‚æ•°çš„é‡è¦æ€§ï¼Œå½“è¿™ä¸ªå®ˆå« bib_ibiâ€‹ ç­‰äºé›¶çš„æ—¶å€™å°±æ˜¯è¯´å‚æ•° Î¸i\\theta_iÎ¸iâ€‹ æ˜¯æ²¡æœ‰çº¦æŸçš„ï¼Œå¯ä»¥æ ¹æ®å½“å‰ä»»åŠ¡éšæ„æ›´æ”¹ï¼Œå½“å®ˆå« bib_ibiâ€‹ è¶‹è¿‘äºæ— ç©·å¤§çš„æ—¶å€™ï¼Œè¯´æ˜è¿™ä¸ªå‚æ•° Î¸i\\theta_iÎ¸iâ€‹ å¯¹å…ˆå‰çš„ä»»åŠ¡æ˜¯éå¸¸é‡è¦çš„ï¼Œå¸Œæœ›æ¨¡å‹ä¸è¦å˜åŠ¨è¿™ä¸ªå‚æ•°ã€‚\n\næ‰€ä»¥ç°åœ¨é—®é¢˜æ˜¯ï¼Œ bib_ibiâ€‹ å¦‚ä½•å†³å®šã€‚è¿™ä¸ªé—®é¢˜æˆ‘ä»¬ä¸‹é¢æ¥è®²ï¼Œå…ˆæ¥é€šè¿‡ä¸€ä¸ªç®€å•çš„æ —å­å†ç†è§£ä¸€ä¸‹EWCçš„æ€æƒ³ï¼š\n\nä¸Šå›¾æ˜¯è¿™æ ·çš„ï¼Œå‡è®¾æˆ‘ä»¬çš„æ¨¡å‹åªæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œè¿™ä¸¤ä¸ªå›¾æ˜¯ä¸¤ä¸ªtask çš„error surface ï¼Œé¢œè‰²è¶Šæ·±error è¶Šå¤§ã€‚å‡å¦‚è¯´æˆ‘ä»¬è®©æœºå™¨å­¦task1çš„æ—¶å€™æˆ‘ä»¬çš„å‚æ•°ä» Î¸0Î¸^0Î¸0 ç§»åŠ¨åˆ° Î¸bÎ¸^bÎ¸b ï¼Œç„¶åæˆ‘ä»¬åˆè®©æœºå™¨å­¦task2ï¼Œåœ¨è¿™å­¦è¿™ä¸ªä»»åŠ¡çš„æ—¶å€™æˆ‘ä»¬æ²¡æœ‰åŠ ä»»ä½•çº¦æŸï¼Œå®ƒå­¦å®Œä¹‹åå‚æ•°ç§»åŠ¨åˆ°äº† Î¸âˆ—Î¸^*Î¸âˆ— ï¼Œè¿™æ—¶å€™æ¨¡å‹å‚æ•°åœ¨task1çš„error surface ä¸Šå°±æ˜¯ä¸€ä¸ªä¸å¤ªå¥½çš„ç‚¹ã€‚ è¿™å°±ç›´è§‚çš„è§£é‡Šäº†ä¸ºä»€ä¹ˆä¼šå‡ºç°Catastrophic Forgetting ã€‚\nç”¨äº†EWC çš„è¯çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š\n\nå½“æˆ‘ä»¬ä½¿ç”¨EWC å¯¹æ¨¡å‹çš„å‚æ•°çš„å˜åŒ–åšä¸€ä¸ªé™åˆ¶ï¼Œå°±å¦‚ä¸Šé¢è¯´çš„ï¼Œæˆ‘ä»¬ç»™æ¯ä¸ªå‚æ•°åŠ ä¸€ä¸ªå®ˆå« bib_ibiâ€‹ ï¼Œè¿™ä¸ª bib_ibiâ€‹ æ˜¯è¿™ä¹ˆæ¥çš„å‘¢ï¼Ÿä¸åŒæ–‡ç« æœ‰ä¸åŒçš„åšæ³•ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„åšæ³•å°±æ˜¯ç®—è¿™ä¸ªå‚æ•°çš„äºŒæ¬¡å¾®åˆ†ï¼ˆlosså¯¹Î¸çš„äºŒæ¬¡å¾®åˆ†ä½“ç°å‚æ•°losså˜åŒ–çš„å‰§çƒˆç¨‹åº¦ï¼ŒäºŒæ¬¡å¾®åˆ†å€¼è¶Šå¤§ï¼ŒåŸå‡½æ•°å›¾åƒåœ¨è¯¥ç‚¹å˜åŒ–è¶Šå‰§çƒˆï¼‰ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ Î¸1bÎ¸^b_1Î¸1bâ€‹ åœ¨äºŒæ¬¡å¾®åˆ†æ›²çº¿çš„å¹³æ»‘æ®µå…¶å˜åŒ–ä¸ä¼šé€ æˆåŸå‡½æ•°å›¾åƒçš„å‰§çƒˆå˜åŒ–ï¼Œæˆ‘ä»¬è¦ç»™å®ƒä¸€ä¸ªå°çš„å®ˆå« b1b_1b1â€‹ ï¼Œ åä¹‹ Î¸2bÎ¸^b_2Î¸2bâ€‹ åˆ™åœ¨è°·åº•å…¶å˜åŒ–ä¼šé€ æˆäºŒæ¬¡å¾®åˆ†å€¼çš„å¢å¤§ï¼Œå¯¼è‡´åŸå‡½æ•°çš„å˜åŒ–æ›´å‰§çƒˆï¼Œæˆ‘ä»¬è¦ç»™å®ƒä¸€ä¸ªå¤§çš„å®ˆå« b2b_2b2â€‹ ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒÎ¸1bÎ¸^b_1Î¸1bâ€‹ èƒ½åŠ¨ï¼ŒÎ¸2bÎ¸^b_2Î¸2bâ€‹ åŠ¨ä¸å¾—ã€‚\næœ‰äº†ä¸Šè¿°çš„constraint ï¼Œæˆ‘ä»¬å°±èƒ½è®©æ¨¡å‹å‚æ•°å°½é‡ä¸è¦åœ¨ Î¸2Î¸_2Î¸2â€‹ æ–¹å‘ä¸Šç§»åŠ¨ï¼Œå¯ä»¥åœ¨ Î¸1Î¸_1Î¸1â€‹ ä¸Šç§»åŠ¨ï¼Œå¾—åˆ°çš„æ•ˆæœå¯èƒ½å°±ä¼šæ˜¯è¿™æ ·çš„ï¼š\n\n EWC - Experiment\næˆ‘ä»¬æ¥çœ‹çœ‹EWCçš„åŸå§‹paperä¸­çš„å®éªŒç»“æœï¼š\n\nä¸‰ä¸ªtaskå…¶å®å°±æ˜¯å¯¹MNIST æ•°æ®é›†åšä¸åŒçš„å˜æ¢ååšè¾¨è¯†ä»»åŠ¡ã€‚æ¯è¡Œæ˜¯æ¨¡å‹å¯¹è¯¥è¡Œçš„taskå‡†ç¡®ç‡çš„å˜åŒ–ï¼Œä»ç¬¬ä¸€è¡Œå¯ä»¥çœ‹å‡ºï¼Œå½“æˆ‘ä»¬ç”¨EWCçš„æ–¹æ³•åšå®Œä¸‰ä¸ªä»»åŠ¡å­¦ä¹ ä»¥åä»ç„¶èƒ½ç»´æŒæ¯”è¾ƒå¥½çš„å‡†ç¡®ç‡ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸‹é¢ä¸¤è¡Œä¸­ï¼ŒL2çš„æ–¹æ³•åœ¨å­¦ä¹ æ–°çš„ä»»åŠ¡çš„æ—¶å€™å‘ç”Ÿäº†Intransigenceï¼ˆé¡½å›ºï¼‰çš„ç°è±¡ï¼Œå°±æ˜¯æ¨¡å‹é¡½å›ºçš„è®°ä½äº†ä»¥å‰çš„ä»»åŠ¡ï¼Œè€Œæ— æ³•å­¦ä¹ æ–°çš„ä»»åŠ¡ã€‚\n EWC Variant\næœ‰å¾ˆå¤šEWC çš„å˜ä½“ï¼Œç»™å‡ ä¸ªå‚è€ƒï¼š\n\n\n\nElastic Weight Consolidation (EWC)\n\n\nhttp://www.citeulike.org/group/15400/article/14311063\n\n\nSynaptic Intelligence (SI)\n\n\nhttps://arxiv.org/abs/1703.04200\n\n\nMemory Aware Synapses (MAS)\n\n\nSpecial part: Do not need labelled data\n\n\nhttps://arxiv.org/abs/1711.09601\n\n\n\n Generating Data\nä¸Šé¢æˆ‘ä»¬è¯´Mutli-task Learning è™½ç„¶å¥½ç”¨ï¼Œä½†æ˜¯ç”±äºå­˜å‚¨å’Œè®¡ç®—çš„é™åˆ¶æˆ‘ä»¬ä¸èƒ½è¿™ä¹ˆåšï¼Œæ‰€ä»¥é‡‡å–äº†EWC ç­‰å…¶ä»–æ–¹æ³•ï¼Œè€ŒMutli-task Learning å¯ä»¥è€ƒè™‘ä¸ºLife-Long Learning çš„upper boundã€‚ åè¿‡æ¥æˆ‘ä»¬ä¸ç¦åœ¨æƒ³ï¼Œè™½ç„¶è¯´è¦å­˜å‚¨æ‰€æœ‰è¿‡å»çš„èµ„æ–™å¾ˆéš¾ï¼Œä½†æ˜¯Multi-task Learning ç¡®å®é‚£ä¹ˆå¥½ç”¨ï¼Œé‚£æˆ‘ä»¬èƒ½ä¸èƒ½Learning ä¸€ä¸ªmodelï¼Œè¿™ä¸ªmodel å¯ä»¥äº§ç”Ÿè¿‡å»çš„èµ„æ–™ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦å­˜ä¸€ä¸ªmodel è€Œä¸ç”¨å­˜æ‰€æœ‰è®­ç»ƒæ•°æ®ï¼Œè¿™æ ·æˆ‘ä»¬å°±åšMulti-task çš„learningã€‚ï¼ˆè¿™é‡Œæš‚æ—¶å¿½ç•¥ç®—åŠ›é™åˆ¶ï¼Œåªè®¨è®ºæ•°æ®ç”Ÿæˆé—®é¢˜ï¼‰\n\nè¿™ä¸ªè¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬å…ˆç”¨training data 1 è®­ç»ƒå¾—åˆ°è§£å†³task 1 çš„modelï¼ŒåŒæ—¶ç”¨è¿™äº›æ•°æ®ç”Ÿæˆtrain ä¸€ä¸ªèƒ½ç”Ÿæˆè¿™äº›æ•°æ®çš„generator ï¼Œå­˜å‚¨è¿™ä¸ªgenerator è€Œä¸æ˜¯å­˜å‚¨training data ï¼›å½“æ¥äº†æ–°çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬å°±ç”¨è¿™ä¸ªgenerator ç”Ÿæˆtask 1çš„training data å’Œ task2 çš„training data æ··åœ¨ä¸€èµ·ï¼Œç”¨Multi-task Learning çš„æ–¹æ³•train å‡ºèƒ½åŒæ—¶è§£å†³task1 å’Œtask2 çš„modelï¼ŒåŒæ—¶æˆ‘ä»¬ç”¨æ··åœ¨ä¸€èµ·çš„æ•°æ®é›†train å‡ºä¸€ä¸ªæ–°çš„generator ï¼Œè¿™ä¸ªgenerator èƒ½ç”Ÿæˆè¿™ä¸ªæ··åˆæ•°æ®é›†ï¼›ä»¥æ­¤ç±»æ¨ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åšMutli-task Learning ï¼Œè€Œä¸ç”¨å­˜å‚¨å¤§é‡æ•°æ®ã€‚ä½†æ˜¯è¿™ä¸ªæ–¹æ³•åœ¨å®é™…ä¸­åˆ°åº•èƒ½ä¸èƒ½åšèµ·æ¥ï¼Œè¿˜å°šå¾…ç ”ç©¶ï¼Œä¸€ä¸ªåŸå› æ˜¯å®é™…ä¸Šç”Ÿæˆæ•°æ®æ˜¯æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“çš„ï¼Œæ¯”å¦‚è¯´ç”Ÿæˆè´´åˆå®é™…çš„é«˜æ¸…çš„å½±åƒå¯¹äºæœºå™¨æ¥è¯´å°±å¾ˆéš¾ï¼Œå…³äºgenerator model çš„è®­ç»ƒæ–¹æ³•è¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œåœ¨ç”Ÿæˆæ¨¡å‹çš„ä¸€èŠ‚é‡Œæœ‰è®²ï¼ŒGANæ˜¯ä¸€ä¸ªè§£æ³•ã€‚ä»¥ä¸‹Generating Data è¿™ç§æ–¹æ³•çš„å‚è€ƒï¼š\n\nhttps://arxiv.org/abs/1705.08690\nhttps://arxiv.org/abs/1711.10563\n\n Adding New Classes\nåœ¨åˆšæ‰çš„è®¨è®ºç§ï¼Œæˆ‘ä»¬éƒ½æ˜¯å‡è®¾è§£ä¸åŒçš„ä»»åŠ¡ç”¨çš„æ˜¯ç›¸åŒçš„ç½‘ç»œæ¶æ„ï¼Œä½†æ˜¯å¦‚æœç°åœ¨æˆ‘ä»¬çš„task æ˜¯ä¸åŒï¼Œéœ€è¦æˆ‘ä»¬æ›´æ”¹ç½‘ç»œæ¶æ„çš„è¯è¦æ€ä¹ˆåŠå‘¢ï¼Ÿæ¯”å¦‚è¯´ï¼Œä¸¤ä¸ªåˆ†ç±»ä»»åŠ¡çš„ç±»åˆ«æ•°é‡ä¸åŒï¼Œæˆ‘ä»¬å°±è¦ä¿®æ”¹network çš„output layer ã€‚è¿™é‡Œå°±åˆ—ä¸€äº›å‚è€ƒç»™å¤§å®¶ï¼š\n\n\nLearning without forgetting (LwF)\nhttps://arxiv.org/abs/1606.09282\n\n\n\niCaRL: Incremental Classifier and Representation Learning\nhttps://arxiv.org/abs/1611.07725\n\n Knowledge Transfer\næ€ä¹ˆç¿»è¯‘ï¼ŸçŸ¥è¯†è¿ç§»ï¼Ÿ\n\næˆ‘ä»¬ä¸ä»…å¸Œæœ›æœºå™¨å¯ä»¥å¯ä»¥è®°ä½ä»¥å‰å­¦çš„knowledge ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›æœºå™¨åœ¨å­¦ä¹ æ–°çš„knowledge çš„æ—¶å€™èƒ½æŠŠä»¥å‰å­¦çš„çŸ¥è¯†åštransferã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹ï¼šæˆ‘ä»¬ä¹‹å‰éƒ½æ˜¯æ¯ä¸ªä»»åŠ¡éƒ½è®­ç»ƒä¸€ä¸ªå•ç‹¬çš„æ¨¡å‹ï¼Œè¿™ç§æ–¹å¼ä¼šæŸå¤±ä¸€ä¸ªå¾ˆé‡è¦çš„ä¿¡æ¯ï¼Œå°±æ˜¯è§£å†³ä¸åŒé—®é¢˜ä¹‹é—´çš„é€šç”¨çŸ¥è¯†ã€‚å½¢è±¡ç‚¹æ¥è¯´ï¼Œæ¯”å¦‚ä½ å…ˆå­¦è¿‡çº¿æ€§ä»£æ•°å’Œæ¦‚ç‡è®ºï¼Œé‚£ä½ åœ¨å­¦æœºå™¨å­¦ä¹ çš„æ—¶å€™å°±ä¼šåº”ç”¨å…ˆå‰å­¦è¿‡çš„çŸ¥è¯†ï¼Œå­¦èµ·æ¥å°±ä¼šå¾ˆé¡ºåˆ©ã€‚Life-Long Learning ä¹Ÿæ˜¯å¸Œæœ›æœºå™¨èƒ½å¤ŸæŠŠä¸åŒä»»åŠ¡ä¹‹é—´çš„çŸ¥è¯†è¿›è¡Œè¿ç§»ï¼Œè®©ä»¥å‰å­¦è¿‡çš„çŸ¥è¯†å¯ä»¥åº”ç”¨åˆ°è§£å†³æ–°çš„ä»»åŠ¡ä¸Šé¢ã€‚å¦‚ä¸‹å›¾ï¼Œæœºå™¨ä»ä¸€ä¸ªæ†¨æ†¨ä¸€æ ·çš„æœºå™¨äººå­¦ç€å­¦ç€å°±é«˜ç«¯èµ·æ¥äº†ï¼š\n\nè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬æœŸæœ›ç”¨åŒä¸€ä¸ªæ¨¡å‹è§£å†³å¤šä¸ªä»»åŠ¡ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªä»»åŠ¡å•ç‹¬è®­ç»ƒä¸€ä¸ªæ¨¡å‹ã€‚\n Life-Long v.s. Transfer\nè®²äº†è¿™ä¹ˆå¤štransferï¼Œä½ å¯èƒ½ä¼šè¯´ï¼Œè¿™ä¸å°±æ˜¯åœ¨åštransfer Learning å—ï¼Ÿ\n\nLLL ç¡®å®æœ‰åº”ç”¨Transfer Learning çš„æ€æƒ³ï¼Œä½†æ˜¯å®ƒæ¯”åè€…æ›´è¿›ä¸€æ­¥ã€‚æ€ä¹ˆè¯´å‘¢ï¼ŒTransfer Learning çš„ç²¾ç¥æ˜¯åº”ç”¨å…ˆå‰ä»»åŠ¡çš„æ¨¡å‹åˆ°æ–°çš„ä»»åŠ¡ä¸Šï¼Œè®©æ¨¡å‹å¯ä»¥è§£å†³æˆ–è€…è¯´æ›´å¥½çš„è§£å†³æ–°çš„ä»»åŠ¡ï¼Œè€Œä¸åœ¨ä¹æ­¤æ—¶æ¨¡å‹æ˜¯å¦è¿˜èƒ½è§£å†³å…ˆå‰çš„ä»»åŠ¡ï¼›ä½†æ˜¯LLL å°±æ¯”Transfer Learning æ›´è¿›ä¸€æ­¥ï¼Œå®ƒä¼šè€ƒè™‘åˆ°æ¨¡å‹åœ¨å­¦ä¼šæ–°çš„ä»»åŠ¡çš„åŒæ—¶ï¼Œè¿˜ä¸èƒ½å¿˜è®°ä»¥å‰çš„ä»»åŠ¡çš„è§£æ³•ã€‚\n Evaluation\nè®²åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ¥è¯´ä¸€ä¸‹å¦‚ä½•è¡¡é‡LLL çš„å¥½åã€‚å…¶å®ï¼Œæœ‰å¾ˆå¤šä¸åŒçš„çš„è¡¡é‡æ–¹æ³•ï¼Œè¿™é‡Œç®€ä»‹ä¸€ç§ã€‚\n\nè¿™é‡Œæ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªæ¨¡å‹åœ¨æ¯ä¸ªä»»åŠ¡ä¸Šçš„æµ‹è¯•ç»“æœï¼Œæ¯ä¸€åˆ—æ˜¯ç”¨ä¸€ä¸ªä»»åŠ¡å¯¹ä¸€ä¸ªæ¨¡å‹åœ¨åšå®ŒæŸäº›ä»»åŠ¡çš„è®­ç»ƒä»¥åè¿›è¡Œæµ‹è¯•çš„ç»“æœã€‚\nRi,jR_{i,j}Ri,jâ€‹ : åœ¨è®­ç»ƒå®Œtask i åï¼Œæ¨¡å‹åœ¨task j ä¸Šçš„performance ã€‚\nå¦‚æœ i &gt; j : åœ¨å­¦å®Œtask i ä»¥åï¼Œæ¨¡å‹åœ¨å…ˆå‰çš„task j ä¸Šçš„performanceã€‚\nå¦‚æœ i &lt; j : åœ¨å­¦å®Œtask i ä»¥åï¼Œæ¨¡å‹åœ¨æ²¡å­¦è¿‡çš„task j ä¸Šçš„performanceï¼Œæ¥è¯´æ˜å‰é¢å­¦å®Œçš„ i ä¸ªtask èƒ½ä¸èƒ½transfer åˆ° task j ä¸Šã€‚\n\nAccuracy æ˜¯æŒ‡è¯´æœºå™¨åœ¨å­¦ç©æ‰€æœ‰T ä¸ªtask ä»¥åï¼Œåœ¨æ‰€æœ‰ä»»åŠ¡ä¸Šçš„å¹³å‡å‡†ç¡®ç‡ï¼Œæ‰€ä»¥å¦‚ä¸Šå›¾çº¢æ¡†ï¼Œå°±æŠŠæœ€åä¸€è¡ŒåŠ èµ·æ¥å–å¹³å‡å°±æ˜¯ç°åœ¨è¿™ä¸ªLLL model çš„Accuracy ï¼Œå½¢å¼åŒ–å…¬å¼å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚\nBackward Transfer æ˜¯æŒ‡æœºå™¨æœ‰å¤šä¼šåš[Knowledge Retention](#Knowledge Retention)ï¼ˆçŸ¥è¯†ä¿ç•™ï¼‰ï¼Œæœ‰å¤šä¸ä¼šé—å¿˜è¿‡å»å­¦è¿‡çš„ä»»åŠ¡ã€‚åšæ³•æ˜¯é’ˆå¯¹æ¯ä¸€ä¸ªtask çš„æµ‹è¯•é›†ï¼ˆæ¯åˆ—ï¼‰ï¼Œè®¡ç®—æ¨¡å‹å­¦å®ŒT ä¸ªtask ä»¥åçš„performance å‡å»æ¨¡å‹åˆšå­¦å®Œå¯¹åº”è¯¥æµ‹è¯•é›†çš„æ—¶å€™çš„performance ï¼Œæ±‚å’Œå–å¹³å‡ï¼Œå½¢å¼åŒ–å…¬å¼å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚\nBackward Transfer çš„æ€æƒ³å°±æ˜¯æŠŠæœºå™¨å­¦åˆ°æœ€åçš„è¡¨ç°å‡å»æœºå™¨åˆšå­¦å®Œé‚£ä¸ªä»»åŠ¡è¿˜è®°å¿†çŠ¹æ–°çš„è¡¨ç°ï¼Œå¾—åˆ°çš„å·®å€¼é€šå¸¸éƒ½æ˜¯è´Ÿçš„ï¼Œå› ä¸ºæœºå™¨æ€»æ˜¯ä¼šé—å¿˜çš„ï¼Œå®ƒå­¦åˆ°æœ€åå¾€å¾€å°±ä¸€å®šç¨‹åº¦çš„å¿˜è®°ä»¥å‰å­¦çš„ä»»åŠ¡ï¼Œå¦‚æœä½ åšå‡ºæ¥æ˜¯æ­£çš„ï¼Œè¯´æ˜æœºå™¨åœ¨å­¦è¿‡æ–°çš„çŸ¥è¯†ä»¥åå¯¹ä»¥å‰çš„ä»»åŠ¡æœ‰äº†è§¦ç±»æ—é€šçš„æ•ˆæœï¼Œé‚£å°±å¾ˆå¼ºğŸ˜®ã€‚\nForward Transfer æ˜¯æŒ‡æœºå™¨æœ‰å¤šä¼šåšKnowledge Transfer ï¼ˆçŸ¥è¯†è¿ç§»ï¼‰ï¼Œæœ‰å¤šä¼šæŠŠè¿‡å»å­¦åˆ°çš„çŸ¥è¯†åº”ç”¨åˆ°æ–°çš„ä»»åŠ¡ä¸Šã€‚åšæ³•æ˜¯å¯¹æ¯ä¸ªtask çš„æµ‹è¯•é›†ï¼Œè®¡ç®—æ¨¡å‹å­¦è¿‡task i ä»¥åå¯¹task i+1 çš„performance å‡å»éšæœºåˆå§‹çš„æ¨¡å‹åœ¨task i+1 çš„performance ï¼Œæ±‚å’Œå–å¹³å‡ã€‚ï¼Œå½¢å¼åŒ–å…¬å¼å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\n\n Gradient Episodic Memory (GEM)\nä¸Šè¿°çš„Backward Transfer è®©è¿™ä¸ªå€¼æ˜¯æ­£çš„å°±è¯´æ˜ï¼Œmodel ä¸ä»…æ²¡æœ‰é—å¿˜è¿‡å­¦è¿‡çš„çŸ¥è¯†ï¼Œè¿˜åœ¨å­¦äº†æ–°çš„çŸ¥è¯†ä»¥åå¯¹ä»¥å‰çš„ä»»åŠ¡è§¦ç±»æ—é€šï¼Œè¿™ä»¶äº‹æ˜¯æœ‰ç ”ç©¶çš„ï¼Œæ¯”å¦‚GEM ã€‚\n\n\nGEM: https://arxiv.org/abs/1706.08840\nA-GEM: https://arxiv.org/abs/1812.00420\n\nGEM æƒ³åšåˆ°çš„äº‹æƒ…æ˜¯ï¼Œåœ¨æ–°çš„task ä¸Šè®­ç»ƒå‡ºæ¥çš„gradient åœ¨æ›´æ–°çš„å‚æ•°çš„æ—¶å€™ï¼Œè¦è€ƒè™‘ä¸€ä¸‹è¿‡å»çš„gradient ï¼Œä½¿å¾—å‚æ•°æ›´æ–°çš„æ–¹å‘è‡³å°‘ä¸èƒ½æ˜¯ä»¥å‰æ¢¯åº¦çš„æ–¹å‘ï¼ˆæ›´æ–°å‚æ•°æ˜¯è¦å‘æ¢¯åº¦çš„åæ–¹å‘æ›´æ–°ï¼‰ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦æˆ‘ä»¬ä¿ç•™å°‘é‡çš„è¿‡å»çš„æ•°æ®ï¼Œä»¥ä¾¿åœ¨train æ–°çš„task çš„æ—¶å€™ï¼ˆæ¯æ¬¡æ›´æ–°å‚æ•°çš„æ—¶å€™ï¼‰å¯ä»¥è®¡ç®—å‡ºä»¥å‰çš„æ¢¯åº¦ã€‚\nå½¢è±¡ç‚¹æ¥è¯´ï¼Œä»¥ä¸Šå›¾ä¸ºä¾‹ï¼Œå·¦è¾¹ï¼Œå¦‚æœç°åœ¨æ–°çš„ä»»åŠ¡å­¦å‡ºæ¥çš„æ¢¯åº¦æ˜¯g ï¼Œé‚£æ›´æ–°çš„æ—¶å€™ä¸ä¼šå¯¹ä»¥å‰çš„æ¢¯åº¦g1 g2 é€ æˆåå‘çš„å½±å“ï¼›å³è¾¹ï¼Œå¦‚æœç°åœ¨æ–°çš„æƒ…å†µæ˜¯è¿™æ ·çš„ï¼Œé‚£æ¢¯åº¦åœ¨æ›´æ–°çš„æ—¶å€™ä¼šå½±å“åˆ°g1ï¼Œg å’Œg1 çš„å†…ç§¯æ˜¯è´Ÿçš„ï¼Œæ„å‘³ç€æ¢¯åº¦g ä¼šæŠŠå‚æ•°æ‹‰å‘g1 çš„åæ–¹å‘ï¼Œå› æ­¤ä¼šæŸå®³model åœ¨task 1ä¸Šçš„performanceã€‚æ‰€ä»¥æˆ‘ä»¬å–ä¸€ä¸ªå°½å¯èƒ½æ¥è¿‘g çš„gâ€™ ï¼Œä½¿å¾—gâ€™ å’Œä¸¤ä¸ªè¿‡å»ä»»åŠ¡æ•°æ®ç®—å‡ºæ¥çš„æ¢¯åº¦çš„å†…ç§¯éƒ½å¤§äºé›¶ã€‚è¿™æ ·çš„è¯å°±ä¸ä¼šæŸå®³åˆ°ä»¥å‰task çš„performance ï¼Œæä¸å¥½è¿˜èƒ½è®©è¿‡å»çš„task çš„loss å˜å¾—æ›´å°ã€‚\næˆ‘ä»¬æ¥çœ‹çœ‹GEM çš„æ•ˆæœï¼š\n\nå¾ˆç›´è§‚ï¼Œå°±ä¸è§£é‡Šäº†ï¼Œæ€»è€Œè¨€ä¹‹å°±æ˜¯GEM å¾ˆå¼ºè¿™æ ·å­äº†å•¦ğŸ¤£ã€‚\n Model Expansion\nbut parameter efficiency\næ¨¡å‹æ‰©å¼ ï¼Œä¸”å‚æ•°é«˜æ•ˆ\n\nä¸Šé¢è®²çš„å†…å®¹ï¼Œæˆ‘ä»¬éƒ½å‡è®¾æ¨¡å‹æ˜¯è¶³å¤Ÿå¤§çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ¨¡å‹çš„å‚æ•°å¤Ÿå¤šï¼Œå®ƒæ˜¯æœ‰èƒ½åŠ›æŠŠæ‰€æœ‰ä»»åŠ¡éƒ½åšå¥½ï¼Œåªä¸è¿‡å› ä¸ºæŸäº›åŸå› å®ƒæ²¡æœ‰åšåˆ°ç½¢äº†ã€‚ä½†æ˜¯å¦‚æœç°åœ¨æˆ‘ä»¬çš„æ¨¡å‹å·²ç»å­¦äº†å¾ˆå¤šä»»åŠ¡äº†ï¼Œæ‰€æœ‰å‚æ•°éƒ½è¢«å……åˆ†åˆ©ç”¨äº†ï¼Œä»–å·²ç»æ²¡æœ‰èƒ½åŠ›å­¦æ–°çš„ä»»åŠ¡äº†ï¼Œé‚£æˆ‘ä»¬å°±è¦ç»™æ¨¡å‹è¿›è¡Œæ‰©å¼ ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜è¦ä¿è¯æ‰©å¼ ä¸æ˜¯ä»»æ„çš„ï¼Œè€Œæ˜¯æœ‰æ•ˆç‡çš„æ‰©å¼ ï¼Œå¦‚æœæ¯æ¬¡å­¦æ–°çš„ä»»åŠ¡ï¼Œæ¨¡å‹éƒ½è¦è¿›è¡Œä¸€æ¬¡æ‰©å¼ ï¼Œé‚£è¿™æ ·çš„è¯ä½ æœ€ç»ˆå°±ä¼šæ— æ³•å­˜ä¸‹ä½ çš„æ¨¡å‹ï¼Œè€Œä¸”è‡ƒè‚¿çš„æ¨¡å‹ä¸­å¤§æ¦‚ç‡å¾ˆå¤šå‚æ•°éƒ½æ˜¯æ²¡æœ‰ç”¨çš„ã€‚\nè¿™ä¸ªé—®é¢˜åœ¨2018å¹´è€å¸ˆè®²è¯¾çš„æ—¶å€™è¿˜æ²¡æœ‰å¾ˆå¤šæ–‡çŒ®å¯ä»¥å‚è€ƒï¼Œè¿™é‡Œå°±æµæ°´è´¦çš„è®°å½•ä¸€ä¸‹è€å¸ˆè®²çš„æµæ°´å¸ã€‚\n Progressive Neural Networks\n\n\nhttps://arxiv.org/abs/1606.04671\n\nè¿™ä¸ªæ–¹æ³•æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬åœ¨å­¦task 1çš„æ—¶å€™å°±æ­£å¸¸trainï¼Œåœ¨å­¦task 2çš„æ—¶å€™å°±æä¸€ä¸ªæ–°çš„network ï¼Œè¿™ä¸ªç½‘è·¯ä¸ä»…ä¼šåƒè®­ç»ƒé›†æ•°æ®ï¼Œè€Œä¸”ä¼šæŠŠè®­ç»ƒé›†æ•°æ®input åˆ°task 1çš„networkä¸­å¾—åˆ°çš„æ¯å±‚è¾“å‡ºåƒè¿›å»ï¼Œè¿™æ—¶å€™æ˜¯fix ä½task 1 networkï¼Œè€Œè°ƒæ•´task 2 network ã€‚åŒç†ï¼Œå½“å­¦task 3çš„æ—¶å€™ï¼Œæä¸€ä¸ªæ–°çš„network ï¼Œè¿™ä¸ªç½‘ç»œä¸ä»…åƒè®­ç»ƒé›†æ•°æ®ï¼Œè€Œä¸”ä¼šæŠŠè®­ç»ƒé›†æ•°æ®ä¸¢å…¥task 1 network å’Œ task 2 network ï¼Œå°†å…¶æ¯å±‚è¾“å‡ºåƒè¿›å»ï¼Œä¹Ÿæ˜¯fix ä½å‰ä¸¤ä¸ªnetwork åªæ”¹åŠ¨ç¬¬ä¸‰ä¸ªnetwork ã€‚\nè¿™æ˜¯ä¸€ä¸ªæ—©æœŸçš„æƒ³æ³•ï¼Œ2016å¹´å°±å‡ºç°äº†ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•ï¼Œç»ˆç©¶è¿˜æ˜¯ä¸å¤ªèƒ½å­¦å¾ˆå¤šä»»åŠ¡ã€‚\n Expert Gate\n\n\nhttps://arxiv.org/abs/1611.06194\nAljundi, R., Chakravarty, P., Tuytelaars, T.: Expert gate: Lifelong learning with a network of\nexperts. In: CVPR (2017)\n\næ€æƒ³æ˜¯è¿™æ ·çš„ï¼šæ¯ä¸€ä¸ªtask è®­ç»ƒä¸€ä¸ªnetwork ã€‚ä½†æ˜¯train äº†å¦ä¸€ä¸ªnetwork ï¼Œè¿™ä¸ªnetwork ä¼šåˆ¤æ–­æ–°çš„ä»»åŠ¡å’ŒåŸå…ˆçš„å“ªä¸ªä»»åŠ¡æœ€ç›¸ä¼¼ï¼ŒåŠ å…¥ç°åœ¨æ–°çš„ä»»åŠ¡å’ŒT1 æœ€ç›¸ä¼¼ï¼Œé‚£ä»–å°±æŠŠnetwork 1æœ€ä¸ºæ–°ä»»åŠ¡çš„åˆå§‹åŒ–networkï¼Œå¸Œæœ›ä»¥æ­¤åšåˆ°çŸ¥è¯†è¿ç§»ã€‚ä½†æ˜¯è¿™ä¸ªæ–¹æ³•è¿˜æ˜¯æ¯ä¸€ä¸ªä»»åŠ¡éƒ½ä¼šæœ‰ä¸€ä¸ªæ–°çš„network ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¸å¤ªå¥½ã€‚\n Net2Net\nå¦‚æœæˆ‘ä»¬åœ¨å¢åŠ network å‚æ•°çš„æ—¶å€™ç›´æ¥å¢åŠ ç¥ç»å…ƒè¿›å»ï¼Œå¯èƒ½ä¼šç ´åè¿™ä¸ªæ¨¡å‹åŸæ¥åšçš„å‡†ç¡®ç‡ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆå¢åŠ å‚æ•°æ‰èƒ½ä¿è¯ä¸ä¼šæŸå®³æ¨¡å‹åœ¨åŸæ¥ä»»åŠ¡ä¸Šçš„å‡†ç¡®ç‡å‘¢ï¼ŸNet2Net æ˜¯ä¸€ä¸ªè§£å†³æ–¹æ³•ï¼š\n\n\nhttps://arxiv.org/abs/1511.05641\nç”¨åˆ°äº†Net2Netï¼šhttps://arxiv.org/abs/1811.07017\n\nNet2Netçš„å…·ä½“åšæ³•æ˜¯è¿™æ ·çš„ï¼Œè¿™é‡Œä¸¾ä¸€ä¸ªæ —å­ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“æˆ‘ä¹ˆä½ è¦åœ¨ä¸­é—´å¢åŠ ä¸€ä¸ªneuron æ—¶ï¼Œæˆ‘ä»¬æŠŠf å˜ä¸ºf/2 ï¼Œè¿™æ ·çš„è¯åŒæ ·çš„è¾“å…¥åœ¨æ–°æ—§ä¸¤ä¸ªæ¨¡å‹ä¸­å¾—åˆ°çš„è¾“å‡ºå°±è¿˜æ˜¯ç›¸åŒçš„ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿå¢åŠ äº†æ¨¡å‹çš„å‚æ•°ã€‚ä½†æ˜¯è¿™æ ·åšå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯h[2] h[3] ä¸¤ä¸ªç¥ç»å…ƒå°†ä¼šåœ¨åé¢æ›´æ–°å‚æ•°çš„æ—¶å€™å®Œå…¨ä¸€æ ·ï¼Œè¿™æ ·çš„è¯å°±ç›¸å½“äºæ²¡æœ‰æ‰©å¼ æ¨¡å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨è¿™äº›å‚æ•°ä¸ŠåŠ ä¸Šä¸€ä¸ªå°å°çš„noise ï¼Œè®©ä»–ä»¬çœ‹èµ·æ¥è¿˜æ˜¯æœ‰å°å°çš„ä¸åŒï¼Œä»¥ä¾¿æ›´æ–°å‚æ•°ã€‚\nå›¾ä¸­ç¬¬äºŒä¸ªå¼•ç”¨çš„æ–‡ç« å°±ç”¨äº†Net2Netï¼Œéœ€è¦æ³¨æ„ï¼Œä¸æ˜¯æ¥ä¸€ä¸ªä»»åŠ¡å°±æ‰©å¼ ä¸€æ¬¡æ¨¡å‹ï¼Œè€Œæ˜¯å½“æ¨¡å‹åœ¨æ–°çš„ä»»åŠ¡çš„training data ä¸Šå¾—ä¸åˆ°å¥½çš„Accuracy çš„æ—¶å€™æ‰ç”¨Net2Net æ‰©å¼ æ¨¡å‹ã€‚\n Curriculum Learning\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ¨¡å‹çš„æ•ˆæœæ˜¯éå¸¸å—ä»»åŠ¡è®­ç»ƒé¡ºåºå½±å“çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼šä¸ä¼šå‘ç”Ÿé—å¿˜ï¼Œèƒ½ä¸èƒ½åšåˆ°çŸ¥è¯†è¿ç§»ï¼Œå’Œè®­ç»ƒä»»åŠ¡çš„å…ˆåé¡ºåºæ˜¯æœ‰å¾ˆå¤§å…³ç³»çš„ã€‚å‡å¦‚è¯´LLL åœ¨æœªæ¥å˜å¾—éå¸¸çƒ­é—¨ï¼Œé‚£æ€ä¹ˆå®‰æ’æœºå™¨å­¦ä¹ çš„ä»»åŠ¡é¡ºåºå¯èƒ½ä¼šæ˜¯ä¸€ä¸ªéœ€è¦è®¨è®ºçš„çƒ­ç‚¹é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜å«åšCurriculum Learning ã€‚\n2018å¹´å°±å·²ç»æœ‰ä¸€ç¯‡æ–‡çŒ®æ˜¯åœ¨å°†è¿™ä¸ªé—®é¢˜ï¼š\n\n\nhttp://taskonomy.stanford.edu/#abstract CVPR çš„best paper\n\næ–‡ç« ç›®çš„æ˜¯æ‰¾å‡ºä»»åŠ¡é—´çš„å…ˆåæ¬¡åºï¼Œæ¯”å¦‚è¯´å…ˆåš3D-Edges å’Œ Normals å¯¹ Point Matching å’ŒReshading å°±å¾ˆæœ‰å¸®åŠ©ã€‚\n","categories":["æå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°"],"tags":["ML","note","Next-Step-of-ML"]},{"title":"Anomaly Detection","url":"https://ch3nye.top/Anomaly-Detection/","content":" Anomaly Detection\nç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯ï¼Œå¼‚å¸¸æ¢æµ‹ã€‚å¼‚å¸¸æ¢æµ‹å°±æ˜¯è¦è®©æœºå™¨çŸ¥é“&quot;I donâ€™t know&quot;ï¼Œè¿™ä»¶äº‹ã€‚\n Problem Formulation\nå¼‚å¸¸æ¢æµ‹é—®é¢˜é€šå¸¸å½¢å¼åŒ–æˆä¸‹è¿°è¡¨ç¤ºå½¢å¼ï¼š\n\nç»™å‡ºä¸€ä¸ªè®­ç»ƒæ•°æ®é›† {x1,x2,...,xN}\\{x^1, x^2,..., x^N\\}{x1,x2,...,xN}\næˆ‘ä»¬æƒ³æ‰¾å‡ºä¸€ä¸ªå‡½æ•°å»æ¢æµ‹è¾“å…¥ xxx æ˜¯å¦å’Œè®­ç»ƒæ•°æ®ç›¸ä¼¼\n\nä¹Ÿå°±æ˜¯è¯´å¼‚å¸¸æ¢æµ‹çš„ä»»åŠ¡å°±æ˜¯æ‰¾ä¸€ä¸ªfunctionï¼Œè¿™ä¸ªfunctionåšçš„äº‹æƒ…å°±æ˜¯ï¼Œæˆ‘ä»¬ç»™å®ƒä¸€ä¸ªå’Œè®­ç»ƒæ•°æ®ç›¸ä¼¼çš„è¾“å…¥ï¼Œå®ƒå°±è¿”å›ä¸€ä¸ªç»“æœå‘Šè¯‰æˆ‘ä»¬è¾“å…¥æ˜¯æ­£å¸¸çš„ï¼Œåä¹‹ï¼Œå½“æˆ‘ä»¬è¾“å…¥ä¸€ä¸ªå’Œè®­ç»ƒæ•°æ®å·®åˆ«éå¸¸å¤§çš„æ ·æœ¬ï¼Œå®ƒå°±è¿”å›ä¸€ä¸ªç»“æœå‘Šè¯‰æˆ‘ä»¬è¾“å…¥æ˜¯å¼‚å¸¸çš„ã€‚\n\né€šå¸¸æˆ‘ä»¬çœ‹åˆ°anomaly è¿™ä¸ªè¯éƒ½æ˜¯è´Ÿé¢çš„ï¼Œä½†æ˜¯è¿™é‡Œè¯´çš„å¼‚å¸¸æ¢æµ‹å¹¶ä¸æ˜¯è´Ÿé¢æ„æ€ï¼Œåªæ˜¯åœ¨è¯´æŸä¸ªæ•°æ®å’Œè®­ç»ƒæ•°æ®é›†ä¸­çš„æ•°æ®å·®åˆ«å¾ˆå¤§è€Œå·²ã€‚Anomaly æœ‰æ—¶ä¹Ÿä¼šç”¨outlier, novelty, exceptions æ›¿æ¢ï¼Œä½¿ç”¨noveltyçš„æ—¶å€™å°±æ˜¯æ‰¾ä¸€ä¸ªæ–°é¢–çš„ä¸œè¥¿ï¼Œæ‰€ä»¥ï¼Œæ€»çš„æ¥è¯´æˆ‘ä»¬å°±æ˜¯è¦æ‰¾å‡ºå’Œè®­ç»ƒé›†æ ·æœ¬ä¸ä¸€æ ·çš„ä¸œè¥¿ã€‚\nè‡³äºæ€ä¹ˆå®šä¹‰similarityï¼Œè¿™å°±æ˜¯Anomaly Detectionéœ€è¦æ¢è®¨çš„é—®é¢˜ï¼Œä¸åŒçš„æ–¹æ³•æˆ‘ä»¬è¦ç”¨ä¸åŒçš„æ–¹å¼å®šä¹‰ç›¸ä¼¼æ€§ã€‚\n What is Anomaly?\nè¿™é‡Œæˆ‘è¦å¼ºè°ƒä¸€ä¸‹ä»€ä¹ˆå«åšå¼‚å¸¸ï¼Œæœºå™¨åˆ°åº•è¦çœ‹åˆ°ä»€ä¹ˆæ‰åº”è¯¥è®¤å®šä¸ºAnomalyï¼Œè¿™å…¶å®æ˜¯å–å†³ä½ æä¾›ç»™æœºå™¨ä»€ä¹ˆæ ·çš„è®­ç»ƒæ•°æ®ã€‚ä¸¾ä¸ªæ —å­ï¼š\n\nå¦‚æœä½ æä¾›äº†å¾ˆå¤šçš„é›·ä¸˜ä½œä¸ºè®­ç»ƒæ•°æ®ï¼Œçš®å¡ä¸˜å°±æ˜¯å¼‚å¸¸çš„ã€‚å¦‚æœä½ æä¾›äº†å¾ˆå¤šçš„çš®å¡ä¸˜ä½œä¸ºè®­ç»ƒæ•°æ®ï¼Œé›·ä¸˜å°±æ˜¯å¼‚å¸¸çš„ã€‚å¦‚æœä½ æä¾›å¾ˆå¤šçš„å®å¯æ¢¦ä½œä¸ºè®­ç»ƒæ•°æ®ï¼Œæ•°ç å®è´å°±æ˜¯å¼‚å¸¸çš„ã€‚\n Applications\nå¼‚å¸¸æ¢æµ‹æœ‰å¾ˆå¤šåº”ç”¨ï¼Œæ¯”å¦‚å¯ä»¥åº”ç”¨åˆ°æ¬ºè¯ˆæ£€æµ‹ï¼ˆFraud Detectionï¼‰\n Fraud Detection\nFraud Detection åº”ç”¨äºé“¶è¡Œæˆ–ä¿é™©ç­‰è¡Œä¸šï¼ŒFraud åŒ…æ‹¬ä½†ä¸é™äºä¼ªé€ æ”¯ç¥¨ï¼Œä¿¡ç”¨å¡æ¬ºè¯ˆç­‰è¡Œä¸ºã€‚æ¬ºè¯ˆæ¢æµ‹çš„ç›®çš„æ˜¯é¢„æµ‹æ¬ºè¯ˆè¡Œä¸ºï¼Œé˜²æ­¢æ¬ºè¯ˆäº¤æ˜“çš„å‘ç”Ÿã€‚\nè¿™ç§ä»»åŠ¡çš„è®­ç»ƒèµ„æ–™å°±æ˜¯æ­£å¸¸çš„åˆ·å¡æœºè¡Œä¸ºï¼Œæ”¶é›†å¾ˆå¤šçš„äº¤æ˜“è®°å½•ï¼Œè¿™äº›äº¤æ˜“è®°å½•æ˜¯ä¸ºæ­£å¸¸çš„äº¤æ˜“è¡Œä¸ºï¼Œç°åœ¨æ–°æ¥ä¸€ç¬”äº¤æ˜“è®°å½•ï¼Œæˆ‘ä»¬å°±æŠŠå®ƒè¾“å…¥åˆ°æ¨¡å‹ä¸­ï¼Œåˆ¤æ–­è¿™ç¬”äº¤æ˜“æ˜¯å¦æœ‰å¼‚å¸¸ï¼Œç”šè‡³å¯ä»¥åšåˆ°é¢„æµ‹å’Œè¿™ç¬”äº¤æ˜“æœ‰å…³çš„å¯¹è±¡æ¥ä¸‹æ¥æ˜¯å¦æœ‰å‘ç”Ÿæ¬ºè¯ˆäº¤æ˜“çš„å¯èƒ½ï¼Œä»è€Œé¢„é˜²æ¬ºè¯ˆçš„å‘ç”Ÿã€‚ï¼ˆç›´è§‰ä¸Šå¯ä»¥ç®€å•çš„æƒ³è±¡ï¼šå¦‚æœæ­£å¸¸çš„äº¤æ˜“é‡‘é¢æ¯”è¾ƒå°ï¼Œé¢‘ç‡æ¯”è¾ƒä½ï¼Œè‹¥çŸ­æ—¶é—´å†…æœ‰éå¸¸å¤šçš„é«˜é¢æ¶ˆè´¹ï¼Œè¿™å¯èƒ½æ˜¯å¼‚å¸¸è¡Œä¸ºï¼‰\nè¿™ç§åº”ç”¨æ˜¯æœ‰ä¸€äº›æ¯”èµ›çš„ï¼Œä¸‹é¢æ˜¯kaggleä¸Šçš„é“¾æ¥ï¼š\n\nRef: https://www.kaggle.com/ntnu-testimon/paysim1/home\nRef: https://www.kaggle.com/mlg-ulb/creditcardfraud/home\nå®è·µç¯‡ï¼šä¸€ä¸ªå…³äºFraud Detectionçš„ä¾‹å­ï¼ˆä¸€ï¼‰\n\n Network Intrusion Detection\nå¼‚å¸¸æ£€æµ‹è¿˜å¯ä»¥åº”ç”¨åˆ°ç½‘ç»œç³»ç»Ÿçš„å…¥ä¾µæ£€æµ‹ï¼Œè®­ç»ƒæ•°æ®æ˜¯æ­£å¸¸çš„ç½‘ç»œè¿æ¥ã€‚ç°åœ¨æ¥äº†ä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œä½ å¸Œæœ›ç”¨Anomaly Detection è®©æœºå™¨è‡ªåŠ¨å†³å®šè¿™ä¸ªæ–°çš„è¿æ¥æ˜¯å¦ä¸ºæ”»å‡»è¡Œä¸ºã€‚\n\nRef: http://kdd.ics.uci.edu/databases/kddcup99/kddcup99.html\nKDD99è€ç»å…¸äº†ğŸ˜‚\n\n Cancer Detection\nå¼‚å¸¸æ£€æµ‹è¿˜å¯ä»¥åº”ç”¨åˆ°åŒ»ç–—ï¼ˆç™Œç»†èƒçš„ä¾¦æµ‹ï¼‰ï¼Œè®­ç»ƒæ•°æ®æ˜¯æ­£å¸¸ç»†èƒã€‚ç°åœ¨ç»™å‡ºä¸€ä¸ªæ–°çš„ç»†èƒï¼Œè®©æœºå™¨åˆ¤æ–­è¿™ä¸ªç»†èƒæ˜¯å¦ä¸ºç™Œç»†èƒã€‚\n\nRef: https://www.kaggle.com/uciml/breast-cancer-wisconsin-data/home\n\n Binary Classification\næ¥ä¸‹æ¥å°±æ˜¯å…·ä½“æ€ä¹ˆä½œAnomaly Detection äº†ï¼Œç›´è§‰çš„æƒ³æ³•å°±æ˜¯ï¼šç°åœ¨æˆ‘ä»¬å¯ä»¥æ”¶é›†æ­£è´Ÿä¸¤ç§è®­ç»ƒæ•°æ®ï¼š\n\n\næ­£å¸¸æ•°æ®ï¼š{x1,x2,â‹¯,xN}\\{x^1,x^2,â‹¯,x^N\\}{x1,x2,â‹¯,xN}\n\n\nå¼‚å¸¸æ•°æ®ï¼š{x~1,x~2,â‹¯,x~N}\\{\\widetilde{x}^1, \\widetilde{x}^2, â‹¯, \\widetilde{x}^N\\}{x1,x2,â‹¯,xN}\n\n\nç„¶åtrainä¸€ä¸ªäºŒåˆ†ç±»å™¨å°±å®Œäº‹äº†ã€‚\nè¿™ä¸ªé—®é¢˜å…¶å®å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼Œå› ä¸ºä¸å¤ªå®¹æ˜“æŠŠå¼‚å¸¸æ£€æµ‹çœ‹ä½œä¸€ä¸ªbinary classificationçš„é—®é¢˜ã€‚ä¸ºä»€ä¹ˆè¿™æ ·è¯´å‘¢ï¼Ÿ\nä¸¾ä¸ªæ —å­ï¼Œæˆ‘ä»¬ç°åœ¨å°†PokÃ©mon è§†ä¸ºæ­£å¸¸æ•°æ®ï¼Œå°†å…¶ä»–æ‰€æœ‰äº‹ç‰©è§†ä¸ºå¼‚å¸¸æ•°æ®ï¼Œæˆ‘ä»¬è¦è®©æœºå™¨åˆ¤æ–­è¾“å…¥æ˜¯ä¸æ˜¯ä¸€ä¸ªPokÃ©mon ï¼š\n\né‚£é—®é¢˜æ¥äº†ï¼Œé¦–å…ˆä¸æ˜¯PokÃ©mon çš„äº‹ç‰©å¤ªå¤šäº†ï¼Œæ•°ç å®è´ä¸æ˜¯ï¼Œå‡‰å®«æ˜¥æ—¥ä¸æ˜¯ï¼Œæ°´å£¶ä¸æ˜¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾ˆéš¾å°†é™¤æ­£å¸¸æ•°æ®ä»¥å¤–çš„æ‰€ä»¥äº‹ç‰©éƒ½å½’ç»“ä¸ºä¸€ç±»ï¼Œå¾ˆéš¾æ”¶é›†æ‰€æœ‰çš„å¼‚å¸¸æ•°æ®ï¼Œå¾ˆéš¾å°†å¼‚å¸¸æ•°æ®çš„ç‰¹å¾éƒ½è®©æœºå™¨è®°ä½ã€‚\nå†è€…ï¼Œå¾ˆå¤šæ—¶å€™ä½ å¾ˆéš¾æ”¶é›†åˆ°å¼‚å¸¸æ•°æ®ï¼Œæ¯”å¦‚æ¬ºè¯ˆæ£€æµ‹ï¼Œåœ¨æ‰€æœ‰çš„äº¤æ˜“ä¸­ï¼Œå¼‚å¸¸äº¤æ˜“çš„æ¯”ä¾‹éå¸¸è‡³å°‘ã€‚\n Categories\nç°åœ¨æˆ‘ä»¬æŠŠå¼‚å¸¸æ£€æµ‹ä»»åŠ¡åˆ†ä¸ºä¸¤ç±»ï¼š\n\nä¸€ç±»ï¼Œæ˜¯ä¸åªæœ‰è®­ç»ƒæ•°æ® {x1,x2,â‹¯,xN}\\{x^1,x^2,â‹¯,x^N\\}{x1,x2,â‹¯,xN} ï¼ŒåŒæ—¶è¿™äº›æ•°æ®è¿˜å…·æœ‰label {y^1,y^2,â‹¯,y^N}\\{\\hat{y}^1,\\hat{y}^2,â‹¯,\\hat{y}^N\\}{y^â€‹1,y^â€‹2,â‹¯,y^â€‹N} ã€‚ ç”¨è¿™æ ·çš„æ•°æ®é›†å¯ä»¥trainå‡ºä¸€ä¸ªclassifierï¼Œè®©æœºå™¨é€šè¿‡å­¦ä¹ è¿™äº›æ ·æœ¬ï¼Œä»¥é¢„æµ‹å‡ºæ–°æ¥çš„æ ·æœ¬çš„labelï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›åˆ†ç±»å™¨æœ‰èƒ½åŠ›çŸ¥é“æ–°ç»™æ ·æœ¬ä¸å±äºåŸæœ¬çš„è®­ç»ƒæ•°æ®çš„ä»»ä½•ç±»åˆ«ï¼Œå®ƒä¼šç»™æ–°æ ·æœ¬è´´ä¸Šâ€œunknownâ€çš„æ ‡ç­¾ã€‚è®­ç»ƒclassifier å¯ä»¥ç”¨generative modelã€logistic regressionã€deep learningç­‰æ–¹æ³•ï¼Œä½ å¯ä»¥ä»ä¸­æŒ‘ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„ç®—æ³•train å‡ºä¸€ä¸ªclassifier ã€‚\nä¸Šè¿°çš„è¿™ç§ç±»å‹çš„ä»»åŠ¡ï¼Œtrainå‡ºçš„classifier å…·æœ‰çœ‹åˆ°ä¸çŸ¥é“çš„æ•°æ®ä¼šæ ‡ä¸Šè¿™æ˜¯æœªçŸ¥ç‰©çš„èƒ½åŠ›ï¼Œè¿™ç®—æ˜¯å¼‚å¸¸æ£€æµ‹çš„å…¶ä¸­ä¸€ç§ï¼Œåˆå«åšOpen-set Recognitionã€‚æˆ‘ä»¬å¸Œæœ›åšåˆ†ç±»çš„æ—¶å€™æ¨¡å‹æ˜¯open çš„ï¼Œå®ƒå¯ä»¥è¾¨è¯†å®ƒæ²¡çœ‹è¿‡çš„ä¸œè¥¿ï¼Œæ²¡çœ‹è¿‡çš„ä¸œè¥¿å®ƒå°±è´´ä¸€ä¸ªâ€œunknownâ€çš„æ ‡ç­¾ã€‚\nå¦ä¸€ç±»ï¼Œæ‰€æœ‰è®­ç»ƒæ•°æ®éƒ½æ˜¯æ²¡æœ‰label çš„ï¼Œè¿™æ—¶ä½ åªèƒ½æ ¹æ®ç°æœ‰èµ„æ–™çš„ç‰¹å¾å»åˆ¤æ–­ï¼Œæ–°ç»™çš„æ ·æœ¬è·ŸåŸå…ˆçš„æ ·æœ¬é›†æ˜¯å¦ç›¸åƒã€‚è¿™ç§ç±»å‹çš„æ•°æ®åˆåˆ†æˆä¸¤ç§æƒ…å†µï¼š\n\nCleanï¼šæ‰‹ä¸Šçš„æ ·æœ¬æ˜¯å¹²å‡€çš„ï¼ˆæ‰€æœ‰çš„è®­ç»ƒæ ·æœ¬éƒ½æ˜¯æ­£å¸¸çš„æ ·æœ¬ï¼‰\nPollutedï¼šæ‰‹ä¸Šçš„æ ·æœ¬å·²ç»è¢«æ±¡æŸ“ï¼ˆè®­ç»ƒæ ·æœ¬å·²ç»è¢«æ··æ‚äº†ä¸€äº›å¼‚å¸¸çš„æ ·æœ¬ï¼Œæ›´å¸¸è§ï¼‰\n\næƒ…å†µäºŒæ˜¯æ›´å¸¸è§çš„ï¼Œå¯¹äºåˆšæ‰çš„è¯ˆæ¬ºæ£€æµ‹çš„ä¾‹å­è€Œè¨€ï¼Œé“¶è¡Œæ”¶é›†äº†å¤§é‡çš„äº¤æ˜“è®°å½•ï¼Œå®ƒæŠŠæ‰€æœ‰çš„äº¤æ˜“è®°å½•éƒ½å½“åšæ˜¯æ­£å¸¸çš„ï¼Œç„¶åå‘Šè¯‰æœºå™¨è¿™æ˜¯æ­£å¸¸äº¤æ˜“è®°å½•ï¼Œç„¶åå¸Œæœ›æœºå™¨å¯ä»¥å€Ÿæ­¤æ£€æµ‹å‡ºå¼‚å¸¸çš„äº¤æ˜“ã€‚ä½†æ‰€è°“çš„æ­£å¸¸çš„äº¤æ˜“è®°å½•å¯èƒ½æ··æ‚äº†å¼‚å¸¸çš„äº¤æ˜“ï¼Œåªæ˜¯é“¶è¡Œåœ¨æ”¶é›†èµ„æ–™çš„æ—¶å€™ä¸çŸ¥é“è¿™ä»¶äº‹ã€‚æ‰€ä»¥æˆ‘ä»¬æ›´å¤šé‡åˆ°çš„æ˜¯ï¼šæ‰‹ä¸Šæœ‰è®­ç»ƒæ ·æœ¬ï¼Œä½†æˆ‘æ²¡æœ‰åŠæ³•ä¿è¯æ‰€æœ‰çš„è®­ç»ƒæ ·æœ¬éƒ½æ˜¯æ­£å¸¸çš„ï¼Œå¯èƒ½æœ‰éå¸¸å°‘é‡çš„è®­ç»ƒæ ·æœ¬æ˜¯å¼‚å¸¸çš„ã€‚\n Case 1: With Classifier\næˆ‘ä»¬æ¥çœ‹çœ‹æƒ…å†µä¸€ï¼Œå°±æ˜¯è®­ç»ƒæ ·æœ¬æœ‰labelçš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥trainå‡ºä¸€ä¸ªåˆå§‹çš„modelã€‚ä¸¾çš„æ —å­æ˜¯æ£€æµ‹è¾“å…¥æ˜¯ä¸æ˜¯è¾›æ™®æ£®å®¶æ—çš„äººç‰©ã€‚\n\n\næˆ‘ä»¬ç°åœ¨æ”¶é›†çš„è¾›æ™®æ£®å®¶åº­çš„äººç‰©éƒ½å…·æœ‰æ ‡æ³¨ï¼ˆéœ¸å­ï¼Œä¸½èï¼Œè·é©¬ï¼Œç¾æï¼‰ï¼Œæœ‰äº†è¿™äº›è®­ç»ƒèµ„æ–™ä»¥åå°±å¯ä»¥è®­ç»ƒå‡ºä¸€ä¸ªè¾›æ™®æ£®å®¶åº­æˆå‘˜çš„åˆ†ç±»å™¨ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»™åˆ†ç±»å™¨çœ‹ä¸€å¼ ç…§ç‰‡ï¼Œå®ƒå°±å¯ä»¥åˆ¤æ–­è¿™ä¸ªç…§ç‰‡ä¸­çš„äººç‰©æ˜¯è¾›æ™®æ£®å®¶åº­é‡Œé¢çš„å“ªä¸ªäººç‰©ã€‚\n\nè¿™ä¸ªæ•°æ®é›†æ¥è‡ªkaggleä¸Šä¸€ä¸ªéå¸¸å–œæ¬¢è¾›æ™®æ£®å®¶åº­çš„äººï¼Œå®ƒcollectå¹¶ä¸”labeläº†æ•°åƒå¼ æ•°æ®ï¼Œä»¥ä¸‹æ˜¯å‚è€ƒé“¾æ¥\n\nSource of model: https://www.kaggle.com/alexattia/the-simpsons-characters-dataset/\n\nç„¶åï¼Œè¿™ä¸ªäººè®­ç»ƒå‡ºä¸€ä¸ªåˆ†ç±»å™¨ï¼Œç„¶åç”¨è¿™ä¸ªåˆ†ç±»å™¨åšäº†æµ‹è¯•ï¼Œç»“æœæœ‰ç™¾åˆ†ä¹‹ä¹åå…­çš„æ­£ç¡®ç‡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nç°åœ¨æˆ‘ä»¬æƒ³åšçš„äº‹æƒ…æ˜¯åŸºäºè¿™ä¸ªåˆ†ç±»å™¨æ¥è¿›è¡Œå¼‚å¸¸æ£€æµ‹ï¼Œåˆ¤æ–­è¾“å…¥çš„äººç‰©æ˜¯å¦æ¥è‡ªè¾›æ™®æ£®å®¶åº­ã€‚\n Confidence score\næˆ‘ä»¬åŸæœ¬æ˜¯ä½¿ç”¨åˆ†ç±»å™¨æ¥è¿›è¡Œåˆ†ç±»ï¼Œç°åœ¨å¸Œæœ›åˆ†ç±»å™¨ä¸ä»…å¯ä»¥æ¥è‡ªåˆ†ç±»ï¼Œè¿˜ä¼šè¾“å‡ºä¸€ä¸ªæ•°å€¼ï¼Œè¿™ä¸ªæ•°å€¼ä»£è¡¨ä¿¡å¿ƒåˆ†æ•°ï¼ˆConfidence score ï¼‰ï¼Œç„¶åæ ¹æ®è¿™ä¸ªä¿¡å¿ƒåˆ†æ•°åšå¼‚å¸¸æ£€æµ‹ã€‚\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªé˜ˆå€¼ Î»\\lambdaÎ» ï¼Œè‹¥ä¿¡å¿ƒåˆ†æ•°å¤§äº Î»\\lambdaÎ» å°±è¯´æ˜æ˜¯æ¥è‡ªäºè¾›æ™®æ£®å®¶åº­ã€‚è‹¥ä¿¡å¿ƒåˆ†æ•°å°äº Î»\\lambdaÎ» å°±è¯´æ˜ä¸æ˜¯æ¥è‡ªäºè¾›æ™®æ£®å®¶åº­.\né‚£é—®é¢˜å°±æ¥äº†ï¼Œå¦‚ä½•è®¡ç®—è¿™ä¸ªconfidence scoreå‘¢ï¼Ÿæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªä¿¡å¿ƒåˆ†æ•°åº”è¯¥æœ‰è¿™æ ·çš„èƒ½åŠ›ï¼Œå½“æˆ‘ä»¬å°†å›¾ç‰‡è¾“å…¥è¾›æ™®æ£®å®¶åº­çš„åˆ†ç±»å™¨ä¸­ï¼Œè‹¥åˆ†ç±»å™¨éå¸¸çš„è‚¯å®šè¿™ä¸ªå›¾ç‰‡åˆ°åº•æ˜¯è°ï¼Œè¾“å‡ºçš„ä¿¡å¿ƒåˆ†æ•°å°±ä¼šéå¸¸çš„é«˜ï¼Œåä¹‹åˆ™ä½ã€‚\néœ€è¦å†æä¸€å˜´çš„æ˜¯ï¼Œå½“æˆ‘ä»¬å°†å›¾ç‰‡è¾“å…¥åˆ†ç±»å™¨æ—¶ï¼Œåˆ†ç±»å™¨çš„è¾“å‡ºæ˜¯ä¸€ä¸ªå‡ ç‡åˆ†å¸ƒï¼ˆdistributionï¼‰ï¼Œæ˜¯è¿™å¼ å›¾ç‰‡å±äºå„ä¸ªç±»åˆ«çš„å¯èƒ½æ€§çš„å¾—åˆ†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nä»ä¸Šå›¾ç›´è§‚çš„è§‚å¯Ÿæ¥çœ‹ï¼Œå½“åˆ†ç±»å™¨éå¸¸ç¡®å®šä¸€ä¸ªè¾“å…¥çš„ç±»åˆ«çš„æ—¶å€™ï¼Œå®ƒä¼šç»™å‡ºå¾ˆé›†ä¸­çš„å¾—åˆ†ï¼Œåä¹‹åˆ™æ˜¯åˆ†æ•£çš„ã€‚\nåˆšæ‰è®²çš„éƒ½æ˜¯å®šæ€§çš„åˆ†æï¼Œç°åœ¨éœ€è¦å°†å®šæ€§åˆ†æçš„ç»“æœåŒ–ä¸ºä¿¡å¿ƒåˆ†æ•°ã€‚ä¸€ä¸ªéå¸¸ç›´è§‰çš„æ–¹æ³•å°±æ˜¯å°†åˆ†ç±»å™¨è¾“å‡ºçš„åˆ†å¸ƒä¸­æœ€é«˜æ•°å€¼ä½œä¸ºä¿¡å¿ƒåˆ†æ•°ï¼Œæ‰€ä»¥ä¸Šé¢é‚£å¼ å›¾è¾“å‡ºçš„ä¿¡å¿ƒåˆ†æ•°ä¸º0.97ï¼ˆéœ¸å­ï¼‰ï¼Œä¸‹é¢é‚£å¼ å›¾è¾“å‡ºçš„ä¿¡å¿ƒåˆ†æ•°ä¸º0.26ï¼ˆå‡‰å®«æ˜¥æ—¥ï¼‰ã€‚ï¼ˆè¿™ä¸ªæ–¹æ³•å°±æ˜¯åé¢æˆ‘ä»¬åšå®éªŒç”¨çš„æ–¹æ³•ï¼‰å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\næ ¹æ®ä¿¡å¿ƒåˆ†æ•°æ¥è¿›è¡Œå¼‚å¸¸æ£€æµ‹ä¸æ˜¯å”¯ä¸€çš„æ–¹æ³•ï¼Œå› ä¸ºåˆ†ç±»å™¨è¾“å‡ºçš„æ˜¯distributionï¼Œé‚£ä¹ˆå°±å¯ä»¥è®¡ç®—äº¤å‰ç†µï¼ˆcross entropyï¼‰ã€‚äº¤å‰ç†µè¶Šå¤§å°±ä»£è¡¨è¾“å‡ºè¶Šå¹³å‡ï¼Œä»£è¡¨æœºå™¨æ²¡æœ‰åŠæ³•å»è‚¯å®šè¾“å‡ºçš„å›¾ç‰‡æ˜¯å“ªä¸ªç±»åˆ«ï¼Œè¡¨ç¤ºè¾“å‡ºçš„ä¿¡å¿ƒåˆ†æ•°æ˜¯æ¯”è¾ƒä½ã€‚æ€»ä¹‹æˆ‘ä»¬æœ‰ä¸åŒçš„æ–¹æ³•æ ¹æ®åˆ†ç±»å™¨å†³å®šå®ƒçš„ä¿¡å¿ƒåˆ†æ•°.\né‚£æˆ‘ä»¬å®é™…æ¥åšä¸€ä¸‹ï¼Œå°±ç”¨åˆ†å¸ƒä¸­æœ€é«˜æ•°å€¼ä½œä¸ºä¿¡å¿ƒåˆ†æ•°çš„æ–¹æ³•ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\nç°åœ¨æˆ‘è¾“å…¥ä¸€å¼ è®­ç»ƒèµ„æ–™æ²¡æœ‰çš„å›¾ç‰‡ï¼ˆè·é©¬ï¼‰ï¼Œåˆ†ç±»å™¨è¾“å‡ºè·é©¬çš„ä¿¡å¿ƒåˆ†æ•°æ˜¯1.00ï¼›è¾“å…¥éœ¸å­çš„å›¾ç‰‡ï¼Œåˆ†ç±»å™¨è¾“å‡ºéœ¸å­çš„ä¿¡å¿ƒåˆ†æ•°ä¸º0.81ï¼Œè¾“å‡ºéƒ­è‘£çš„ä¿¡å¿ƒåˆ†æ•°ä¸º0.12ï¼›è¾“å…¥ä¸‰ç–çš„å›¾ç‰‡å’Œæè€å¸ˆçš„å›¾ç‰‡ç»“æœå°±æ˜¯ç›¸å¯¹å¾ˆåˆ†æ•£çš„ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå¦‚æœè¾“å…¥çš„æ˜¯è¾›æ™®æ£®å®¶åº­çš„äººç‰©ï¼Œåˆ†ç±»å™¨è¾“å‡ºæ¯”è¾ƒé«˜ä¿¡å¿ƒåˆ†æ•°ã€‚å¦‚æœè¾“å…¥ä¸æ˜¯è¾›æ™®æ£®å®¶åº­çš„äººç‰©ï¼Œåˆ†ç±»å™¨è¾“å‡ºçš„ä¿¡å¿ƒåˆ†æ•°æ˜¯æ¯”è¾ƒä½ã€‚ä½†æ˜¯è¾“å…¥å‡‰å®«æ˜¥æ—¥çš„å›¾ç‰‡ï¼Œåˆ†ç±»å™¨è¾“å‡ºæŸ¯é˜¿ä¸‰çš„ä¿¡å¿ƒåˆ†æ•°ä¸º0.99ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•è¿˜æ˜¯æœ‰æœ‰ä¸€äº›ç‘•ç–µçš„ã€‚\næ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹ä¸åŒçš„æ•°æ®é›†ä½¿ç”¨è¿™ç§æ–¹æ³•çš„ç»Ÿè®¡ç»“æœï¼š\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°çœŸæ­£çš„æ¥è‡ªè¾›æ™®æ£®å®¶åº­çš„äººç‰©çš„ä¿¡å¿ƒåˆ†æ•°éƒ½é›†ä¸­åœ¨1.0é™„è¿‘ï¼Œä½ ä»”ç»†çœ‹ä¸Šé¢çš„å›¾æ ‡ä¸­æœ‰ä¸€äº›çº¢è‰²çš„æ•°æ®ï¼ˆåˆ†ç±»é”™è¯¯ï¼‰æ¯”è¾ƒåˆ†æ•£çš„åˆ†å¸ƒåœ¨åæ ‡è½´ä¸Šï¼Œæ‰€ä»¥è¯´åˆ†ç±»é”™è¯¯çš„æ•°æ®ä¼šå¾—åˆ°æ¯”è¾ƒä½çš„ä¿¡å¿ƒåˆ†æ•°ï¼Œè¿™ä¸ªæ–¹æ³•è¿˜æ˜¯æœ‰ä¸€ç‚¹ç‘•ç–µçš„ã€‚\nè€Œéè¾›æ™®æ£®å®¶åº­çš„åŠ¨æ¼«äººç‰©çš„åˆ†å¸ƒæ¯”è¾ƒåˆ†æ•£ï¼Œ90%çš„æ•°æ®éƒ½æ˜¯ä¿¡å¿ƒåˆ†æ•°æ¯”è¾ƒä½çš„ï¼Œåˆ†æ•£åœ¨åæ ‡è½´ä¸Šï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰10%çš„æ•°æ®ä¿¡å¿ƒåˆ†æ•°åˆ†å¸ƒåœ¨1.0é™„è¿‘ã€‚è¿™10%æ ·æœ¬ä¸æ˜¯è¾›æ™®æ£®å®¶åº­çš„äººç‰©ï¼Œä½†ç»™äº†æ¯”è¾ƒé«˜çš„åˆ†æ•°ï¼Œä¹Ÿè¯´æ˜è¿™ä¸ªæ–¹æ³•æ˜¯æœ‰ç‘•ç–µçš„ã€‚\næ€»çš„æ¥è¯´ï¼Œå¦‚æœä½ è¦åšå¼‚å¸¸æ£€æµ‹çš„é—®é¢˜ï¼Œåœ¨ä½ æ‰‹ä¸Šæœ‰ä¸€ä¸ªåˆ†ç±»å™¨æˆ–è€…è¯´èƒ½trainå‡ºä¸€ä¸ªåˆ†ç±»å™¨çš„æƒ…å†µä¸‹ï¼Œè¿™åº”è¯¥æ˜¯ä½ ç¬¬ä¸€ä¸ªè¦å°è¯•çš„baselineã€‚è™½ç„¶å¾ˆç®€å•ï¼Œä½†å®é™…ä¸Šä¸è§å¾—ç»“æœè¡¨ç°ä¼šå¾ˆå·®ã€‚\n Outlook: Network for Confidence Estimation\n\n\nTerrance DeVries, Graham W. Taylor, Learning Confidence for Out-of-Distribution Detection in Neural Networks, arXiv, 2018\n\nä½ è®­ç»ƒä¸€ä¸ªneuron networkæ—¶ï¼Œå¯ä»¥ç›´æ¥è®©neuron networkè¾“å‡ºä¿¡å¿ƒåˆ†æ•°ï¼Œè¿™ä¸ªé—®é¢˜æˆ‘å…ˆä¸ç»†èŠ‚ï¼Œåœ¨è¿™é‡Œæˆ‘å…ˆå¼•ç”¨ä¸€ä¸ªæ–‡çŒ®ï¼ˆ2018å¹´çš„paperï¼‰æ˜¯æœ‰è¿™æ ·çš„æŠ€æœ¯çš„ã€‚\n More Detail\næ¥ä¸‹æ¥æˆ‘ä»¬è¦è®²ä¸€ä¸‹å…³äºä¸Šè¿°åœ¨æœ‰åˆ†ç±»æ¨¡å‹çš„æƒ…å†µä¸‹æ ¹æ®ä¿¡å¿ƒåˆ†æ•°è¿›è¡Œå¼‚å¸¸æ£€æµ‹çš„å…·ä½“ç»†èŠ‚ï¼ŒåŒ…æ‹¬thresholdï¼ˆé˜ˆå€¼ï¼‰å¦‚ä½•å®šï¼Œå¦‚ä½•åˆ¤æ–­å¼‚å¸¸åˆ¤æ–­ç»“æœçš„å¥½åç­‰é—®é¢˜ã€‚\né¦–å…ˆæˆ‘ä»¬å…ˆæ¥å¤ä¹ ä¸€ä¸‹model frameworkï¼š\n\næˆ‘ä»¬æœ‰å¤§é‡çš„è®­ç»ƒèµ„æ–™ï¼Œä¸”è®­ç»ƒèµ„æ–™å…·æœ‰æ ‡æ³¨ï¼ˆè¾›æ™®æ£®å®¶åº­çš„äººç‰©ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è®­ç»ƒä¸€ä¸ªåˆ†ç±»å™¨ã€‚ä¸ç®¡ä½ ç”¨ä»€ä¹ˆç®—æ³•ï¼Œç›®æ ‡æ˜¯å¯ä»¥ä»åˆ†ç±»å™¨ä¸­å¾—åˆ°å¯¹åº”å›¾ç‰‡çš„ä¿¡å¿ƒåˆ†æ•°ã€‚ç„¶åå°±æ ¹æ®ä¿¡å¿ƒåˆ†æ•°å»ºç«‹å¼‚å¸¸æ£€æµ‹çš„ç³»ç»Ÿï¼Œè‹¥ä¿¡å¿ƒåˆ†æ•°é«˜äºæŸä¸ªthresholdï¼ˆé˜€å€¼ï¼‰æ—¶å°±è®¤ä¸ºæ˜¯æ­£å¸¸ï¼Œè‹¥ä½äºæŸä¸ªthreshold æ—¶å°±è®¤ä¸ºæ˜¯å¼‚å¸¸ã€‚\nDev Set(development set):\n\nç”¨äºè®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒæŒ‡å¯¼è°ƒæ•´è¶…å‚æ•°çš„æ ·æœ¬é›†ï¼Œä½¿ç”¨èµ·æ¥ç±»ä¼¼äºæµ‹è¯•é›†ï¼›\nä»¥å‰æœºå™¨å­¦ä¹ æ•°æ®é‡å°‘ï¼Œè¶…å‚æ•°å°‘çš„æ—¶å€™å¯èƒ½æ˜¯æ²¡æœ‰è¿™ä¸ªæ ·æœ¬é›†çš„ï¼Œåªæœ‰è®­ç»ƒé›†ï¼ˆtrain setï¼‰å’Œæµ‹è¯•é›†ï¼ˆtest setï¼‰ã€‚è¿™æ—¶æµ‹è¯•é›†ä½œä¸ºéªŒè¯é›†ä½¿ç”¨ï¼›\nç°åœ¨æ•°æ®é‡å¤šäº†ï¼Œå¯ä»¥å•ç‹¬åˆ†å‡ºä¸€éƒ¨åˆ†æ ·æœ¬ä½œä¸ºdev setï¼Œç”¨äºè¶…å‚æ•°è°ƒä¼˜ï¼Œæ¨¡å‹ç»è¿‡è®­ç»ƒé›†è®­ç»ƒï¼Œå’ŒéªŒè¯é›†è°ƒä¼˜ï¼Œç„¶åäº¤ç»™æµ‹è¯•é›†æµ‹è¯•æ€§èƒ½ï¼›\nä½œè€…ï¼šçŒ›è™ç¥å¨å‡¯è’‚çŒ«\nRefï¼šhttps://www.zhihu.com/question/53052465/answer/281962767\næ¥æºï¼šçŸ¥ä¹\n\nåœ¨ç°åœ¨è¿™ä¸ªå¼‚å¸¸æ¢æµ‹ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬éœ€è¦çš„development set éœ€è¦åŒ…å«å¤§é‡çš„imagesï¼Œè¿™äº›imageséœ€è¦è¢«æ ‡æ³¨ä¸Šæ˜¯å¦æ˜¯æ¥è‡ªè¾›æ™®æ£®å®¶åº­çš„äººç‰©ã€‚å¦å¤–ï¼Œéœ€è¦å¼ºè°ƒçš„æ˜¯åœ¨è®­ç»ƒæ—¶æ‰€æœ‰çš„æ ·æœ¬æ•°æ®éƒ½æ˜¯æ¥è‡ªè¾›æ™®æ£®å®¶åº­çš„äººç‰©ï¼Œæ ‡ç­¾æ˜¯è¾›æ™®æ£®å®¶åº­çš„å“ªä¸ªäººç‰©ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬åœ¨åšDev Set æ—¶éœ€è¦æ¨¡æ‹Ÿæµ‹è¯•æ•°æ®é›†ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™é‡Œé¢è¿˜éœ€è¦åŒ…å«éè¾›æ™®æ£®å®¶åº­çš„äººç‰©çš„å›¾ç‰‡ã€‚\næœ‰äº†Dev Set ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæˆ‘ä»¬å¼‚å¸¸æ¢æµ‹ç³»ç»Ÿåº”ç”¨åœ¨Dev Set ï¼Œç„¶åè®¡ç®—å¼‚å¸¸æ¢æµ‹ç³»ç»Ÿåœ¨Dev Setä¸Šçš„å¾—åˆ†æ˜¯å¤šå°‘ã€‚ç­‰ä¸‹ä¼šè¯´æ˜è¿™ä¸ªå¾—åˆ†å¦‚ä½•è®¡ç®—ã€‚ä½ èƒ½å¤Ÿåœ¨Dev Set è¡¡é‡ä¸€ä¸ªå¼‚å¸¸æ¢æµ‹ç³»ç»Ÿçš„è¡¨ç°ä»¥åï¼Œä½ å°±å¯ä»¥æ‹¿æ¥è°ƒæ•´thresholdï¼Œä»¥æ‰¾å‡ºè®©æœ€å¥½çš„threshold ã€‚\nå†³å®šhyperparametersï¼ˆè¶…å‚ï¼‰ä»¥åï¼Œå°±æœ‰äº†ä¸€ä¸ªå¼‚å¸¸æ¢æµ‹çš„ç³»ç»Ÿï¼Œä½ å°±å¯ä»¥è®©å®ƒä¸Šçº¿ã€‚è¾“å…¥ä¸€å¼ å›¾ç‰‡ï¼Œç³»ç»Ÿå°±ä¼šå†³å®šæ˜¯ä¸æ˜¯è¾›æ™®æ£®å®¶åº­çš„äººç‰©ã€‚æ•´ä¸ªAnomaly Detection System æ„å»ºå°±ç»“æŸäº†ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜é—ç•™äº†ä¸€ä¸ªé—®é¢˜ï¼š\nå¦‚ä½•è®¡ç®—ä¸€ä¸ªå¼‚å¸¸ä¾¦æµ‹ç³»ç»Ÿçš„æ€§èƒ½å¥½åï¼Ÿ\n\nä¸Šå›¾æ˜¯100å¼ è¾›æ™®æ£®å®¶åº­äººç‰©çš„å›¾ç‰‡ï¼ˆè“è‰²ï¼‰å’Œ5å¼ ä¸æ˜¯è¾›æ™®æ£®å®¶åº­äººç‰©çš„å›¾ç‰‡ï¼ˆçº¢è‰²ï¼‰è¾“å…¥åˆ°Anomaly Detection ä¸­å¾—åˆ°çš„Confidence Scoreã€‚ä½ ä¼šå‘ç°ä¸Šå›¾å·¦ä¾§æœ‰ä¸€ä¸ªè¾›æ™®æ£®å®¶åº­çš„å›¾ç‰‡çš„ä¿¡å¿ƒåˆ†æ•°ç«Ÿç„¶æ˜¯éå¸¸ä½çš„ï¼Œåœ¨è¿™é‡Œå¼‚å¸¸æ¢æµ‹ç³»ç»ŸçŠ¯äº†ä¸€ä¸ªé”™è¯¯ï¼Œè®¤ä¸ºå®ƒä¸æ˜¯è¾›æ™®æ£®å®¶åº­çš„äººç‰©ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œäº”å¼ éè¾›æ™®æ£®å®¶åº­äººç‰©çš„å›¾ç‰‡çš„ä¿¡å¿ƒå¾—åˆ†å…¶å®è¿˜æŒºé«˜çš„ï¼Œå°¤å…¶æ˜¯é­”æ³•å°‘å¥³ï¼ˆ0.998ï¼‰ã€‚åœ¨å®è·µçš„æ—¶å€™ï¼Œå¾ˆå¤šäººéƒ½å‘ç°è¿™äº›å¼‚å¸¸å›¾ç‰‡ä¼šå¾—åˆ°å¾ˆé«˜çš„åˆ†æ•°ï¼Œå…¶å®è¿™ä¸æ˜¯ç‰¹åˆ«å¤§çš„é˜»ç¢ï¼Œå› ä¸ºçœŸæ­£æ˜¯è¾›æ™®æ£®å®¶åº­çš„äººç‰©çš„ä¿¡å¿ƒåˆ†æ•°ä¼šéå¸¸é›†ä¸­åˆ°1.0ï¼Œåªè¦å¼‚å¸¸å›¾ç‰‡æ²¡æœ‰æ­£å¸¸å›¾ç‰‡çš„ä¿¡å¿ƒåˆ†æ•°é‚£~ä¹ˆ~é«˜~ï¼Œå°±è¿˜æ˜¯å¯ä»¥å¾—åˆ°æ¯”è¾ƒå¥½çš„å¼‚å¸¸æ¢æµ‹æ•ˆæœçš„ã€‚\n\næˆ‘ä»¬æ€ä¹ˆæ¥è¯„ä¼°ä¸€ä¸ªå¼‚å¸¸æ£€æµ‹ç³»ç»Ÿçš„å¥½åå‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“å¼‚å¸¸æ£€æµ‹å…¶å®æ˜¯ä¸€ä¸ªäºŒå…ƒåˆ†ç±»ï¼ˆbinary classificationï¼‰çš„é—®é¢˜ã€‚åœ¨äºŒå…ƒåˆ†ç±»ä¸­æˆ‘ä»¬éƒ½æ˜¯ç”¨æ­£ç¡®ç‡æ¥è¡¡é‡ä¸€ä¸ªç³»ç»Ÿçš„å¥½åï¼Œä½†æ˜¯åœ¨å¼‚å¸¸æ£€æµ‹ä¸­æ­£ç¡®ç‡å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„è¯„ä¼°ç³»ç»Ÿçš„æŒ‡æ ‡ã€‚ä½ å¯èƒ½ä¼šå‘ç°ä¸€ä¸ªç³»ç»Ÿå¾ˆå¯èƒ½æœ‰å¾ˆé«˜çš„æ­£ç¡®ç‡ï¼Œä½†å…¶å®è¿™ä¸ªç³»ç»Ÿä»€ä¹ˆäº‹éƒ½æ²¡æœ‰åšã€‚ä¸ºä»€ä¹ˆè¿™æ ·å‘¢ï¼Ÿå› ä¸ºåœ¨å¼‚å¸¸æ£€æµ‹çš„é—®é¢˜ä¸­æ­£å¸¸çš„æ•°æ®å’Œå¼‚å¸¸çš„æ•°æ®ä¹‹é—´çš„æ¯”ä¾‹æ˜¯éå¸¸æ‚¬æ®Šçš„ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†æ­£å¸¸çš„å›¾ç‰‡æœ‰ä¸€ç™¾å¼ ï¼Œå¼‚å¸¸çš„å›¾ç‰‡æœ‰äº”å¼ ã€‚è¿™ä¼šé€ æˆåªç”¨å‡†ç¡®ç‡è¡¡é‡ç³»ç»Ÿçš„å¥½åä¼šå¾—åˆ°éå¸¸å¥‡æ€ªçš„ç»“æœçš„ã€‚\nä¸¾ä¸ªæ —å­ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†threshold Î»Î»Î» è®¾ä¸º0.3å’Œ0.5ã€‚ Î»Î»Î» ä»¥ä¸Šè®¤ä¸ºæ˜¯æ­£å¸¸çš„ï¼Œ Î»Î»Î» ä»¥ä¸‹è®¤ä¸ºæ˜¯å¼‚å¸¸çš„ã€‚è¿™æ—¶ä½ ä¼šå‘ç°è¿™ä¸ªç³»ç»Ÿçš„æ­£ç¡®ç‡éƒ½æ˜¯95.2%ï¼Œæ‰€ä»¥å¼‚å¸¸ä¾¦æµ‹é—®é¢˜ä¸­ä¸ä¼šç”¨æ­£ç¡®ç‡æ¥ç›´æ¥å½“åšè¯„ä¼°æŒ‡æ ‡ã€‚\né¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“åœ¨å¼‚å¸¸æ£€æµ‹ä¸­æœ‰ä¸¤ç§é”™è¯¯ï¼šä¸€ç§é”™è¯¯æ˜¯å¼‚å¸¸çš„æ•°æ®è¢«åˆ¤æ–­ä¸ºæ­£å¸¸çš„æ•°æ®ï¼Œå¦å¤–ä¸€ç§æ˜¯æ­£å¸¸çš„æ•°æ®è¢«åˆ¤ä¸ºå¼‚å¸¸çš„æ•°æ®ã€‚å‡è®¾æˆ‘ä»¬å°† Î»Î»Î» è®¾ä¸º0.5ï¼ˆ0.5ä»¥ä¸Šè®¤ä¸ºæ˜¯æ­£å¸¸çš„æ•°æ®ï¼Œ0.5ä»¥ä¸‹è®¤ä¸ºæ˜¯å¼‚å¸¸çš„æ•°æ®ï¼‰ï¼Œè¿™æ—¶å°±å¯ä»¥è®¡ç®—æœºå™¨åœ¨è¿™ä¸¤ç§é”™è¯¯ä¸Šåˆ†åˆ«èŒƒäº†å¤šå°‘é”™è¯¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœºå™¨åˆ¤æ–­å‡ºç°äº†ä¸¤ç±»é”™è¯¯ï¼Œmissäº†4ä¸ªanomaly dataï¼Œfalse alarmäº†1ä¸ªnormal data ã€‚\n\nè‹¥æˆ‘ä»¬å°†threshold åˆ‡åœ¨æ¯”0.8ç¨é«˜çš„éƒ¨åˆ†ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¿™æ—¶ä¼šå‘ç°åœ¨äº”å¼ å¼‚å¸¸çš„å›¾ç‰‡ä¸­ï¼Œå…¶ä¸­æœ‰ä¸¤å¼ è®¤ä¸ºæ˜¯å¼‚å¸¸çš„å›¾ç‰‡ï¼Œå…¶ä½™ä¸‰ç§è¢«åˆ¤æ–­ä¸ºæ­£å¸¸çš„å›¾ç‰‡ï¼›åœ¨ä¸€ç™¾å¼ æ­£ç¡®çš„å›¾ç‰‡ä¸­ï¼Œå…¶ä¸­æœ‰å…­å¼ å›¾ç‰‡è¢«è®¤ä¸ºæ˜¯å¼‚å¸¸çš„å›¾ç‰‡ï¼Œå…¶ä½™ä¹åå››å¼ å›¾ç‰‡è¢«åˆ¤æ–­ä¸ºæ­£å¸¸çš„å›¾ç‰‡ã€‚\né‚£ä¸€ä¸ªç³»ç»Ÿæ¯”è¾ƒå¥½å‘¢ï¼Ÿå…¶å®ä½ æ˜¯å¾ˆéš¾å›ç­”è¿™ä¸ªé—®é¢˜ã€‚æœ‰äººå¯èƒ½ä¼šå¾ˆç›´è§‰çš„è®¤ä¸ºï¼šå½“é˜€å€¼ä¸º0.5æ—¶æœ‰äº”ä¸ªé”™è¯¯ï¼Œé˜€å€¼ä¸º0.8æ—¶æœ‰ä¹ä¸ªé”™è¯¯ï¼Œæ‰€ä»¥è®¤ä¸ºå·¦è¾¹çš„ç³»ç»Ÿå¥½ï¼Œå³è¾¹çš„ç³»ç»Ÿå·®ã€‚ä½†å…¶å®ä¸€ä¸ªç³»ç»Ÿæ˜¯å¥½è¿˜æ˜¯åï¼Œå–å†³ä½ è§‰å¾—false alarmæ¯”è¾ƒä¸¥é‡è¿˜æ˜¯missingæ¯”è¾ƒä¸¥é‡ã€‚\n\næ‰€ä»¥ä½ åœ¨åšå¼‚å¸¸æ¢æµ‹æ—¶ï¼Œå¯èƒ½éœ€è¦æœ‰Cost Table å‘Šè¯‰ä½ æ¯ä¸€ç§é”™è¯¯æœ‰å¤šå¤§çš„Cost ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºæˆ‘ä»¬å°†ä¸¤ä¸ªCost Table åˆ†åˆ«è®¡ç®—ä¸€ä¸‹threshold Î»Î»Î» ä¸º0.5å’Œ0.8çš„ä¸¤ä¸ªç³»ç»Ÿçš„cost ï¼Œå‘ç°å–ä¸åŒçš„çš„cost è¡¡é‡æ ‡å‡†ï¼Œå°±ä¼šæœ‰ä¸åŒçš„åˆ¤å®šç»“æœã€‚\nä¸ºä»€ä¹ˆè¦è¿™æ ·å‘¢ï¼Œä¸¾ä¸€ä¸ªå½¢è±¡ä¸€ç‚¹çš„æ —å­ï¼Œå¦‚æœè¯´ä½ ä»Šå¤©è¦åšç™Œç—‡æ£€æµ‹çš„å¼‚å¸¸æ£€æµ‹ï¼Œä¸è¯¯åˆ¤æ¯”èµ·æ¥ï¼Œæˆ‘ä»¬æ˜¾ç„¶æ›´åŠ ä¸èƒ½å®¹å¿missingï¼Œå¦‚æœä¸€ä¸ªå…¶å®æœ‰ç™Œç—‡çš„äººè¢«ç³»ç»Ÿmiss äº†ï¼Œè€½è¯¯äº†æœ€ä½³æ²»ç–—æ—¶é—´ï¼Œå°±æ˜¯ç”Ÿå‘½çš„ä»£ä»·ã€‚\nå…¶å®è¿˜æœ‰å¾ˆå¤šè¡¡é‡å¼‚å¸¸æ£€æµ‹ç³»ç»Ÿçš„æŒ‡æ ‡ï¼Œè¿™é‡Œå°±ä¸ç»†è®²è¿™äº›ï¼Œæœ‰ä¸€ä¸ªå¸¸ç”¨çš„æŒ‡æ ‡ä¸ºArea under ROC curveã€‚è‹¥ä½¿ç”¨è¿™ç§è¡¡é‡çš„æ–¹å¼ï¼Œä½ å°±ä¸éœ€è¦å†³å®šthreshold ï¼Œè€Œæ˜¯çœ‹ä½ å°†æµ‹è¯•é›†çš„ç»“æœåšä¸€ä¸ªæ’åºï¼ˆé«˜åˆ†è‡³ä½åˆ†ï¼‰ï¼Œæ ¹æ®è¿™ä¸ªæ’åºæ¥å†³å®šè¿™ä¸ªç³»ç»Ÿå¥½è¿˜æ˜¯ä¸å¥½ã€‚\n Possible Issue\n\nå¦‚æœæˆ‘ä»¬ç›´æ¥ç”¨ä¸€ä¸ªåˆ†ç±»å™¨æ¥æ£€æµ‹è¾“å…¥çš„æ•°æ®æ˜¯ä¸æ˜¯å¼‚å¸¸çš„ï¼Œå½“ç„¶è¿™å¹¶ä¸æ˜¯ä¸€ç§å¾ˆå¼±çš„æ–¹æ³•ï¼Œä½†æ˜¯æœ‰æ—¶å€™æ— æ³•ç»™ä½ ä¸€ä¸ªperfect çš„ç»“æœï¼Œæˆ‘ä»¬ç”¨ä¸Šå›¾æ¥è¯´æ˜ç”¨classifier åšå¼‚å¸¸ä¾¦æµ‹æ—¶æœ‰å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜ã€‚å‡è®¾ç°åœ¨åšä¸€ä¸ªçŒ«å’Œç‹—çš„åˆ†ç±»å™¨ï¼Œå°†å±äºçŒ«ğŸ±çš„ä¸€ç±»æ”¾åœ¨ä¸€è¾¹ï¼Œå±äºç‹—ğŸ•çš„ä¸€ç±»æ”¾åœ¨ä¸€è¾¹ã€‚è‹¥è¾“å…¥ä¸€ç¬”èµ„æ–™å³æ²¡æœ‰çŒ«çš„ç‰¹å¾ä¹Ÿæ²¡æœ‰ç‹—çš„ç‰¹å¾ï¼ˆè‰æ³¥é©¬ï¼Œé©¬è±è²˜ï¼‰ï¼Œæœºå™¨ä¸çŸ¥é“è¯¥æ”¾åœ¨å“ªä¸€è¾¹ï¼Œå°±å¯èƒ½æ”¾åœ¨è¿™ä¸ªboundaryä¸Šï¼Œå¾—åˆ°çš„ä¿¡æ¯åˆ†æ•°å°±æ¯”è¾ƒä½ï¼Œä½ å°±çŸ¥é“è¿™äº›èµ„æ–™æ˜¯å¼‚å¸¸çš„ã€‚\nä½ æœ‰å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„çŠ¶å†µï¼šæœ‰äº›èµ„æ–™ä¼šæ¯”çŒ«æ›´åƒçŒ«ï¼ˆè€è™ï¼‰ï¼Œæ¯”ç‹—è¿˜åƒç‹—ï¼ˆç‹¼ï¼‰ã€‚æœºå™¨åœ¨åˆ¤æ–­çŒ«å’Œç‹—æ—¶æ˜¯æŠ“ä¸€äº›çŒ«çš„ç‰¹å¾è·Ÿç‹—çš„ç‰¹å¾ï¼Œä¹Ÿè®¸è€è™åœ¨çŒ«çš„ç‰¹å¾ä¸Šä¼šæ›´å¼ºçƒˆï¼Œç‹¼åœ¨ç‹—çš„ç‰¹å¾ä¸Šä¼šæ›´å¼ºçƒˆã€‚å¯¹äºæœºå™¨æ¥è¯´è™½ç„¶æœ‰äº›èµ„æ–™åœ¨è®­ç»ƒæ—¶æ²¡æœ‰çœ‹è¿‡ï¼ˆå¼‚å¸¸ï¼‰ï¼Œä½†æ˜¯å®ƒæœ‰éå¸¸å¼ºçš„ç‰¹å¾ä¼šç»™åˆ†ç±»å™¨å¾ˆå¤§çš„ä¿¡å¿ƒçœ‹åˆ°æŸä¸€ç§ç±»åˆ«ã€‚\n\nå†æ¯”å¦‚ï¼Œåˆšæ‰åšè¾›æ™®æ£®å®¶åº­äººç‰©çš„å¼‚å¸¸æ£€æµ‹çš„æ—¶å€™ï¼Œé»„è‰²çš„é­”æ³•å°‘å¥³å’Œå°æ¨±éƒ½ç»™äº†æ¯”è¾ƒé«˜çš„ä¿¡å¿ƒåˆ†æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬çŒœæµ‹åˆ†ç±»å™¨æ˜¯çœ‹åˆ°é»„è‰²å°±ç»™å¾ˆé«˜çš„åˆ†æ•°ï¼Œæˆ‘ä»¬å°±æŠŠä¸‰ç–çš„è„¸å’Œå¤´å‘æ¶‚é»„ï¼Œæœç„¶åˆ†æ•°æš´å¢ï¼Œåœ¨è€å¸ˆçš„è„¸ä¸Šæ¶‚é»„ï¼Œæ•ˆæœä¹Ÿæ˜¯æ˜¾è‘—çš„ã€‚ğŸ¤£æ‰€ä»¥è¿™äº›éƒ½æ˜¯å¼‚å¸¸æ£€æµ‹çš„é—®é¢˜ã€‚\n To Learn More\n\nå½“ç„¶æœ‰äº›æ–¹æ³•å¯ä»¥è§£è¿™ä¸ªé—®é¢˜ï¼Œè¿™é‡Œåˆ—ä¸€äº›æ–‡çŒ®ç»™å¤§å®¶è¿›è¡Œå‚è€ƒã€‚\n\nKimin Lee, Honglak Lee, Kibok Lee, Jinwoo Shin, Training Confidence-calibrated Classifiers for Detecting Out-of-Distribution Samples, ICLR 2018\n\nå…¶ä¸­çš„ä¸€ä¸ªè§£å†³æ–¹æ³•æ˜¯ï¼šå‡è®¾æˆ‘ä»¬å¯ä»¥æ”¶é›†åˆ°ä¸€äº›å¼‚å¸¸çš„æ ·æœ¬ï¼Œæˆ‘ä»¬å¯ä»¥æ•™æœºå™¨çœ‹åˆ°æ­£å¸¸æ ·æœ¬æ—¶ä¸è¦åªå­¦ä¼šåˆ†ç±»è¿™ä»¶äº‹æƒ…ï¼Œè¦å­¦ä¼šä¸€è¾¹åšåˆ†ç±»ä¸€è¾¹çœ‹åˆ°æ­£å¸¸çš„èµ„æ–™ä¿¡å¿ƒåˆ†æ•°å°±é«˜ï¼Œçœ‹åˆ°å¼‚å¸¸çš„èµ„æ–™å°±è¦ç»™å‡ºä½çš„ä¿¡å¿ƒåˆ†æ•°ã€‚\n\nMark Kliger, Shachar Fleishman, Novelty Detection with GAN, arXiv, 2018\n\nä½†æ˜¯ä¼šé‡åˆ°çš„é—®é¢˜æ˜¯ï¼šå¾ˆå¤šæ—¶å€™ä¸å®¹æ˜“æ”¶é›†åˆ°å¼‚å¸¸çš„æ•°æ®ã€‚æœ‰äººå°±æƒ³å‡ºäº†ä¸€ä¸ªç¥å¥‡çš„è§£å†³æ–¹æ³•å°±æ˜¯ï¼šæ—¢ç„¶æ”¶é›†ä¸åˆ°å¼‚å¸¸çš„æ•°æ®ï¼Œé‚£æˆ‘ä»¬å°±é€šè¿‡Generative Model æ¥ç”Ÿæˆå¼‚å¸¸çš„æ•°æ®ã€‚è¿™æ ·ä½ å¯èƒ½é‡åˆ°çš„é—®é¢˜æ˜¯ï¼šç”Ÿæˆçš„æ•°æ®å¤ªåƒæ­£å¸¸çš„èµ„æ–™ï¼Œé‚£è¿™æ ·å°±ä¸æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚æ‰€ä»¥è¿˜è¦åšä¸€äº›ç‰¹åˆ«çš„constraint ï¼Œè®©ç”Ÿæˆçš„èµ„æ–™æœ‰ç‚¹åƒæ­£å¸¸çš„èµ„æ–™ï¼Œä½†æ˜¯åˆè·Ÿæ­£å¸¸çš„èµ„æ–™åˆæ²¡æœ‰å¾ˆåƒã€‚æ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•æ¥è®­ç»ƒä½ çš„classifier ã€‚\n Case 2ï¼šWithout Labels\nåœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ²¡æœ‰classifier ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ”¶é›†åˆ°çš„æ•°æ®æ²¡æœ‰label ã€‚\n Twitch Play PokÃ©mon\n\nè¿™æ˜¯ä¸€ä¸ªçœŸå®çš„Twitch Plays PokÃ©monä¾‹å­ï¼Œè¿™ä¸ªçš„ä¾‹å­æ˜¯è¿™æ ·çš„ï¼šæœ‰äººå¼€äº†ä¸€ä¸ªå®å¯æ¢¦çš„æ¸¸æˆï¼Œå…¨ä¸–ç•Œçš„äººéƒ½å¯ä»¥è¿æ¥ä¸€èµ·ç©è¿™ä¸ªå®å¯æ¢¦çš„æ¸¸æˆã€‚å³è¾¹çš„æ¡†æ˜¯æ¯ä¸€ä¸ªäººéƒ½åœ¨è¾“å…¥æŒ‡ä»¤åŒæ—¶æ“æ§è¿™ä¸ªæ¸¸æˆï¼Œè¿™ä¸ªæ¸¸æˆæœ€å¤šçºªå½•å¤§æ¦‚æœ‰å…«ä¸‡äººåŒæ—¶ç©è¿™ä¸ªæ¸¸æˆã€‚å½“å¤§å®¶éƒ½åœ¨åŒæ—¶æ“ä½œåŒä¸€ä¸ªè§’è‰²æ—¶ï¼Œç©èµ·æ¥å…¶å®æ˜¯ç›¸å½“å´©æºƒçš„ã€‚ï¼ˆPaperclip2019å¹´åšçš„è§£å¯†æ´»åŠ¨ä¸­çš„ä¸€éƒ¨åˆ†ä¼¼ä¹æ˜¯åœ¨æ¨¡ä»¿è¿™ä¸ªæ¸¸æˆæ¨¡å¼ï¼‰\nè¿™ä¸ªæ¸¸æˆæ˜¯å¤šå¹´å‰è¿›è¡Œçš„ï¼Œä¸è¿‡ç°åœ¨twitch ä¸Šå±…ç„¶è¿˜æœ‰å‡çº§ç‰ˆçš„ï¼Œç›´æ’­åœ°å€ï¼š\n\nhttps://www.twitch.tv/twitchplayspokemon\n\nä»¥ä¸‹æ˜¯æˆ‘å½•åˆ¶çš„ä¸€å°æ®µgifï¼š\n\n\näººä»¬ç©çš„æ—¶å€™å°±éå¸¸çš„å´©æºƒï¼Œå‘ç°æ ¹æœ¬ç©ä¸ä¸‹å»ï¼Œé‚£ä¹ˆå´©æºƒçš„åŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¯èƒ½æ˜¯å› ä¸ºæœ‰Trollï¼ˆç½‘ç»œå°ç™½ï¼Ÿï¼‰ã€‚è¿™äº›äººå¯èƒ½æ ¹æœ¬å°±ä¸ä¼šç©ï¼Œæ‰€ä»¥å¤§å®¶éƒ½æ²¡æœ‰åŠæ³•ç»§ç»­ç©ä¸‹å»ï¼›æˆ–è€…å¯èƒ½è§‰å¾—å¾ˆæœ‰è¶£å°±ä¹±æŒ‰æŒ‰é”®ï¼›æˆ–è€…æ˜¯ä¸çŸ¥åçš„æ¶æ„ï¼Œä¸æƒ³è®©å¤§å®¶ç»“æŸè¿™ä¸ªæ¸¸æˆï¼ˆè„šæœ¬å°å­ï¼‰ã€‚äººä»¬ç›¸ä¿¡æœ‰ä¸€äº›Troll æ½œè—åœ¨äººä»¬å½“ä¸­ï¼Œä»–ä»¬æƒ³è¦é˜»æŒ æ¸¸æˆçš„è¿›è¡Œã€‚\nå‡å®šå¤šæ•°ç©å®¶æ˜¯æƒ³è¦é€šå…³çš„ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ç”¨å¼‚å¸¸æ£€æµ‹çš„æŠ€æœ¯ï¼Œæ”¶é›†æ‰€æœ‰ç©å®¶çš„è¡Œä¸ºï¼ˆè®­ç»ƒæ•°æ®ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»å¤šæ•°ç©å®¶çš„è¡Œä¸ºçŸ¥é“æ­£å¸¸ç©å®¶çš„è¡Œä¸ºæ˜¯å’‹æ ·çš„ï¼Œç„¶åä¾¦æµ‹å‡ºå¼‚å¸¸çš„ç©å®¶ï¼ˆTrollï¼‰ã€‚\n Problem Formulation\n\næˆ‘ä»¬éœ€è¦ä¸€äº›è®­ç»ƒçš„æ ·æœ¬ï¼š {x1,x2,...,xN}\\{x^1,x^2,...,x^N\\}{x1,x2,...,xN} ï¼Œæ¯ä¸€ä¸ª xix^ixi ä»£è¡¨ä¸€ä¸ªç©å®¶ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨machine learning çš„æ–¹æ³•æ¥æ±‚è§£è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆè¿™ä¸ªç©å®¶è¦èƒ½å¤Ÿè¡¨ç¤ºä¸ºfeature vector ã€‚ä¸¾ä¸ªä¾‹å­ï¼šå‘é‡çš„ç¬¬ä¸€ç»´å¯ä»¥æ˜¯ç©å®¶è¯´åƒåœ¾è¯çš„é¢‘ç‡ï¼Œç¬¬äºŒç»´æ˜¯ç»Ÿè®¡ç©å®¶æ— æ”¿åºœçŠ¶æ€å‘è¨€ï¼Œå¯ä»¥æƒ³è±¡æœ‰å¯èƒ½æ˜¯è¿™æ ·çš„ï¼Œä¸€ä¸ªç©å®¶è¶Šæ˜¯å–œæ¬¢åœ¨æ— æ”¿åºœçŠ¶æ€ä¸‹å‘è¨€ï¼Œå°±è¶Šæœ‰å¯èƒ½æ˜¯æç ´åçš„ã€‚\nè¿™ä¸ªæ•°æ®é›†æ˜¯çœŸå®å­˜åœ¨çš„ï¼š\n\nhttps://github.com/ahaque/twitch-troll-detection (Albert Haque)\n\næˆ‘ä»¬ç°åœ¨åªæœ‰å¤§é‡çš„è®­ç»ƒæ•°æ®ï¼Œä½†æ˜¯æ²¡æœ‰labelã€‚æˆ‘ä»¬åˆšæ‰å¯ä»¥æ ¹æ®åˆ†ç±»å™¨çš„conferenceæ¥åˆ¤æ–­æ˜¯ä¸æ˜¯å¼‚å¸¸çš„èµ„æ–™ï¼Œæˆ‘ä»¬åœ¨æ²¡æœ‰classifierçš„æƒ…å†µä¸‹å¯ä»¥å»ºç«‹ä¸€ä¸ªæ¨¡å‹ï¼Œè¿™ä¸ªæ¨¡å‹æ˜¯å‘Šè¯‰æˆ‘ä»¬P(x)çš„å‡ ç‡æœ‰å¤šå¤§ï¼ˆæ ¹æ®è®­ç»ƒæ•°æ®ï¼Œæ‰¾ä¸€ä¸ªå‡ ç‡æ¨¡å‹ï¼Œè¿™ä¸ªæ¨¡å‹å¯ä»¥å‘Šè¯‰æˆ‘ä»¬æŸä¸€ç§è¡Œä¸ºå‘ç”Ÿçš„æ¦‚ç‡æœ‰å¤šå¤§ï¼‰ã€‚å½“æˆ‘ä»¬æœ‰äº†æ¨¡å‹P ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†ç©å®¶çš„ç‰¹å¾å‘é‡è¾“å…¥æ¨¡å‹ï¼Œå¾—åˆ°ä¸€ä¸ªå‡ ç‡ï¼ˆå°±æ˜¯ç°å®æƒ…å†µä¸­å‘ç”Ÿè¿™åç©å®¶çš„åŠ¨ä½œçš„æ¦‚ç‡ï¼‰ï¼Œå¦‚æœè¿™ä¸ªå‡ ç‡å¤§äºthreshold ï¼Œå°±è®¤ä¸ºæ˜¯æ­£å¸¸ç©å®¶ï¼Œåä¹‹åˆ™åˆ¤å®šä¸ºå¼‚å¸¸ç©å®¶ã€‚ç»¼ä¸Šæ‰€è¿°æˆ‘ä»¬çš„é—®é¢˜çš„è§£å†³æ–¹æ¡ˆå°±è¢«å½¢å¼åŒ–ä¸ºä¸‹å›¾ï¼š\n\nè¿™ä¸ªæ¨¡å‹å¯ä»¥é€šè¿‡ç”Ÿæˆæ¨¡å‹çš„æ–¹å¼æ¥æ‰¾ï¼Œæ¯”å¦‚è¯´Gaussian Distribution Model ï¼Œæˆ‘ä»¬å‡å®šç©å®¶æ•°æ®æ˜¯åœ¨ç‰¹å¾ç©ºé—´ä¸­ç¬¦åˆé«˜æ–¯åˆ†å¸ƒï¼Œé‚£æˆ‘ä»¬å¯ä»¥é€šè¿‡ç°æœ‰æ•°æ®è®¡ç®—å‡ºè¿™ä¸ªåˆ†å¸ƒæ¨¡å‹çš„ Î¼Î¼Î¼ å’Œ âˆ‘âˆ‘âˆ‘ ï¼Œå°±å¾—åˆ°è¿™ä¸ªæ¨¡å‹äº†ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥æŒ‰ä¸Šè¿°è¿›è¡Œæ•°æ®è¾“å…¥ï¼Œåšåˆ¤å®šäº†ã€‚\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¿™æ˜¯ä¸€ä¸ªçœŸå®çš„èµ„æ–™ï¼Œå‡è®¾æ¯ä¸€ä¸ªç©å®¶å¯ä»¥ç”¨äºŒç»´çš„å‘é‡æ¥æè¿°ï¼ˆä¸€ä¸ªæ˜¯è¯´åƒåœ¾è¯çš„å‡ ç‡ï¼Œä¸€ä¸ªæ˜¯æ— æ”¿åºœçŠ¶æ€å‘è¨€çš„å‡ ç‡ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œå–œæ¬¢åœ¨æ— æ”¿åºœçŠ¶æ€å‘è¨€çš„ç©å®¶å å¤šæ•°ï¼Œå–œæ¬¢è¯´è¾£é¸¡è¯çš„ç©å®¶å å°‘æ•°ï¼Œç»¼ä¸Šï¼Œæˆ‘ä»¬ç›´è§‚çš„ç†è§£æ˜¯æ­£å¸¸ç©å®¶åº”è¯¥æ˜¯å–œæ¬¢åœ¨æ— æ”¿åºœçŠ¶æ€å‘è¨€ï¼Œè€Œæ¯”è¾ƒå°‘è¯´è¾£é¸¡è¯çš„ã€‚æ‰€ä»¥æˆ‘ä»¬çš„æ¨¡å‹ P(x)P(x)P(x) çš„ç»“æœåº”è¯¥ç¬¦åˆè¿™æ ·çš„æè¿°ï¼Œå¦‚ä¸Šå›¾å³ä¸Šè§’ã€‚\npsï¼šæ°‘ä¸»çŠ¶æ€ï¼šç»Ÿè®¡ä¸€æ®µæ—¶é—´å†…çš„ç©å®¶æŒ‡ä»¤æ•°ï¼Œé€‰å–æ•°é‡æœ€å¤šçš„ä¸€ä¸ªæ‰§è¡Œï¼›æ— æ”¿åºœçŠ¶æ€ï¼šä¸€æ®µæ—¶é—´å†…æ‰€æœ‰çš„æŒ‡ä»¤ä¸­éšæœºpick ä¸€ä¸ªæ‰§è¡Œã€‚\né‚£ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Œæˆ‘ä»¬æ¥ç®€å•åˆ†æä¸€ä¸‹ã€‚äº‹å®ä¸Šå¾ˆå¤šäººå¼ºçƒˆæ”¯æŒæ— æ”¿åºœçŠ¶æ€ï¼Œå¼ºçƒˆåå¯¹æ°‘ä¸»çŠ¶æ€ï¼Œæ‰€ä»¥è¿™ä¸ªæ¸¸æˆå¤šæ•°æ˜¯åœ¨æ— æ”¿åºœçŠ¶æ€ä¸‹è¿›è¡Œã€‚å‡è®¾ä¸€ä¸ªç©å®¶ä¸è€ƒè™‘è‡ªå·±æ˜¯è¦åœ¨ä»€ä¹ˆçŠ¶æ€ä¸‹å‘è¨€ï¼Œå¤§å¤šæ•°äººæœ‰å…«æˆçš„å‡ ç‡æ˜¯åœ¨æ— æ”¿åºœä¸‹è¿›è¡Œå‘è¨€ï¼Œæœ‰äººè§‰å¾—å¤šæ•°Troll æ˜¯åœ¨æ°‘ä¸»çŠ¶æ€ä¸‹å‘è¨€ï¼Œå› ä¸ºè¿›å…¥äº†æ°‘ä¸»çŠ¶æ€ï¼Œåªè¦Troll å¤šå‘è¨€å°±èƒ½å¤Ÿè®©ä»–çš„è¡Œä¸ºè¢«é€‰ä¸­çš„æ¦‚ç‡æ”¾å¤§ï¼Œæ‰€ä»¥å°ç™½ä¼šç‰¹åˆ«å–œæ¬¢åœ¨æ°‘ä¸»çŠ¶æ€ä¸‹å‘è¨€ã€‚\nä»è¿™ä¸ªå›¾ä¸Šå¯ä»¥å¾ˆç›´è§‰çš„çœ‹å‡ºï¼ˆå³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹ï¼‰ä¸€ä¸ªç©å®¶è½åœ¨è¯´åƒåœ¾çš„è¯å‡ ç‡ä½ï¼Œé€šå¸¸åœ¨æ— æ”¿åºœçŠ¶æ€ä¸‹å‘è¨€ï¼Œè¿™ä¸ªç©å®¶æœ‰å¯èƒ½æ˜¯ä¸€ä¸ªæ­£å¸¸çš„ç©å®¶ï¼Œ P(x)P(x)P(x) å¤§ã€‚å‡è®¾æœ‰ç©å®¶è½åœ¨æœ‰äº”æˆå·¦å³çš„å‡ ç‡è¯´åƒåœ¾è¯ï¼ŒäºŒæˆçš„å‡ ç‡åœ¨æ— æ”¿åºœçŠ¶æ€ä¸‹å‘è¨€ï¼›æˆ–è€…è½åœ¨æœ‰ä¸ƒæˆå·¦å³çš„å‡ ç‡è¯´åƒåœ¾è¯ï¼Œä¸ƒæˆçš„å‡ ç‡åœ¨æ— æ”¿åºœçŠ¶æ€ä¸‹å‘è¨€ï¼Œæ˜¾ç„¶è¿™ä¸ªç©å®¶æ¯”è¾ƒæœ‰å¯èƒ½æ˜¯ä¸€ä¸ªä¸æ­£å¸¸çš„ç©å®¶ï¼Œ P(x)P(x)P(x) å°ã€‚\næˆ‘ä»¬ç›´è§‰ä¸Šæ˜ç™½è¿™ä»¶äº‹æƒ…ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¸Œæœ›ç”¨ä¸€ä¸ªæ•°å€¼åŒ–çš„æ–¹æ³•å‘Šè¯‰æˆ‘ä»¬ç©å®¶è½åœ¨å“ªé‡Œä¼šæ›´åŠ çš„å¼‚å¸¸ã€‚\n Maximum Likelihood\nè¿™é‡Œæ‰€æŒ‡æ•°å€¼åŒ–çš„æ–¹æ³•æˆ‘ä»¬éœ€è¦ç”¨åˆ°Likelihood çš„æ¦‚å¿µï¼ˆpsï¼šå¦‚æœä½ å­¦è¿‡æè€å¸ˆçš„MLçš„**è¿™ä¸€èŠ‚è¯¾**ä½ åº”è¯¥å·²ç»çŸ¥é“è¿™ä¸ªæ¦‚å¿µï¼‰ï¼š\n\n\n\nå‡è®¾æˆ‘ä»¬çš„æ•°æ®æ˜¯ä»ä¸€ä¸ªprobability density functionï¼ˆæ¦‚ç‡å¯†åº¦å‡½æ•°ï¼‰ fÎ¸(x)f_{\\theta}(x)fÎ¸â€‹(x)  ä¸­sampleå‡ºæ¥çš„\n\nÎ¸ æ˜¯æ¦‚ç‡å¯†åº¦å‡½æ•°çš„å‚æ•°ï¼Œæ˜¯æœªçŸ¥çš„ï¼Œæ˜¯æˆ‘ä»¬è¦ä»æ•°æ®ä¸­å­¦ä¹ å‡ºæ¥çš„\nÎ¸ å°†å†³å®šæˆ‘ä»¬æ¦‚ç‡å¯†åº¦å‡½æ•°çš„å½¢çŠ¶\n\n\n\nç°åœ¨æˆ‘ä»¬è¦åšçš„äº‹å°±æ˜¯æ‰¾å‡ºè¿™ä¸ªæ¦‚ç‡å¯†åº¦å‡½æ•°ç©¶ç«Ÿé•¿ä»€ä¹ˆæ ·å­\n\n\nåœ¨æ‰¾è¿™ä¸ªæ¦‚ç‡å¯†åº¦å‡½æ•°çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¡¡é‡æ–¹æ³•ï¼Œæ¥è¡¡é‡å½“å‰æ‰¾åˆ°çš„è¿™æ¦‚ç‡å¯†åº¦å‡½æ•°çš„å¥½åï¼Œæˆ‘ä»¬å°±æ˜¯ç”¨Likelihood ï¼Œè¿™ä¸ªä¼¼ç„¶å‡½æ•°çš„æ¦‚å¿µå’ŒæŸå¤±å‡½æ•°æœ‰ç‚¹åƒï¼ŒMaximum Likelihood çš„æƒ³æ³•å’ŒMinimize Loss çš„æƒ³æ³•æ˜¯ä¸€æ ·çš„ã€‚\nLikelihood çš„æ„æ€æ˜¯ï¼šè®¡ç®—æ¦‚ç‡å¯†åº¦å‡½æ•° fÎ¸f_{\\theta}fÎ¸â€‹ äº§ç”Ÿå¦‚å›¾æ‰€ç¤ºçš„æ‰€æœ‰æ•°æ®æ¦‚ç‡æœ‰å¤šå¤§ã€‚\nè‹¥ä¸¥æ ¼è¯´çš„è¯ï¼Œ fÎ¸(x)f_{\\theta}(x)fÎ¸â€‹(x) è¾“å‡ºå¹¶ä¸æ˜¯æ¦‚ç‡ï¼Œå®ƒçš„è¾“å‡ºæ˜¯probability density ï¼›è¾“å‡ºçš„èŒƒå›´ä¹Ÿå¹¶ä¸æ˜¯(0,1)ï¼Œæœ‰å¯èƒ½å¤§äº1ã€‚å¦‚æœä½ æ¦‚ç‡è®ºå­¦çš„æ¯”è¾ƒå¥½ï¼Œé‚£ä½ åº”è¯¥èƒ½å¾ˆå¥½ç†è§£è¿™ä¸ªæ¦‚ç‡å¯†åº¦ï¼Œä¸è¡Œçš„è¯è¿™é‡Œæˆ‘ä»¬å°±ç®€å•çš„å°†å…¶ç†è§£æˆæ¦‚ç‡ã€‚ xix^ixi åœ¨ä»¥ Î¸\\thetaÎ¸ ä¸ºå‚æ•°çš„probability density function sampleå‡ºæ¥çš„æ¦‚ç‡æ˜¯ fÎ¸(xi)f_{\\theta}(x^i)fÎ¸â€‹(xi) ï¼Œæ‰€ä»¥æ‰€æœ‰çš„æ ·æœ¬ä»è¿™ä¸ª fÎ¸(x)f_{\\theta}(x)fÎ¸â€‹(x) ä¸­sampleå‡ºæ¥çš„æ¦‚ç‡å°±æ˜¯å„ä¸ªæ ·æœ¬çš„æ¦‚ç‡è¿ä¹˜ã€‚\nè¿ä¹˜å¾—åˆ°çš„ç»“æœå°±æ˜¯likelihood å¦‚ä¸Šå›¾æ‰€ç¤º L(Î¸)L(\\theta)L(Î¸) ã€‚likelihood çš„å¯èƒ½æ€§æ˜¾ç„¶æ˜¯ç”± Î¸\\thetaÎ¸ æ§åˆ¶çš„ï¼Œé€‰æ‹©ä¸åŒçš„ Î¸\\thetaÎ¸ å°±æœ‰ä¸åŒçš„probability density functionï¼Œå°±å¯ä»¥ç®—æ³•ä¸åŒçš„likelihood ã€‚\nè€Œæˆ‘ä»¬ç°åœ¨å¹¶ä¸çŸ¥é“è¿™ä¸ª Î¸ æ˜¯å¤šå°‘ï¼Œæˆ‘ä»¬è¦ç®—ä¸€ä¸ª Î¸âˆ—Î¸^*Î¸âˆ— ç®—å‡ºæ¥çš„likelihoodæ˜¯æœ€å¤§çš„ã€‚\n\né‚£ä¸Šè¿°çš„æ¦‚ç‡å¯†åº¦å‡½æ•°é•¿ä»€ä¹ˆæ ·å­å‘¢ï¼Œæˆ‘ä»¬è¦ç¡®å®šè¿™ä¸ªæ¦‚ç‡å¯†åº¦å‡½æ•°çš„æ¶æ„ã€‚æˆ‘ä»¬å¯ä»¥å‡è®¾è¿™ä¸ªæ¦‚ç‡å¯†åº¦å‡½æ•°æ˜¯Gaussian Distribution ï¼ˆé«˜æ–¯åˆ†å¸ƒï¼‰ï¼Œé«˜æ–¯åˆ†å¸ƒçš„å‡½æ•°å¼å°±æ˜¯ä¸Šå›¾æœ€ä¸Šé¢çš„å…¬å¼ã€‚\nåœ¨Gaussian Distribution çš„å‡½æ•°å¼ä¸­ï¼Œå‚æ•° Î¸\\thetaÎ¸ åº”è¯¥æ˜¯ {mean:Î¼,convariancematrix:Î£}\\{mean:\\mu, convariance matrix:\\Sigma\\}{mean:Î¼,convariancematrix:Î£}ã€‚å‡è®¾å¦‚ä¸Šå›¾æ‰€ç¤ºçš„æ•°æ®æ˜¯ç”±å·¦ä¸Šè§’çš„ {Î¼,Î£}\\{\\mu,\\Sigma\\}{Î¼,Î£} æ¥ç”Ÿæˆçš„ï¼Œæ•°æ®ç‚¹åº”è¯¥åœ¨å·¦ä¸Šè§’çš„è“è‰²åœˆåœˆä¸­sample å‡ºæ¥ï¼Œå®ƒçš„likelihood æ˜¯æ¯”è¾ƒå¤§ï¼›å¦‚æœæ˜¯å³ä¸‹è§’ {Î¼,Î£}\\{\\mu,\\Sigma\\}{Î¼,Î£} ï¼Œå®ƒè¿œç¦»é«˜å¯†åº¦åŒºåŸŸï¼Œè¿™ä¸ªå‡½æ•°sample å‡ºçš„æ•°æ®å› è¯¥å¤šæ•°åœ¨å³ä¸‹è§’è“è‰²åœˆåœˆä¸­ï¼Œä½†è¿™ä¸å®é™…ä¸ç¬¦ï¼Œæ˜¾ç„¶è¿™æ ·è®¡ç®—å‡ºæ¥çš„likelihood æ˜¯æ¯”è¾ƒä½çš„ã€‚\npsï¼šä¸è¦é—®ä¸ºä»€ä¹ˆç”¨é«˜æ–¯åˆ†å¸ƒï¼Œå¦‚æœæˆ‘ç”¨å…¶ä»–çš„åˆ†å¸ƒä½ ä¹Ÿä¼šé—®åŒæ ·çš„é—®é¢˜ã€‚å†è€…å°±æ˜¯å› ä¸ºå®ƒè¯¥æ­»çš„å¥½ç”¨ï¼Œç°å®ä¸­å¾ˆå¤šæ•°æ®çš„åˆ†å¸ƒéƒ½æ¯”è¾ƒå¥½çš„ç¬¦åˆé«˜æ–¯åˆ†å¸ƒã€‚ä½ æ°¸è¿œå¯ä»¥æ ¹æ®ä½ çš„æ•°æ®é€‰æ‹©åˆé€‚çš„åˆ†å¸ƒæ¨¡å‹ã€‚å¦å¤–è¿™é‡Œå†è€ƒè™‘ä¸€ä¸‹ï¼Œå¦‚æœ fÎ¸(x)f_{\\theta}(x)fÎ¸â€‹(x) æ˜¯ä¸€ä¸ªå¾ˆå¤æ‚çš„ç½‘ç»œï¼Œ Î¸\\thetaÎ¸ æ˜¯ç½‘ç»œä¸­çš„å¤§é‡å‚æ•°ï¼Œè¿™æ—¶å€™ä½ å°±ä¼šæœ‰æ›´å¤šçš„è‡ªç”±é€‰æ‹©ä¸€ä¸ªmodel æ¥æ¨¡æ‹Ÿç”Ÿæˆæ•°æ®ç‚¹ï¼Œè¿™æ ·å°±ä¸ä¼šè¢«é™åˆ¶ä½ï¼Œåœ¨çœ‹èµ·æ¥å°±ä¸åƒGaussian äº§ç”Ÿçš„æ•°æ®å´ç¡¬è¦è¯´æ˜¯Gaussian äº§ç”Ÿçš„æ•°æ®ã€‚å› ä¸ºæˆ‘ä»¬è¿™é—¨è¯¾è¿˜æ²¡æœ‰è®²åˆ°å…¶å®ƒè¿›é˜¶çš„æ¨¡å‹ï¼Œæ‰€ä»¥ç°åœ¨ç”¨Gaussian Distribution æ¥å½“åšæˆ‘ä»¬èµ„æ–™æ˜¯ç”±Gaussian Distribution æ‰€äº§ç”Ÿçš„ã€‚\nGuassian Distribution ä¸­çš„å‚æ•°æ˜¯å¾ˆå¥½è§£çš„ï¼ŒÎ¼âˆ—\\mu^*Î¼âˆ— ç­‰äºæ‰€æœ‰training data åšå¹³å‡ï¼Œ Î£âˆ—\\Sigma^*Î£âˆ— ç­‰äºå°†xå‡å» Î¼âˆ—\\mu^*Î¼âˆ— ä¹˜ä»¥ xxx å‡å» Î¼âˆ—\\mu^*Î¼âˆ— çš„è½¬ç½®ï¼Œç„¶ååšå¹³å‡ã€‚å¾—åˆ°çš„ç»“æœå¦‚ä¸‹å›¾ï¼š\n\nå¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬æ ¹æ®training data æ‰¾å‡ºäº† {Î¼âˆ—,Î£âˆ—}\\{\\mu^*,\\Sigma^*\\}{Î¼âˆ—,Î£âˆ—} ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥åšå¼‚å¸¸æ£€æµ‹äº†ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå°† {Î¼,Î£}\\{\\mu,\\Sigma\\}{Î¼,Î£} ä»£å…¥probability density function ï¼Œè‹¥å¤§äºæŸä¸€ä¸ªthreshold ï¼ˆé˜ˆå€¼ï¼‰å°±è¯´æ˜æ˜¯æ­£å¸¸çš„ï¼Œè‹¥å°äºè¿™ä¸ªthreshold å°±è¯´æ˜æ˜¯å¼‚å¸¸çš„ã€‚\n\næ¯ä¸€ç¬”èµ„æ–™éƒ½å¯ä»¥ä»£å…¥probability density function ç®—å‡ºä¸€ä¸ªæ•°å€¼ï¼Œç»“æœå¦‚å›¾æ‰€ç¤ºã€‚è‹¥è½åœ¨é¢œè‰²æ·±çš„çº¢è‰²åŒºåŸŸï¼Œå°±è¯´æ˜ç®—å‡ºæ¥çš„æ•°å€¼è¶Šå¤§ï¼Œè¶Šæ˜¯ä¸€èˆ¬çš„ç©å®¶ï¼Œé¢œè‰²æµ…çš„è“è‰²åŒºåŸŸï¼Œå°±è¯´æ˜è¿™ä¸ªç©å®¶çš„è¡Œä¸ºè¶Šå¼‚å¸¸ã€‚å¦‚å›¾æ‰€ç¤ºçš„ä¸¤ä¸ªç‚¹ï¼šå³ä¸Šè§’çš„ä¸€ä¸ªç©å®¶è½åœ¨å¾ˆå–œæ¬¢è¯´åƒåœ¾è¯ï¼Œå¤šæ•°å–œæ¬¢åœ¨æ— æ”¿åºœçŠ¶æ€ä¸‹å‘è¨€çš„åŒºåŸŸï¼Œå°±è¯´æ˜æ˜¯ä¸€ä¸ªæ­£å¸¸çš„ç©å®¶ã€‚å·¦ä¸‹è§’çš„ä¸€ä¸ªç©å®¶è½åœ¨å¾ˆå°‘è¯´åƒåœ¾è¯ï¼Œç‰¹åˆ«å–œæ¬¢åœ¨æ°‘ä¸»æ—¶å‘è¨€ï¼Œå°±è¯´æ˜æ˜¯ä¸€ä¸ªå¼‚å¸¸çš„ç©å®¶ã€‚\nåˆ°è¿™é‡Œæˆ‘ä»¬å¯¹Twitch Play PokÃ©mon çš„å¼‚å¸¸ç©å®¶æ¢æµ‹å°±ç»“æŸäº†ï¼Œæˆ‘ä»¬æ¥ç¨å¾®æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä»¬ç”¨äº†ä¸¤ç§ç‰¹å¾è¡¨ç¤ºç©å®¶ï¼Œå‡å®šäº†ç©å®¶çš„åœ¨è¿™ä¸¤ä¸ªç‰¹å¾ç»´åº¦ä¸Šåˆ†å¸ƒç¬¦åˆGaussian Distribution ï¼Œç„¶åæ ¹æ®æ•°æ®å­¦é™¤äº†ä¸€ä¸ªæ¯”è¾ƒå¥½çš„fit è¿™äº›æ•°æ®çš„é«˜æ–¯åˆ†å¸ƒæ¨¡å‹ï¼Œç„¶åç”¨é˜ˆå€¼åˆ†ç±»çš„æ–¹æ³•å®Œæˆäº†å¼‚å¸¸æ£€æµ‹ã€‚\nä¸Šè¿°æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åªæ˜¯ç”¨äº†ä¸¤ä¸ªç‰¹å¾ï¼Œé‚£å¦‚æœåŠ ä¸Šæ›´å¤šçš„ç‰¹å¾æˆ–è®¸æ•ˆæœä¼šæ›´å¥½ï¼š\n\nå†åŠ å…¥ä¸€äº›ç‰¹å¾ï¼Œæ¯”å¦‚å¦‚æœæœ‰äººä¸åœæŒ‰start é”®ï¼Œé‚£å®ƒå¯èƒ½å°±æ˜¯ä¸€ä¸ªå¼‚å¸¸ç©å®¶ï¼Œè¿˜æœ‰å’Œå…¶ä»–äººä¸€ä¸ä¸€æ ·ï¼Œæ¯”è¾ƒä¸€æ ·çš„å¯èƒ½å°±ä¼šæ˜¯æ­£å¸¸ç©å®¶ï¼Œå†æœ‰ä¸åœå”±åè°ƒçš„äººå¯èƒ½ä¹Ÿæ˜¯å¼‚å¸¸ç©å®¶ã€‚åŠ ä¸Šè¿™äº›ç‰¹å¾ï¼Œå®è·µä¸€ä¸‹å¾—åˆ°çš„ç»“æœï¼š\n\nè¿™é‡Œå–log çš„åŸå› æ˜¯åŸæœ¬çš„å‡½æ•°ç®—å‡ºæ¥çš„è¾“å‡ºå¤ªå°äº†ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªç©å®¶é™¤äº†ç¬¬å››ä¸ªç‰¹å¾éƒ½ä¸€æ ·ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªç©å®¶å’Œå¤§å®¶çš„é€‰æ‹©å®Œå…¨ä¸€æ ·ï¼Œç¬¬ä¸‰ä¸ªç©å®¶å’Œå¤§å®¶çš„é€‰æ‹©åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯ç›¸åŒçš„ï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªå¾—åˆ°çš„åˆ†æ•°åè€Œä½ï¼Œæ˜¯å› ä¸ºæœºå™¨ä¼šè§‰å¾—å¦‚æœä½ å’Œæ‰€æœ‰äººå®Œå…¨ä¸€æ ·è¿™ä»¶äº‹å°±æ˜¯å¾ˆå¼‚å¸¸çš„ã€‚\n Outlook: Auto-encoder\nä¸Šè¿°æ˜¯ç”¨Generative Model ï¼ˆç”Ÿæˆæ¨¡å‹ï¼‰ æ¥è¿›è¡Œå¼‚å¸¸æ£€æµ‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨Auto-encoder æ¥åšè¿™ä¸ªä»»åŠ¡ã€‚\n\næˆ‘ä»¬æŠŠæ‰€æœ‰çš„è®­ç»ƒèµ„æ–™è®­ç»ƒä¸€ä¸ªEncoder ï¼ŒEncoder æ‰€åšçš„äº‹æƒ…æ˜¯å°†è¾“å…¥çš„å›¾ç‰‡ï¼ˆæ¯”å¦‚è¾›æ™®æ£®ï¼‰å˜ä¸ºcodeï¼ˆä¸€ä¸ªå‘é‡ï¼‰ï¼ŒDecoder æ‰€åšäº‹æƒ…æ˜¯å°†code è§£å›åŸæ¥çš„å›¾ç‰‡ã€‚è®­ç»ƒæ—¶Encoder å’ŒDecoder æ˜¯åŒæ—¶è®­ç»ƒï¼Œè®­ç»ƒç›®æ ‡æ˜¯å¸Œæœ›è¾“å…¥å’Œè¾“å‡ºè¶Šæ¥è¿‘è¶Šå¥½ã€‚\n\nåœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±æŠŠä¸€å¼ å›¾ç‰‡æ”¾å…¥è¿™ä¸ªAuto-Encoder modelï¼Œå¾—åˆ°ä¸€ä¸ªè¾“å‡ºå›¾ç‰‡ã€‚å› ä¸ºè¿™ä¸ªç½‘ç»œè®­ç»ƒæ—¶ä½¿ç”¨çš„æ˜¯è¾›æ™®æ£®å®¶åº­çš„å›¾ç‰‡ï¼Œæ‰€ä»¥å®ƒå¯¹è¾›æ™®æ£®å®¶åº­çš„å›¾ç‰‡çš„è¿˜åŸåº”è¯¥æ˜¯æ¯”è¾ƒå¥½çš„ï¼Œè€Œå¼‚å¸¸çš„å›¾ç‰‡çš„è¿˜åŸåº”è¯¥ä¼šæ˜¯æ¨¡ç³Šçš„ï¼ŒåŸºäºæ­¤æˆ‘ä»¬å¯ä»¥åšAuto-Encoder based Anomaly Detectionã€‚\n More â€¦\n\nMachine Learning ä¸­ä¹Ÿæœ‰å…¶å®ƒåšå¼‚å¸¸æ£€æµ‹çš„æ–¹æ³•ï¼Œæ¯”å¦‚SVMçš„One-class SVM ï¼Œåªéœ€è¦æ­£å¸¸çš„èµ„æ–™å°±å¯ä»¥è®­ç»ƒSVM ï¼Œç„¶åå°±å¯ä»¥åŒºåˆ†æ­£å¸¸çš„è¿˜æ˜¯å¼‚å¸¸çš„æ•°æ®ã€‚åœ¨Random Forset çš„Isolated Forest ï¼Œå®ƒæ‰€åšçš„äº‹æƒ…è·ŸOne-class SVM æ‰€åšçš„äº‹æƒ…å¾ˆåƒï¼ˆç»™å‡ºæ­£å¸¸çš„è®­ç»ƒè¿›è¡Œè®­ç»ƒï¼Œæ¨¡å‹ä¼šå‘Šè¯‰ä½ å¼‚å¸¸çš„èµ„æ–™æ˜¯ä»€ä¹ˆæ ·å­ï¼‰ã€‚\n\nOne-class SVM Ref: https://papers.nips.cc/paper/1723-support-vector-method-for-novelty-detection.pdf\nIsolated Forest Ref: https://cs.nju.edu.cn/zhouzh/zhouzh.files/publication/icdm08b.pdf\n\n","categories":["æå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°"],"tags":["ML","note","Next-Step-of-ML"]},{"title":"Explainable ML","url":"https://ch3nye.top/Explainable-ML/","content":" Explainable ML\n åŸºæœ¬æ¦‚å¿µ\nä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨å›¾ç‰‡è¯†åˆ«ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬ç»™æœºå™¨ä¸€å¼ å›¾ç‰‡ï¼Œå®ƒå°±ä¼šå‘Šè¯‰æˆ‘ä»¬å›¾ç‰‡ä¸­æœ‰ä»€ä¹ˆäº‹ç‰©ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸åªå¸Œæœ›æœºå™¨èƒ½å‘Šè¯‰æˆ‘ä»¬å›¾ç‰‡ä¸­æœ‰ä»€ä¹ˆï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›å®ƒèƒ½å‘Šè¯‰æˆ‘ä»¬å®ƒåˆ¤æ–­å›¾ç‰‡ä¸­å­˜åœ¨è¯¥äº‹ç‰©çš„ç†ç”±ã€‚\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¯è§£é‡Šçš„æœºå™¨å­¦ä¹ ç›®å‰åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š\n\n\nå±€éƒ¨è§£é‡Š\nä¸ºä»€ä¹ˆä½ è®¤ä¸ºå›¾ä¸­æœ‰ä¸€åªçŒ«ğŸ±ï¼Ÿ\n\n\nå…¨å±€è§£é‡Š\nä½ è®¤ä¸ºçŒ«ğŸ±åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿ\n\n\n ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦Explainable ML\n\nä¸¾ä¾‹æ¥è¯´ï¼š\nç°åœ¨å¾ˆå¤šå…¬å¸éƒ½ä¼šæƒ³è¦ç”¨æœºå™¨æ¥ååŠ©åšå±¥å†çš„åˆ¤è¯»ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨æœºå™¨æ¥åšå±¥å†çš„åˆ¤è¯»çš„æ—¶å€™æ˜¯å…¬å¹³çš„ï¼Œé‚£æˆ‘æ€ä¹ˆè®©äººçŸ¥é“æœºå™¨æ˜¯ä¸æ˜¯å…¬å¹³çš„å‘¢ï¼Ÿä¹Ÿè®¸æˆ‘ä»¬å°±éœ€è¦æœºå™¨å®ƒä¸€è¾¹åˆ¤è¯»ï¼Œä¸€è¾¹å‘Šè¯‰æˆ‘ä»¬ä»–ç­›é€‰å±¥å†çš„ç†ç”±ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çŸ¥é“æœºå™¨åˆ°åº•æ˜¯çœŸçš„åœ¨åˆ¤è¯»ä¸€ä¸ªäººçš„èƒ½åŠ›ï¼Œè¿˜æ˜¯ä»…ä»…å‡­å€Ÿè‚¤è‰²å’Œæ€§åˆ«è¿™æ ·çš„æ•°æ®è¿›è¡Œåˆ¤æ–­ã€‚\nåˆæˆ–è€…ï¼Œè®©æœºå™¨ååŠ©åˆ¤æ–­ä¸€ä¸ªç½ªçŠ¯æ˜¯å¦å¯ä»¥è¢«å‡é‡Šï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æœºå™¨æ˜¯å¦çœŸçš„æ ¹æ®å…·ä½“çš„äº‹è¯æ¥åˆ¤æ–­è¿™ä»¶äº‹ï¼Œè¿˜æ˜¯ä»…ä»…å‡­å€Ÿè‚¤è‰²å’Œæ€§åˆ«è¿™æ ·çš„æ•°æ®è¿›è¡Œåˆ¤æ–­ã€‚\nåˆæˆ–è€…ï¼Œè¿›è¡Œé‡‘èç›¸å…³çš„å†³ç­–éœ€è¦æä¾›åˆ¤æ–­ç†ç”±ï¼Œæ¯”å¦‚ä¸ºä»€ä¹ˆä¸ç»™æŸäººè´·æ¬¾ï¼Ÿ\nè¿˜æœ‰ï¼Œå½“æˆ‘ä»¬å¯ä»¥åšå¯è§£é‡Šçš„æœºå™¨å­¦ä¹ æ¨¡å‹æ—¶ï¼Œæˆ‘ä»¬å°±èƒ½åšæ¨¡å‹è¯Šæ–­ï¼Œå°±å¯ä»¥çŸ¥é“æœºå™¨åˆ°åº•å­¦åˆ°äº†ä»€ä¹ˆï¼Œæ˜¯å¦å’Œæˆ‘ä»¬çš„é¢„æœŸç›¸åŒã€‚ï¼ˆps: å‡†ç¡®ç‡ä¸è¶³ä»¥è®©æˆ‘ä»¬ç²¾ç¡®è°ƒæ•´æ¨¡å‹ï¼Œåªæœ‰å½“æˆ‘ä»¬çŸ¥é“why the answer is wrong, so i can fix it. ï¼‰\n\n My Point of View\næˆ‘ï¼ˆæå®æ¯…è€å¸ˆï¼‰çš„è§‚ç‚¹\nå¯è§£é‡Šæœºå™¨å­¦ä¹ çš„ç›®æ ‡ != å®Œå…¨äº†è§£æœºå™¨å­¦ä¹ æ¨¡å‹å¦‚ä½•å·¥ä½œ å¯ä»¥è¯´å®Œå…¨äº†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œï¼Œè¿™ä»¶äº‹æœªå¿…æ˜¯å¿…è¦çš„ã€‚\n\nå¾ˆå¤šäººä¸ä¿¡ä»»æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œå› ä¸ºä»–ä»¬è®¤ä¸ºå®ƒæ˜¯ä¸ªé»‘ç›’\nä½†æ˜¯äººç±»æœ¬èº«ä¹Ÿæ˜¯ä¸ªé»‘ç›’\n\næ‰€ä»¥å¯è§£é‡Šæœºå™¨å­¦ä¹ çš„ç›®æ ‡åº”è¯¥æ˜¯ è®©äººï¼ˆä½ çš„å®¢æˆ·ã€è€æ¿ã€ä½ è‡ªå·±ï¼‰èˆ’æœ ğŸ˜†\nä¹Ÿè®¸æœ€ç»ˆåœ¨æœªæ¥ï¼Œå¯è§£é‡Šæœºå™¨å­¦ä¹ å¯ä»¥æ ¹æ®ä¸åŒçš„äººç»™å‡ºä¸åŒçš„è§£é‡Šã€‚æ¯”å¦‚ï¼Œç»™å°å­¦ç”Ÿå’Œå¤§å­¦ç”Ÿè§£é‡Šæœºå™¨ä¸ºä»€ä¹ˆä¼šå­¦ä¹ è¿™ä»¶äº‹ï¼Œç»™å‡ºä¸åŒçš„è§£é‡Šã€‚\n Interpretable v.s. Powerful\nå¯è§£é‡Šæ€§ v.s. å¼ºå¤§\n\nç®€å•çš„æ¨¡å‹ä¼¼ä¹ä¸ä¼šå¾ˆå¼º\næ·±åº¦å­¦ä¹ æ¨¡å‹æ˜¯å¤æ‚çš„ï¼Œå´æ˜¯å¼ºå¤§çš„\n\nè¿™é‡Œæ˜¯è¯´ï¼Œå¯è§£é‡Šçš„æœºå™¨å­¦ä¹ ä¸æ˜¯æ”¾å¼ƒå¤æ‚çš„æ¨¡å‹ï¼Œåªä½¿ç”¨ç®€å•çš„æ¨¡å‹ï¼Œè€Œæ˜¯å»å°è¯•è§£é‡Šå¤æ‚æ¨¡å‹ã€‚\n\né‚£æœ‰æ²¡æœ‰å³å®¹æ˜“è§£é‡Šåˆå¼ºå¤§çš„æ¨¡å‹å‘¢ï¼Œæ¯”å¦‚å†³ç­–æ ‘ï¼Ÿ\n\n\nä½†æ˜¯ï¼Œäº‹å®ä¸Šåªç”¨ä¸€æ£µå†³ç­–æ ‘æ•ˆæœå¹¶ä¸å¥½ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½ä¼šä½¿ç”¨å¾ˆå¤šå†³ç­–æ ‘ç»“åˆèµ·æ¥å¾—åˆ°æ¯”è¾ƒå¼ºçš„æ•ˆæœï¼Œæ¯”å¦‚éšæœºæ£®æ—ï¼Œxgboost ç­‰ï¼Œè¿™äº›å¼ºå¤§çš„æ¨¡å‹ä¹Ÿæ˜¯å¾ˆéš¾è§£é‡Šçš„ï¼š\n\nhttps://stats.stackexchange.com/questions/230581/decision-tree-too-large-to-interpret\n Local Explanation Explain the Decision\nQuestion: why do you think this image is a cat?\næˆ‘ä»¬æƒ³çŸ¥é“æœºå™¨åœ¨å›¾ç‰‡ä¸Šçš„é‚£éƒ¨åˆ†çœ‹åˆ°äº†çŒ«ğŸ±ï¼Œæˆ–è€…è¯´å®ƒæŠŠé‚£éƒ¨åˆ†è®¤æˆäº†çŒ«ã€‚\n åŸºæœ¬ç²¾ç¥\nç°åœ¨æœ‰ä¸€ä¸ªobject xxx ï¼Œå…¶ä¸­æœ‰NNNä¸ªComponentï¼Œç°åœ¨å¸Œæœ›çŸ¥é“å“ªäº›Componentå¯¹æœºå™¨åšåˆ¤å®šæ˜¯é‡è¦çš„ã€‚\n\n\n\nComponent\nåœ¨å›¾ç‰‡è¾¨è¯†ä»»åŠ¡ä¸­ï¼Œcomponentå¯ä»¥æ˜¯ä¸€ä¸ªpixelï¼Œæˆ–è€…ä¸€ä¸ªsegmentï¼ˆå¦‚ä¸Šå›¾ä¸­åˆ†å‰²çš„å›¾ç‰‡å—ï¼‰\nåœ¨NLPä»»åŠ¡ä¸­ï¼Œcomponentå¯ä»¥æ˜¯ä¸€ä¸ªwordã€‚\n\n\nå…³é”®ç²¾ç¥ï¼šæ‹¿æ‰æŸä¸ªcomponentæˆ–è€…æ”¹åŠ¨å…¶æ•°å€¼ï¼Œè§‚å¯Ÿå†³ç­–å˜åŒ–ã€‚å¦‚æœè¿™ä¸ªæ”¹åŠ¨ä½¿æ¨¡å‹å†³ç­–å‘ç”Ÿéå¸¸å¤§çš„å˜åŒ–ï¼Œé‚£è¿™ä¸ªcomponentå°±æ˜¯æ¯”è¾ƒé‡è¦çš„ã€‚\n ä¸¾æ —æ¥è¯´ï¼š\n\nReference: Zeiler, M. D., &amp; Fergus, R. (2014). Visualizing and understanding convolutional networks. In Computer Visionâ€“ECCV 2014 (pp. 818-833)\n\næˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç°è‰²çš„æ–¹å—ç›–ä½å›¾ç‰‡çš„æŸä¸ªä½ç½®ï¼Œè§‚å¯Ÿæ¨¡å‹çš„åˆ¤æ–­ï¼Œæœ€ç»ˆå¾—åˆ°å¦‚ä¸‹ç»“æœã€‚è“è‰²çš„éƒ¨åˆ†æ˜¯ç°è‰²æ–¹å—è¦†ç›–è¯¥ä½ç½®æ—¶æ¨¡å‹è®¤ä¸ºè¯¥å›¾ç‰‡å¤§æ¦‚ç‡ä¸æ˜¯æ­£ç¡®æ ‡ç­¾çš„ï¼Œçº¢è‰²éƒ¨åˆ†è¡¨ç¤ºå½“ç°è‰²æ–¹å—è¦†ç›–è¯¥ä½ç½®æ—¶æ¨¡å‹è®¤ä¸ºè¯¥å›¾ç‰‡å¤§æ¦‚ç‡æ˜¯æ­£ç¡®æ ‡ç­¾ã€‚\n\nä¸Šå›¾åæ˜ å‡ºï¼Œè¯¥æ¨¡å‹ç¡®å®å­¦ä¹ åˆ°æ­£ç¡®çš„äº‹ç‰©ã€‚å¦å¤–ï¼Œè¦†ç›–å›¾ç‰‡çš„æ–¹å—çš„é¢œè‰²ã€å¤§å°éƒ½æ˜¯éœ€è¦äººå·¥è°ƒæ•´çš„å‚æ•°ï¼Œè¿™å…¶å®æ˜¯è‡³å…³é‡è¦çš„ã€‚\n\nKaren Simonyan, Andrea Vedaldi, Andrew Zisserman, â€œDeep Inside Convolutional Networks: Visualising Image Classification Models and Saliency Mapsâ€, ICLR, 2014\n\n\nå¯¹äºæ¯ä¸€ä¸ªè¾“ xxx å°†å…¶æŸä¸ªç»´åº¦åŠ ä¸Šä¸€ä¸ªå°å°çš„æ‰°åŠ¨ï¼Œç„¶åè§‚å¯Ÿæ¨¡å‹åˆ¤æ–­ç»“æœå’ŒåŸåˆ¤æ–­ç»“æœçš„å·®å€¼ï¼Œæ ¹æ®è¿™ä¸ªæ‰°åŠ¨é€ æˆçš„ç»“æœå·®å€¼æ¥äº†è§£æœºå™¨å¯¹å›¾ç‰‡ä¸­å“ªäº›åƒç´ æ¯”è¾ƒæ•æ„Ÿã€‚ï¼ˆå…¶å®è¿™ä¸ªæ‰°åŠ¨é€ æˆçš„å½±å“ï¼Œå¯ä»¥ç†è§£ä¸ºåå¾®åˆ†âˆ‚ykâˆ‚xn\\frac{\\partial y_k}{\\partial x_n}âˆ‚xnâ€‹âˆ‚ykâ€‹â€‹ï¼‰ æ ¹æ®è¿™ä¸ªåå¾®åˆ†çš„å€¼ï¼Œæˆ‘ä»¬ç”»å‡ºäº†ä¸Šå›¾çš„ç»“æœï¼Œäº®åº¦è¶Šå¤§è¡¨ç¤ºåå¾®åˆ†å€¼è¶Šå¤§ã€‚å¯è§ï¼Œè¯¥æ¨¡å‹ç¡®å®å­¦ä¹ åˆ°æ­£ç¡®çš„äº‹ç‰©ã€‚\n Case Study: PokÃ©mon v.s. Digimon\næˆ‘ä»¬æƒ³çœ‹çœ‹Saliency Mapèƒ½å¸¦æ¥ä»€ä¹ˆæ ·çš„ç»“æœï¼Œç”¨æœºå™¨å­¦ä¹ è¾¨è¯†è¾“å…¥è¿›æ¥çš„å›¾ç‰‡æ˜¯pokemonè¿˜æ˜¯digimonã€‚\n\næˆ‘ä»¬çœ‹çœ‹ç»“æœï¼š\n\nå¥½åƒå¾ˆå‰å®³å“¦ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨saliency mapçœ‹çœ‹æœºå™¨åˆ°åº•å­¦åˆ°äº†ä»€ä¹ˆã€‚\n\n\næˆ‘ä»¬çœ‹åˆ°ï¼Œæœºå™¨å¥½åƒæŠŠå…³æ³¨ç‚¹éƒ½æ”¾åœ¨äº†æœ¬ä½“ä¹‹å¤–çš„éƒ¨åˆ†ä¸Šï¼ŒåŸæ¥pokemonå’Œdigimonæ•°æ®é›†ä¸€ä¸ªæ˜¯pngï¼Œä¸€ä¸ªæ˜¯jpgï¼Œä¸¤è€…çš„èƒŒæ™¯ä¸€ä¸ªæ˜¯é€æ˜çš„ä¸€ä¸ªæ˜¯çº¯é»‘çš„ğŸ¤£\n æ›´å¤šâ€¦\n\n\nGrad-CAM (https://arxiv.org/abs/1610.02391)\n\n\nSmoothGrad (https://arxiv.org/abs/1706.03825)\n\n\nLayer-wise Relevance Propagation(https://arxiv.org/abs/1604.00825)\n\n\nGuided Backpropagation(https://arxiv.org/abs/1412.6806)\n\n\n Limitation of Gradient based Approaches\nåŸºäºæ¢¯åº¦ä¸‹é™çš„æ–¹æ³•çš„é™åˆ¶\nåˆšæ‰æˆ‘ä»¬ç”¨gradientçš„æ–¹æ³•åˆ¤æ–­ä¸€ä¸ªpixelæˆ–è€…ä¸€ä¸ªsegmentæ˜¯å¦é‡è¦ï¼Œä½†æ˜¯æ¢¯åº¦æœ‰ä¸€ä¸ªé™åˆ¶å°±æ˜¯gradient saturationï¼ˆæ¢¯åº¦é¥±å’Œï¼‰ã€‚\n\ngradient saturation\n\n\nä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬å¦‚æœé€šè¿‡é¼»å­çš„é•¿åº¦æ¥åˆ¤æ–­ä¸€ä¸ªç”Ÿç‰©æ˜¯ä¸æ˜¯å¤§è±¡ï¼Œé¼»å­è¶Šé•¿æ˜¯å¤§è±¡çš„ä¿¡å¿ƒåˆ†æ•°è¶Šé«˜ï¼Œä½†æ˜¯å½“é¼»å­é•¿åˆ°ä¸€å®šç¨‹åº¦ä¿¡å¿ƒåˆ†æ•°å°±ä¸å¤ªä¼šå˜åŒ–äº†ï¼Œä¿¡å¿ƒåˆ†æ•°å°±å°é¡¶äº†ã€‚åœ¨ä¸Šå›¾æ ‡è®°çš„ç‚¹ï¼Œæ¢¯åº¦å·²ç»å¾ˆå°äº†ï¼Œè¿™å’Œæˆ‘ä»¬æƒ³è¦çš„ç»“æœä¸å¤ªä¸€æ ·äº†ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›é¼»å­çš„é•¿åº¦è¶Šé•¿ï¼Œå®ƒæ˜¯å¤§è±¡çš„ä¿¡å¿ƒåˆ†æ•°å°±è¶Šå¤§ã€‚å›åˆ°å…ˆå‰çš„åˆ¤æ–­é‡è¦æ€§çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æŸä¸ªç‰¹å¾æ¢¯åº¦é¥±å’Œæ—¶ï¼Œç”¨gradient basedçš„æ–¹æ³•åˆ¤æ–­ï¼Œè¿™ä¸ªç‰¹å¾å¯¹æ¨¡å‹åšåˆ¤åˆ«å˜å¾—ä¸é‡è¦äº†ã€‚\né‚£æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Œå¦‚å›¾ä¸­åˆ—å‡ºçš„å‚è€ƒæ–¹æ³•ã€‚\n Attack Interpretation\næ”»å‡»æœºå™¨å­¦ä¹ çš„è§£é‡Šæ˜¯å¯èƒ½çš„å—ï¼Ÿï¼ˆå¯èƒ½çš„ï¼‰\n\nInterpretation of Neural Networks is Fragile\nAmirata Ghorbani, Abubakar Abid, James Zou\nhttps://arxiv.org/abs/1710.10547\n\n\næˆ‘ä»¬å¯ä»¥åŠ ä¸€äº›ç¥å¥‡çš„æ‰°åŠ¨åˆ°å›¾ç‰‡ä¸Šï¼Œäººçœ¼è™½ç„¶è¾¨è¯†ä¸å‡ºæ¥ï¼Œä¹Ÿä¸æ”¹å˜åˆ†ç±»ç»“æœï¼Œä½†æ˜¯æ¨¡å‹èšç„¦çš„åˆ¤å®šç‚¹å´å˜äº†ã€‚\n Global Explanation: Explain the whole Model\nQuestion: What do you think a â€œcatâ€ looks like?\næˆ‘ä»¬æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæœºå™¨è®¤ä¸ºçš„çŒ«ğŸ±å…·ä½“é•¿ä»€ä¹ˆæ ·å­ã€‚ï¼ˆä¹Ÿå°±æ˜¯å»åšä¸€ä¸ªç”Ÿæˆå™¨Generatorï¼‰\n Activation Maximization(review)\nè¿™ä¸ªæŠ€æœ¯ä¹‹å‰è®²æ·±åº¦å­¦ä¹ çš„æ—¶å€™è®²è¿‡ï¼Œå‚è€ƒï¼Œæ˜¯è¯´æ‰¾ä¸€ä¸ªæ ·æœ¬è®©æŸä¸€ä¸ªfilterçš„outputæˆ–è€…æ˜¯æŸä¸€ä¸ªneuronçš„outputæœ€å¤§åŒ–ï¼š\n\nä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨æ‰‹å†™æ•°å­—è¾¨è¯†çš„ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“æœºå™¨å¿ƒé‡Œç†æƒ³çš„1é•¿ä»€ä¹ˆæ ·å­ï¼Œä¹Ÿå°±æ˜¯è¯´è¦è®©æœºå™¨ç”»å‡ºä¸€ä¸ª1ã€‚åšæ³•æ˜¯æˆ‘ä»¬ç…§ä¸€å¼ å›¾ç‰‡ä½œä¸ºè¾“å…¥xâˆ—x^*xâˆ—è®©ä»£è¡¨1çš„outputçš„é‚£ä¸€ä¸ªç»´åº¦çš„å€¼æœ€å¤§åŒ–ï¼Œå³ï¼š\nxâˆ—=argmaxâ¡xyix^* = arg \\max_{x} y_i\nxâˆ—=argxmaxâ€‹yiâ€‹\nç”»å‡ºæ¥çš„ç»“æœå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¾ˆå·®ğŸ˜ã€‚é‰´äºä¹‹å‰è®²è¿‡çš„Adversarial Attackï¼Œè¿™ä¸ªç»“æœå¤§æ¦‚ä¹Ÿåœ¨æˆ‘ä»¬çš„æ„æ–™ä¹‹ä¸­äº†ï¼Œåœ¨Adversarial Attackä¸­æˆ‘ä»¬ç»™å›¾ç‰‡åŠ ä¸Šä¸€ä¸ªå¾®å°çš„æ‰°åŠ¨ï¼Œæ¨¡å‹å°±ä¼šå°†å…¶è¾¨è¯†æˆä¸åŒçš„ç±»åˆ«ï¼Œç°åœ¨ä¹Ÿæ˜¯ä¸€æ ·ï¼Œæˆ‘ä»¬ç»™æœºå™¨çœ‹ä¸€ä¸ªæ‚è®¯ï¼Œå®ƒå¯èƒ½å°±ä¼šè®¤ä¸ºè¿™ä¸ªæ‚è®¯å›¾ç‰‡å°±æ˜¯1ï¼Œå°±æ˜¯2â€¦æ‰€ä»¥ï¼Œæˆ‘ä»¬å…‰æ˜¯è®©æœºå™¨æ‰¾ä¸€å¼ å›¾ç‰‡ï¼Œmaximize outputçš„æŸä¸€ç»´åº¦ï¼Œä¸è¶³ä»¥å‘Šè¯‰æˆ‘ä»¬æœºå™¨å¿ƒä¸­è®¤ä¸ºçš„è¯¥outputç»´åº¦ä»£è¡¨çš„æ•°å­—çš„æ ·å­ã€‚\næˆ‘ä»¬éœ€è¦åŠ ä¸€äº›é¢å¤–çš„é™åˆ¶ï¼š\n\næˆ‘ä»¬ä¸ä»…è¦maximize outputçš„æŸä¸ªç»´åº¦ï¼Œè¿˜è¦åŠ ä¸€ä¸ªé™åˆ¶å‡½æ•°R(x)R(x)R(x)è®©xxxå°½å¯èƒ½åƒä¸€ä¸ªæ•°å­—å›¾ç‰‡ï¼Œè¿™ä¸ªå‡½æ•°è¾“å…¥æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œè¾“å‡ºæ˜¯è¿™å¼ å›¾ç‰‡æœ‰å¤šåƒæ˜¯æ•°å­—ã€‚\né‚£è¿™ä¸ªé™åˆ¶å‡½æ•°R(x)R(x)R(x)è¦æ€ä¹ˆå®šä¹‰å‘¢ï¼Œå®šä¹‰æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œå°±ç®€å•çš„å®šä¹‰ä¸ºæ‰€æœ‰pixelçš„å’Œçš„æ•°å€¼ï¼Œè¿™ä¸ªå€¼è¶Šå°è¯´æ˜é»‘è‰²rgb(0,0,0)è¶Šå¤šï¼Œè¿™ä¸ªå›¾ç‰‡å°±è¶Šåƒæ˜¯ä¸€ä¸ªæ•°å­—ï¼Œç”±äºè¿™é‡Œæ•°å­—æ˜¯ç”¨ç™½è‰²çš„ç¬”å†™çš„ï¼Œæ‰€ä»¥å°±åŠ ä¸€ä¸ªè´Ÿå·ï¼Œæ•´ä½“å»maximize yiy_iyiâ€‹ä¸R(x)R(x)R(x)çš„å’Œï¼Œå½¢å¼åŒ–å…¬å¼å°±å˜æˆäº†ï¼š\nxâˆ—=argmaxâ¡x(yi+R(x))x^* = arg \\max_{x}( y_i + R(x) )\nxâˆ—=argxmaxâ€‹(yiâ€‹+R(x))\nå¾—åˆ°çš„ç»“æœå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ¯”åŠ é™åˆ¶å‡½æ•°ä¹‹å‰è¦å¥½å¾ˆå¤šäº†ï¼Œä»æ¯ä¸ªå›¾ç‰‡ä¸­å¤šå°‘èƒ½çœ‹å‡ºä¸€ç‚¹æ•°å­—çš„å½¢çŠ¶äº†ï¼Œå°¤å…¶æ˜¯6é‚£ä¸€å¼ ã€‚\nåœ¨æ›´å¤æ‚çš„æ¨¡å‹ä¸Šï¼Œæ¯”å¦‚è¦åœ¨ImgNetè¿™ä¸ªå¤§è¯­æ–™åº“è®­ç»ƒå‡ºçš„æ¨¡å‹ä¸Šåšä¸Šè¿°çš„äº‹æƒ…ï¼Œåœ¨ä¸åŠ é™åˆ¶å‡½æ•°çš„æƒ…å†µä¸‹å°†ä¼šå¾—åˆ°åŒæ ·æ‚ä¹±æ— ç« çš„ç»“æœã€‚è€Œä¸”åœ¨è¿™ç§å¤æ‚æ¨¡å‹ä¸­è¦æƒ³å¾—åˆ°æ¯”è¾ƒå¥½çš„Global Explanationç»“æœï¼Œå¾€å¾€è¦åŠ ä¸Šæ›´å¤šã€æ›´å¤æ‚ã€æ›´ç²¾å¦™çš„é™åˆ¶å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯ç ”ç©¶è€…åšå‡ºçš„æ¯”è¾ƒå‰å®³Global Explanationçš„ç»“æœï¼š\n\nå‚è€ƒï¼šhttps://arxiv.org/abs/1506.06579\n Constraint from Generator\nç”Ÿæˆå™¨çš„çº¦æŸ\nåˆšæ‰æ˜¯ç”¨äººæƒ³è±¡çš„æ–¹æ³•ï¼ˆé™åˆ¶å‡½æ•°ï¼‰ï¼Œå‘Šè¯‰æœºå™¨ä»€ä¹ˆæ ·çš„ä¸œè¥¿çœ‹èµ·æ¥åƒæ˜¯ä¸€å¼ æ­£å¸¸çš„å›¾ç‰‡ã€‚ç°åœ¨æˆ‘ä»¬è®©æœºå™¨è‡ªå·±ç”Ÿæˆå›¾ç‰‡ã€‚åªè¦æˆ‘ä»¬æ”¶é›†ä¸€å¤§å †å›¾ç‰‡ç»™æœºå™¨çœ‹ï¼Œç„¶åè®­å‡ºä¸€ä¸ªå›¾ç‰‡ç”Ÿæˆå™¨ã€‚\n\nå›¾ç‰‡ç”Ÿæˆå™¨ä¼šæ¥æ”¶ä¸€ä¸ªä½ç»´å‘é‡ï¼Œè¾“å‡ºä¸€å¼ å›¾ç‰‡ã€‚è¿™ä¸ªä½ç»´å‘é‡zzzå¯èƒ½æ˜¯ä»gaussian distributionæˆ–è€…normal distributionä¸­randomly sampleå‡ºæ¥çš„ç‚¹ï¼ŒæŠŠè¿™ä¸ªè¾“å…¥zzzä¸¢å…¥ç”Ÿæˆå™¨ä»–å°±ä¼šè¾“å‡ºä¸€ä¸ªå›¾ç‰‡ã€‚å…³äºæ€ä¹ˆæ ¹æ®è¿™äº›è®­ç»ƒèµ„æ–™è®­ç»ƒå‡ºè¿™ä¸ªç”Ÿæˆå™¨ï¼Œä½ å¯ä»¥ä½¿ç”¨GANï¼ŒVAEç­‰æ–¹æ³•ï¼Œè¿™é‡Œä¸éœ€è¦å±•å¼€ã€‚\né‚£æ€ä¹ˆæŠŠè¿™ä¸ªå›¾ç‰‡ç”Ÿæˆå™¨ä½œä¸ºé™åˆ¶å‡½æ•°ï¼Œé™åˆ¶æˆ‘ä»¬è®©æœºå™¨ç”»å‡ºæ¥çš„å›¾ç‰‡å‘¢ï¼Ÿå¦‚ä¸Šå›¾ä¸‹åŠéƒ¨åˆ†æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†æ–¹æ³•è½¬å˜ä¸ºï¼šæ‰¾ä¸€ä¸ªzzzï¼Œå°†å®ƒè¾“å…¥åˆ°å›¾ç‰‡ç”Ÿæˆå™¨ä¸­äº§ç”Ÿä¸€ä¸ªå›¾ç‰‡ï¼Œå†å°†è¿™ä¸ªå›¾ç‰‡è¾“å…¥åŸæ¥çš„å›¾ç‰‡åˆ†ç±»å™¨ï¼Œå¾—åˆ°ä¸€ä¸ªç±»åˆ«åˆ¤æ–­yyyï¼Œæˆ‘ä»¬åŒæ ·è¦maximize yiy_iyiâ€‹. å…¶å®å¯ä»¥è€ƒè™‘ä¸ºæˆ‘ä»¬æŠŠå›¾ç‰‡ç”Ÿæˆå™¨å’Œå›¾ç‰‡åˆ†ç±»å™¨è¿æ¥åœ¨ä¸€èµ·ï¼Œfixä½ä¸¤è€…çš„å‚æ•°ï¼Œé€šè¿‡æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•ä¸æ–­æ”¹å˜zzzï¼Œæœ€ç»ˆæ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„zâˆ—z^*zâˆ—å¯ä»¥maximize yiy_iyiâ€‹.ä¹‹åæˆ‘ä»¬åªè¦å°†è¿™ä¸ªzâˆ—z^*zâˆ—ä¸¢å…¥å›¾ç‰‡ç”Ÿæˆå™¨å°±å¯ä»¥æ‹¿åˆ°å›¾ç‰‡xâˆ—x^*xâˆ—äº†ã€‚å½¢å¼åŒ–è¡¨è¿°ä¸ºï¼š\nzâˆ—=argmaxâ¡xyiz^* = arg \\max_{x} y_i\nzâˆ—=argxmaxâ€‹yiâ€‹\né€šè¿‡ä¸Šè¿°çš„æ–¹æ³•ï¼ˆå†åŠ ä¸Šäº¿ç‚¹ç‚¹trickï¼‰ï¼Œå¯ä»¥å¾—åˆ°çš„ç»“æœå¦‚ä¸‹å›¾ï¼š\n\nå‚è€ƒï¼šhttps://arxiv.org/abs/1612.00005\n Using A Model To Explain Another\næ ¸å¿ƒæ€æƒ³ï¼šUsing interpretable model to mimic uninterpretable models.\nç”¨ä¸€ä¸ªå¯è§£é‡Šçš„æ¨¡å‹ï¼Œå»è§£é‡Šä¸€ä¸ªå¤æ‚çš„ä¸å¯è§£é‡Šçš„æ¨¡å‹\næ–¹æ³•ï¼šç”¨ä¸€ä¸ªå¯è§£é‡Šçš„æ¨¡å‹ï¼Œå»æ¨¡æ‹Ÿä¸€ä¸ªä¸å¯è§£é‡Šçš„æ¨¡å‹çš„è¡Œä¸ºã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\næ¯”å¦‚è¯´ï¼Œè®­ç»ƒä¸€ä¸ªçº¿æ€§æ¨¡å‹ï¼ˆè“è‰²ï¼‰å»æ¨¡æ‹Ÿç¥ç»ç½‘ç»œæ¨¡å‹ï¼ˆé»‘è‰²ï¼Œé»‘ç›’ï¼‰çš„è¡Œä¸ºï¼Œè®©ä¸¤è€…çš„è¾“å‡ºå°½å¯èƒ½ç›¸åŒã€‚ä½†æ˜¯é—®é¢˜æ˜¯ï¼Œç”±äºçº¿æ€§æ¨¡å‹å¤ªå¼±äº†ï¼Œä¸è¶³ä»¥æ¨¡æ‹Ÿå¤æ‚çš„ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œéš¾é¡¶ğŸ˜‘ã€‚é‚£å…¶å®æˆ‘ä»¬å¯ä»¥åªæ¨¡æ‹Ÿç¥ç»ç½‘ç»œçš„ä¸€éƒ¨åˆ†ï¼š\n Local Interpretable Model-Agnostic Explanations (LIME)\nä¸å¯çŸ¥æ¨¡å‹çš„å±€éƒ¨è§£é‡Š\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œé»‘ç›’æ¨¡å‹æ˜¯è“è‰²çº¿æ¡ï¼Œæˆ‘ä»¬å¯èƒ½æ— æ³•ç”¨çº¿æ€§å‡½æ•°æ‹Ÿåˆè¿™æ¡æ›²çº¿ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å°è¯•æ¨¡æ‹Ÿå›¾ä¸­æ ‡è®°ç‚¹çš„éƒ¨åˆ†ï¼Œå¦‚çº¢çº¿æ‰€ç¤ºã€‚\nLIMEçš„æ­¥éª¤ï¼š\n\nç»™å‡ºä½ æƒ³è§£é‡Šçš„æ•°æ®ç‚¹\nåœ¨è¿™ä¸ªç‚¹é™„è¿‘sampleæ•°æ®ç‚¹\nç”¨çº¿æ€§ï¼ˆæˆ–å…¶ä»–å¯è§£é‡Šæ¨¡å‹ï¼‰fitè¿™äº›ç‚¹\nè§£é‡Šçº¿æ€§æ¨¡å‹\n\né€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œæˆ‘ä»¬å°±èƒ½è¿‘ä¼¼çš„è§£é‡Šæˆ‘ä»¬æ„Ÿå…´è¶£çš„ç‚¹çš„é™„è¿‘åŒºåŸŸå†…ï¼Œæ¨¡å‹çš„è¡Œä¸ºã€‚é—®é¢˜åˆæ¥äº†ï¼Œæˆ‘ä»¬æ€ä¹ˆå®šä¹‰â€œé™„è¿‘â€è¿™ä¸ªæ¦‚å¿µå‘¢ï¼Œæˆ‘ä»¬å¯¹é™„è¿‘çš„å®šä¹‰ä¸åŒï¼Œæˆ‘ä»¬å¾—åˆ°çš„åˆ†æç»“æœå°±ä¸åŒï¼Œå°±åƒä¸Šé¢Local Explanationä¸­è¦†ç›–å›¾ç‰‡çš„æ–¹å—çš„å¤§å°å’Œé¢œè‰²ä¸åŒä¼šå¾—åˆ°ä¸åŒçš„ç»“æœã€‚å¯¹äºä¸Šé¢çš„å›¾ï¼Œå¦‚æœæˆ‘ä»¬æŠŠé™„è¿‘å®šçš„æ¯”è¾ƒå®½æ³›ï¼Œå°±ä¼šå˜æˆè¿™æ ·ï¼š\n\næ˜¾ç„¶ï¼Œå¾—åˆ°çš„çº¿æ€§æ¨¡å‹å°±å¾ˆä¸ä¸€æ ·äº†ã€‚æ‰€ä»¥ç»“è®ºå°±æ˜¯ï¼Œè¿™ä¸ªé™„è¿‘æ˜¯éœ€è¦ä½ è‡ªå·±è°ƒæ•´çš„hyperparameter.\nPSï¼šLIMEé€šå¸¸åªèƒ½ç”¨ä½œå±€éƒ¨è¿‘ä¼¼åˆ†æï¼Œå› ä¸ºå¯è§£é‡Šæ¨¡å‹ä¸€èˆ¬éƒ½å¾ˆç®€å•ï¼Œç®€å•åˆ°ä¸èƒ½æ¨¡æ‹Ÿå¤æ‚æ¨¡å‹çš„è¡Œä¸ºã€‚\n LIME - Image å®è·µ\næ¥ä¸‹æ¥æˆ‘ä»¬å®é™…æŠŠLIMEç”¨ä½œè§£é‡Šä¸€ä¸ªå›¾ç‰‡åˆ†ç±»å™¨ï¼š\n\nRef: https://medium.com/@kstseng/lime-local-interpretable-model-agnostic-explanation-æŠ€è¡“ä»‹ç´¹-a67b6c34c3f8\n\n\n\n\né¦–å…ˆç°æœ‰ä¸€å¼ è¦è§£é‡Šçš„å›¾ç‰‡ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“æ¨¡å‹ä¸ºä»€ä¹ˆæŠŠå®ƒè®¤ä½œæ ‘è›™\n\n\nåœ¨è¿™å¼ å›¾é™„è¿‘sampleä¸€äº›æ•°æ®\næˆ‘ä»¬é€šå¸¸ä¼šç”¨ä¸€äº›toolkitæŠŠå›¾ç‰‡åšä¸€ä¸‹åˆ‡å‰²ï¼Œç„¶åéšæœºçš„ä¸¢æ‰ä¸€äº›å›¾å—ï¼Œå¾—åˆ°çš„æ–°å›¾ç‰‡ä½œä¸ºåŸå›¾ç‰‡é™„è¿‘åŒºåŸŸä¸­çš„æ•°æ®ç‚¹ã€‚\n\n\næŠŠä¸Šè¿°è¿™äº›å›¾ç‰‡è¾“å…¥åŸé»‘ç›’æ¨¡å‹ï¼Œå¾—åˆ°é»‘ç›’çš„è¾“å‡º\n\n\nç”¨çº¿æ€§æ¨¡å‹ï¼ˆæˆ–è€…å…¶ä»–å¯è§£é‡Šæ¨¡å‹ï¼‰fitä¸Šè¿°æ•°æ®\nåœ¨ä¸Šé¢çš„æ —å­ä¸­æˆ‘ä»¬åœ¨åšå›¾ç‰‡è¾¨è¯†ä»»åŠ¡ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯èƒ½åœ¨å°†å›¾ç‰‡ä¸¢åˆ°çº¿æ€§æ¨¡å‹ä¹‹å‰å…ˆåšä¸€ä¸ªç‰¹å¾æŠ½å–ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n\n\nâ€‹\t\tæ ¹æ®ä½ åšçš„ä»»åŠ¡ä¸åŒæœ‰ä¸åŒçš„trickã€‚\n\n\nè§£é‡Šä½ çš„çº¿æ€§æ¨¡å‹\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“çº¿æ€§æ¨¡å‹ç§æŸä¸ªç‰¹å¾ç»´åº¦å¯¹åº”çš„weightï¼š\n\nè¶‹è¿‘äºé›¶ï¼Œè¯´æ˜è¿™ä¸ªsegmentå¯¹æ¨¡å‹åˆ¤å®šæ ‘è›™ä¸é‡è¦\næ­£å€¼ï¼Œè¯´æ˜è¿™ä¸ªsegmentå¯¹æ¨¡å‹åˆ¤å®šæ ‘è›™æœ‰ä½œç”¨\nè´Ÿå€¼ï¼Œè¯´æ˜è¿™ä¸ªsegmentå¯¹æ¨¡å‹åˆ¤å®šæ ‘è›™æœ‰åä½œç”¨\n\n\n\næå®æ¯…è€å¸ˆå®åšï¼š\n\næœºå™¨è®¤ä¸ºå›¾ä¸­25%çš„æ¦‚ç‡æœ‰å’Œæœï¼Œ5%çš„æ¦‚ç‡æœ‰å®éªŒè¢ã€‚ç”¨LIMEåˆ†æä¸€ä¸‹ï¼Œæœºå™¨è®¤ä¸ºå“ªéƒ¨åˆ†æ˜¯å’Œæœï¼Œå“ªéƒ¨åˆ†æ˜¯å®éªŒè¢ã€‚ç»“æœå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ğŸ¤”\n Decision Tree\nä¸Šé¢ä½¿ç”¨çº¿æ€§æ¨¡å‹è§£é‡Šé»‘ç›’æ¨¡å‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„å¯è§£é‡Šçš„ç®€å•æ¨¡å‹æ¥è§£é‡Šï¼Œæ¯”å¦‚å†³ç­–æ ‘ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸ºäº†è®©decision treeæ¨¡ä»¿ä¸€ä¸ªå¤æ‚æ¨¡å‹çš„è¡Œä¸ºï¼Œè€Œè®­ç»ƒå‡ºä¸€ä¸ªå¾ˆæ·±çš„treeï¼Œé‚£å°±æ˜¯æ¬èµ·çŸ³å¤´ç ¸è‡ªå·±çš„è„šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›è®­ç»ƒå‡ºä¸€ä¸ªå¤ªæ·±çš„decision treeï¼Œæˆ‘ä»¬éœ€è¦é™åˆ¶treeçš„æ·±åº¦ã€‚\n\næˆ‘ä»¬å°†æ¨¡æ‹Ÿé»‘ç›’æ¨¡å‹ Î¸Î¸Î¸ çš„å†³ç­–æ ‘æ¨¡å‹å†™ä½œ TÎ¸T_Î¸TÎ¸â€‹ï¼Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸€ä¸ªå‡½æ•° O(TÎ¸)O(T_Î¸)O(TÎ¸â€‹) è¡¨ç¤º TÎ¸T_Î¸TÎ¸â€‹ æœ‰å¤šå¤æ‚ï¼Œæ¯”å¦‚è¯´è¿™ä¸ªå‡½æ•°å¯ä»¥ç”¨ TÎ¸T_Î¸TÎ¸â€‹ çš„å¹³å‡æ·±åº¦è¡¨ç¤ºã€‚æˆ‘ä»¬ç°åœ¨å¸Œæœ›å¤æ‚æ¨¡å‹æ‰¾åˆ°ä¸€ä¸ªå†³ç­–æ ‘ï¼ŒåŒæ—¶å¸Œæœ›è¿™ä¸ªå†³ç­–æ ‘çš„å¤æ‚åº¦å°ï¼Œæ€ä¹ˆåšè¿™ä»¶äº‹å‘¢ï¼Œçœ‹çœ‹ä¸‹é¢è¿™ä¸ªworkï¼š\n\nhttps://arxiv.org/pdf/1711.06178.pdf\n\n\næƒ³æ³•æ˜¯ï¼šæˆ‘ä»¬æ¥è®­ç»ƒä¸€ä¸ªç‰¹åˆ«çš„ç¥ç»ç½‘ç»œï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒè¿™ä¸ªç¥ç»ç½‘ç»œæ—¶å°±è€ƒè™‘åˆ°å®ƒå°†æ¥è¦è¢«å†³ç­–æ ‘åˆ†æï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒå®ƒæœ¬èº«çš„å‚æ•°æ—¶ï¼ŒåŒæ—¶è¦è€ƒè™‘åˆ°æœ€å°åŒ–åé¢ç”¨æ¥åˆ†æå®ƒçš„å†³ç­–æ—¶çš„å¤æ‚åº¦ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æŸå¤±å‡½æ•°ç§åŠ å…¥ O(TÎ¸)O(T_Î¸)O(TÎ¸â€‹) ä½œä¸ºregularizationï¼Œè¿™ä¸ªä¸œè¥¿ä¹Ÿå¯å«åštreeçš„regularizationã€‚\nä½†æ˜¯è¿™ä¸ª O(TÎ¸)O(T_Î¸)O(TÎ¸â€‹) æ˜¯ä¸å¯å¾®åˆ†çš„ï¼Œæ€ä¹ˆåšæ¢¯åº¦ä¸‹é™å‘¢ï¼Ÿè¿™ä¹Ÿæ˜¯è¿™ç¯‡æ–‡ç« ç¥å¥‡çš„åœ°æ–¹ï¼Œä½œè€…è¯´ä»–trainäº†ä¸€ä¸ªç¥å¥‡çš„ç¥ç»ç½‘ç»œï¼Œæˆ‘ä»¬å¯ä»¥ç»™è¿™ä¸ªç¥ç»ç½‘ç»œå¦ä¸€ä¸ªç¥ç»ç½‘ç»œçš„å‚æ•°ï¼Œå®ƒå°±å¯ä»¥è¾“å‡ºä¸€ä¸ªæ•°å€¼ï¼Œæ¥è¡¨ç¤ºè¾“å…¥çš„ç½‘ç»œçš„å¤æ‚åº¦ã€‚æ‰€ä»¥æˆ‘ä»¬åªè¦ç”¨è¿™ä¸ªç¥å¥‡çš„ç½‘ç»œï¼Œæ›¿æ¢æ ‘æ­£åˆ™é¡¹ï¼Œå°±å¯ä»¥åšæ¢¯åº¦ä¸‹é™äº†ã€‚å…¶å®ï¼Œæ–‡ä¸­æè¿°çš„è¿™ä¸ªç¥å¥‡çš„ç¥ç»ç½‘ç»œåªæ˜¯ä¸€ä¸ªç®€å•çš„å‰åé¦ˆç¥ç»ç½‘ç»œè€Œå·²ã€‚è¿™ä¸ªç½‘ç»œè¿˜è›®å‡†ç¡®çš„é¢„æµ‹åˆ°è¾“å…¥çš„ç½‘ç»œå¦‚æœç”¨decision treeæ¨¡æ‹Ÿæ—¶ï¼Œdecision treeçš„æ·±åº¦ğŸ˜®ã€‚\nè¿™ä¸ªç¥å¥‡çš„ç½‘ç»œæ€ä¹ˆæ¥å‘¢ï¼Ÿè®­ç»ƒè¿™ä¸ªç¥å¥‡çš„ç½‘ç»œï¼Œå¯ä»¥é€šè¿‡æˆ‘ä»¬è‡ªå·±randomçš„ç”Ÿæˆä¸€äº›NNï¼Œç„¶åç”¨DTæ¨¡æ‹Ÿè¿™äº›NNï¼Œå†æŠŠNNå’ŒDTçš„æ·±åº¦åšä¸ºæ ·æœ¬ï¼Œtrainå‡ºè¿™ä¸ªç¥å¥‡çš„ç¥ç»ç½‘ç»œã€‚\nç»†èŠ‚å¯ä»¥å‚è€ƒä¸Šè¿°æ–‡çŒ®ã€‚\n","categories":["æå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°"],"tags":["ML","note","Next-Step-of-ML"]},{"title":"Attack and Defense","url":"https://ch3nye.top/Attack-and-Defense/","content":" Attack and Defense\nè¿™é‡Œçš„æ”»å‡»å’Œé˜²å¾¡æ˜¯æŒ‡é’ˆå¯¹äººå·¥æ™ºèƒ½æˆ–è€…è¯´æœºå™¨å­¦ä¹ çš„æ¨¡å‹çš„æ”»å‡»ä¸é˜²å¾¡ã€‚\n Motivation\nåšæ”»å‡»ä¸é˜²å¾¡çš„åŠ¨æœºæ˜¯ä»€ä¹ˆï¼Ÿ\n\næˆ‘ä»¬æƒ³æŠŠæœºå™¨å­¦ä¹ æŠ€æœ¯åº”ç”¨åˆ°å®é™…ç”Ÿæ´»ä¸­\nç›®å‰çš„æœºå™¨å­¦ä¹ æ¨¡å‹åœ¨å¤šæ•°æƒ…å†µä¸‹å¯¹å™ªå£°çš„å¹²æ‰°æŠ—æ€§ä¸è¶³\næˆ‘å¸Œæœ›æœºå™¨å­¦ä¹ çš„æ¨¡å‹ä¸ä»…èƒ½å¤Ÿå¯¹æŠ—ä¸€èˆ¬çš„å™ªå£°å¹²æ‰°ï¼ŒåŒæ—¶è¿˜èƒ½å¯¹æŠ—æ¥è‡ªäººç±»çš„æ¶æ„æ”»å‡»çš„å™ªå£°\nç‰¹åˆ«æ˜¯å¯¹äºç”¨æ¥åšåƒåœ¾é‚®ä»¶åˆ†ç±»ã€æ¶æ„è½¯ä»¶æ£€æµ‹ã€ç½‘ç»œå…¥ä¾µæ£€æµ‹ç­‰ä»»åŠ¡çš„æ¨¡å‹ï¼Œæˆ‘ä»¬æ›´åŠ éœ€è¦è®©è¿™æ ·çš„æ¨¡å‹å¥å£®èµ·æ¥ã€‚\n\n Attack\nå…¶å®ï¼Œç›®å‰å¤šæ•°çš„æ¨¡å‹éƒ½æ˜¯æ¯”è¾ƒå®¹æ˜“è¢«æ”»å‡»ï¼Œè€Œå¾€å¾€é˜²å¾¡æ”»å‡»æ˜¯æ¯”è¾ƒå›°çš„ã€‚\n What do we want to do?\næˆ‘ä»¬åˆ°åº•è¦åšçš„æ˜¯æ€ä¹ˆæ ·çš„æ”»å‡»å‘¢ï¼Œè¿™é‡Œä¸¾ä¸€ä¸ªæ —å­ï¼š\n\nè¿™é‡Œæœ‰ä¸€ä¸ªå›¾ç‰‡è¾¨è¯†çš„æ¨¡å‹ï¼Œä½ ç»™å®ƒä¸€å¼ çŒ«ğŸ±ç‰‡ï¼Œä»–å°±å‘Šè¯‰ä½ è¿™å¼ å›¾ç‰‡æ˜¯ä¸€åªçŒ«ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ç°åœ¨æˆ‘ä»¬è¦åšçš„äº‹æ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨å›¾ç‰‡ xxx ä¸ŠåŠ ä¸Šæ”»å‡»è€…ç‰¹åˆ¶çš„å™ªå£° Î”xÎ”xÎ”x ï¼Œä½¿å¾—æœºå™¨è®¤ä¸å‡ºè¿™å¼ å›¾ç‰‡ï¼Œæˆ–è€…æœºå™¨ä¼šæŠŠè¿™å¼ å›¾ç‰‡è®¤æˆå¦ä¸€ç§æ”»å‡»è€…æŒ‡å®šçš„ç±»åˆ«ã€‚ç±»ä¼¼è¿™æ ·çš„åšæ³•å°±å«åšå¯¹æ¨¡å‹çš„å¯¹æŠ—æ ·æœ¬æ”»å‡»(Adversarial Attack)ã€‚\n Loss Function for Attack\næˆ‘ä»¬é€šå¸¸åœ¨trainè¿™æ ·çš„modelçš„æ—¶å€™ä¼šminimizeä¸€ä¸ªæŸå¤±å‡½æ•°ï¼Œæˆ‘ä»¬å¸Œæœ›æ¨¡å‹çš„è¾“å‡ºèƒ½å’ŒçœŸæ­£çš„æ ‡ç­¾å°½å¯èƒ½ç›¸åŒï¼š\n\nç°åœ¨æˆ‘ä»¬è¦å¯¹æ¨¡å‹è¿›è¡Œæ”»å‡»ï¼Œæ”»å‡»åˆ†æˆä¸¤ç§ï¼šæœ‰ç›®æ ‡çš„æ”»å‡»å’Œæ— ç›®æ ‡çš„æ”»å‡»ã€‚\n Non-targeted Attack\næ— ç›®æ ‡çš„æ”»å‡»çš„æ¦‚å¿µæ˜¯è¿™æ ·çš„ï¼šæˆ‘ä»¬è¦æ‰¾ä¸€ä¸ª xâ€²x&#x27;xâ€² ä½¿å…¶è¾“å…¥åˆ°æ¨¡å‹åäº§ç”Ÿçš„è¾“å‡ºèƒ½å’Œ ytruey^{true}ytrue è¶Šè¿œè¶Šå¥½ï¼ˆå¯ä»¥ä½¿ç”¨å„ç§è¡¡é‡æ–¹æ³•ï¼Œæ¯”å¦‚äº¤å‰ç†µcross entropyï¼‰ã€‚\n\nè¿™ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯éœ€è¦è®­ç»ƒçš„ï¼Œä¸è¿‡å’ŒåŸæ¥è®­ç»ƒæ¨¡å‹çš„æ–¹å¼ä¸åŒï¼Œæˆ‘ä»¬ç°åœ¨è¦fixedä½æ¨¡å‹çš„å‚æ•° Î¸Î¸Î¸ ï¼Œå»è°ƒæ•´ xxx ï¼Œä½¿å¾—æ¨¡å‹è¾“å‡º yâ€²y&#x27;yâ€² å’Œæ­£ç¡®å€¼ ytruey^{true}ytrue è¶Šè¿œè¶Šå¥½ï¼Œæ‰€ä»¥æŸå¤±å‡½æ•°å¯ä»¥å®šä¹‰ä¸ºï¼š\nL(xâ€²)=âˆ’C(yâ€²,ytrue)L(x&#x27;) = -C(y&#x27;, y^{true})\nL(xâ€²)=âˆ’C(yâ€²,ytrue)\n Targeted-Attack\næœ‰ç›®æ ‡æ”»å‡»çš„æ¦‚å¿µæ˜¯è¿™æ ·çš„ï¼šæˆ‘ä»¬è¦æ‰¾ä¸€ä¸ª xâ€²x&#x27;xâ€² ä½¿å…¶è¾“å…¥åˆ°æ¨¡å‹åäº§ç”Ÿçš„è¾“å‡ºèƒ½å’Œæ”»å‡»è€…æŒ‡å®šçš„é”™è¯¯è¾“å‡º yfalsey^{false}yfalse è¶Šè¿‘è¶Šå¥½ï¼ˆå¯ä»¥ä½¿ç”¨å„ç§è¡¡é‡æ–¹æ³•ï¼Œæ¯”å¦‚äº¤å‰ç†µcross entropyï¼‰ã€‚\n\nåŒä¸Šï¼Œæœ‰ç›®æ ‡çš„æ”»å‡»ä¹Ÿæ˜¯éœ€è¦è®­ç»ƒçš„ï¼Œä¸€æ ·çš„è¦fixedä½æ¨¡å‹çš„å‚æ•° Î¸Î¸Î¸ ï¼Œå»è°ƒæ•´ xxx ï¼Œä½¿å¾—æ¨¡å‹è¾“å‡º yâ€²y&#x27;yâ€² å’Œæ­£ç¡®å€¼ ytruey^{true}ytrue è¶Šè¿œè¶Šå¥½ï¼ŒåŒæ—¶ yâ€²y&#x27;yâ€² èƒ½å’ŒæŒ‡å®šçš„é”™è¯¯è¾“å‡º yfalsey^{false}yfalse è¶Šè¿‘è¶Šå¥½ï¼Œæ‰€ä»¥æŸå¤±å‡½æ•°å¯ä»¥å®šä¹‰ä¸ºï¼š\nL(xâ€²)=âˆ’C(yâ€²,ytrue)+C(yâ€²+yfalse)L(x&#x27;) = -C(y&#x27;, y^{true}) + C(y&#x27; + y^{false})\nL(xâ€²)=âˆ’C(yâ€²,ytrue)+C(yâ€²+yfalse)\nä½†æ˜¯å¦‚æœ xâ€™xâ€™xâ€™ å’ŒåŸæ¥çš„å›¾ç‰‡å·®å¤ªå¤šé‚£å°±æ²¡ä»€ä¹ˆæ„ä¹‰äº†ï¼Œäººä¸€çœ¼å°±å¯ä»¥çœ‹å‡ºè¿™å¼ å›¾è¢«ä¿®æ”¹è¿‡ï¼Œç”šè‡³éƒ½çœ‹ä¸å‡ºå®ƒåŸæ¥çš„æ ·å­äº†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé™åˆ¶æ¡ä»¶ï¼Œè®© x0x^0x0 å’Œ xâ€²x&#x27;xâ€² å°½å¯èƒ½ç›¸åŒï¼Œè®©äººè®¤ä¸ºæ¶æ„æ ·æœ¬å’ŒåŸå§‹æ ·æœ¬çœ‹èµ·æ¥ç›¸åŒï¼Œéª—è¿‡äººç±»ğŸ˜ã€‚æˆ‘ä»¬çš„æƒ³æ³•æ˜¯å¦‚æœè¿™ä¸¤è€…ä¹‹é—´çš„å·®è·å°åˆ°ä¸€ä¸ªé˜ˆå€¼ï¼Œäººå°±ä¸ä¼šå‘ç°ï¼Œæ‰€ä»¥Constraintå¯ä»¥å½¢å¼åŒ–çš„å†™æˆï¼š\nd(x0,xâ€²)â‰¤Îµd(x^0,x&#x27;) \\le Îµ\nd(x0,xâ€²)â‰¤Îµ\n Constraint\nè¿™ä¸ªçº¦æŸçš„distanceåº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿè¿™é‡Œä¸¾ä¸¤ä¸ªæ —å­ï¼š\n\n L2-norm\näºŒèŒƒæ•°å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒæŒºå¥½ç®—çš„ï¼Œå°±æ˜¯å–ä¸¤è€…ä¹‹å·®çš„å¹³æ–¹å’Œã€‚\n L-infinity\nLâˆL_\\inftyLâˆâ€‹ èŒƒæ•°å¯ä»¥ç†è§£ä¸ºå–æ‰€æœ‰å·®å€¼ä¸­æœ€å¤§çš„ä¸€ä¸ªã€‚\nå¯¹äºä¸åŒçš„æ¨¡å‹æ”»å‡»æ—¶ä½¿ç”¨çš„distanceåº”è¯¥æ˜¯ä¸åŒçš„ï¼Œè¦é€‰æ‹©åˆé€‚çš„æ–¹æ³•å»åšï¼ˆæ ¹æ®äººç±»çš„æ„ŸçŸ¥ï¼Œæ¥åˆ¤æ–­æŸä¸ªè®¡ç®—distanceçš„æ–¹æ³•æ˜¯å¦åˆé€‚ï¼‰ã€‚\nä¸Šå›¾ä¸­å››ä¸ªé¢œè‰²çš„æ–¹å—ï¼Œåˆ†åˆ«ä½¿ç”¨äº†ä¸¤ç§ä¸åŒçš„æ–¹æ³•è¿›è¡Œäº†ä¿®æ”¹ï¼Œç»™æ¯ä¸€ä¸ªpixelä¸€ç‚¹ç‚¹ä¿®æ”¹ï¼Œç»™ä¸€ä¸ªpixelæ¯”è¾ƒå¤§çš„ä¿®æ”¹ã€‚å½©è‰²çš„å››ä¸ªæ–¹å—ï¼Œæ‰€ä»¥å…¶å® xxx æœ‰12ä¸ªåˆ†é‡ï¼Œè°ƒæ•´åçš„ä¸¤ä¸ªå›¾ç‰‡çš„äºŒèŒƒæ•°distanceè®¡ç®—å‡ºæ¥çš„å€¼å…¶å®æ—¶ä¸€æ ·çš„ï¼Œä½†æ˜¯å°±äººç±»çš„æ„Ÿå®˜æ¥çœ‹ï¼Œä¼¼ä¹å³ä¸‹è§’çš„å›¾ç‰‡èƒ½çœ‹å‡ºæ¥ç»¿è‰²æ›´æ·±äº†ã€‚æˆ‘ä»¬å†ç”¨æ— ç©·èŒƒæ•°ç®—ä¸€ä¸‹ï¼Œå‘ç°å³ä¸‹è§’çš„distanceæ˜¯å¤§çš„ï¼Œå³ä¸Šè§’åˆ™è¾ƒå°ã€‚æ‰€ä»¥è¯´ï¼Œä¼¼ä¹äºŒèŒƒæ•°è®¡ç®—distanceä¸èƒ½å¾ˆå¥½çš„ååº”äººç±»åœ¨å›¾ç‰‡ä¸Šçš„æ„ŸçŸ¥ã€‚\n How to Attack\næ”»å‡»çš„è¿‡ç¨‹å¦‚ä¸Šé¢æ‰€è¯´çš„ï¼Œå°±å’Œè®­ç»ƒç¥ç»ç½‘ç»œçš„æ˜¯ç›¸ä¼¼çš„ï¼Œåªä¸è¿‡æ˜¯fixä½å‚æ•°ï¼Œæ ¹æ®æ¢¯åº¦ä¸‹é™æ”¹å˜è¾“å…¥ï¼Œæ‰¾åˆ°ä¸€ä¸ª xâˆ—x^*xâˆ— æ»¡è¶³æˆ‘ä»¬çš„ç›®çš„è€Œå·²ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç”¨ä»¥ä¸‹æ–¹ç¨‹æè¿°ï¼š\nxâˆ—=argminâ¡d(x0,xâ€²)â‰¤ÎµL(xâ€²)x^* = arg\\min_{d(x^0,x&#x27;) \\le Îµ} L(x&#x27;)\nxâˆ—=argd(x0,xâ€²)â‰¤Îµminâ€‹L(xâ€²)\nè¿™é‡Œæœ‰ä¸ªé™åˆ¶ï¼Œä¼¼ä¹ä¼šæ„Ÿåˆ°å›°æƒ‘ï¼Œå› ä¸ºä¸€èˆ¬çš„æ¨¡å‹è®­ç»ƒä¸­æ˜¯æ²¡æœ‰é™åˆ¶çš„ã€‚æ²¡å…³ç³»è¿™ä¸ªå¾ˆå¥½å¤„ç†çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\næˆ‘ä»¬å°†åŸå§‹çš„ x0x_0x0â€‹ ä½œä¸ºåˆå§‹å€¼ï¼Œç”¨è®¡ç®—æ¢¯åº¦ï¼Œç„¶åæ›´æ–°è¾“å…¥ä¸º xtx^txt ï¼Œç„¶ååšä¸ªåˆ¤æ–­ï¼Œçœ‹çœ‹ xtx^txt å’Œ x0x^0x0 ä¹‹é—´çš„è·ç¦»æ˜¯å¦å¤§è¿‡é˜ˆå€¼ï¼Œå¦‚æœè¶…è¿‡çš„è¯å°±ä¿®æ­£ä¸€ä¸‹è¾“å…¥ï¼Œè®©è¾“å…¥ç¬¦åˆconstraintï¼Œå¦åˆ™å°±ç»§ç»­ã€‚é‚£æ€ä¹ˆä¿®æ­£å‘¢ï¼Œè¿™ä¸ªfixå‡½æ•°å¯ä»¥è¿™æ ·åšï¼š\n\nfit()ï¼šå¯¹äºæ‰€æœ‰ç¬¦åˆconstraintçš„ xxx æˆ‘ä»¬è¿”å›ä¸€ä¸ªæœ€æ¥è¿‘ xtx^txt çš„å°±å¯ä»¥äº†ã€‚\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¯¹äºäºŒèŒƒæ•°è¡¡é‡distanceï¼Œå°±æ˜¯åœ¨ x0x^0x0 ä¸ºåœ†å¿ƒï¼ŒÎµ ä¸ºåŠå¾„çš„åœ†å†…æ‰¾ä¸€ä¸ªæœ€æ¥è¿‘ xtx^txt çš„è¾“å…¥æ›¿ä»£ xtx^txt ï¼Œå¦‚æœè¶…å‡ºäº†å°±æ‰¾åœ†å¿ƒå’Œè¶…å‡ºçš„ç‚¹æ‰€åœ¨ç›´çº¿ä¸åœ†çš„äº¤ç‚¹æ›¿æ¢å°±å¯ä»¥äº†ï¼›å¯¹äºæ— ç©·èŒƒæ•°è¡¡é‡distanceï¼Œå°±æ˜¯åœ¨ä»»æ„æ–¹å‘ä¸Šéƒ½ä¸å¯ä»¥è¶…å‡º Îµ è¿œçš„è·ç¦»ï¼Œå¦‚æœè¶…å‡ºäº†å°±åœ¨å„ä¸ªç»´åº¦ä¸Šéƒ½æ‹½åˆ°è¾¹ç•Œå€¼ä¸Šå°±å¯ä»¥äº†ã€‚å›¾ä¸­æ˜¯äºŒç»´çš„ï¼Œå®é™…ä¸Šå°±ä¸Šè¿°å°æ–¹å—æ¥è¯´æ˜¯12ç»´çš„ï¼ŒçœŸå®çš„æ¨¡å‹é€šå¸¸æ˜¯ä¸Šä¸‡ç»´çš„ã€‚\n Example-å®è·µ\nä½¿ç”¨ä¸Šè¿°çš„æ–¹æ³•ï¼Œåœ¨ResNet-50è¿™ä¸ªæ¨¡å‹ä¸ŠåšTargeted-Attackå®éªŒï¼ŒåŸæœ¬æ˜¯ä¸€å¼ Tiger catçš„å›¾ç‰‡ï¼Œyfalsey^{false}yfalse å®šä¸ºStar Fishï¼Œupdate 50æ¬¡å‚æ•°çš„æ”»å‡»æ•ˆæœå¦‚ä¸‹ï¼š\n\næ•ˆæœæ˜¯é’ˆä¸æˆ³ã€‚æˆ‘ä»¬çœ‹çœ‹ä¸¤å¼ å›¾ç‰‡çš„å·®å¼‚ï¼Œå› ä¸ºå·®å¼‚å¤ªå°è‚‰çœ¼éš¾ä»¥çœ‹è§ï¼Œæ‰€ä»¥çœ‹çœ‹x50å€çš„æ•ˆæœï¼š\n\nä¸Šé¢æˆ‘ä»¬å åŠ ä¸Šå»çš„å™ªå£°æ˜¯æˆ‘ä»¬ç²¾å¿ƒæ„é€ çš„ï¼Œé‚£æˆ‘ä»¬éšæœºåŠ ä¸€äº›å™ªå£°ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™äº›å™ªå£°éƒ½æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„ï¼Œä½†æ˜¯å‰ä¸¤å¼ éƒ½è¢«æ¯”è¾ƒæ­£ç¡®çš„è¯†åˆ«å‡ºæ¥äº†ï¼Œè‡³å°‘éƒ½è¿˜æ˜¯catğŸ±ï¼Œå½“æˆ‘ä»¬å åŠ çš„å™ªå£°ååˆ†å¤¸å¼ æ—¶æœºå™¨æ‰æ²¡åŠæ³•è¾¨è¯†è¿™ä¸ªå›¾ç‰‡ã€‚\n What happendï¼Ÿ\næ€»ç»“ä¸€ä¸‹ï¼Œå…¶å®æ¨¡å‹å¾ˆå®¹æ˜“å°±èƒ½è¢«attackã€‚ä½†æ˜¯è¿™ä»¶äº‹ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥è§£é‡Šä¸€ä¸‹ï¼š\n\næˆ‘ä»¬å¯ä»¥è¿™æ ·è§£é‡Šï¼Œä½ å¯ä»¥æƒ³è±¡ x0x^0x0 æ˜¯åœ¨éå¸¸é«˜ç»´ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹ï¼Œä½ æŠŠè¿™ä¸ªç‚¹éšæœºçš„ç§»åŠ¨ï¼Œä½ ä¼šå‘ç°å¤šæ•°æƒ…å†µä¸‹åœ¨è¿™ä¸ªç‚¹çš„é™„è¿‘å¾ˆå¤§ä¸€ä¸ªèŒƒå›´å†…éƒ½æ˜¯èƒ½æ­£ç¡®è¾¨è¯†çš„ç©ºé—´ï¼Œå½“ä½ æŠŠè¿™ä¸ªç‚¹æ¨åˆ°çš„å¾ˆè¿œçš„æ—¶å€™æ‰ä¼šè®©æœºå™¨è¯†åˆ«æˆç±»ä¼¼çš„äº‹ç‰©ï¼Œå½“ä½ æŠŠå®ƒæ¨çš„éå¸¸è¿œæ—¶æ‰ä¼šè¢«è¾¨è¯†æˆä¸ç›¸å…³çš„äº‹ç‰©ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€äº›ç¥å¥‡ç»´åº¦ï¼Œåœ¨è¿™äº›ç¥å¥‡çš„ç»´åº¦ä¸Š x0x^0x0 çš„æ­£ç¡®åŒºåŸŸåªæœ‰éå¸¸ç‹­çª„çš„ä¸€ç‚¹ç‚¹ï¼Œæˆ‘ä»¬åªè¦å°† x0x^0x0 æ¨ç¦»åŸå€¼ä¸€ç‚¹ç‚¹ï¼Œå°±ä¼šè®©æ¨¡å‹è¾“å‡ºäº§ç”Ÿå¾ˆå¤§çš„å˜åŒ–ã€‚\næ€»ç»“è¿™ä¸ªç°è±¡å°±æ˜¯åœ¨æŸä¸€äº›ç»´åº¦ä¸Šæ­£ç¡®åŸŸæ˜¯å¾ˆç‹­çª„çš„ï¼Œåªè¦åœ¨è¿™äº›ç»´åº¦ä¸Šæ¨ç¦»ä¸€ç‚¹ç‚¹å°±ä¼šè®©æœºå™¨åˆ¤æ–­å‡ºé”™ã€‚ä¸Šè¿°è¯´æ³•åªæ˜¯åœ¨ç°è±¡ä¸Šè§£é‡Šï¼Œå‡ºç°äº†ä»€ä¹ˆæ ·çš„æƒ…å†µï¼Œä½†æ˜¯æ²¡èƒ½çœŸæ­£çš„å¼„æ¸…æ¥šè¿™ä¸ªç°è±¡æ˜¯æ€ä¹ˆå‡ºç°çš„ï¼Œå…¶èƒŒåçš„åŸç†æ˜¯ä»€ä¹ˆã€‚\n Attack Approaches\nå¯ä¾›å‚è€ƒçš„æ–¹æ³•ï¼š\n\n\nFGSM (https://arxiv.org/abs/1412.6572)\n\n\nBasic iterative method (https://arxiv.org/abs/1607.02533)\n\n\nL-BFGS (https://arxiv.org/abs/1312.6199)\n\n\nDeepfool (https://arxiv.org/abs/1511.04599)\n\n\nJSMA (https://arxiv.org/abs/1511.07528)\n\n\nC&amp;W (https://arxiv.org/abs/1608.04644)\n\n\nElastic net attack (https://arxiv.org/abs/1709.04114)\n\n\nSpatially Transformed (https://arxiv.org/abs/1801.02612)\n\n\nOne Pixel Attack (https://arxiv.org/abs/1710.08864)\n\n\nâ€¦â€¦ only list a few\n\n\næœ‰å¾ˆå¤šäº”èŠ±å…«é—¨çš„ä¸åŒçš„æ”»å‡»æ–¹æ³•ï¼Œä½†æ˜¯è¿™äº›æ”»å‡»æ–¹æ³•å¾€å¾€ä¸åŒä¹‹å¤„å°±åœ¨äºä½¿ç”¨ä¸åŒçš„distanceæµ‹é‡æ–¹æ³•ä½œä¸ºconstraintï¼Œè¿˜æœ‰ä½¿ç”¨ä¸åŒçš„ä¼˜åŒ–Lossçš„æ–¹æ³•ï¼š\n\nFGSMï¼ˆFast Gradient Sign Methodï¼‰å¯èƒ½ä¸æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„æ–¹æ³•ï¼Œä½†æ˜¯ä»–ç¡®å®æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„æ–¹æ³•ã€‚ä»–çš„åšæ³•å¦‚ä¸Šå›¾è“æ¡†æ¡†æ‰€ç¤ºï¼Œæˆ‘ä»¬åªè¦æŠŠ x0x^0x0 å‡å»ä¸€ä¸ª ÎµÎ”xÎµÎ”xÎµÎ”x å°±ç®—å®Œäº†ã€‚è¿™ä¸ª Î”xÎ”xÎ”x å°±æ˜¯Losså¯¹ xxx çš„åå¾®åˆ†çš„æ­£è´Ÿã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœ âˆ‚L/âˆ‚x1\\partial L/\\partial x_1âˆ‚L/âˆ‚x1â€‹ æ˜¯æ­£çš„ï¼Œé‚£æˆ‘ä»¬å°±åœ¨ x0x^0x0 çš„ç¬¬ä¸€ç»´å‡æ‰ä¸€ä¸ª Îµ ï¼Œåä¹‹åˆ™åŠ ä¸Š Îµ ã€‚è¿™ä¸ªæ–¹æ³•å°±åƒä¸€æ‹³è¶…äººä¸€æ ·ï¼Œåªè¦æ”»å‡»ä¸€æ¬¡å°±è¾¾æˆç›®æ ‡ã€‚\nå…¶å®ï¼Œå¤šæ”»å‡»å‡ æ¬¡åœ¨æ–‡çŒ®ä¸­çš„ç»“æœçœ‹æ¥æ•ˆæœæ˜¯æ›´å¥½çš„ï¼Œè¿™ç§æ”»å‡»å«åš Iterative FGSMï¼Œè¿™é‡Œä¸å±•å¼€ã€‚\næˆ‘ä»¬æ¥ç›´è§‚çš„è§£é‡Šä¸€ä¸‹FGSMï¼š\n\nå½“æˆ‘ä»¬æ›´æ–°è¾“å…¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªè¦æ‰¾åˆ°æ¢¯åº¦çš„æ–¹å‘ï¼Œå°±æŠŠè¾“å…¥æœå‘æ¢¯åº¦çš„åæ–¹å‘æ›´æ–°ä¸€ä¸ªÎµï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨ä¸Šå›¾äºŒç»´å¹³é¢ä¸Šï¼Œå¦‚æœæ¢¯åº¦æŒ‡å‘å·¦ä¸‹è§’ï¼Œä¸ç®¡å®ƒæŒ‡å‘å·¦ä¸‹è§’å…·ä½“å“ªä¸ªè§’åº¦ï¼Œæˆ‘ä»¬éƒ½ä¼šå°†å‚æ•°æ›´æ–°åˆ°æ©™è‰²çš„ç‚¹ã€‚è€Œå¦‚æœç”¨åŸæ¥çš„æ–¹æ³•æˆ‘ä»¬å°±ä¼šæ›´æ–°åˆ°æ¢¯åº¦æ–¹å‘çš„åæ–¹å‘ä¸Šï¼Œæ¯”å¦‚ç‚¹ x1x^1x1 ï¼Œå¾ˆå¯èƒ½æ˜¯ä¸ä¼šè¶…å‡ºconstraintçš„æ–¹æ¡†çš„ã€‚ä½ å¯ä»¥ç†è§£æˆFGSMæ˜¯åœ¨ä½¿ç”¨ä¸€ä¸ªå·¨å¤§çš„learning rateï¼Œå¤§åˆ°ä¸€æ¬¡updateå°±ä¼šç›´æ¥è·³å‡ºconstraintï¼Œæˆ‘ä»¬å†ä½¿ç”¨fitå‡½æ•°å°†è·‘å‡ºè¾¹ç•Œçš„ç‚¹æ‹‰å›åˆ°è¾¹ç•Œçš„è§’è§’ä¸Šã€‚\n White Box v.s. Black Box\nä¸Šè¿°çš„æ”»å‡»æ–¹æ³•ï¼Œæˆ‘ä»¬éƒ½æ˜¯fixä½ç¥ç»ç½‘ç»œçš„å‚æ•°å»æ‰¾ xâ€²x&#x27;xâ€² . ä¹Ÿå°±æ˜¯è¯´è¦æƒ³æ”»å‡»æ¨¡å‹ï¼Œæˆ‘ä»¬å¿…é¡»çŸ¥é“æ¨¡å‹çš„æ‰€æœ‰å‚æ•° Î¸Î¸Î¸ ï¼Œæ­¤ç±»æ”»å‡»æˆ‘ä»¬ç§°ä¸ºç™½ç›’æ”»å‡»ã€‚é‚£å¦‚æœæˆ‘ä»¬ä¸æŠŠæ¨¡å‹æ³„éœ²å‡ºå»ï¼Œè¿™æ ·å°±å®‰å…¨äº†å—ï¼Ÿä¹Ÿä¸ä¼šç™¾åˆ†ç™¾å®‰å…¨ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜å¯ä»¥é‡‡å–é»‘ç›’æ”»å‡»ã€‚ğŸ˜\né‚£é»‘ç›’æ”»å‡»æ€ä¹ˆåšå‘¢ï¼Ÿ\n Black Box Attack\nç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªå›¾ç‰‡è¾¨è¯†æ¨¡å‹ï¼Œå®Œå…¨ä¸çŸ¥é“è¿™ä¸ªæ¨¡å‹çš„å‚æ•°å’Œå†…éƒ¨ç»“æ„ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬èƒ½æ‹¿åˆ°è¿™ä¸ªæ¨¡å‹è®­ç»ƒä½¿ç”¨çš„corpusï¼ˆæ•°æ®é›†ï¼Œè¯­æ–™åº“ï¼‰ã€‚\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªæ•°æ®é›†è‡ªå·±è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œç§°ä¸ºproxy networkã€‚ç„¶åï¼Œæˆ‘ä»¬ç”¨ä¸Šè¿°çš„å¯¹æŠ—æ ·æœ¬çš„æ–¹æ³•æ”»å‡»è¿™ä¸ªä»£ç†æ¨¡å‹ï¼Œå¾—åˆ°ä¸€ä¸ªtriggerï¼ˆæ¶æ„æ ·æœ¬ï¼‰ï¼Œç”¨è¿™ä¸ªæ¶æ„æ ·æœ¬å»æ”»å‡»åŸæ¨¡å‹ã€‚ç¥å¥‡çš„æ˜¯ï¼Œè¿™ç§æ–¹æ³•å¾€å¾€èƒ½å¤ŸæˆåŠŸã€‚\n\nhttps://arxiv.org/pdf/1611.02770.pdf\n\næˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªæ–¹æ³•çš„å®éªŒç»“æœï¼Œå¼•ç”¨è‡ªä¸Šè¿°è®ºæ–‡ï¼š\n\nå€¼æè¿°çš„æ˜¯æ¨¡å‹è¾¨è¯†æ­£ç¡®çš„æ¦‚ç‡ï¼Œä¹Ÿå°±æ˜¯æ”»å‡»å¤±è´¥çš„æ¦‚ç‡ã€‚ä¸Šè¿°äº”ç§ç¥ç»ç½‘ç»œçš„æ¶æ„æ˜¯ä¸ä¸€æ ·çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å³ä½¿æ˜¯ä¸åŒæ¶æ„çš„æ¨¡å‹æ”»å‡»æˆåŠŸçš„æ¦‚ç‡ä¹Ÿæ˜¯éå¸¸é«˜çš„ï¼Œè€Œç›¸åŒçš„æ¶æ„çš„æ¨¡å‹æ”»å‡»æˆåŠŸç‡åˆ™æ˜æ˜¾æ˜¯æ›´é«˜çš„ã€‚\n Universal Adversarial Attack\næ ¸å¿ƒç²¾ç¥æ˜¯æ‰¾ä¸€ä¸ªé€šç”¨çš„æ”»å‡»å‘é‡ï¼Œå°†å…¶å åŠ åˆ°ä»»æ„æ ·æœ¬ä¸Šéƒ½ä¼šè®©æ¨¡å‹è¾¨è¯†å‡ºé”™ã€‚\n\nhttps://arxiv.org/abs/1610.08401\n\n\nè¿™ä»¶äº‹åšæˆä»¥åï¼Œä½ å¯ä»¥æƒ³è±¡ï¼Œåªè¦åœ¨åšè¾¨è¯†ä»»åŠ¡çš„æ‘„åƒæœºå‰é¢è´´ä¸€å¼ å™ªå£°ç…§ç‰‡ï¼Œå°±å¯ä»¥è®©æ‰€æœ‰ç»“æœéƒ½å‡ºé”™ğŸ˜®ã€‚å¦å¤–ï¼Œè¿™ä¸ªé€šç”¨æ”»å‡»ç”šè‡³ä¹Ÿå¯ä»¥åšä¸Šè¿°çš„é»‘ç›’æ”»å‡»ã€‚\n Adversarial Reprogramming\nå¯¹æŠ—é‡ç¼–ç¨‹æ”»å‡»ï¼Ÿä¸çŸ¥é“å¦‚ä½•ç¿»è¯‘åˆé€‚ï¼Œè¿™ä¸ªæ”»å‡»çš„æ ¸å¿ƒç²¾ç¥æ˜¯ï¼šé€šè¿‡æ‰¾ä¸€äº›å™ªå£°ï¼Œè®©æœºå™¨çš„è¡Œä¸ºå‘ç”Ÿæ”¹å˜ï¼Œè¾¾åˆ°é‡ç¼–ç¨‹å®ç°å…¶ä»–åŠŸèƒ½çš„æ•ˆæœã€‚ä¸¾ä¸ªæ —å­ï¼š\n\nGamaleldin F. Elsayed*, Ian Goodfellow,* Jascha Sohl-Dickstein, â€œAdversarial Reprogramming of Neural Networksâ€, ICLR, 2019\n\n\næœ¬æ¥æ¨¡å‹åœ¨åšå›¾ç‰‡è¾¨è¯†ï¼Œæˆ‘ä»¬é€šè¿‡æ”»å‡»å¸Œæœ›è¿™ä¸ªæ¨¡å‹èƒ½åšæ•°æ–¹å—è¿™ä¸ªä»»åŠ¡ï¼Œå½“æˆ‘ä»¬æŠŠå›¾ç‰‡ä¸­é—´è´´ä¸Šä¸Šå›¾ä¸­é‚£ç§æ–¹å—å›¾ï¼Œæœºå™¨å°±ä¼šå¸®æˆ‘ä»¬æ•°å‡ºé€”ä¸­æ–¹å—çš„ä¸ªæ•°ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ–¹å—ä¼šè¾“å‡ºtenchï¼Œæœ‰ä¸¤ä¸ªæ–¹å—å°±è¾“å‡ºgoldfishâ€¦ è¿™ä»¶äº‹è¿˜æŒºç¥å¥‡çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶æ²¡æœ‰æ”¹å˜æœºå™¨çš„ä»»ä½•å‚æ•°ï¼Œæˆ‘ä»¬åªæ˜¯ç”¨äº†å’Œå‰è¿°ç›¸åŒçš„æ–¹æ³•ï¼Œæ‰¾äº†ä¸€ä¸ªå™ªå£°å›¾ç‰‡ï¼Œç„¶åæŠŠè¦æ•°æ–¹å—çš„å›¾è´´åœ¨å™ªå£°ä¸Šï¼Œè¾“å…¥æ¨¡å‹å°±ä¼šè®©æ¨¡å‹å¸®æˆ‘ä»¬æ•°å‡ºæ–¹å—çš„ä¸ªæ•°ï¼ŒçœŸå®very amazingå•ŠğŸ˜ƒã€‚å…·ä½“æ–¹æ³•ç»†èŠ‚å‚è€ƒå¼•ç”¨æ–‡ç« ã€‚\n Attack in the Real World\næˆ‘ä»¬æƒ³çŸ¥é“ä¸Šè¿°çš„æ”»å‡»æ–¹æ³•æ˜¯å¦èƒ½åº”ç”¨åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œä¸Šè¿°çš„æ‰€æœ‰æ–¹æ³•ä¸­åŠ å…¥çš„å™ªå£°å…¶å®éƒ½éå¸¸çš„å°ï¼Œåœ¨æ•°å­—ä¸–ç•Œä¸­è¿™äº›å™ªå£°ä¼šå¯¹æ¨¡å‹çš„åˆ¤åˆ«é€ æˆå¾ˆå¤§å½±å“ä¼¼ä¹æ˜¯å¾ˆåˆç†çš„ï¼Œä½†æ˜¯åœ¨çœŸå®çš„ä¸–ç•Œä¸­ï¼Œæœºå™¨æ˜¯é€šè¿‡ä¸€ä¸ªå°ç›¸æœºçœ‹ä¸–ç•Œçš„ï¼Œè¿™æ ·çš„å°å™ªå£°é€šè¿‡ç›¸æœºä»¥åå¯èƒ½å°±æ²¡æœ‰äº†ã€‚é‚£æˆ‘ä»¬å°±æ¥çœ‹çœ‹å…¶ä»–äººåšçš„å®éªŒï¼š\nè§†é¢‘è¿æ¥ï¼šhttps://www.youtube.com/watch?v=zQ_uMenoBCk&amp;feature=youtu.be\nä»è§†é¢‘ä¸­çš„ç»“æœæ¥çœ‹ä¼¼ä¹åœ¨ç°å®ä¸–ç•Œä¸­æ”»å‡»æ˜¯éå¸¸å¯è¡Œçš„ã€‚\nè§†é¢‘ä¸­åªæ˜¯åœ¨æ‰“å°å‡ºæ¥çš„å›¾ç‰‡ä¸ŠåŠ å™ªå£°ï¼Œä½†æ˜¯åœ¨äººè„¸è¯†åˆ«ä»»åŠ¡ä¸­ï¼Œä½ æ€»ä¸å¯èƒ½æ‰“å°å‡ºäººè„¸å†ä¸ŠåŠ å™ªå£°å§ï¼Œæœ‰äººå°±æå‡ºåœ¨çœ¼ç›æ¡†ä¸ŠåŠ å™ªå£°ï¼š\n\nhttps://www.cs.cmu.edu/~sbhagava/papers/face-rec-ccs16.pdf\n\n\nå·¦ä¾§å›¾æ˜¯åœ¨æ•´ä¸ªäººè„¸ä¸ŠåŠ å™ªå£°ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•åªèƒ½åœ¨å®éªŒå®¤åšï¼Œè€Œå³ä¾§æ˜¯è®©ä¸€ä¸ªå¥³æ€§å¸¦ä¸Šç‰¹åˆ¶çš„noiseçœ¼é•œï¼Œå°±ä¼šè¢«æ˜¯è¢«æˆä¸€ä¸ªç”·æ€§ã€‚è¿™ä¸ªworkçš„ä½œè€…åœ¨åšæ¼”è®²çš„æ—¶å€™æ˜¯å®é™…åšäº†ç°åœºå®éªŒçš„ã€‚æ€»ä¹‹è¿™ç§æ”»å‡»åœ¨ä¸‰æ¬¡å…ƒä¸–ç•Œä¸­æ˜¯åˆ‡å®å¯è¡Œçš„ï¼Œä½†æ˜¯è¦åšåˆ°è¿™ä»¶äº‹ä¹Ÿæ˜¯è¦åšéå¸¸å¤šçš„åŠªåŠ›çš„ï¼Œåˆ—å‡ºå‡ ä¸ªéš¾ç‚¹ï¼š\n\næ”»å‡»è€…éœ€è¦æ‰¾åˆ°è¶…è¶Šå•ä¸ªå›¾åƒçš„æ‰°åŠ¨ã€‚ï¼ˆäººæ˜¯ä¼šåŠ¨çš„ï¼Œæ‰€ä»¥è¦ä¿è¯æ‰€æœ‰è§’åº¦éƒ½èƒ½æ”»å‡»æˆåŠŸï¼‰\næåº¦ä¸åŒçš„ç›¸é‚»åƒç´ ä¹‹é—´çš„å·®å¼‚ä¸å¤ªå¯èƒ½è¢«ç›¸æœºå‡†ç¡®æ•æ‰åˆ°ã€‚ï¼ˆå› ç›¸æœºè§£æåº¦ï¼Œäººç‰©è¿åŠ¨ç­‰å› ç´ ï¼Œè¦ä¿è¯å™ªå£°ä»¥è¾ƒå¤§çš„è‰²å—çš„æ–¹å¼å‘ˆç°ï¼Œä¸”ä¸èƒ½å‡ºç°ç›¸é‚»è‰²å—çš„æç«¯å·®å¼‚ï¼Œæ‰èƒ½è¢«ç›¸æœºæ­£ç¡®æ•æ‰ï¼‰\nä¿è¯é¢œè‰²æ˜¯è®¾å¤‡èƒ½å¤Ÿè¾¨è®¤çš„ã€‚ï¼ˆå—é™äºè®¾å¤‡å·¥è‰ºï¼Œå°½é‡é¿å…è¶…å‡ºå¸¸è§é¢œè‰²é˜ˆå€¼çš„è‰²å½©ï¼‰\n\nå¦å¤–ä¸€ä¸ªæ —å­ï¼š\nå¯¹è·¯è¾¹äº¤é€šæ ‡å¿—è¿›è¡Œæ”»å‡»ï¼Œå¸Œæœ›ä¸‹åˆ—æ‰€æœ‰è¡¨ç¤ºéƒ½èƒ½è¢«æ˜¯è¢«æˆé™é€Ÿ15çš„æ ‡å¿—ã€‚ä»–ä»¬ä¹Ÿè€ƒè™‘äº†ç‰©ç†ä¸–ç•Œçš„ç§ç§æ˜¾ç¤ºï¼Œè€ƒè™‘åˆ°ä¸èƒ½äº§ç”Ÿéå¸¸å¥‡æ€ªçš„å›¾æ¡ˆå¼•èµ·æ€€ç–‘ï¼Œè€ƒè™‘åˆ°ä¸åŒè¿œè¿‘å’Œè§’åº¦ï¼Œæ‰€ä»¥è¿™ä¸ªæ”»å‡»ç¡®å®ä¼šåœ¨æœªæ¥è‡ªåŠ¨é©¾é©¶é“è·¯ä¸Šé€ æˆé˜»ç¢ã€‚\n\n Attack Beyond Image\næ”»å‡»ä¹Ÿä¸çŸ¥å‡ºç°åœ¨å›¾ç‰‡è¾¨è¯†ä¸Šï¼Œå…¶ä»–é¢†åŸŸä¹Ÿæ˜¯å­˜åœ¨çš„ï¼Œå…·ä½“ä¸å±•å¼€äº†ï¼Œåªç»™å‡ºreferenceã€‚\n\nYou can attack audio\n\nhttps://nicholas.carlini.com/code/audio_adversarial_examples/\nhttps://adversarial-attacks.net\n\n\nYou can attack text\n\nhttps://arxiv.org/pdf/1707.07328.pdf\n\n\n\n Defense\næœ‰äººè§‰å¾—è¿™ç§æ”»å‡»èƒ½å¤ŸæˆåŠŸï¼Œå°±æ˜¯å› ä¸ºå®ƒå¯¹è®­ç»ƒæ•°æ®è¿‡æ‹Ÿåˆäº†ï¼Œä½†è¿™å¹¶ä¸å®Œå…¨æ­£ç¡®ï¼Œå› ä¸ºå°±ç®—ä½ å¯¹modelä½œregularizationï¼Œä½œdropoutï¼Œä½œmodelçš„ensembleï¼Œä½ ä¹Ÿä¸èƒ½æŠ—ä½æ”»å‡»ã€‚å¯èƒ½ä½ ä¼šè§‰å¾—ä½œensembleå°¤å…¶å¯èƒ½æŠµå¾¡ä½æ”»å‡»ï¼Œä½ æ”»å‡»æˆåŠŸä¸€ä¸ªæ¨¡å‹ï¼Œæˆ‘è¿˜æœ‰å…¶ä»–æ¨¡å‹ï¼Œä½†æ˜¯è¿™ç§æƒ³æ³•æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºä¸Šé¢æˆ‘ä»¬çœ‹åˆ°äº†attackæ˜¯å¯ä»¥è·¨æ¨¡å‹çš„ï¼Œåªè¦æ”»å‡»æˆåŠŸensembleä¸­çš„ä¸€ä¸ªæ¨¡å‹ï¼Œå¯¹å…¶ä»–æ¨¡å‹ä¹Ÿå¾€å¾€æ•ˆæœæ˜¾è‘—ã€‚\nç°åœ¨çš„é˜²å¾¡æ‰‹æ®µä¸»è¦åˆ†æˆä¸¤å¤§ç±»ï¼š\n\nPassive defenseï¼šåœ¨ä¸ä¿®æ”¹modelçš„æƒ…å†µä¸‹ï¼Œè¯†åˆ«å‡ºè¢«æ±¡æŸ“çš„è¾“å…¥ã€‚ç±»ä¼¼äºåœ¨modelå¤–é¢åŠ ä¸€å±‚æŠ¤ç›¾\nProactive defenseï¼šåœ¨è®­ç»ƒæ¨¡å‹æ—¶è€ƒè™‘å¯¹æŠ—æ”»å‡»çš„é˜²å¾¡ï¼Œè®©æ¨¡å‹å˜å¾—robustèµ·æ¥\n\n Passive Defense\n\nå¯å‚è€ƒï¼šhttps://evademl.org/\n\næ€ä¹ˆåšè¢«åŠ¨æ”»å‡»å‘¢ï¼Ÿæˆ‘ä»¬æ¥ä¸¾ä¸ªå‡ ä¸ªæ —å­ï¼š\n Filter\n\næˆ‘ä»¬åœ¨æ¨¡å‹å‰åŠ ä¸€ä¸ªFilterï¼Œè®©æœ‰å™ªå£°çš„æ•°æ®è¾“å…¥åˆ°Filterä¸­åšä¸€ä¸ªå˜æ¢ï¼ˆæ¯”å¦‚ï¼ŒSmoothingï¼‰ï¼Œä»¥å°½å¯èƒ½æ¶ˆé™¤å™ªå£°çš„å½±å“ã€‚ä¸€å¼ è¢«åŠ äº†å¯¹æŠ—å™ªå£°çš„çŒ«ğŸ±ç‰‡è¢«è¯†åˆ«ä¸ºé”®ç›˜ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡filterçš„å¤„ç†ä»¥åèƒ½å¤Ÿå‡è½»noiseçš„ä¼¤å®³ï¼Œè€Œå…¶ä»–çš„æ­£å¸¸å›¾ç‰‡ç»è¿‡filterå¤„ç†åå¯¹è¾¨è¯†ç»“æœçš„å½±å“å°½å¯èƒ½å°ã€‚\né‚£ä»€ä¹ˆæ ·çš„filterå¯ä»¥åšåˆ°è¿™ä»¶äº‹å‘¢ï¼Œå…¶å®ä¸éœ€è¦å¤ªå¤æ‚çš„filterå°±å¯ä»¥åšåˆ°è¿™ä»¶äº‹ï¼Œæ¯”å¦‚ä½œå¹³æ»‘åŒ–smoothingã€‚æ¥çœ‹çœ‹å®éªŒç»“æœï¼š\n\nä¸ºä»€ä¹ˆè¿™ä»¶äº‹ä¼šæˆåŠŸæŠµå¾¡æ”»å‡»å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡æ”»å‡»å™ªå£°åªæœ‰åœ¨æŸäº›ç‰¹æ®Šçš„ç»´åº¦ä¸Šæ‰èƒ½é€ æˆæ˜¾è‘—çš„æ”»å‡»æ•ˆæœï¼Œæˆ‘ä»¬ç°åœ¨ä¸€æ—¦åŠ ä¸Šfilterï¼ŒæŠŠé‚£äº›ç‰¹æ®Šç»´åº¦çš„å€¼æ”¹å˜äº†ï¼Œæ”»å‡»æ•ˆæœå°±æ˜¾è‘—ä¸‹é™äº†ï¼Œè€Œè¿™æ ·çš„è¡Œä¸ºå¯¹æ­£å¸¸çš„æ ·æœ¬å½±å“å¹¶ä¸å¤§ã€‚\nåŸºäºè¿™æ ·çš„æ€æƒ³æˆ‘ä»¬å†çœ‹ä¸€ç§æ–¹æ³•ï¼Œç‰¹å¾å‹ç¼©ã€‚\n Feature Squeeze\n\nhttps://evademl.org/docs/featuresqueezing.pdf\nhttps://github.com/uvasrg/FeatureSqueezing\n\n\næ ¸å¿ƒæ€æƒ³æ˜¯å¯¹è¾“å…¥æ ·æœ¬çš„ç‰¹å¾é€šè¿‡ä¸åŒæ–¹å¼è¿›è¡Œå‹ç¼©ç®€åŒ–ï¼Œè¾“å…¥åˆ°modelä¸­å¾—å‡ºé¢„æµ‹ç»“æœå’ŒåŸæ ·æœ¬çš„é¢„æµ‹ç»“æœè¿›è¡Œå¯¹åˆ«ï¼Œå¦‚æœå·®åˆ«è¾ƒå¤§ï¼Œå°±åˆ¤å®šä¸ºæ ·æœ¬æ˜¯æ¶æ„çš„å¯¹æŠ—æ ·æœ¬ã€‚æ›´å¤šç»†èŠ‚å¯ä»¥é˜…è¯»ä¸Šè¿°è®ºæ–‡ã€‚\n Randomization at Inference Phase\n\nhttps://arxiv.org/abs/1711.01991\n\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†åœŸå›¾ç‰‡åšä¸€äº›å°å°çš„ç¼©æ”¾ï¼Œåœ¨æ—è¾¹åŠ ä¸Šå°å°çš„paddingï¼Œå°†padded imageè¾“å…¥æ¨¡å‹ï¼Œè¿™æ ·çš„æ–¹æ³•å†é˜²å¾¡ä¸Šä¹Ÿæ˜¯æ•ˆæœæ˜¾è‘—çš„ã€‚\nä¸Šè¿°çš„ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯åœ¨æ¨¡å‹å‰é¢åŠ ä¸€å±‚æŠ¤ç›¾çš„å½¢å¼ï¼Œç±»ä¼¼è¿™ç§æ–¹æ³•çš„å¼±ç‚¹å°±æ˜¯ï¼Œå½“é˜²å¾¡æ–¹æ³•è¢«æ³„éœ²çš„æ—¶å€™ï¼Œæ”»å‡»è€…å°±èƒ½æ¯”è¾ƒå®¹æ˜“çš„æ”»ç ´æŠ¤ç›¾ã€‚æ¯”å¦‚ï¼ŒåŠ Filterçš„æ–¹æ³•ï¼Œæ”»å‡»è€…å¯ä»¥å°†è¿™ä¸ªfilteræƒ³è±¡æˆæ¨¡å‹çš„ä¸€ä¸ªlayerï¼Œç”¨ä¼ ç»Ÿçš„æ”»å‡»æ–¹æ³•è¿›è¡Œæ”»å‡»å°±å¯ä»¥äº†ï¼Œä»è€Œè®¾è®¡å‡ºåŠ äº†filteræŠ¤ç›¾çš„æ¨¡å‹çš„æ¶æ„å¯¹æŠ—æ ·æœ¬ï¼›åˆæˆ–è€…è¯´åŠ ä¸Šrandomç¼©æ”¾è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœä½ randomä½œpaddingçš„æ–¹æ³•è¢«æ³„éœ²å‡ºå»ï¼Œæ”»å‡»æœ‰å¯èƒ½æ˜¯æˆåŠŸçš„ï¼Œå¯èƒ½å¯ä»¥åšåˆ°universalçš„attackï¼Œä¹Ÿå°±æ˜¯è¯´é’ˆå¯¹æ‰€æœ‰çš„random paddingéƒ½é€šç”¨çš„attackçš„noiseã€‚\n Proactive Denfense\næ ¸å¿ƒç²¾ç¥ï¼šæ‰¾å‡ºæ¼æ´ï¼Œè¡¥æ¼æ´\nè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\næˆ‘ä»¬è®­ç»ƒnetworkçš„æ–¹æ³•å°±æ˜¯ç»™å‡ºè®­ç»ƒæ•°æ®ï¼Œç„¶åç”¨è¿™ä¸ªæ•°æ®é›†trainå‡ºä½ çš„modelã€‚æ¥ä¸‹æ¥å°±æ˜¯å¯¹æ¨¡å‹è¿›è¡Œä¿®è¡¥ï¼š\nä½ è¦å†è®­ç»ƒTæ¬¡è¿­ä»£ï¼Œæ¯æ¬¡è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œè¦ç”¨å¯¹æ¯ä¸ªæ ·æœ¬ xnx^nxn æ ¹æ®æ”»å‡»ç®—æ³•æ‰¾å‡ºå…¶å¯ä»¥attackçš„å¯¹æŠ—æ ·æœ¬ï¼Œè®°ä½œ x~n\\widetilde{x}^nxn ï¼Œå°†è¿™äº›å¯¹æŠ—æ ·æœ¬åŠ å…¥æ•°æ®é›†é‡è®­ç»ƒmodelã€‚\nè¿™ä¸ªå¢åŠ è®­ç»ƒæ•°æ®çš„æ–¹æ³•æœ‰ç‚¹åƒData Augmentationã€‚ä¸ºä»€ä¹ˆè¦ä½œTæ¬¡è¿­ä»£å‘¢ï¼Œå› ä¸ºæ¯æ¬¡æˆ‘ä»¬é‡è®­ç»ƒä»¥åmodelçš„å‚æ•°å°±å˜äº†ï¼Œå°±å¯èƒ½äº§ç”Ÿæ–°çš„æ¼æ´æ‰€ä»¥æˆ‘ä»¬è¦ä¸æ–­çš„è¿­ä»£å¤šæ¬¡ï¼Œå°½å¯èƒ½ä¿®è¡¥æ‰€æœ‰æ¼æ´ï¼Œå®é™…ä¸Šæ˜¯ä¸å¯èƒ½ä¿®è¡¥æ‰€æœ‰æ¼æ´çš„ã€‚\nè¿˜æœ‰ä¸€ä»¶äº‹ï¼Œæˆ‘ä»¬è¦æ³¨æ„åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æ‰¾æ¼æ´çš„algorithmï¼Œæ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨ä¸åŒçš„ç®—æ³•ï¼Œæœ€åå¾—åˆ°çš„æ˜¯æŠ—ä¸åŒç®—æ³•æ”»å‡»çš„modelï¼Œæ‰€ä»¥æˆ–è®¸æˆ‘ä¹ˆéœ€è¦ç”¨ä¸åŒç®—æ³•ï¼Œåšå¤šæ¬¡è¿™ç§é˜²å¾¡æ”»å‡»çš„é‡è®­ç»ƒã€‚\n To Learn More\n\nReference\n\nhttps://adversarial-ml-tutorial.org/ (Zico Kolter and Aleksander Madry)\n\n\nAdversarial Attack Toolbox:\n\nhttps://github.com/bethgelab/foolbox\nhttps://github.com/IBM/adversarial-robustness-toolbox\nhttps://github.com/tensorflow/cleverhans\n\n\n\nâ˜…æ¨èç»¼è¿°ï¼šäººå·¥æ™ºèƒ½ç³»ç»Ÿå®‰å…¨ä¸éšç§é£é™©\n\næ›´å¤šçš„å‚è€ƒï¼š\nAdversarial Attack Reference:\nIntriguing properties of neural networks\nhttps://arxiv.org/pdf/1312.6199\nExplaining and Harnessing Adversarial Examples\nhttps://arxiv.org/abs/1412.6572\nTowards Evaluating the Robustness of Neural Networks\nhttps://arxiv.org/pdf/1608.04644.pdf\nADVERSARIAL REPROGRAMMING OF NEURAL NETWORKS\nhttps://arxiv.org/pdf/1810.00069.pdf\nAudio Adversarial Examples: Targeted Attacks on Speech-to-Text\nhttps://arxiv.org/pdf/1801.01944.pdf\nTowards Deep Learning Models Resistant to Adversarial Attacks\nhttps://arxiv.org/abs/1706.06083\nObfuscated Gradients Give a False Sense of Security: Circumventing Defenses to Adversarial Examples\nhttps://arxiv.org/pdf/1802.00420.pdf\nOne pixel attack for fooling deep neural networks\n\nSlide :https://media.neurips.cc/Conferences/NIPS2018/Slides/adversarial_ml_slides_parts_1_4.pdf\nTwo hour tutorial: https://www.youtube.com/watch?v=TwP-gKBQyic (good one, with web page)\nGood fellow\nhttps://www.youtube.com/watch?v=CIfsB_EYsVI\nMore videos (I am not sure about the quality)\nhttps://www.youtube.com/watch?v=r8cW1p8VBOU\nhttps://www.youtube.com/watch?v=sh6OS6Lssv4\nTutorial which is too long: http://pralab.diee.unica.it/en/wild-patterns\nç§‘æ™®\nVideo: https://www.youtube.com/watch?v=oZYgaD004Dw\nVideo: https://www.youtube.com/watch?v=SA4YEAWVpbk\n\nhttps://zhuanlan.zhihu.com/p/37922148\nSlide :https://media.neurips.cc/Conferences/NIPS2018/Slides/adversarial_ml_slides_parts_1_4.pdf\nTwo hour tutorial: https://www.youtube.com/watch?v=TwP-gKBQyic (good one, with web page)\nGood fellow\nhttps://www.youtube.com/watch?v=CIfsB_EYsVI\nMore videos (I am not sure about the quality)\nhttps://www.youtube.com/watch?v=r8cW1p8VBOU\nhttps://www.youtube.com/watch?v=sh6OS6Lssv4\nTutorial which is too long: http://pralab.diee.unica.it/en/wild-patterns\nç§‘æ™®\nVideo: https://www.youtube.com/watch?v=oZYgaD004Dw\nVideo: https://www.youtube.com/watch?v=SA4YEAWVpbk\n\n","categories":["æå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°"],"tags":["ML","note","Next-Step-of-ML","Adversarial-Attack"]},{"title":"The Next Step for Machine Learning","url":"https://ch3nye.top/The-Next-Step-for-Machine-Learning/","content":" The Next Step for Machine Learning\nç°åœ¨æˆ‘ä»¬è¦è®²ä¸€äº›æ–°çš„æŠ€æœ¯ï¼Œè¿™äº›æŠ€æœ¯ç›®å‰ï¼ˆ2019å¹´ï¼‰è¢«çœ‹ä½œæ˜¯æœºå™¨å­¦ä¹ çš„ä¸‹ä¸€æ­¥ï¼Œä¹Ÿå°±æ˜¯è¯´è¦è®©æœºå™¨å­¦ä¹ çš„æŠ€æœ¯çœŸæ­£è½åœ°åˆ°ç°å®ç”Ÿæ´»è¿˜éœ€è¦å“ªäº›æŠ€æœ¯ï¼Œè¿˜æœ‰å“ªäº›éš¾é¢˜å’Œéšœç¢æ˜¯éœ€è¦æˆ‘ä»¬è§£å†³çš„ã€‚\n 0x1 æœºå™¨èƒ½ä¸èƒ½çŸ¥é“â€œæˆ‘ä¸çŸ¥é“â€ Anomaly Detection\nè¿™ä¸ªé—®é¢˜å¬èµ·æ¥æœ‰ç‚¹å“²å­¦å“¦ï¼Œä¸ºä»€ä¹ˆè¦ç ”ç©¶è¿™ä¸ªé—®é¢˜å‘¢ï¼Œä¸¾ä¸ªæ —å­ï¼šä½ å¯èƒ½è®­ç»ƒä¸€ä¸ªè¯†åˆ«åŠ¨ç‰©çš„modelæ”¾åˆ°ç½‘ç»œä¸Šä¾›å¤§å®¶ä½¿ç”¨ï¼Œä½†æ˜¯ä½ ä»¥ä¸ºç½‘å‹åªä¼šç»™ä½ ä¸Šä¼ åŠ¨ç‰©çš„å›¾ç‰‡å—ï¼Œæä¸å¥½ä»–å°±ç»™ä½ ä¼ ä¸ªå‡‰å®«æ˜¥æ—¥çš„å›¾ç‰‡ğŸ˜‚ï¼š\n\nè¿™ç§æƒ…å†µä¸‹ï¼Œæœºå™¨éœ€è¦æœ‰èƒ½åŠ›è¯´å‡ºï¼šè¿™ä¸ªæ˜¯æˆ‘ä¸çŸ¥é“çš„ä¸œè¥¿ã€‚æœºå™¨ä¼šå›ç­”è¿™æ˜¯æˆ‘ä¸çŸ¥é“çš„ï¼Œè¿™æ ·çš„æŠ€æœ¯å°±æ˜¯Anomaly Detectionã€‚\n 0x2 è¯´å‡ºä¸ºä»€ä¹ˆâ€œæˆ‘çŸ¥é“â€ Explanation ML\nä»Šå¤©æˆ‘ä»¬çœ‹åˆ°å„å¼å„æ ·æœºå™¨å­¦ä¹ éå¸¸å¼ºå¤§çš„åŠ›é‡ï¼Œæ„Ÿè§‰æœºå™¨å¥½åƒéå¸¸çš„èªæ˜ã€‚ä½†è¿™æœ‰å¯èƒ½æ˜¯è¿™æ ·ä¸€ä¸ªæ•…äº‹ï¼Œè¿‡å»æœ‰ä¸€åªé©¬å«åšæ±‰æ–¯ï¼Œå®ƒéå¸¸çš„èªæ˜ï¼Œèªæ˜åˆ°ç”šè‡³å¯ä»¥åšæ•°å­¦ã€‚ä¸¾ä¾‹æ¥è¯´ï¼šä½ è·Ÿå®ƒè®² 9\\sqrt{9}9â€‹ æ˜¯å¤šå°‘ï¼Œå®ƒå°±ä¼šæ•²å®ƒçš„é©¬è¹„ä¸‰æ¬¡ï¼Œå¤§å®¶æ¬¢å‘¼é“ï¼Œè¿™æ˜¯ä¸€åªä¼šç®—æ•°å­¦çš„é©¬ã€‚å¯ä»¥è§£å†³æ ¹å·çš„é—®é¢˜ï¼Œå¤§å®¶éƒ½è§‰å¾—éå¸¸çš„æƒŠå¹ã€‚åé¢å°±æœ‰äººæ€€ç–‘è¯´ï¼šéš¾é“æ±‰æ–¯çœŸçš„è¿™ä¹ˆèªæ˜å—ï¼Ÿåœ¨æ²¡æœ‰ä»»ä½•çš„è§‚ä¼—çš„æƒ…å†µä¸‹ï¼Œè®©æ±‰æ–¯è‡ªå·±å»è§£å†³ä¸€ä¸ªæ•°å­¦éƒ½æ˜¯é¢˜ç›®ï¼Œè¿™æ—¶å€™å®ƒå°±ä¼šä¸€ç›´è¸å®ƒçš„é©¬è¹„ï¼Œä¸€ç›´çš„ä¸åœã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºå®ƒä¹‹å‰å­¦ä¼šäº†è§‚å¯Ÿæ—è§‚äººçš„ååº”ï¼Œå®ƒçŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥åœä¸‹æ¥ã€‚å®ƒå¯èƒ½ä¸çŸ¥é“è‡ªå·±åœ¨å¹²ä»€ä¹ˆï¼Œå®ƒä¹Ÿä¸çŸ¥é“æ•°å­¦æ˜¯ä»€ä¹ˆï¼Œä½†æ˜¯è¸å¯¹äº†æ­£ç¡®çš„é¢˜ç›®å°±æœ‰èåœåƒï¼Œå®ƒåªæ˜¯çœ‹äº†æ—è¾¹äººçš„ååº”å¾—åˆ°äº†æ­£ç¡®çš„ç­”æ¡ˆã€‚\nä»Šå¤©æˆ‘ä»¬çœ‹åˆ°ç§ç§æœºå™¨å­¦ä¹ çš„æˆæœï¼Œéš¾é“æœºå™¨çœŸçš„æœ‰é‚£ä¹ˆçš„èªæ˜å—ï¼Ÿä¼šä¸ä¼šå®ƒä¼šæ±‰æ–¯ä¸€æ ·ç”¨äº†å¥‡æ€ªçš„æ–¹æ³•æ¥å¾—åˆ°ç­”æ¡ˆçš„ã€‚\n\nè¿™ä»¶äº‹å…¶å®æ˜¯æœ‰å¯èƒ½å‘ç”Ÿçš„ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œæœ‰äººåšäº†ä¸€ä¸ªé©¬çš„è¾¨è¯†å™¨ï¼Œä¸¤ä¸ªmodelçš„è¾¨è¯†ç‡éƒ½å¾ˆé«˜ã€‚ç„¶ååˆ†æï¼Œæœºå™¨æ˜¯æ ¹æ®ä»€ä¹ˆæ¥æ ‡è¯†é©¬çš„ã€‚\n\nhttp://iphome.hhi.de/samek/pdf/MonDSP18.pdf\n\n\n\nç¬¬ä¸€ä¸ªDNNæ¨¡å‹æ˜¯çœ‹åˆ°å›¾ä¸Šé»„çº¢éƒ¨åˆ†æ­£å¸¸åˆ†æå‡ºæœ‰é©¬ï¼Œçœ‹ä¸Šå»æŒºæ­£å¸¸çš„ï¼›ç¬¬äºŒä¸ªFVæ¨¡å‹æ˜¯çœ‹åˆ°ä¸‹é¢çº¢è‰²éƒ¨åˆ†ï¼Œè¾¨è¯†å‡ºæœ‰é©¬ï¼Œå®ƒåªæ˜¯çœ‹åˆ°å·¦ä¸‹è§’çš„è‹±æ–‡ï¼Œæ ‡è¯†å‡ºé©¬ï¼Œå¹¶æ²¡æœ‰å­¦åˆ°é©¬çœŸæ­£çš„æ ·å­ï¼Œå…¶å®è¿™äº›å›¾ç‰‡éƒ½æ˜¯æ¥è‡ªä¸€ä¸ªç½‘ç«™éƒ½æœ‰ç›¸åŒçš„æ°´å°ã€‚\næˆ‘ä»¬ä¸çŸ¥é“AIæœ‰æ²¡æœ‰é‚£ä¹ˆèªæ˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›æŠ€æœ¯ï¼Œè®©AIä¸åªæ˜¯åšå‡ºå†³å®šï¼Œè¿˜è¦è®©å®ƒå‘Šè¯‰æˆ‘ä»¬è¯´å®ƒä¸ºä»€ä¹ˆåšå‡ºè¿™æ ·çš„å†³å®šã€‚\n 0x3 æœºå™¨çš„é”™è§‰\næˆ‘ä»¬çŸ¥é“è¯´ï¼Œäººæ˜¯æœ‰é”™è§‰çš„ï¼Œæ¯”å¦‚ä¸‹é¢ä¸¤ä¸ªåœˆåœˆï¼Œä½ è§‰å¾—å“ªä¸ªåœˆåœˆé¢œè‰²æ¯”è¾ƒæ·±ï¼Ÿ\n\nä½ å¯èƒ½ä¼šè§‰å¾—å·¦è¾¹æ¯”è¾ƒæ·±ï¼Œä½†ä½ å¤§æ¦‚çŒœåˆ°æˆ‘åœ¨æä½ ï¼Œä¼šè¯´å³è¾¹æ›´æ·±ã€‚\nä½†æ˜¯å…¶å®ï¼š\n\nç¡®å®å·¦è¾¹çš„åœˆåœˆé¢œè‰²æ¯”è¾ƒæ·±ï¼Œè¿™æ˜¯ä¸€ä¸ªè®¡ä¸­è®¡ğŸ¤£\næœºå™¨è·Ÿäººä¸€æ ·ï¼Œä¹Ÿå¾ˆå®¹æ˜“è¢«éª—ï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸€äº›å™ªå£°ï¼Œè®©æœºå™¨æœ¬æ¥ä»¥ä¸ºæ˜¯çš„åæ¥åˆ¤æ–­ä¸ºä¸æ˜¯ã€‚å¦‚æœ¬æ¥åˆ¤æ–­å‡ºæ¥æ˜¯ç†Šå–µï¼ŒåŠ äº†å™ªå£°ï¼Œå°±åˆ¤æ–­é”™è¯¯äº†ã€‚è¿™ç§å°±å«åš Adversarial Attackã€‚ä½ ç”šè‡³å¯ä»¥æƒ³è±¡ç›¸åŒçš„æŠ€æœ¯åº”ç”¨åœ¨è‡ªåŠ¨é©¾é©¶é¢†åŸŸï¼Œæœ‰äººåœ¨äº¤é€šæ ‡è¯†ç‰Œä¸Šè´´ä¸€ä¸ªè´´çº¸ï¼Œä½ çš„è‡ªåŠ¨é©¾é©¶æ±½è½¦å°±åŠ é€Ÿæ’è½¦ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸å¯æ¥å—çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³åŠæ³•é˜²å¾¡è¿™ç§æ”»å‡»ï¼Œå…·ä½“çš„åé¢Attack and Defenseä¸€èŠ‚ä¸­ä¼šè®²åˆ°ã€‚\n\n 0x4 ç»ˆèº«å­¦ä¹  Life-long Learning\næˆ‘ä»¬å¸Œæœ›æœºå™¨èƒ½ç»ˆç”Ÿå­¦ä¹ ã€‚äººå°±æ˜¯ç»ˆç”Ÿå­¦ä¹ çš„ï¼Œä¸Šå­¦æœŸä¿®äº†çº¿æ€§ä»£æ•°ï¼Œè¿™å­¦æœŸå­¦æœºå™¨å­¦ä¹ ï¼Œå­¦å¥½çº¿æ€§ä»£æ•°ï¼Œæœºå™¨å­¦ä¹ å­¦å¾—æ›´å®¹æ˜“ã€‚æœºå™¨èƒ½ä¸èƒ½è·Ÿäººä¸€æ ·ä¹Ÿåšç»ˆç”Ÿå­¦ä¹ å‘¢ï¼Ÿç°åœ¨æˆ‘ä»¬ä¸€èˆ¬åªè®©ä¸€ä¸ªæ¨¡å‹å­¦ä¹ ä¸€ä¸ªä»»åŠ¡ï¼Œæ¯”å¦‚Alpha Goå°±åªå­¦ä¹ ä¸‹å›´æ£‹ï¼ŒAlpha starå°±æ˜¯ç©æ˜Ÿé™…2ï¼Œå®ƒä»¬å¹¶ä¸æ˜¯åŒä¸€ä¸ªæ¨¡å‹ã€‚\n\nä»Šå¤©æˆ‘ä»¬åªè®©ä¸€ä¸ªæ¨¡å‹å­¦ä¹ ä¸€ä¸ªäººä»»åŠ¡ï¼Œæ˜¾ç„¶ä¼šå­˜åœ¨å¦‚ä¸‹é—®é¢˜\n\næ¨¡å‹çš„æ•°é‡æ— é™å¢é•¿\nä¹‹å‰å­¦åˆ°çš„æŠ€èƒ½å¯¹ä¹‹åçš„å­¦ä¹ æ²¡æœ‰å¸®åŠ©\n\nä¸ºä»€ä¹ˆæˆ‘ä»¬ä»Šå¤©ä¸è®©æœºå™¨å»ç»ˆç”Ÿå­¦ä¹ å‘¢ï¼Ÿæ¯”å¦‚æˆ‘ä»¬å…ˆè®©æœºå™¨å­¦ä¸‹å›´æ£‹ï¼Œç„¶åå†è®©å®ƒå­¦ç©æ˜Ÿé™…2ï¼Œå®é™…ä¸Šï¼Œå½“æœºå™¨å­¦å®Œæ˜Ÿé™…2ä¹‹åå®ƒå°±ä¸ä¼šä¸‹å›´æ£‹äº†ã€‚è¿™ä¸ªç°è±¡å«åšCatastrophic Forgettingï¼ˆç¾éš¾æ€§å¿˜è®°ï¼Ÿï¼‰ã€‚å¦‚æœæƒ³è®©æœºå™¨åšç»ˆèº«å­¦ä¹ ï¼Œè¿˜å°šåœ¨è§£å†³çš„é—®é¢˜ã€‚\n 0x5 å­¦ä¹ å¦‚ä½•å­¦ä¹  Meta-learning (Learn to Learn)\nä»¥å‰æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªæœºå™¨å­¦ä¹ ç®—æ³•ï¼Œè®©æœºå™¨èƒ½å¤Ÿå­¦ä¹ ï¼›ç°åœ¨ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½å†™å‡ºä¸€ä¸ªç®—æ³•å®ç°ä¸€ä¸ªæ¨¡å‹ï¼Œè®©å®ƒèƒ½è‡ªå·±è®¾è®¡ç®—æ³•ç¼–å†™æ¨¡å‹ç¨‹åºå®ç°å…·æœ‰å­¦ä¹ èƒ½åŠ›çš„æ¨¡å‹ã€‚\n\n 0x6 ä¸€å®šè¦æœ‰å¾ˆå¤šè®­ç»ƒæ•°æ®å—\nåœ¨ç°å®ç”Ÿæ´»ä¸­æœ‰ä¸€äº›ä»»åŠ¡æˆ–è€…æŸäº›æƒ…å¢ƒä¸‹åªèƒ½è·å–å°‘é‡çš„æ ·æœ¬ï¼Œç”šè‡³æ²¡æœ‰æ ·æœ¬ï¼Œæ¯”å¦‚å—é™äºèµ„é‡‘é™åˆ¶ç­‰æƒ…å†µï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¦ä¹ˆæŠŠæœºå™¨å­¦ä¹ åšé‡çš„æ•™ç§‘ä¹¦ç ¸åˆ°bossè„¸ä¸Šè¾èŒï¼Œè¦ä¹ˆè¯•è¯•ä¸‹é¢çš„æ–¹æ³•ï¼š\n\nFew-shot learning è®©æœºå™¨çœ‹å°‘é‡çš„èµ„æ–™\nZero-shot learning ä¸ç»™æœºå™¨ä»»ä½•èµ„æ–™ï¼Œåªå‘Šè¯‰æœºå™¨ç‰©å“çš„ç‰¹å¾æè¿°ï¼Œç„¶åæœºå™¨æ ¹æ®æè¿°è¿›è¡Œåˆ¤æ–­\n\n 0x7 å¢å¼ºå­¦ä¹  Reinforcement Learning\nReinforcement Learning çœŸçš„æœ‰è¿™ä¹ˆå¼ºå—ï¼Ÿå½“ä½ ç”¨Reinforcement Learning å»ç©ä¸€äº›çš„æ¸¸æˆï¼ŒReinforcement Learningä¹Ÿè®¸ç¡®å®å¯ä»¥è·Ÿäººåšåˆ°å·®ä¸å¤šï¼Œä½†æ˜¯éœ€è¦å¾ˆé•¿æ—¶é—´æ‰èƒ½è¾¾åˆ°ï¼Œå¦‚ä¸‹å›¾æœºå™¨éœ€è¦900å¤šä¸ªå°æ—¶æ‰èƒ½è¾¾åˆ°äººç±»2ä¸ªå°æ—¶èƒ½è¾¾åˆ°çš„æ•ˆæœã€‚æœºå™¨æ„Ÿè§‰å°±æ˜¯ä¸€ä¸ªå¤©èµ„ä¸ä½³å´å‹¤å¥‹ä¸è§£çš„ç¬¨å°å­©ï¼Œä»–éœ€è¦éå¸¸ä¹…çš„æ—¶é—´éå¸¸å¤šçš„ç»ƒä¹ æ‰èƒ½å’Œäººè¾¾åˆ°ç›¸åŒçš„æ°´å¹³ï¼Œé‚£Reinforcement Learningä¸ºä»€ä¹ˆå­¦å¾—è¿™ä¹ˆæ…¢ï¼Œæœ‰æ²¡æœ‰åŠæ³•è®©å®ƒå¿«ä¸€ç‚¹ï¼Œå°±æ˜¯æˆ‘ä»¬è¦è€ƒè™‘çš„é—®é¢˜ã€‚\n\n\nå›¾ç‰‡æ¥è‡ªï¼šhttp://web.stanford.edu/class/psych209/Readings/LakeEtAlBBS.pdf\n\n 0x8 ç¥ç»ç½‘ç»œå‹ç¼© Network Compression\nå¦‚æœæˆ‘ä»¬è¦æŠŠæœºå™¨å­¦ä¹ çš„æ¨¡å‹åº”ç”¨åˆ°ç°å®ç”Ÿæ´»ä¸­ï¼Œç”±äºè®¾å¤‡çš„è¿ç®—å’Œå­˜å‚¨èƒ½åŠ›æœ‰é™ï¼Œå¸¦æ¥çš„é—®é¢˜å°±æ˜¯æˆ‘ä»¬èƒ½ä¸èƒ½æŠŠNetwork çš„æ¶æ„ç¼©å°ï¼Œä½†è®©å®ƒç»´æŒåŒæ ·çš„èƒ½åŠ›ã€‚\n\n\næŠŠä¸€ä¸ªå¤§çš„ç¥ç»ç½‘ç»œç¼©å°ï¼Œå‡æ‰å¤šä½™çš„ç¥ç»å…ƒ\n\n\n\nå‚æ•°äºŒå€¼åŒ–\néƒ½å˜æˆâ€œ+1â€å’Œâ€œ-1â€ã€‚å¦‚æœæ˜¯è¿ç»­æ•°å€¼ï¼Œå°±éœ€è¦å¤§é‡çš„è¿ç®—å’Œå†…å­˜ï¼Œå¦‚æœæŠŠæ‰€æœ‰å‚æ•°è¿›è¡ŒäºŒå€¼åŒ–ï¼Œé‚£ä¹ˆè¿ç®—èµ·æ¥å°±å¿«ï¼Œå†…å­˜ä¹Ÿå ç”¨å°‘ã€‚\n\n\n 0x9 æœºå™¨å­¦ä¹ çš„è°è¨€\nä»Šå¤©æˆ‘ä»¬åœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œå‡è®¾è®­ç»ƒå’Œæµ‹è¯•çš„æ•°æ®åˆ†å¸ƒæ˜¯ä¸€æ ·çš„æˆ–è€…è‡³å°‘éå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯å®é™…ä¸Šåœ¨çœŸå®åº”ç”¨é‡Œé¢ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªè°è¨€ã€‚\n\nå¦‚æœæˆ‘ä»¬åšæ‰‹å†™æ•°å­—è¾¨è¯†ï¼Œåœ¨å®éªŒå®¤æƒ…å†µä¸‹ï¼Œè®­ç»ƒèµ„æ–™å’Œæµ‹è¯•èµ„æ–™éå¸¸ç›¸ä¼¼ï¼Œå¯èƒ½ä¼šå¾ˆå®¹æ˜“è¾¾åˆ°99.5%ã€‚ä½†æ˜¯å®é™…ä¸­ï¼Œå¯èƒ½å›¾ç‰‡æœ‰èƒŒæ™¯ï¼Œæ­£ç¡®ç‡å˜æˆ57.5%ï¼Œç›´æ¥çƒ‚æ‰äº†ã€‚\n\né‚£ä¹ˆæ€ä¹ˆè§£å†³æœºå™¨åœ¨è®­ç»ƒèµ„æ–™å’Œæµ‹è¯•èµ„æ–™ä¸åŒçš„åœºæ™¯å‘¢ï¼Ÿç°æœ‰å¯ä»¥å‚è€ƒçš„æŠ€æœ¯æœ‰Unsupervised Domain Adaptationï¼Œä¸åœ¨å±•å¼€ã€‚\n","categories":["æå®æ¯…æœºå™¨å­¦ä¹ ç¬”è®°"],"tags":["ML","note","Next-Step-of-ML"]}]